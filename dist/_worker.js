var lA=Object.create;var Rd=Object.defineProperty;var fA=Object.getOwnPropertyDescriptor;var hA=Object.getOwnPropertyNames;var pA=Object.getPrototypeOf,dA=Object.prototype.hasOwnProperty;var rc=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var St=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var gA=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let u of hA(t))!dA.call(e,u)&&u!==r&&Rd(e,u,{get:()=>t[u],enumerable:!(n=fA(t,u))||n.enumerable});return e};var hi=(e,t,r)=>(r=e!=null?lA(pA(e)):{},gA(t||!e||!e.__esModule?Rd(r,"default",{value:e,enumerable:!0}):r,e));var e0=St((ZF,Qd)=>{typeof Buffer>"u"&&(Buffer=void 0);(function(){"use strict";function e(){return Array}typeof Buffer>"u"&&(Buffer=e()),Qd.exports=Buffer})()});var y0=St(ze=>{var Iu={};Iu.userAgent=!1;var Pa={},FA="11.1.0",CA="jsrsasign(all) 11.1.0 (2024-02-01) (c) 2010-2023 Kenji Urushima | kjur.github.io/jsrsasign/license";var We=We||(function(e,t){var r={},n=r.lib={},u=n.Base=(function(){function g(){}return{extend:function(b){g.prototype=this;var w=new g;return b&&w.mixIn(b),w.hasOwnProperty("init")||(w.init=function(){w.$super.init.apply(this,arguments)}),w.init.prototype=w,w.$super=this,w},create:function(){var b=this.extend();return b.init.apply(b,arguments),b},init:function(){},mixIn:function(b){for(var w in b)b.hasOwnProperty(w)&&(this[w]=b[w]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),a=n.WordArray=u.extend({init:function(g,b){g=this.words=g||[],b!=t?this.sigBytes=b:this.sigBytes=g.length*4},toString:function(g){return(g||c).stringify(this)},concat:function(g){var b=this.words,w=g.words,_=this.sigBytes,A=g.sigBytes;if(this.clamp(),_%4)for(var C=0;C<A;C++){var x=w[C>>>2]>>>24-C%4*8&255;b[_+C>>>2]|=x<<24-(_+C)%4*8}else for(var C=0;C<A;C+=4)b[_+C>>>2]=w[C>>>2];return this.sigBytes+=A,this},clamp:function(){var g=this.words,b=this.sigBytes;g[b>>>2]&=4294967295<<32-b%4*8,g.length=e.ceil(b/4)},clone:function(){var g=u.clone.call(this);return g.words=this.words.slice(0),g},random:function(g){for(var b=[],w=0;w<g;w+=4)b.push(e.random()*4294967296|0);return new a.init(b,g)}}),i=r.enc={},c=i.Hex={stringify:function(g){for(var b=g.words,w=g.sigBytes,_=[],A=0;A<w;A++){var C=b[A>>>2]>>>24-A%4*8&255;_.push((C>>>4).toString(16)),_.push((C&15).toString(16))}return _.join("")},parse:function(g){for(var b=g.length,w=[],_=0;_<b;_+=2)w[_>>>3]|=parseInt(g.substr(_,2),16)<<24-_%8*4;return new a.init(w,b/2)}},h=i.Latin1={stringify:function(g){for(var b=g.words,w=g.sigBytes,_=[],A=0;A<w;A++){var C=b[A>>>2]>>>24-A%4*8&255;_.push(String.fromCharCode(C))}return _.join("")},parse:function(g){for(var b=g.length,w=[],_=0;_<b;_++)w[_>>>2]|=(g.charCodeAt(_)&255)<<24-_%4*8;return new a.init(w,b)}},m=i.Utf8={stringify:function(g){try{return decodeURIComponent(escape(h.stringify(g)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(g){return h.parse(unescape(encodeURIComponent(g)))}},S=n.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(g){typeof g=="string"&&(g=m.parse(g)),this._data.concat(g),this._nDataBytes+=g.sigBytes},_process:function(g){var b=this._data,w=b.words,_=b.sigBytes,A=this.blockSize,C=A*4,x=_/C;g?x=e.ceil(x):x=e.max((x|0)-this._minBufferSize,0);var N=x*A,H=e.min(N*4,_);if(N){for(var ne=0;ne<N;ne+=A)this._doProcessBlock(w,ne);var pe=w.splice(0,N);b.sigBytes-=H}return new a.init(pe,H)},clone:function(){var g=u.clone.call(this);return g._data=this._data.clone(),g},_minBufferSize:0}),E=n.Hasher=S.extend({cfg:u.extend(),init:function(g){this.cfg=this.cfg.extend(g),this.reset()},reset:function(){S.reset.call(this),this._doReset()},update:function(g){return this._append(g),this._process(),this},finalize:function(g){g&&this._append(g);var b=this._doFinalize();return b},blockSize:512/32,_createHelper:function(g){return function(b,w){return new g.init(w).finalize(b)}},_createHmacHelper:function(g){return function(b,w){return new v.HMAC.init(g,w).finalize(b)}}}),v=r.algo={};return r})(Math);(function(e){var u=We,t=u.lib,r=t.Base,n=t.WordArray,u=u.x64={};u.Word=r.extend({init:function(a,i){this.high=a,this.low=i}}),u.WordArray=r.extend({init:function(a,i){a=this.words=a||[],this.sigBytes=i!=e?i:8*a.length},toX32:function(){for(var a=this.words,i=a.length,c=[],h=0;h<i;h++){var m=a[h];c.push(m.high),c.push(m.low)}return n.create(c,this.sigBytes)},clone:function(){for(var a=r.clone.call(this),i=a.words=this.words.slice(0),c=i.length,h=0;h<c;h++)i[h]=i[h].clone();return a}})})();We.lib.Cipher||(function(e){var g=We,t=g.lib,r=t.Base,n=t.WordArray,u=t.BufferedBlockAlgorithm,a=g.enc.Base64,i=g.algo.EvpKDF,c=t.Cipher=u.extend({cfg:r.extend(),createEncryptor:function(w,_){return this.create(this._ENC_XFORM_MODE,w,_)},createDecryptor:function(w,_){return this.create(this._DEC_XFORM_MODE,w,_)},init:function(w,_,A){this.cfg=this.cfg.extend(A),this._xformMode=w,this._key=_,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(w){return this._append(w),this._process()},finalize:function(w){return w&&this._append(w),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(w){return{encrypt:function(_,A,C){return(typeof A=="string"?b:v).encrypt(w,_,A,C)},decrypt:function(_,A,C){return(typeof A=="string"?b:v).decrypt(w,_,A,C)}}}});t.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var E=g.mode={},h=function(w,_,A){var C=this._iv;C?this._iv=e:C=this._prevBlock;for(var x=0;x<A;x++)w[_+x]^=C[x]},m=(t.BlockCipherMode=r.extend({createEncryptor:function(w,_){return this.Encryptor.create(w,_)},createDecryptor:function(w,_){return this.Decryptor.create(w,_)},init:function(w,_){this._cipher=w,this._iv=_}})).extend();m.Encryptor=m.extend({processBlock:function(w,_){var A=this._cipher,C=A.blockSize;h.call(this,w,_,C),A.encryptBlock(w,_),this._prevBlock=w.slice(_,_+C)}}),m.Decryptor=m.extend({processBlock:function(w,_){var A=this._cipher,C=A.blockSize,x=w.slice(_,_+C);A.decryptBlock(w,_),h.call(this,w,_,C),this._prevBlock=x}}),E=E.CBC=m,m=(g.pad={}).Pkcs7={pad:function(w,_){for(var A=4*_,A=A-w.sigBytes%A,C=A<<24|A<<16|A<<8|A,x=[],N=0;N<A;N+=4)x.push(C);A=n.create(x,A),w.concat(A)},unpad:function(w){w.sigBytes-=w.words[w.sigBytes-1>>>2]&255}},t.BlockCipher=c.extend({cfg:c.cfg.extend({mode:E,padding:m}),reset:function(){c.reset.call(this);var _=this.cfg,w=_.iv,_=_.mode;if(this._xformMode==this._ENC_XFORM_MODE)var A=_.createEncryptor;else A=_.createDecryptor,this._minBufferSize=1;this._mode=A.call(_,this,w&&w.words)},_doProcessBlock:function(w,_){this._mode.processBlock(w,_)},_doFinalize:function(){var w=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){w.pad(this._data,this.blockSize);var _=this._process(!0)}else _=this._process(!0),w.unpad(_);return _},blockSize:4});var S=t.CipherParams=r.extend({init:function(w){this.mixIn(w)},toString:function(w){return(w||this.formatter).stringify(this)}}),E=(g.format={}).OpenSSL={stringify:function(w){var _=w.ciphertext;return w=w.salt,(w?n.create([1398893684,1701076831]).concat(w).concat(_):_).toString(a)},parse:function(w){w=a.parse(w);var _=w.words;if(_[0]==1398893684&&_[1]==1701076831){var A=n.create(_.slice(2,4));_.splice(0,4),w.sigBytes-=16}return S.create({ciphertext:w,salt:A})}},v=t.SerializableCipher=r.extend({cfg:r.extend({format:E}),encrypt:function(w,_,A,C){C=this.cfg.extend(C);var x=w.createEncryptor(A,C);return _=x.finalize(_),x=x.cfg,S.create({ciphertext:_,key:A,iv:x.iv,algorithm:w,mode:x.mode,padding:x.padding,blockSize:w.blockSize,formatter:C.format})},decrypt:function(w,_,A,C){return C=this.cfg.extend(C),_=this._parse(_,C.format),w.createDecryptor(A,C).finalize(_.ciphertext)},_parse:function(w,_){return typeof w=="string"?_.parse(w,this):w}}),g=(g.kdf={}).OpenSSL={execute:function(w,_,A,C){return C||(C=n.random(8)),w=i.create({keySize:_+A}).compute(w,C),A=n.create(w.words.slice(_),4*A),w.sigBytes=4*_,S.create({key:w,iv:A,salt:C})}},b=t.PasswordBasedCipher=v.extend({cfg:v.cfg.extend({kdf:g}),encrypt:function(w,_,A,C){return C=this.cfg.extend(C),A=C.kdf.execute(A,w.keySize,w.ivSize),C.iv=A.iv,w=v.encrypt.call(this,w,_,A.key,C),w.mixIn(A),w},decrypt:function(w,_,A,C){return C=this.cfg.extend(C),_=this._parse(_,C.format),A=C.kdf.execute(A,w.keySize,w.ivSize,_.salt),C.iv=A.iv,v.decrypt.call(this,w,_,A.key,C)}})})();(function(){for(var e=We,t=e.lib.BlockCipher,ne=e.algo,r=[],n=[],u=[],a=[],i=[],c=[],h=[],m=[],S=[],E=[],v=[],g=0;256>g;g++)v[g]=128>g?g<<1:g<<1^283;for(var b=0,w=0,g=0;256>g;g++){var _=w^w<<1^w<<2^w<<3^w<<4,_=_>>>8^_&255^99;r[b]=_,n[_]=b;var A=v[b],C=v[A],x=v[C],N=257*v[_]^16843008*_;u[b]=N<<24|N>>>8,a[b]=N<<16|N>>>16,i[b]=N<<8|N>>>24,c[b]=N,N=16843009*x^65537*C^257*A^16843008*b,h[_]=N<<24|N>>>8,m[_]=N<<16|N>>>16,S[_]=N<<8|N>>>24,E[_]=N,b?(b=A^v[v[v[x^A]]],w^=v[v[w]]):b=w=1}var H=[0,1,2,4,8,16,32,64,128,27,54],ne=ne.AES=t.extend({_doReset:function(){for(var $=this._key,pe=$.words,P=$.sigBytes/4,$=4*((this._nRounds=P+6)+1),j=this._keySchedule=[],R=0;R<$;R++)if(R<P)j[R]=pe[R];else{var q=j[R-1];R%P?6<P&&R%P==4&&(q=r[q>>>24]<<24|r[q>>>16&255]<<16|r[q>>>8&255]<<8|r[q&255]):(q=q<<8|q>>>24,q=r[q>>>24]<<24|r[q>>>16&255]<<16|r[q>>>8&255]<<8|r[q&255],q^=H[R/P|0]<<24),j[R]=j[R-P]^q}for(pe=this._invKeySchedule=[],P=0;P<$;P++)R=$-P,q=P%4?j[R]:j[R-4],pe[P]=4>P||4>=R?q:h[r[q>>>24]]^m[r[q>>>16&255]]^S[r[q>>>8&255]]^E[r[q&255]]},encryptBlock:function(pe,P){this._doCryptBlock(pe,P,this._keySchedule,u,a,i,c,r)},decryptBlock:function(pe,P){var $=pe[P+1];pe[P+1]=pe[P+3],pe[P+3]=$,this._doCryptBlock(pe,P,this._invKeySchedule,h,m,S,E,n),$=pe[P+1],pe[P+1]=pe[P+3],pe[P+3]=$},_doCryptBlock:function(pe,P,$,j,R,q,Q,V){for(var z=this._nRounds,yt=pe[P]^$[0],Ht=pe[P+1]^$[1],Lt=pe[P+2]^$[2],Ct=pe[P+3]^$[3],te=4,me=1;me<z;me++)var st=j[yt>>>24]^R[Ht>>>16&255]^q[Lt>>>8&255]^Q[Ct&255]^$[te++],it=j[Ht>>>24]^R[Lt>>>16&255]^q[Ct>>>8&255]^Q[yt&255]^$[te++],ot=j[Lt>>>24]^R[Ct>>>16&255]^q[yt>>>8&255]^Q[Ht&255]^$[te++],Ct=j[Ct>>>24]^R[yt>>>16&255]^q[Ht>>>8&255]^Q[Lt&255]^$[te++],yt=st,Ht=it,Lt=ot;st=(V[yt>>>24]<<24|V[Ht>>>16&255]<<16|V[Lt>>>8&255]<<8|V[Ct&255])^$[te++],it=(V[Ht>>>24]<<24|V[Lt>>>16&255]<<16|V[Ct>>>8&255]<<8|V[yt&255])^$[te++],ot=(V[Lt>>>24]<<24|V[Ct>>>16&255]<<16|V[yt>>>8&255]<<8|V[Ht&255])^$[te++],Ct=(V[Ct>>>24]<<24|V[yt>>>16&255]<<16|V[Ht>>>8&255]<<8|V[Lt&255])^$[te++],pe[P]=st,pe[P+1]=it,pe[P+2]=ot,pe[P+3]=Ct},keySize:8});e.AES=t._createHelper(ne)})();(function(){function e(v,g){var b=(this._lBlock>>>v^this._rBlock)&g;this._rBlock^=b,this._lBlock^=b<<v}function t(v,g){var b=(this._rBlock>>>v^this._lBlock)&g;this._lBlock^=b,this._rBlock^=b<<v}var r=We,u=r.lib,n=u.WordArray,u=u.BlockCipher,a=r.algo,i=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],h=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],m=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],S=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],E=a.DES=u.extend({_doReset:function(){for(var v=this._key.words,g=[],b=0;56>b;b++){var w=i[b]-1;g[b]=v[w>>>5]>>>31-w%32&1}for(v=this._subKeys=[],w=0;16>w;w++){for(var _=v[w]=[],A=h[w],b=0;24>b;b++)_[b/6|0]|=g[(c[b]-1+A)%28]<<31-b%6,_[4+(b/6|0)]|=g[28+(c[b+24]-1+A)%28]<<31-b%6;for(_[0]=_[0]<<1|_[0]>>>31,b=1;7>b;b++)_[b]>>>=4*(b-1)+3;_[7]=_[7]<<5|_[7]>>>27}for(g=this._invSubKeys=[],b=0;16>b;b++)g[b]=v[15-b]},encryptBlock:function(v,g){this._doCryptBlock(v,g,this._subKeys)},decryptBlock:function(v,g){this._doCryptBlock(v,g,this._invSubKeys)},_doCryptBlock:function(v,g,b){this._lBlock=v[g],this._rBlock=v[g+1],e.call(this,4,252645135),e.call(this,16,65535),t.call(this,2,858993459),t.call(this,8,16711935),e.call(this,1,1431655765);for(var w=0;16>w;w++){for(var _=b[w],A=this._lBlock,C=this._rBlock,x=0,N=0;8>N;N++)x|=m[N][((C^_[N])&S[N])>>>0];this._lBlock=C,this._rBlock=A^x}b=this._lBlock,this._lBlock=this._rBlock,this._rBlock=b,e.call(this,1,1431655765),t.call(this,8,16711935),t.call(this,2,858993459),e.call(this,16,65535),e.call(this,4,252645135),v[g]=this._lBlock,v[g+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});r.DES=u._createHelper(E),a=a.TripleDES=u.extend({_doReset:function(){var v=this._key.words;this._des1=E.createEncryptor(n.create(v.slice(0,2))),this._des2=E.createEncryptor(n.create(v.slice(2,4))),this._des3=E.createEncryptor(n.create(v.slice(4,6)))},encryptBlock:function(v,g){this._des1.encryptBlock(v,g),this._des2.decryptBlock(v,g),this._des3.encryptBlock(v,g)},decryptBlock:function(v,g){this._des3.decryptBlock(v,g),this._des2.encryptBlock(v,g),this._des1.decryptBlock(v,g)},keySize:6,ivSize:2,blockSize:2}),r.TripleDES=u._createHelper(a)})();(function(){var e=We,t=e.lib.WordArray;e.enc.Base64={stringify:function(r){var n=r.words,u=r.sigBytes,a=this._map;r.clamp(),r=[];for(var i=0;i<u;i+=3)for(var c=(n[i>>>2]>>>24-8*(i%4)&255)<<16|(n[i+1>>>2]>>>24-8*((i+1)%4)&255)<<8|n[i+2>>>2]>>>24-8*((i+2)%4)&255,h=0;4>h&&i+.75*h<u;h++)r.push(a.charAt(c>>>6*(3-h)&63));if(n=a.charAt(64))for(;r.length%4;)r.push(n);return r.join("")},parse:function(r){var n=r.length,u=this._map,a=u.charAt(64);a&&(a=r.indexOf(a),a!=-1&&(n=a));for(var a=[],i=0,c=0;c<n;c++)if(c%4){var h=u.indexOf(r.charAt(c-1))<<2*(c%4),m=u.indexOf(r.charAt(c))>>>6-2*(c%4);a[i>>>2]|=(h|m)<<24-8*(i%4),i++}return t.create(a,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(e){function t(E,v,g,b,w,_,A){return E=E+(v&g|~v&b)+w+A,(E<<_|E>>>32-_)+v}function r(E,v,g,b,w,_,A){return E=E+(v&b|g&~b)+w+A,(E<<_|E>>>32-_)+v}function n(E,v,g,b,w,_,A){return E=E+(v^g^b)+w+A,(E<<_|E>>>32-_)+v}function u(E,v,g,b,w,_,A){return E=E+(g^(v|~b))+w+A,(E<<_|E>>>32-_)+v}for(var a=We,h=a.lib,i=h.WordArray,c=h.Hasher,h=a.algo,m=[],S=0;64>S;S++)m[S]=4294967296*e.abs(e.sin(S+1))|0;h=h.MD5=c.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(E,v){for(var g=0;16>g;g++){var b=v+g,w=E[b];E[b]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360}var g=this._hash.words,b=E[v+0],w=E[v+1],_=E[v+2],A=E[v+3],C=E[v+4],x=E[v+5],N=E[v+6],H=E[v+7],ne=E[v+8],pe=E[v+9],P=E[v+10],$=E[v+11],j=E[v+12],R=E[v+13],q=E[v+14],Q=E[v+15],V=g[0],me=g[1],te=g[2],z=g[3],V=t(V,me,te,z,b,7,m[0]),z=t(z,V,me,te,w,12,m[1]),te=t(te,z,V,me,_,17,m[2]),me=t(me,te,z,V,A,22,m[3]),V=t(V,me,te,z,C,7,m[4]),z=t(z,V,me,te,x,12,m[5]),te=t(te,z,V,me,N,17,m[6]),me=t(me,te,z,V,H,22,m[7]),V=t(V,me,te,z,ne,7,m[8]),z=t(z,V,me,te,pe,12,m[9]),te=t(te,z,V,me,P,17,m[10]),me=t(me,te,z,V,$,22,m[11]),V=t(V,me,te,z,j,7,m[12]),z=t(z,V,me,te,R,12,m[13]),te=t(te,z,V,me,q,17,m[14]),me=t(me,te,z,V,Q,22,m[15]),V=r(V,me,te,z,w,5,m[16]),z=r(z,V,me,te,N,9,m[17]),te=r(te,z,V,me,$,14,m[18]),me=r(me,te,z,V,b,20,m[19]),V=r(V,me,te,z,x,5,m[20]),z=r(z,V,me,te,P,9,m[21]),te=r(te,z,V,me,Q,14,m[22]),me=r(me,te,z,V,C,20,m[23]),V=r(V,me,te,z,pe,5,m[24]),z=r(z,V,me,te,q,9,m[25]),te=r(te,z,V,me,A,14,m[26]),me=r(me,te,z,V,ne,20,m[27]),V=r(V,me,te,z,R,5,m[28]),z=r(z,V,me,te,_,9,m[29]),te=r(te,z,V,me,H,14,m[30]),me=r(me,te,z,V,j,20,m[31]),V=n(V,me,te,z,x,4,m[32]),z=n(z,V,me,te,ne,11,m[33]),te=n(te,z,V,me,$,16,m[34]),me=n(me,te,z,V,q,23,m[35]),V=n(V,me,te,z,w,4,m[36]),z=n(z,V,me,te,C,11,m[37]),te=n(te,z,V,me,H,16,m[38]),me=n(me,te,z,V,P,23,m[39]),V=n(V,me,te,z,R,4,m[40]),z=n(z,V,me,te,b,11,m[41]),te=n(te,z,V,me,A,16,m[42]),me=n(me,te,z,V,N,23,m[43]),V=n(V,me,te,z,pe,4,m[44]),z=n(z,V,me,te,j,11,m[45]),te=n(te,z,V,me,Q,16,m[46]),me=n(me,te,z,V,_,23,m[47]),V=u(V,me,te,z,b,6,m[48]),z=u(z,V,me,te,H,10,m[49]),te=u(te,z,V,me,q,15,m[50]),me=u(me,te,z,V,x,21,m[51]),V=u(V,me,te,z,j,6,m[52]),z=u(z,V,me,te,A,10,m[53]),te=u(te,z,V,me,P,15,m[54]),me=u(me,te,z,V,w,21,m[55]),V=u(V,me,te,z,ne,6,m[56]),z=u(z,V,me,te,Q,10,m[57]),te=u(te,z,V,me,N,15,m[58]),me=u(me,te,z,V,R,21,m[59]),V=u(V,me,te,z,C,6,m[60]),z=u(z,V,me,te,$,10,m[61]),te=u(te,z,V,me,_,15,m[62]),me=u(me,te,z,V,pe,21,m[63]);g[0]=g[0]+V|0,g[1]=g[1]+me|0,g[2]=g[2]+te|0,g[3]=g[3]+z|0},_doFinalize:function(){var E=this._data,v=E.words,g=8*this._nDataBytes,b=8*E.sigBytes;v[b>>>5]|=128<<24-b%32;var w=e.floor(g/4294967296);for(v[(b+64>>>9<<4)+15]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,v[(b+64>>>9<<4)+14]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,E.sigBytes=4*(v.length+1),this._process(),E=this._hash,v=E.words,g=0;4>g;g++)b=v[g],v[g]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360;return E},clone:function(){var E=c.clone.call(this);return E._hash=this._hash.clone(),E}}),a.MD5=c._createHelper(h),a.HmacMD5=c._createHmacHelper(h)})(Math);(function(){var e=We,u=e.lib,t=u.WordArray,r=u.Hasher,n=[],u=e.algo.SHA1=r.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,i){for(var c=this._hash.words,h=c[0],m=c[1],S=c[2],E=c[3],v=c[4],g=0;80>g;g++){if(16>g)n[g]=a[i+g]|0;else{var b=n[g-3]^n[g-8]^n[g-14]^n[g-16];n[g]=b<<1|b>>>31}b=(h<<5|h>>>27)+v+n[g],b=20>g?b+((m&S|~m&E)+1518500249):40>g?b+((m^S^E)+1859775393):60>g?b+((m&S|m&E|S&E)-1894007588):b+((m^S^E)-899497514),v=E,E=S,S=m<<30|m>>>2,m=h,h=b}c[0]=c[0]+h|0,c[1]=c[1]+m|0,c[2]=c[2]+S|0,c[3]=c[3]+E|0,c[4]=c[4]+v|0},_doFinalize:function(){var a=this._data,i=a.words,c=8*this._nDataBytes,h=8*a.sigBytes;return i[h>>>5]|=128<<24-h%32,i[(h+64>>>9<<4)+14]=Math.floor(c/4294967296),i[(h+64>>>9<<4)+15]=c,a.sigBytes=4*i.length,this._process(),this._hash},clone:function(){var a=r.clone.call(this);return a._hash=this._hash.clone(),a}});e.SHA1=r._createHelper(u),e.HmacSHA1=r._createHmacHelper(u)})();(function(e){for(var t=We,g=t.lib,r=g.WordArray,n=g.Hasher,g=t.algo,u=[],a=[],i=function(w){return 4294967296*(w-(w|0))|0},c=2,h=0;64>h;){var m;e:{m=c;for(var S=e.sqrt(m),E=2;E<=S;E++)if(!(m%E)){m=!1;break e}m=!0}m&&(8>h&&(u[h]=i(e.pow(c,.5))),a[h]=i(e.pow(c,1/3)),h++),c++}var v=[],g=g.SHA256=n.extend({_doReset:function(){this._hash=new r.init(u.slice(0))},_doProcessBlock:function(b,w){for(var _=this._hash.words,A=_[0],C=_[1],x=_[2],N=_[3],H=_[4],ne=_[5],pe=_[6],P=_[7],$=0;64>$;$++){if(16>$)v[$]=b[w+$]|0;else{var j=v[$-15],R=v[$-2];v[$]=((j<<25|j>>>7)^(j<<14|j>>>18)^j>>>3)+v[$-7]+((R<<15|R>>>17)^(R<<13|R>>>19)^R>>>10)+v[$-16]}j=P+((H<<26|H>>>6)^(H<<21|H>>>11)^(H<<7|H>>>25))+(H&ne^~H&pe)+a[$]+v[$],R=((A<<30|A>>>2)^(A<<19|A>>>13)^(A<<10|A>>>22))+(A&C^A&x^C&x),P=pe,pe=ne,ne=H,H=N+j|0,N=x,x=C,C=A,A=j+R|0}_[0]=_[0]+A|0,_[1]=_[1]+C|0,_[2]=_[2]+x|0,_[3]=_[3]+N|0,_[4]=_[4]+H|0,_[5]=_[5]+ne|0,_[6]=_[6]+pe|0,_[7]=_[7]+P|0},_doFinalize:function(){var b=this._data,w=b.words,_=8*this._nDataBytes,A=8*b.sigBytes;return w[A>>>5]|=128<<24-A%32,w[(A+64>>>9<<4)+14]=e.floor(_/4294967296),w[(A+64>>>9<<4)+15]=_,b.sigBytes=4*w.length,this._process(),this._hash},clone:function(){var b=n.clone.call(this);return b._hash=this._hash.clone(),b}});t.SHA256=n._createHelper(g),t.HmacSHA256=n._createHmacHelper(g)})(Math);(function(){var e=We,t=e.lib.WordArray,n=e.algo,r=n.SHA256,n=n.SHA224=r.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var u=r._doFinalize.call(this);return u.sigBytes-=4,u}});e.SHA224=r._createHelper(n),e.HmacSHA224=r._createHmacHelper(n)})();(function(){function e(){return n.create.apply(n,arguments)}for(var t=We,r=t.lib.Hasher,a=t.x64,n=a.Word,u=a.WordArray,a=t.algo,i=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],c=[],h=0;80>h;h++)c[h]=e();a=a.SHA512=r.extend({_doReset:function(){this._hash=new u.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(m,S){for(var C=this._hash.words,E=C[0],v=C[1],g=C[2],b=C[3],w=C[4],_=C[5],A=C[6],C=C[7],x=E.high,N=E.low,H=v.high,ne=v.low,pe=g.high,P=g.low,$=b.high,j=b.low,R=w.high,q=w.low,Q=_.high,V=_.low,z=A.high,te=A.low,me=C.high,st=C.low,it=x,ot=N,Ct=H,yt=ne,Ht=pe,Lt=P,ln=$,Ar=j,cr=R,Or=q,_r=Q,Bt=V,lr=z,At=te,Be=me,$e=st,ve=0;80>ve;ve++){var _e=c[ve];if(16>ve)var Se=_e.high=m[S+2*ve]|0,re=_e.low=m[S+2*ve+1]|0;else{var Se=c[ve-15],re=Se.high,I=Se.low,Se=(re>>>1|I<<31)^(re>>>8|I<<24)^re>>>7,I=(I>>>1|re<<31)^(I>>>8|re<<24)^(I>>>7|re<<25),M=c[ve-2],re=M.high,G=M.low,M=(re>>>19|G<<13)^(re<<3|G>>>29)^re>>>6,G=(G>>>19|re<<13)^(G<<3|re>>>29)^(G>>>6|re<<26),re=c[ve-7],Y=re.high,de=c[ve-16],X=de.high,de=de.low,re=I+re.low,Se=Se+Y+(re>>>0<I>>>0?1:0),re=re+G,Se=Se+M+(re>>>0<G>>>0?1:0),re=re+de,Se=Se+X+(re>>>0<de>>>0?1:0);_e.high=Se,_e.low=re}var Y=cr&_r^~cr&lr,de=Or&Bt^~Or&At,_e=it&Ct^it&Ht^Ct&Ht,W=ot&yt^ot&Lt^yt&Lt,I=(it>>>28|ot<<4)^(it<<30|ot>>>2)^(it<<25|ot>>>7),M=(ot>>>28|it<<4)^(ot<<30|it>>>2)^(ot<<25|it>>>7),G=i[ve],l=G.high,U=G.low,G=$e+((Or>>>14|cr<<18)^(Or>>>18|cr<<14)^(Or<<23|cr>>>9)),X=Be+((cr>>>14|Or<<18)^(cr>>>18|Or<<14)^(cr<<23|Or>>>9))+(G>>>0<$e>>>0?1:0),G=G+de,X=X+Y+(G>>>0<de>>>0?1:0),G=G+U,X=X+l+(G>>>0<U>>>0?1:0),G=G+re,X=X+Se+(G>>>0<re>>>0?1:0),re=M+W,_e=I+_e+(re>>>0<M>>>0?1:0),Be=lr,$e=At,lr=_r,At=Bt,_r=cr,Bt=Or,Or=Ar+G|0,cr=ln+X+(Or>>>0<Ar>>>0?1:0)|0,ln=Ht,Ar=Lt,Ht=Ct,Lt=yt,Ct=it,yt=ot,ot=G+re|0,it=X+_e+(ot>>>0<G>>>0?1:0)|0}N=E.low=N+ot,E.high=x+it+(N>>>0<ot>>>0?1:0),ne=v.low=ne+yt,v.high=H+Ct+(ne>>>0<yt>>>0?1:0),P=g.low=P+Lt,g.high=pe+Ht+(P>>>0<Lt>>>0?1:0),j=b.low=j+Ar,b.high=$+ln+(j>>>0<Ar>>>0?1:0),q=w.low=q+Or,w.high=R+cr+(q>>>0<Or>>>0?1:0),V=_.low=V+Bt,_.high=Q+_r+(V>>>0<Bt>>>0?1:0),te=A.low=te+At,A.high=z+lr+(te>>>0<At>>>0?1:0),st=C.low=st+$e,C.high=me+Be+(st>>>0<$e>>>0?1:0)},_doFinalize:function(){var m=this._data,S=m.words,E=8*this._nDataBytes,v=8*m.sigBytes;return S[v>>>5]|=128<<24-v%32,S[(v+128>>>10<<5)+30]=Math.floor(E/4294967296),S[(v+128>>>10<<5)+31]=E,m.sigBytes=4*S.length,this._process(),this._hash.toX32()},clone:function(){var m=r.clone.call(this);return m._hash=this._hash.clone(),m},blockSize:32}),t.SHA512=r._createHelper(a),t.HmacSHA512=r._createHmacHelper(a)})();(function(){var e=We,u=e.x64,t=u.Word,r=u.WordArray,u=e.algo,n=u.SHA512,u=u.SHA384=n.extend({_doReset:function(){this._hash=new r.init([new t.init(3418070365,3238371032),new t.init(1654270250,914150663),new t.init(2438529370,812702999),new t.init(355462360,4144912697),new t.init(1731405415,4290775857),new t.init(2394180231,1750603025),new t.init(3675008525,1694076839),new t.init(1203062813,3204075428)])},_doFinalize:function(){var a=n._doFinalize.call(this);return a.sigBytes-=16,a}});e.SHA384=n._createHelper(u),e.HmacSHA384=n._createHmacHelper(u)})();(function(){var e=We,m=e.lib,t=m.WordArray,r=m.Hasher,m=e.algo,n=t.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=t.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),a=t.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),i=t.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),c=t.create([0,1518500249,1859775393,2400959708,2840853838]),h=t.create([1352829926,1548603684,1836072691,2053994217,0]),m=m.RIPEMD160=r.extend({_doReset:function(){this._hash=t.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(S,E){for(var v=0;16>v;v++){var g=E+v,b=S[g];S[g]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var g=this._hash.words,b=c.words,w=h.words,_=n.words,A=u.words,C=a.words,x=i.words,N,H,ne,pe,P,$,j,R,q,Q;$=N=g[0],j=H=g[1],R=ne=g[2],q=pe=g[3],Q=P=g[4];for(var V,v=0;80>v;v+=1)V=N+S[E+_[v]]|0,V=16>v?V+((H^ne^pe)+b[0]):32>v?V+((H&ne|~H&pe)+b[1]):48>v?V+(((H|~ne)^pe)+b[2]):64>v?V+((H&pe|ne&~pe)+b[3]):V+((H^(ne|~pe))+b[4]),V|=0,V=V<<C[v]|V>>>32-C[v],V=V+P|0,N=P,P=pe,pe=ne<<10|ne>>>22,ne=H,H=V,V=$+S[E+A[v]]|0,V=16>v?V+((j^(R|~q))+w[0]):32>v?V+((j&q|R&~q)+w[1]):48>v?V+(((j|~R)^q)+w[2]):64>v?V+((j&R|~j&q)+w[3]):V+((j^R^q)+w[4]),V|=0,V=V<<x[v]|V>>>32-x[v],V=V+Q|0,$=Q,Q=q,q=R<<10|R>>>22,R=j,j=V;V=g[1]+ne+q|0,g[1]=g[2]+pe+Q|0,g[2]=g[3]+P+$|0,g[3]=g[4]+N+j|0,g[4]=g[0]+H+R|0,g[0]=V},_doFinalize:function(){var S=this._data,E=S.words,v=8*this._nDataBytes,g=8*S.sigBytes;for(E[g>>>5]|=128<<24-g%32,E[(g+64>>>9<<4)+14]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,S.sigBytes=4*(E.length+1),this._process(),S=this._hash,E=S.words,v=0;5>v;v++)g=E[v],E[v]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360;return S},clone:function(){var S=r.clone.call(this);return S._hash=this._hash.clone(),S}});e.RIPEMD160=r._createHelper(m),e.HmacRIPEMD160=r._createHmacHelper(m)})(Math);(function(){var e=We,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(r,n){r=this._hasher=new r.init,typeof n=="string"&&(n=t.parse(n));var u=r.blockSize,a=4*u;n.sigBytes>a&&(n=r.finalize(n)),n.clamp();for(var i=this._oKey=n.clone(),c=this._iKey=n.clone(),h=i.words,m=c.words,S=0;S<u;S++)h[S]^=1549556828,m[S]^=909522486;i.sigBytes=c.sigBytes=a,this.reset()},reset:function(){var r=this._hasher;r.reset(),r.update(this._iKey)},update:function(r){return this._hasher.update(r),this},finalize:function(r){var n=this._hasher;return r=n.finalize(r),n.reset(),n.finalize(this._oKey.clone().concat(r))}})})();(function(){var e=We,n=e.lib,t=n.Base,r=n.WordArray,n=e.algo,u=n.HMAC,a=n.PBKDF2=t.extend({cfg:t.extend({keySize:4,hasher:n.SHA1,iterations:1}),init:function(i){this.cfg=this.cfg.extend(i)},compute:function(i,c){for(var b=this.cfg,h=u.create(b.hasher,i),m=r.create(),S=r.create([1]),E=m.words,v=S.words,g=b.keySize,b=b.iterations;E.length<g;){var w=h.update(c).finalize(S);h.reset();for(var _=w.words,A=_.length,C=w,x=1;x<b;x++){C=h.finalize(C),h.reset();for(var N=C.words,H=0;H<A;H++)_[H]^=N[H]}m.concat(w),v[0]++}return m.sigBytes=4*g,m}});e.PBKDF2=function(i,c,h){return a.create(h).compute(i,c)}})();var Ia="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",sh="=";function Yi(e){var t,r,n="";for(t=0;t+3<=e.length;t+=3)r=parseInt(e.substring(t,t+3),16),n+=Ia.charAt(r>>6)+Ia.charAt(r&63);if(t+1==e.length?(r=parseInt(e.substring(t,t+1),16),n+=Ia.charAt(r<<2)):t+2==e.length&&(r=parseInt(e.substring(t,t+2),16),n+=Ia.charAt(r>>2)+Ia.charAt((r&3)<<4)),sh)for(;(n.length&3)>0;)n+=sh;return n}function ka(e){var t="",r,n=0,u,a;for(r=0;r<e.length&&e.charAt(r)!=sh;++r)a=Ia.indexOf(e.charAt(r)),!(a<0)&&(n==0?(t+=Wi(a>>2),u=a&3,n=1):n==1?(t+=Wi(u<<2|a>>4),u=a&15,n=2):n==2?(t+=Wi(u),t+=Wi(a>>2),u=a&3,n=3):(t+=Wi(u<<2|a>>4),t+=Wi(a&15),n=0));return n==1&&(t+=Wi(u<<2)),t}function i0(e){var t=ka(e),r,n=new Array;for(r=0;2*r<t.length;++r)n[r]=parseInt(t.substring(2*r,2*r+2),16);return n}var _s,PA=0xdeadbeefcafe,t0=(PA&16777215)==15715070;function ae(e,t,r){e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}function zt(){return new ae(null)}function IA(e,t,r,n,u,a){for(;--a>=0;){var i=t*this[e++]+r[n]+u;u=Math.floor(i/67108864),r[n++]=i&67108863}return u}function $A(e,t,r,n,u,a){for(var i=t&32767,c=t>>15;--a>=0;){var h=this[e]&32767,m=this[e++]>>15,S=c*h+m*i;h=i*h+((S&32767)<<15)+r[n]+(u&1073741823),u=(h>>>30)+(S>>>15)+c*m+(u>>>30),r[n++]=h&1073741823}return u}function kA(e,t,r,n,u,a){for(var i=t&16383,c=t>>14;--a>=0;){var h=this[e]&16383,m=this[e++]>>14,S=c*h+m*i;h=i*h+((S&16383)<<14)+r[n]+u,u=(h>>28)+(S>>14)+c*m,r[n++]=h&268435455}return u}t0&&Iu.appName=="Microsoft Internet Explorer"?(ae.prototype.am=$A,_s=30):t0&&Iu.appName!="Netscape"?(ae.prototype.am=IA,_s=26):(ae.prototype.am=kA,_s=28);ae.prototype.DB=_s;ae.prototype.DM=(1<<_s)-1;ae.prototype.DV=1<<_s;var lh=52;ae.prototype.FV=Math.pow(2,lh);ae.prototype.F1=lh-_s;ae.prototype.F2=2*_s-lh;var RA="0123456789abcdefghijklmnopqrstuvwxyz",cc=new Array,Ra,ii;Ra=48;for(ii=0;ii<=9;++ii)cc[Ra++]=ii;Ra=97;for(ii=10;ii<36;++ii)cc[Ra++]=ii;Ra=65;for(ii=10;ii<36;++ii)cc[Ra++]=ii;function Wi(e){return RA.charAt(e)}function s0(e,t){var r=cc[e.charCodeAt(t)];return r??-1}function BA(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function xA(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function Ss(e){var t=zt();return t.fromInt(e),t}function TA(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n=e.length,u=!1,a=0;--n>=0;){var i=r==8?e[n]&255:s0(e,n);if(i<0){e.charAt(n)=="-"&&(u=!0);continue}u=!1,a==0?this[this.t++]=i:a+r>this.DB?(this[this.t-1]|=(i&(1<<this.DB-a)-1)<<a,this[this.t++]=i>>this.DB-a):this[this.t-1]|=i<<a,a+=r,a>=this.DB&&(a-=this.DB)}r==8&&(e[0]&128)!=0&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),u&&ae.ZERO.subTo(this,this)}function OA(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function NA(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,n,u=!1,a="",i=this.t,c=this.DB-i*this.DB%t;if(i-- >0)for(c<this.DB&&(n=this[i]>>c)>0&&(u=!0,a=Wi(n));i>=0;)c<t?(n=(this[i]&(1<<c)-1)<<t-c,n|=this[--i]>>(c+=this.DB-t)):(n=this[i]>>(c-=t)&r,c<=0&&(c+=this.DB,--i)),n>0&&(u=!0),u&&(a+=Wi(n));return u?a:"0"}function HA(){var e=zt();return ae.ZERO.subTo(this,e),e}function LA(){return this.s<0?this.negate():this}function jA(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this[r]-e[r])!=0)return t;return 0}function lc(e){var t=1,r;return(r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function MA(){return this.t<=0?0:this.DB*(this.t-1)+lc(this[this.t-1]^this.s&this.DM)}function qA(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s}function UA(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s}function VA(e,t){var r=e%this.DB,n=this.DB-r,u=(1<<n)-1,a=Math.floor(e/this.DB),i=this.s<<r&this.DM,c;for(c=this.t-1;c>=0;--c)t[c+a+1]=this[c]>>n|i,i=(this[c]&u)<<r;for(c=a-1;c>=0;--c)t[c]=0;t[a]=i,t.t=this.t+a+1,t.s=this.s,t.clamp()}function KA(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var n=e%this.DB,u=this.DB-n,a=(1<<n)-1;t[0]=this[r]>>n;for(var i=r+1;i<this.t;++i)t[i-r-1]|=(this[i]&a)<<u,t[i-r]=this[i]>>n;n>0&&(t[this.t-r-1]|=(this.s&a)<<u),t.t=this.t-r,t.clamp()}function zA(e,t){for(var r=0,n=0,u=Math.min(e.t,this.t);r<u;)n+=this[r]-e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e[r],t[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[r++]=this.DV+n:n>0&&(t[r++]=n),t.t=r,t.clamp()}function GA(e,t){var r=this.abs(),n=e.abs(),u=r.t;for(t.t=u+n.t;--u>=0;)t[u]=0;for(u=0;u<n.t;++u)t[u+r.t]=r.am(0,n[u],t,u,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&ae.ZERO.subTo(t,t)}function WA(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()}function YA(e,t,r){var n=e.abs();if(!(n.t<=0)){var u=this.abs();if(u.t<n.t){t?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=zt());var a=zt(),i=this.s,c=e.s,h=this.DB-lc(n[n.t-1]);h>0?(n.lShiftTo(h,a),u.lShiftTo(h,r)):(n.copyTo(a),u.copyTo(r));var m=a.t,S=a[m-1];if(S!=0){var E=S*(1<<this.F1)+(m>1?a[m-2]>>this.F2:0),v=this.FV/E,g=(1<<this.F1)/E,b=1<<this.F2,w=r.t,_=w-m,A=t??zt();for(a.dlShiftTo(_,A),r.compareTo(A)>=0&&(r[r.t++]=1,r.subTo(A,r)),ae.ONE.dlShiftTo(m,A),A.subTo(a,a);a.t<m;)a[a.t++]=0;for(;--_>=0;){var C=r[--w]==S?this.DM:Math.floor(r[w]*v+(r[w-1]+b)*g);if((r[w]+=a.am(0,C,r,_,0,m))<C)for(a.dlShiftTo(_,A),r.subTo(A,r);r[w]<--C;)r.subTo(A,r)}t!=null&&(r.drShiftTo(m,t),i!=c&&ae.ZERO.subTo(t,t)),r.t=m,r.clamp(),h>0&&r.rShiftTo(h,r),i<0&&ae.ZERO.subTo(r,r)}}}function JA(e){var t=zt();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(ae.ZERO)>0&&e.subTo(t,t),t}function Hs(e){this.m=e}function XA(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function ZA(e){return e}function QA(e){e.divRemTo(this.m,null,e)}function eE(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function tE(e,t){e.squareTo(t),this.reduce(t)}Hs.prototype.convert=XA;Hs.prototype.revert=ZA;Hs.prototype.reduce=QA;Hs.prototype.mulTo=eE;Hs.prototype.sqrTo=tE;function rE(){if(this.t<1)return 0;var e=this[0];if((e&1)==0)return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Ls(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function nE(e){var t=zt();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(ae.ZERO)>0&&this.m.subTo(t,t),t}function iE(e){var t=zt();return e.copyTo(t),this.reduce(t),t}function sE(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e[t]&32767,n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e[r]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function aE(e,t){e.squareTo(t),this.reduce(t)}function uE(e,t,r){e.multiplyTo(t,r),this.reduce(r)}Ls.prototype.convert=nE;Ls.prototype.revert=iE;Ls.prototype.reduce=sE;Ls.prototype.mulTo=uE;Ls.prototype.sqrTo=aE;function oE(){return(this.t>0?this[0]&1:this.s)==0}function cE(e,t){if(e>4294967295||e<1)return ae.ONE;var r=zt(),n=zt(),u=t.convert(this),a=lc(e)-1;for(u.copyTo(r);--a>=0;)if(t.sqrTo(r,n),(e&1<<a)>0)t.mulTo(n,u,r);else{var i=r;r=n,n=i}return t.revert(r)}function lE(e,t){var r;return e<256||t.isEven()?r=new Hs(t):r=new Ls(t),this.exp(e,r)}ae.prototype.copyTo=BA;ae.prototype.fromInt=xA;ae.prototype.fromString=TA;ae.prototype.clamp=OA;ae.prototype.dlShiftTo=qA;ae.prototype.drShiftTo=UA;ae.prototype.lShiftTo=VA;ae.prototype.rShiftTo=KA;ae.prototype.subTo=zA;ae.prototype.multiplyTo=GA;ae.prototype.squareTo=WA;ae.prototype.divRemTo=YA;ae.prototype.invDigit=rE;ae.prototype.isEven=oE;ae.prototype.exp=cE;ae.prototype.toString=NA;ae.prototype.negate=HA;ae.prototype.abs=LA;ae.prototype.compareTo=jA;ae.prototype.bitLength=MA;ae.prototype.mod=JA;ae.prototype.modPowInt=lE;ae.ZERO=Ss(0);ae.ONE=Ss(1);function fE(){var e=zt();return this.copyTo(e),e}function hE(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function pE(){return this.t==0?this.s:this[0]<<24>>24}function dE(){return this.t==0?this.s:this[0]<<16>>16}function gE(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function vE(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function mE(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=Ss(r),u=zt(),a=zt(),i="";for(this.divRemTo(n,u,a);u.signum()>0;)i=(r+a.intValue()).toString(e).substr(1)+i,u.divRemTo(n,u,a);return a.intValue().toString(e)+i}function wE(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),u=!1,a=0,i=0,c=0;c<e.length;++c){var h=s0(e,c);if(h<0){e.charAt(c)=="-"&&this.signum()==0&&(u=!0);continue}i=t*i+h,++a>=r&&(this.dMultiply(n),this.dAddOffset(i,0),a=0,i=0)}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(i,0)),u&&ae.ZERO.subTo(this,this)}function bE(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(ae.ONE.shiftLeft(e-1),fh,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(ae.ONE.shiftLeft(e-1),this);else{var n=new Array,u=e&7;n.length=(e>>3)+1,t.nextBytes(n),u>0?n[0]&=(1<<u)-1:n[0]=0,this.fromString(n,256)}}function AE(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,n,u=0;if(e-- >0)for(r<this.DB&&(n=this[e]>>r)!=(this.s&this.DM)>>r&&(t[u++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this[e]&(1<<r)-1)<<8-r,n|=this[--e]>>(r+=this.DB-8)):(n=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),(n&128)!=0&&(n|=-256),u==0&&(this.s&128)!=(n&128)&&++u,(u>0||n!=this.s)&&(t[u++]=n);return t}function EE(e){return this.compareTo(e)==0}function SE(e){return this.compareTo(e)<0?this:e}function _E(e){return this.compareTo(e)>0?this:e}function yE(e,t,r){var n,u,a=Math.min(e.t,this.t);for(n=0;n<a;++n)r[n]=t(this[n],e[n]);if(e.t<this.t){for(u=e.s&this.DM,n=a;n<this.t;++n)r[n]=t(this[n],u);r.t=this.t}else{for(u=this.s&this.DM,n=a;n<e.t;++n)r[n]=t(u,e[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function DE(e,t){return e&t}function FE(e){var t=zt();return this.bitwiseTo(e,DE,t),t}function fh(e,t){return e|t}function CE(e){var t=zt();return this.bitwiseTo(e,fh,t),t}function a0(e,t){return e^t}function PE(e){var t=zt();return this.bitwiseTo(e,a0,t),t}function u0(e,t){return e&~t}function IE(e){var t=zt();return this.bitwiseTo(e,u0,t),t}function $E(){for(var e=zt(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e}function kE(e){var t=zt();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function RE(e){var t=zt();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function BE(e){if(e==0)return-1;var t=0;return(e&65535)==0&&(e>>=16,t+=16),(e&255)==0&&(e>>=8,t+=8),(e&15)==0&&(e>>=4,t+=4),(e&3)==0&&(e>>=2,t+=2),(e&1)==0&&++t,t}function xE(){for(var e=0;e<this.t;++e)if(this[e]!=0)return e*this.DB+BE(this[e]);return this.s<0?this.t*this.DB:-1}function TE(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function OE(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=TE(this[r]^t);return e}function NE(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this[t]&1<<e%this.DB)!=0}function HE(e,t){var r=ae.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function LE(e){return this.changeBit(e,fh)}function jE(e){return this.changeBit(e,u0)}function ME(e){return this.changeBit(e,a0)}function qE(e,t){for(var r=0,n=0,u=Math.min(e.t,this.t);r<u;)n+=this[r]+e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e[r],t[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[r++]=n:n<-1&&(t[r++]=this.DV+n),t.t=r,t.clamp()}function UE(e){var t=zt();return this.addTo(e,t),t}function VE(e){var t=zt();return this.subTo(e,t),t}function KE(e){var t=zt();return this.multiplyTo(e,t),t}function zE(){var e=zt();return this.squareTo(e),e}function GE(e){var t=zt();return this.divRemTo(e,t,null),t}function WE(e){var t=zt();return this.divRemTo(e,null,t),t}function YE(e){var t=zt(),r=zt();return this.divRemTo(e,t,r),new Array(t,r)}function JE(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function XE(e,t){if(e!=0){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}}function ku(){}function o0(e){return e}function ZE(e,t,r){e.multiplyTo(t,r)}function QE(e,t){e.squareTo(t)}ku.prototype.convert=o0;ku.prototype.revert=o0;ku.prototype.mulTo=ZE;ku.prototype.sqrTo=QE;function eS(e){return this.exp(e,new ku)}function tS(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r[--n]=0;var u;for(u=r.t-this.t;n<u;++n)r[n+this.t]=this.am(0,e[n],r,n,0,this.t);for(u=Math.min(e.t,t);n<u;++n)this.am(0,e[n],r,n,0,t-n);r.clamp()}function rS(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r[this.t+n-t]=this.am(t-n,e[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function Ba(e){this.r2=zt(),this.q3=zt(),ae.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function nS(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=zt();return e.copyTo(t),this.reduce(t),t}function iS(e){return e}function sS(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function aS(e,t){e.squareTo(t),this.reduce(t)}function uS(e,t,r){e.multiplyTo(t,r),this.reduce(r)}Ba.prototype.convert=nS;Ba.prototype.revert=iS;Ba.prototype.reduce=sS;Ba.prototype.mulTo=uS;Ba.prototype.sqrTo=aS;function oS(e,t){var r=e.bitLength(),n,u=Ss(1),a;if(r<=0)return u;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?a=new Hs(t):t.isEven()?a=new Ba(t):a=new Ls(t);var i=new Array,c=3,h=n-1,m=(1<<n)-1;if(i[1]=a.convert(this),n>1){var S=zt();for(a.sqrTo(i[1],S);c<=m;)i[c]=zt(),a.mulTo(S,i[c-2],i[c]),c+=2}var E=e.t-1,v,g=!0,b=zt(),w;for(r=lc(e[E])-1;E>=0;){for(r>=h?v=e[E]>>r-h&m:(v=(e[E]&(1<<r+1)-1)<<h-r,E>0&&(v|=e[E-1]>>this.DB+r-h)),c=n;(v&1)==0;)v>>=1,--c;if((r-=c)<0&&(r+=this.DB,--E),g)i[v].copyTo(u),g=!1;else{for(;c>1;)a.sqrTo(u,b),a.sqrTo(b,u),c-=2;c>0?a.sqrTo(u,b):(w=u,u=b,b=w),a.mulTo(b,i[v],u)}for(;E>=0&&(e[E]&1<<r)==0;)a.sqrTo(u,b),w=u,u=b,b=w,--r<0&&(r=this.DB-1,--E)}return a.revert(u)}function cS(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var u=t.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return t;for(u<a&&(a=u),a>0&&(t.rShiftTo(a,t),r.rShiftTo(a,r));t.signum()>0;)(u=t.getLowestSetBit())>0&&t.rShiftTo(u,t),(u=r.getLowestSetBit())>0&&r.rShiftTo(u,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r}function lS(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this[n])%e;return r}function fS(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return ae.ZERO;for(var r=e.clone(),n=this.clone(),u=Ss(1),a=Ss(0),i=Ss(0),c=Ss(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!u.isEven()||!a.isEven())&&(u.addTo(this,u),a.subTo(e,a)),u.rShiftTo(1,u)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),t?((!i.isEven()||!c.isEven())&&(i.addTo(this,i),c.subTo(e,c)),i.rShiftTo(1,i)):c.isEven()||c.subTo(e,c),c.rShiftTo(1,c);r.compareTo(n)>=0?(r.subTo(n,r),t&&u.subTo(i,u),a.subTo(c,a)):(n.subTo(r,n),t&&i.subTo(u,i),c.subTo(a,c))}if(n.compareTo(ae.ONE)!=0)return ae.ZERO;if(c.compareTo(e)>=0)return c.subtract(e);if(c.signum()<0)c.addTo(e,c);else return c;return c.signum()<0?c.add(e):c}var mn=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],hS=(1<<26)/mn[mn.length-1];function pS(e){var t,r=this.abs();if(r.t==1&&r[0]<=mn[mn.length-1]){for(t=0;t<mn.length;++t)if(r[0]==mn[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<mn.length;){for(var n=mn[t],u=t+1;u<mn.length&&n<hS;)n*=mn[u++];for(n=r.modInt(n);t<u;)if(n%mn[t++]==0)return!1}return r.millerRabin(e)}function dS(e){var t=this.subtract(ae.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var n=t.shiftRight(r);e=e+1>>1,e>mn.length&&(e=mn.length);for(var u=zt(),a=0;a<e;++a){u.fromInt(mn[Math.floor(Math.random()*mn.length)]);var i=u.modPow(n,this);if(i.compareTo(ae.ONE)!=0&&i.compareTo(t)!=0){for(var c=1;c++<r&&i.compareTo(t)!=0;)if(i=i.modPowInt(2,this),i.compareTo(ae.ONE)==0)return!1;if(i.compareTo(t)!=0)return!1}}return!0}ae.prototype.chunkSize=gE;ae.prototype.toRadix=mE;ae.prototype.fromRadix=wE;ae.prototype.fromNumber=bE;ae.prototype.bitwiseTo=yE;ae.prototype.changeBit=HE;ae.prototype.addTo=qE;ae.prototype.dMultiply=JE;ae.prototype.dAddOffset=XE;ae.prototype.multiplyLowerTo=tS;ae.prototype.multiplyUpperTo=rS;ae.prototype.modInt=lS;ae.prototype.millerRabin=dS;ae.prototype.clone=fE;ae.prototype.intValue=hE;ae.prototype.byteValue=pE;ae.prototype.shortValue=dE;ae.prototype.signum=vE;ae.prototype.toByteArray=AE;ae.prototype.equals=EE;ae.prototype.min=SE;ae.prototype.max=_E;ae.prototype.and=FE;ae.prototype.or=CE;ae.prototype.xor=PE;ae.prototype.andNot=IE;ae.prototype.not=$E;ae.prototype.shiftLeft=kE;ae.prototype.shiftRight=RE;ae.prototype.getLowestSetBit=xE;ae.prototype.bitCount=OE;ae.prototype.testBit=NE;ae.prototype.setBit=LE;ae.prototype.clearBit=jE;ae.prototype.flipBit=ME;ae.prototype.add=UE;ae.prototype.subtract=VE;ae.prototype.multiply=KE;ae.prototype.divide=GE;ae.prototype.remainder=WE;ae.prototype.divideAndRemainder=YE;ae.prototype.modPow=oS;ae.prototype.modInverse=fS;ae.prototype.pow=eS;ae.prototype.gcd=cS;ae.prototype.isProbablePrime=pS;ae.prototype.square=zE;function hh(){this.i=0,this.j=0,this.S=new Array}function gS(e){var t,r,n;for(t=0;t<256;++t)this.S[t]=t;for(r=0,t=0;t<256;++t)r=r+this.S[t]+e[t%e.length]&255,n=this.S[t],this.S[t]=this.S[r],this.S[r]=n;this.i=0,this.j=0}function vS(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]}hh.prototype.init=gS;hh.prototype.next=vS;function mS(){return new hh}var ah=256;var sc,qn,Jr;function wS(e){qn[Jr++]^=e&255,qn[Jr++]^=e>>8&255,qn[Jr++]^=e>>16&255,qn[Jr++]^=e>>24&255,Jr>=ah&&(Jr-=ah)}function ph(){wS(new Date().getTime())}if(qn==null){if(qn=new Array,Jr=0,Pa!==void 0&&(Pa.crypto!==void 0||Pa.msCrypto!==void 0)){if(rh=Pa.crypto||Pa.msCrypto,rh.getRandomValues)for(nh=new Uint8Array(32),rh.getRandomValues(nh),ni=0;ni<32;++ni)qn[Jr++]=nh[ni];else if(Iu.appName=="Netscape"&&Iu.appVersion<"5")for(ih=Pa.crypto.random(32),ni=0;ni<ih.length;++ni)qn[Jr++]=ih.charCodeAt(ni)&255}for(;Jr<ah;)ni=Math.floor(65536*Math.random()),qn[Jr++]=ni>>>8,qn[Jr++]=ni&255;Jr=0,ph()}var ni,rh,nh,ih;function bS(){if(sc==null){for(ph(),sc=mS(),sc.init(qn),Jr=0;Jr<qn.length;++Jr)qn[Jr]=0;Jr=0}return sc.next()}function AS(e){var t;for(t=0;t<e.length;++t)e[t]=bS()}function xa(){}xa.prototype.nextBytes=AS;function Cn(e,t){return new ae(e,t)}function bt(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function ES(e,t){if(this.isPublic=!0,this.isPrivate=!1,typeof e!="string")this.n=e,this.e=t;else if(e!=null&&t!=null&&e.length>0&&t.length>0)this.n=Cn(e,16),this.e=parseInt(t,16);else throw"Invalid RSA public key"}function SS(e){return e.modPowInt(this.e,this.n)}bt.prototype.doPublic=SS;bt.prototype.setPublic=ES;bt.prototype.type="RSA";function _S(e,t,r){if(this.isPrivate=!0,typeof e!="string")this.n=e,this.e=t,this.d=r;else if(e!=null&&t!=null&&e.length>0&&t.length>0)this.n=Cn(e,16),this.e=parseInt(t,16),this.d=Cn(r,16);else throw"Invalid RSA private key"}function yS(e,t,r,n,u,a,i,c){if(this.isPrivate=!0,this.isPublic=!1,e==null)throw"RSASetPrivateEx N == null";if(t==null)throw"RSASetPrivateEx E == null";if(e.length==0)throw"RSASetPrivateEx N.length == 0";if(t.length==0)throw"RSASetPrivateEx E.length == 0";if(e!=null&&t!=null&&e.length>0&&t.length>0)this.n=Cn(e,16),this.e=parseInt(t,16),this.d=Cn(r,16),this.p=Cn(n,16),this.q=Cn(u,16),this.dmp1=Cn(a,16),this.dmq1=Cn(i,16),this.coeff=Cn(c,16);else throw"Invalid RSA private key in RSASetPrivateEx"}function DS(e,t){var r=new xa,n=e>>1;this.e=parseInt(t,16);for(var u=new ae(t,16),a=e/2-100,i=ae.ONE.shiftLeft(a);;){for(;this.p=new ae(e-n,1,r),!(this.p.subtract(ae.ONE).gcd(u).compareTo(ae.ONE)==0&&this.p.isProbablePrime(10)););for(;this.q=new ae(n,1,r),!(this.q.subtract(ae.ONE).gcd(u).compareTo(ae.ONE)==0&&this.q.isProbablePrime(10)););if(this.p.compareTo(this.q)<=0){var c=this.p;this.p=this.q,this.q=c}var h=this.q.subtract(this.p).abs();if(!(h.bitLength()<a||h.compareTo(i)<=0)){var m=this.p.subtract(ae.ONE),S=this.q.subtract(ae.ONE),E=m.multiply(S);if(E.gcd(u).compareTo(ae.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==e)){this.d=u.modInverse(E),this.dmp1=this.d.mod(m),this.dmq1=this.d.mod(S),this.coeff=this.q.modInverse(this.p);break}}}this.isPrivate=!0}function FS(e){if(this.p==null||this.q==null)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),r=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(r)<0;)t=t.add(this.p);return t.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)}bt.prototype.doPrivate=FS;bt.prototype.setPrivate=_S;bt.prototype.setPrivateEx=yS;bt.prototype.generate=DS;function zr(e,t){this.x=t,this.q=e}function CS(e){return e==this?!0:this.q.equals(e.q)&&this.x.equals(e.x)}function PS(){return this.x}function IS(){return new zr(this.q,this.x.negate().mod(this.q))}function $S(e){return new zr(this.q,this.x.add(e.toBigInteger()).mod(this.q))}function kS(e){return new zr(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))}function RS(e){return new zr(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))}function BS(){return new zr(this.q,this.x.square().mod(this.q))}function xS(e){return new zr(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))}zr.prototype.equals=CS;zr.prototype.toBigInteger=PS;zr.prototype.negate=IS;zr.prototype.add=$S;zr.prototype.subtract=kS;zr.prototype.multiply=RS;zr.prototype.square=BS;zr.prototype.divide=xS;zr.prototype.sqrt=function(){return new zr(this.q,this.x.sqrt().mod(this.q))};function Zt(e,t,r,n){this.curve=e,this.x=t,this.y=r,n==null?this.z=ae.ONE:this.z=n,this.zinv=null}function TS(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function OS(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function NS(e){if(e==this)return!0;if(this.isInfinity())return e.isInfinity();if(e.isInfinity())return this.isInfinity();var t,r;return t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),t.equals(ae.ZERO)?(r=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q),r.equals(ae.ZERO)):!1}function HS(){return this.x==null&&this.y==null?!0:this.z.equals(ae.ZERO)&&!this.y.toBigInteger().equals(ae.ZERO)}function LS(){return new Zt(this.curve,this.x,this.y.negate(),this.z)}function jS(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),r=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(ae.ZERO.equals(r))return ae.ZERO.equals(t)?this.twice():this.curve.getInfinity();var n=new ae("3"),u=this.x.toBigInteger(),a=this.y.toBigInteger(),i=e.x.toBigInteger(),c=e.y.toBigInteger(),h=r.square(),m=h.multiply(r),S=u.multiply(h),E=t.square().multiply(this.z),v=E.subtract(S.shiftLeft(1)).multiply(e.z).subtract(m).multiply(r).mod(this.curve.q),g=S.multiply(n).multiply(t).subtract(a.multiply(m)).subtract(E.multiply(t)).multiply(e.z).add(t.multiply(m)).mod(this.curve.q),b=m.multiply(this.z).multiply(e.z).mod(this.curve.q);return new Zt(this.curve,this.curve.fromBigInteger(v),this.curve.fromBigInteger(g),b)}function MS(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var e=new ae("3"),t=this.x.toBigInteger(),r=this.y.toBigInteger(),n=r.multiply(this.z),u=n.multiply(r).mod(this.curve.q),a=this.curve.a.toBigInteger(),i=t.square().multiply(e);ae.ZERO.equals(a)||(i=i.add(this.z.square().multiply(a))),i=i.mod(this.curve.q);var c=i.square().subtract(t.shiftLeft(3).multiply(u)).shiftLeft(1).multiply(n).mod(this.curve.q),h=i.multiply(e).multiply(t).subtract(u.shiftLeft(1)).shiftLeft(2).multiply(u).subtract(i.square().multiply(i)).mod(this.curve.q),m=n.square().multiply(n).shiftLeft(3).mod(this.curve.q);return new Zt(this.curve,this.curve.fromBigInteger(c),this.curve.fromBigInteger(h),m)}function qS(e){if(this.isInfinity())return this;if(e.signum()==0)return this.curve.getInfinity();var t=e,r=t.multiply(new ae("3")),n=this.negate(),u=this,a=this.curve.q.subtract(e),i=a.multiply(new ae("3")),c=new Zt(this.curve,this.x,this.y),h=c.negate(),m;for(m=r.bitLength()-2;m>0;--m){u=u.twice();var S=r.testBit(m),E=t.testBit(m);S!=E&&(u=u.add(S?this:n))}for(m=i.bitLength()-2;m>0;--m){c=c.twice();var v=i.testBit(m),g=a.testBit(m);v!=g&&(c=c.add(v?c:h))}return u}function US(e,t,r){var n;e.bitLength()>r.bitLength()?n=e.bitLength()-1:n=r.bitLength()-1;for(var u=this.curve.getInfinity(),a=this.add(t);n>=0;)u=u.twice(),e.testBit(n)?r.testBit(n)?u=u.add(a):u=u.add(this):r.testBit(n)&&(u=u.add(t)),--n;return u}Zt.prototype.getX=TS;Zt.prototype.getY=OS;Zt.prototype.equals=NS;Zt.prototype.isInfinity=HS;Zt.prototype.negate=LS;Zt.prototype.add=jS;Zt.prototype.twice=MS;Zt.prototype.multiply=qS;Zt.prototype.multiplyTwo=US;function Ji(e,t,r){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(r),this.infinity=new Zt(this,null,null)}function VS(){return this.q}function KS(){return this.a}function zS(){return this.b}function GS(e){return e==this?!0:this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)}function WS(){return this.infinity}function YS(e){return new zr(this.q,e)}function JS(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:var t=e.substr(0,2),r=e.substr(2),n=this.fromBigInteger(new ae(m,16)),u=this.getA(),a=this.getB(),i=n.square().add(u).multiply(n).add(a),c=i.sqrt();return t=="03"&&(c=c.negate()),new Zt(this,n,c);case 4:case 6:case 7:var h=(e.length-2)/2,m=e.substr(2,h),S=e.substr(h+2,h);return new Zt(this,this.fromBigInteger(new ae(m,16)),this.fromBigInteger(new ae(S,16)));default:return null}}Ji.prototype.getQ=VS;Ji.prototype.getA=KS;Ji.prototype.getB=zS;Ji.prototype.equals=GS;Ji.prototype.getInfinity=WS;Ji.prototype.fromBigInteger=YS;Ji.prototype.decodePointHex=JS;zr.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)};Zt.prototype.getEncoded=function(e){var t=function(a,i){var c=a.toByteArrayUnsigned();if(i<c.length)c=c.slice(c.length-i);else for(;i>c.length;)c.unshift(0);return c},r=this.getX().toBigInteger(),n=this.getY().toBigInteger(),u=t(r,32);return e?n.isEven()?u.unshift(2):u.unshift(3):(u.unshift(4),u=u.concat(t(n,32))),u};Zt.decodeFrom=function(e,t){var r=t[0],n=t.length-1,u=t.slice(1,1+n/2),a=t.slice(1+n/2,1+n);u.unshift(0),a.unshift(0);var i=new ae(u),c=new ae(a);return new Zt(e,e.fromBigInteger(i),e.fromBigInteger(c))};Zt.decodeFromHex=function(e,t){var r=t.substr(0,2),n=t.length-2,u=t.substr(2,n/2),a=t.substr(2+n/2,n/2),i=new ae(u,16),c=new ae(a,16);return new Zt(e,e.fromBigInteger(i),e.fromBigInteger(c))};Zt.prototype.add2D=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.x.equals(e.x))return this.y.equals(e.y)?this.twice():this.curve.getInfinity();var t=e.x.subtract(this.x),r=e.y.subtract(this.y),n=r.divide(t),u=n.square().subtract(this.x).subtract(e.x),a=n.multiply(this.x.subtract(u)).subtract(this.y);return new Zt(this.curve,u,a)};Zt.prototype.twice2D=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var e=this.curve.fromBigInteger(ae.valueOf(2)),t=this.curve.fromBigInteger(ae.valueOf(3)),r=this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(e)),n=r.square().subtract(this.x.multiply(e)),u=r.multiply(this.x.subtract(n)).subtract(this.y);return new Zt(this.curve,n,u)};Zt.prototype.multiply2D=function(e){if(this.isInfinity())return this;if(e.signum()==0)return this.curve.getInfinity();var t=e,r=t.multiply(new ae("3")),n=this.negate(),u=this,a;for(a=r.bitLength()-2;a>0;--a){u=u.twice();var i=r.testBit(a),c=t.testBit(a);i!=c&&(u=u.add2D(i?this:n))}return u};Zt.prototype.isOnCurve=function(){var e=this.getX().toBigInteger(),t=this.getY().toBigInteger(),r=this.curve.getA().toBigInteger(),n=this.curve.getB().toBigInteger(),u=this.curve.getQ(),a=t.multiply(t).mod(u),i=e.multiply(e).multiply(e).add(r.multiply(e)).add(n).mod(u);return a.equals(i)};Zt.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"};Zt.prototype.validate=function(){var e=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var t=this.getX().toBigInteger(),r=this.getY().toBigInteger();if(t.compareTo(ae.ONE)<0||t.compareTo(e.subtract(ae.ONE))>0)throw new Error("x coordinate out of bounds");if(r.compareTo(ae.ONE)<0||r.compareTo(e.subtract(ae.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(e).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var c0=(function(){var e="(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)",t='(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))',r='(?:"'+t+'*")',n=new RegExp("(?:false|true|null|[\\{\\}\\[\\]]|"+e+"|"+r+")","g"),u=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),a={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function i(E,v,g){return v?a[v]:String.fromCharCode(parseInt(g,16))}var c=new String(""),h="\\",m={"{":Object,"[":Array},S=Object.hasOwnProperty;return function(E,v){var g=E.match(n),b,w=g[0],_=!1;w==="{"?b={}:w==="["?b=[]:(b=[],_=!0);for(var A,C=[b],x=1-_,N=g.length;x<N;++x){w=g[x];var H;switch(w.charCodeAt(0)){default:H=C[0],H[A||H.length]=+w,A=void 0;break;case 34:if(w=w.substring(1,w.length-1),w.indexOf(h)!==-1&&(w=w.replace(u,i)),H=C[0],!A)if(H instanceof Array)A=H.length;else{A=w||c;break}H[A]=w,A=void 0;break;case 91:H=C[0],C.unshift(H[A||H.length]=[]),A=void 0;break;case 93:C.shift();break;case 102:H=C[0],H[A||H.length]=!1,A=void 0;break;case 110:H=C[0],H[A||H.length]=null,A=void 0;break;case 116:H=C[0],H[A||H.length]=!0,A=void 0;break;case 123:H=C[0],C.unshift(H[A||H.length]={}),A=void 0;break;case 125:C.shift();break}}if(_){if(C.length!==1)throw new Error;b=b[0]}else if(C.length)throw new Error;if(v){var ne=function(pe,P){var $=pe[P];if($&&typeof $=="object"){var j=null;for(var R in $)if(S.call($,R)&&$!==pe){var q=ne($,R);q!==void 0?$[R]=q:(j||(j=[]),j.push(R))}if(j)for(var Q=j.length;--Q>=0;)delete $[j[Q]]}return v.call(pe,P,$)};b=ne({"":b},"")}return b}})();(typeof p>"u"||!p)&&(p={});(typeof p.asn1>"u"||!p.asn1)&&(p.asn1={});p.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){return Bu(e)},this.getPEMStringFromHex=function(e,t){return un(e,t)},this.newObject=function(e){var t=p,r=t.asn1,n=r.ASN1Object,u=r.DERBoolean,a=r.DERInteger,i=r.DERBitString,c=r.DEROctetString,h=r.DERNull,m=r.DERObjectIdentifier,S=r.DEREnumerated,E=r.DERUTF8String,v=r.DERNumericString,g=r.DERPrintableString,b=r.DERTeletexString,w=r.DERIA5String,_=r.DERUTCTime,A=r.DERGeneralizedTime,C=r.DERVisibleString,x=r.DERBMPString,N=r.DERSequence,H=r.DERSet,ne=r.DERTaggedObject,pe=r.ASN1Util.newObject;if(e instanceof r.ASN1Object)return e;var P=Object.keys(e);if(P.length!=1)throw new Error("key of param shall be only one.");var $=P[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+$+":")==-1)throw new Error("undefined key: "+$);if($=="bool")return new u(e[$]);if($=="int")return new a(e[$]);if($=="bitstr")return new i(e[$]);if($=="octstr")return new c(e[$]);if($=="null")return new h(e[$]);if($=="oid")return new m(e[$]);if($=="enum")return new S(e[$]);if($=="utf8str")return new E(e[$]);if($=="numstr")return new v(e[$]);if($=="prnstr")return new g(e[$]);if($=="telstr")return new b(e[$]);if($=="ia5str")return new w(e[$]);if($=="utctime")return new _(e[$]);if($=="gentime")return new A(e[$]);if($=="visstr")return new C(e[$]);if($=="bmpstr")return new x(e[$]);if($=="asn1")return new n(e[$]);if($=="seq"){for(var j=e[$],R=[],q=0;q<j.length;q++){var Q=pe(j[q]);R.push(Q)}return new N({array:R})}if($=="set"){for(var j=e[$],R=[],q=0;q<j.length;q++){var Q=pe(j[q]);R.push(Q)}return new H({array:R})}if($=="tag"){var V=e[$];if(Object.prototype.toString.call(V)==="[object Array]"&&V.length==3){var z=pe(V[2]);return new ne({tag:V[0],explicit:V[1],obj:z})}else return new ne(V)}},this.jsonToASN1HEX=function(e){var t=this.newObject(e);return t.tohex()}};p.asn1.ASN1Util.oidHexToInt=function(e){for(var u="",t=parseInt(e.substr(0,2),16),r=Math.floor(t/40),n=t%40,u=r+"."+n,a="",i=2;i<e.length;i+=2){var c=parseInt(e.substr(i,2),16),h=("00000000"+c.toString(2)).slice(-8);if(a=a+h.substr(1,7),h.substr(0,1)=="0"){var m=new ae(a,2);u=u+"."+m.toString(10),a=""}}return u};p.asn1.ASN1Util.oidIntToHex=function(e){var t=function(c){var h=c.toString(16);return h.length==1&&(h="0"+h),h},r=function(c){var h="",m=new ae(c,10),S=m.toString(2),E=7-S.length%7;E==7&&(E=0);for(var v="",g=0;g<E;g++)v+="0";S=v+S;for(var g=0;g<S.length-1;g+=7){var b=S.substr(g,7);g!=S.length-7&&(b="1"+b),h+=t(parseInt(b,2))}return h};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var n="",u=e.split("."),a=parseInt(u[0])*40+parseInt(u[1]);n+=t(a),u.splice(0,2);for(var i=0;i<u.length;i++)n+=r(u[i]);return n};p.asn1.ASN1Object=function(e){var t=!0,r=null,n="00",u="00",a="";this.params=null,this.getLengthHexFromValue=function(){if(typeof this.hV>"u"||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+a.length+",v="+this.hV);var i=this.hV.length/2,c=i.toString(16);if(c.length%2==1&&(c="0"+c),i<128)return c;var h=c.length/2;if(h>15)throw new Error("ASN.1 length too long to represent by 8x: n = "+i.toString(16));var m=128+h;return m.toString(16)+c},this.tohex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.getValueHex=function(){return this.tohex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(i){this.params=i},e!=null&&e.tlv!=null&&(this.hTLV=e.tlv,this.isModified=!1)};p.asn1.DERAbstractString=function(e){p.asn1.DERAbstractString.superclass.constructor.call(this);var t=null,r=null;this.getString=function(){return this.s},this.setString=function(n){this.hTLV=null,this.isModified=!0,this.s=n,this.hV=hc(this.s).toLowerCase()},this.setStringHex=function(n){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=n},this.getFreshValueHex=function(){return this.hV},typeof e<"u"&&(typeof e=="string"?this.setString(e):typeof e.str<"u"?this.setString(e.str):typeof e.hex<"u"&&this.setStringHex(e.hex))};Fe(p.asn1.DERAbstractString,p.asn1.ASN1Object);p.asn1.DERAbstractTime=function(e){p.asn1.DERAbstractTime.superclass.constructor.call(this);var t=null,r=null;this.localDateToUTC=function(n){var u=n.getTime()+n.getTimezoneOffset()*6e4,a=new Date(u);return a},this.formatDate=function(n,u,a){var i=this.zeroPadding,c=this.localDateToUTC(n),h=String(c.getFullYear());u=="utc"&&(h=h.substr(2,2));var m=i(String(c.getMonth()+1),2),S=i(String(c.getDate()),2),E=i(String(c.getHours()),2),v=i(String(c.getMinutes()),2),g=i(String(c.getSeconds()),2),b=h+m+S+E+v+g;if(a===!0){var w=c.getMilliseconds();if(w!=0){var _=i(String(w),3);_=_.replace(/[0]+$/,""),b=b+"."+_}}return b+"Z"},this.zeroPadding=function(n,u){return n.length>=u?n:new Array(u-n.length+1).join("0")+n},this.setByParam=function(n){this.hV=null,this.hTLV=null,this.params=n},this.getString=function(){},this.setString=function(n){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.str=n},this.setByDate=function(n){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.date=n},this.setByDateValue=function(n,u,a,i,c,h){var m=new Date(Date.UTC(n,u-1,a,i,c,h,0));this.setByDate(m)},this.getFreshValueHex=function(){return this.hV}};Fe(p.asn1.DERAbstractTime,p.asn1.ASN1Object);p.asn1.DERAbstractStructured=function(e){p.asn1.DERAbstractString.superclass.constructor.call(this);var t=null;this.setByASN1ObjectArray=function(r){this.hTLV=null,this.isModified=!0,this.asn1Array=r},this.appendASN1Object=function(r){this.hTLV=null,this.isModified=!0,this.asn1Array.push(r)},this.asn1Array=new Array,typeof e<"u"&&typeof e.array<"u"&&(this.asn1Array=e.array)};Fe(p.asn1.DERAbstractStructured,p.asn1.ASN1Object);p.asn1.DERBoolean=function(e){p.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",e==!1?this.hTLV="010100":this.hTLV="0101ff"};Fe(p.asn1.DERBoolean,p.asn1.ASN1Object);p.asn1.DERInteger=function(e){p.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.params=null;var t=Bu;this.setByBigInteger=function(r){this.isModified=!0,this.params={bigint:r}},this.setByInteger=function(r){this.isModified=!0,this.params=r},this.setValueHex=function(r){this.isModified=!0,this.params={hex:r}},this.getFreshValueHex=function(){var r=this.params,n=null;if(r==null)throw new Error("value not set");if(typeof r=="object"&&r.hex!=null)return this.hV=r.hex,this.hV;if(typeof r=="number")n=new ae(String(r),10);else if(r.int!=null)n=new ae(String(r.int),10);else if(r.bigint!=null)n=r.bigint;else throw new Error("wrong parameter");return this.hV=t(n),this.hV},e!=null&&(this.params=e)};Fe(p.asn1.DERInteger,p.asn1.ASN1Object);p.asn1.DERBitString=function(e){if(e!==void 0&&typeof e.obj<"u"){var t=p.asn1.ASN1Util.newObject(e.obj);e.hex="00"+t.tohex()}p.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(r){this.hTLV=null,this.isModified=!0,this.hV=r},this.setUnusedBitsAndHexValue=function(r,n){if(r<0||7<r)throw"unused bits shall be from 0 to 7: u = "+r;var u="0"+r;this.hTLV=null,this.isModified=!0,this.hV=u+n},this.setByBinaryString=function(r){r=r.replace(/0+$/,"");var n=8-r.length%8;n==8&&(n=0),r+="0000000".substr(0,n);for(var u="",a=0;a<r.length-1;a+=8){var i=r.substr(a,8),c=parseInt(i,2).toString(16);c.length==1&&(c="0"+c),u+=c}this.hTLV=null,this.isModified=!0,this.hV="0"+n+u},this.setByBooleanArray=function(r){for(var n="",u=0;u<r.length;u++)r[u]==!0?n+="1":n+="0";this.setByBinaryString(n)},this.newFalseArray=function(r){for(var n=new Array(r),u=0;u<r;u++)n[u]=!1;return n},this.getFreshValueHex=function(){return this.hV},typeof e<"u"&&(typeof e=="string"&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):typeof e.hex<"u"?this.setHexValueIncludingUnusedBits(e.hex):typeof e.bin<"u"?this.setByBinaryString(e.bin):typeof e.array<"u"&&this.setByBooleanArray(e.array))};Fe(p.asn1.DERBitString,p.asn1.ASN1Object);p.asn1.DEROctetString=function(e){if(e!==void 0&&typeof e.obj<"u"){var t=p.asn1.ASN1Util.newObject(e.obj);e.hex=t.tohex()}p.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"};Fe(p.asn1.DEROctetString,p.asn1.DERAbstractString);p.asn1.DERNull=function(){p.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"};Fe(p.asn1.DERNull,p.asn1.ASN1Object);p.asn1.DERObjectIdentifier=function(e){p.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){var r=v0(t);if(r==null)throw new Error("malformed oid string: "+t);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueName=function(t){var r=p.asn1.x509.OID.name2oid(t);if(r!=="")this.setValueOidString(r);else throw new Error("DERObjectIdentifier oidName undefined: "+t)},this.setValueNameOrOid=function(t){t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(t){typeof t=="string"?this.setValueNameOrOid(t):t.oid!==void 0?this.setValueNameOrOid(t.oid):t.name!==void 0?this.setValueNameOrOid(t.name):t.hex!==void 0&&this.setValueHex(t.hex)},e!==void 0&&this.setByParam(e)};Fe(p.asn1.DERObjectIdentifier,p.asn1.ASN1Object);p.asn1.DEREnumerated=function(e){p.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=Bu(t)},this.setByInteger=function(t){var r=new ae(String(t),10);this.setByBigInteger(r)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},typeof e<"u"&&(typeof e.int<"u"?this.setByInteger(e.int):typeof e=="number"?this.setByInteger(e):typeof e.hex<"u"&&this.setValueHex(e.hex))};Fe(p.asn1.DEREnumerated,p.asn1.ASN1Object);p.asn1.DERUTF8String=function(e){p.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"};Fe(p.asn1.DERUTF8String,p.asn1.DERAbstractString);p.asn1.DERNumericString=function(e){p.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"};Fe(p.asn1.DERNumericString,p.asn1.DERAbstractString);p.asn1.DERPrintableString=function(e){p.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"};Fe(p.asn1.DERPrintableString,p.asn1.DERAbstractString);p.asn1.DERTeletexString=function(e){p.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"};Fe(p.asn1.DERTeletexString,p.asn1.DERAbstractString);p.asn1.DERIA5String=function(e){p.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"};Fe(p.asn1.DERIA5String,p.asn1.DERAbstractString);p.asn1.DERVisibleString=function(e){p.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="1a"};Fe(p.asn1.DERVisibleString,p.asn1.DERAbstractString);p.asn1.DERBMPString=function(e){p.asn1.DERBMPString.superclass.constructor.call(this,e),this.hT="1e"};Fe(p.asn1.DERBMPString,p.asn1.DERAbstractString);p.asn1.DERUTCTime=function(e){p.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.params=void 0,this.getFreshValueHex=function(){var t=this.params;if(this.params==null&&(t={date:new Date}),typeof t=="string")if(t.match(/^[0-9]{12}Z$/)||t.match(/^[0-9]{12}\.[0-9]+Z$/))this.hV=Pn(t);else throw new Error("malformed string for UTCTime: "+t);else if(t.str!=null)this.hV=Pn(t.str);else if(t.date==null&&t.millis==!0){var r=new Date;this.hV=Pn(this.formatDate(r,"utc",!0))}else if(t.date!=null&&t.date instanceof Date){var n=t.millis===!0;this.hV=Pn(this.formatDate(t.date,"utc",n))}else t instanceof Date&&(this.hV=Pn(this.formatDate(t,"utc")));if(this.hV==null)throw new Error("parameter not specified properly for UTCTime");return this.hV},e!=null&&this.setByParam(e)};Fe(p.asn1.DERUTCTime,p.asn1.DERAbstractTime);p.asn1.DERGeneralizedTime=function(e){p.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.params=e,this.getFreshValueHex=function(){var t=this.params;if(this.params==null&&(t={date:new Date}),typeof t=="string")if(t.match(/^[0-9]{14}Z$/)||t.match(/^[0-9]{14}\.[0-9]+Z$/))this.hV=Pn(t);else throw new Error("malformed string for GeneralizedTime: "+t);else if(t.str!=null)this.hV=Pn(t.str);else if(t.date==null&&t.millis==!0){var r=new Date;this.hV=Pn(this.formatDate(r,"gen",!0))}else if(t.date!=null&&t.date instanceof Date){var n=t.millis===!0;this.hV=Pn(this.formatDate(t.date,"gen",n))}else t instanceof Date&&(this.hV=Pn(this.formatDate(t,"gen")));if(this.hV==null)throw new Error("parameter not specified properly for GeneralizedTime");return this.hV},e!=null&&this.setByParam(e)};Fe(p.asn1.DERGeneralizedTime,p.asn1.DERAbstractTime);p.asn1.DERSequence=function(e){p.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var t="",r=0;r<this.asn1Array.length;r++){var n=this.asn1Array[r];t+=n.tohex()}return this.hV=t,this.hV}};Fe(p.asn1.DERSequence,p.asn1.DERAbstractStructured);p.asn1.DERSet=function(e){p.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,r=0;r<this.asn1Array.length;r++){var n=this.asn1Array[r];t.push(n.tohex())}return this.sortFlag==!0&&t.sort(),this.hV=t.join(""),this.hV},typeof e<"u"&&typeof e.sortflag<"u"&&e.sortflag==!1&&(this.sortFlag=!1)};Fe(p.asn1.DERSet,p.asn1.DERAbstractStructured);p.asn1.DERTaggedObject=function(e){p.asn1.DERTaggedObject.superclass.constructor.call(this);var t=p.asn1,r=je,n=r.getV,u=r.isASN1HEX,a=t.ASN1Util.newObject;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.params={tag:"a0",explicit:!0},this.setASN1Object=function(i,c,h){this.params={tag:c,explicit:i,obj:h}},this.getFreshValueHex=function(){var i=this.params;if(i.explicit==null&&(i.explicit=!0),i.tage!=null&&(i.tag=i.tage,i.explicit=!0),i.tagi!=null&&(i.tag=i.tagi,i.explicit=!1),i.str!=null)this.hV=hc(i.str);else if(i.hex!=null)this.hV=i.hex;else if(i.obj!=null){var c;i.obj instanceof t.ASN1Object?c=i.obj.tohex():typeof i.obj=="object"&&(c=a(i.obj).tohex()),i.explicit?this.hV=c:this.hV=n(c,0)}else throw new Error("str, hex nor obj not specified");return i.tag==null&&(i.tag="a0"),this.hT=i.tag,this.hTLV=null,this.isModified=!0,this.hV},this.setByParam=function(i){this.params=i},e!==void 0&&this.setByParam(e)};Fe(p.asn1.DERTaggedObject,p.asn1.ASN1Object);var je=new function(){};je.getLblen=function(e,t){if(e.substr(t+2,1)!="8")return 1;var r=parseInt(e.substr(t+3,1));return r==0?-1:0<r&&r<10?r+1:-2};je.getL=function(e,t){var r=je.getLblen(e,t);return r<1?"":e.substr(t+2,r*2)};je.getVblen=function(e,t){var r,n;return r=je.getL(e,t),r==""?-1:(r.substr(0,1)==="8"?n=new ae(r.substr(2),16):n=new ae(r,16),n.intValue())};je.getVidx=function(e,t){var r=je.getLblen(e,t);return r<0?r:t+(r+1)*2};je.getV=function(e,t){var r=je.getVidx(e,t),n=je.getVblen(e,t);return e.substr(r,n*2)};je.getTLV=function(e,t){return e.substr(t,2)+je.getL(e,t)+je.getV(e,t)};je.getTLVblen=function(e,t){return 2+je.getLblen(e,t)*2+je.getVblen(e,t)*2};je.getNextSiblingIdx=function(e,t){var r=je.getVidx(e,t),n=je.getVblen(e,t);return r+n*2};je.getChildIdx=function(e,t){var r=je,n=[],u,a,i;u=r.getVidx(e,t),a=r.getVblen(e,t)*2,e.substr(t,2)=="03"&&(u+=2,a-=2),i=0;for(var c=u;i<=a;){var h=r.getTLVblen(e,c);if(i+=h,i<=a&&n.push(c),c+=h,i>=a)break}return n};je.getNthChildIdx=function(e,t,r){var n=je.getChildIdx(e,t);return n[r]};je.getIdxbyList=function(e,t,r,n){var u=je,a,i;return r.length==0?n!==void 0&&e.substr(t,2)!==n?-1:t:(a=r.shift(),i=u.getChildIdx(e,t),a>=i.length?-1:u.getIdxbyList(e,i[a],r,n))};je.getIdxbyListEx=function(e,t,r,n){var u=je,a,i;if(r.length==0)return n!==void 0&&e.substr(t,2)!==n?-1:t;a=r.shift(),i=u.getChildIdx(e,t);for(var c=0,h=0;h<i.length;h++){var m=e.substr(i[h],2);if(typeof a=="number"&&!u.isContextTag(m)&&c==a||typeof a=="string"&&u.isContextTag(m,a))return u.getIdxbyListEx(e,i[h],r,n);u.isContextTag(m)||c++}return-1};je.getTLVbyList=function(e,t,r,n){var u=je,a=u.getIdxbyList(e,t,r,n);return a==-1||a>=e.length?null:u.getTLV(e,a)};je.getTLVbyListEx=function(e,t,r,n){var u=je,a=u.getIdxbyListEx(e,t,r,n);return a==-1?null:u.getTLV(e,a)};je.getVbyList=function(e,t,r,n,u){var a=je,i,c;return i=a.getIdxbyList(e,t,r,n),i==-1||i>=e.length?null:(c=a.getV(e,i),u===!0&&(c=c.substr(2)),c)};je.getVbyListEx=function(e,t,r,n,u){var a=je,i,c,h;return i=a.getIdxbyListEx(e,t,r,n),i==-1?null:(h=a.getV(e,i),e.substr(i,2)=="03"&&u!==!1&&(h=h.substr(2)),h)};je.getInt=function(e,t,r){r==null&&(r=-1);try{var n=e.substr(t,2);if(n!="02"&&n!="03")return r;var u=je.getV(e,t);return n=="02"?parseInt(u,16):w0(u)}catch{return r}};je.getOID=function(e,t,r){r==null&&(r=null);try{if(e.substr(t,2)!="06")return r;var n=je.getV(e,t);return mc(n)}catch{return r}};je.getOIDName=function(e,t,r){r==null&&(r=null);try{var n=je.getOID(e,t,r);if(n==r)return r;var u=p.asn1.x509.OID.oid2name(n);return u==""?n:u}catch{return r}};je.getString=function(e,t,r){r==null&&(r=null);try{var n=je.getV(e,t);return In(n)}catch{return r}};je.hextooidstr=function(e){var t=function(E,v){return E.length>=v?E:new Array(v-E.length+1).join("0")+E},r=[],n=e.substr(0,2),u=parseInt(n,16);r[0]=new String(Math.floor(u/40)),r[1]=new String(u%40);for(var a=e.substr(2),i=[],c=0;c<a.length/2;c++)i.push(parseInt(a.substr(c*2,2),16));for(var h=[],m="",c=0;c<i.length;c++)i[c]&128?m=m+t((i[c]&127).toString(2),7):(m=m+t((i[c]&127).toString(2),7),h.push(new String(parseInt(m,2))),m="");var S=r.join(".");return h.length>0&&(S=S+"."+h.join(".")),S};je.dump=function(e,t,r,n){var u=je,a=u.getV,i=u.dump,c=u.getChildIdx,h=e;e instanceof p.asn1.ASN1Object&&(h=e.tohex());var m=function(pe,P){if(pe.length<=P*2)return pe;var $=pe.substr(0,P)+"..(total "+pe.length/2+"bytes).."+pe.substr(pe.length-P,P);return $};t===void 0&&(t={ommit_long_octet:32}),r===void 0&&(r=0),n===void 0&&(n="");var S=t.ommit_long_octet,H=h.substr(r,2);if(H=="01"){var E=a(h,r);return E=="00"?n+`BOOLEAN FALSE
`:n+`BOOLEAN TRUE
`}if(H=="02"){var E=a(h,r);return n+"INTEGER "+m(E,S)+`
`}if(H=="03"){var E=a(h,r);if(u.isASN1HEX(E.substr(2))){var v=n+`BITSTRING, encapsulates
`;return v=v+i(E.substr(2),t,0,n+"  "),v}else return n+"BITSTRING "+m(E,S)+`
`}if(H=="04"){var E=a(h,r);if(u.isASN1HEX(E)){var v=n+`OCTETSTRING, encapsulates
`;return v=v+i(E,t,0,n+"  "),v}else return n+"OCTETSTRING "+m(E,S)+`
`}if(H=="05")return n+`NULL
`;if(H=="06"){var g=a(h,r),b=p.asn1.ASN1Util.oidHexToInt(g),w=p.asn1.x509.OID.oid2name(b),_=b.replace(/\./g," ");return w!=""?n+"ObjectIdentifier "+w+" ("+_+`)
`:n+"ObjectIdentifier ("+_+`)
`}if(H=="0a")return n+"ENUMERATED "+parseInt(a(h,r))+`
`;if(H=="0c")return n+"UTF8String '"+rr(a(h,r))+`'
`;if(H=="13")return n+"PrintableString '"+rr(a(h,r))+`'
`;if(H=="14")return n+"TeletexString '"+rr(a(h,r))+`'
`;if(H=="16")return n+"IA5String '"+rr(a(h,r))+`'
`;if(H=="17")return n+"UTCTime "+rr(a(h,r))+`
`;if(H=="18")return n+"GeneralizedTime "+rr(a(h,r))+`
`;if(H=="1a")return n+"VisualString '"+rr(a(h,r))+`'
`;if(H=="1e")return n+"BMPString '"+mh(a(h,r))+`'
`;if(H=="30"){if(h.substr(r,4)=="3000")return n+`SEQUENCE {}
`;var v=n+`SEQUENCE
`,A=c(h,r),C=t;if((A.length==2||A.length==3)&&h.substr(A[0],2)=="06"&&h.substr(A[A.length-1],2)=="04"){var w=u.oidname(a(h,A[0])),x=JSON.parse(JSON.stringify(t));x.x509ExtName=w,C=x}for(var N=0;N<A.length;N++)v=v+i(h,C,A[N],n+"  ");return v}if(H=="31"){for(var v=n+`SET
`,A=c(h,r),N=0;N<A.length;N++)v=v+i(h,t,A[N],n+"  ");return v}var H=parseInt(H,16);if((H&128)!=0){var ne=H&31;if((H&32)!=0){for(var v=n+"["+ne+`]
`,A=c(h,r),N=0;N<A.length;N++)v=v+i(h,t,A[N],n+"  ");return v}else{var E=a(h,r);if(je.isASN1HEX(E)){var v=n+"["+ne+`]
`;return v=v+i(E,t,0,n+"  "),v}else(E.substr(0,8)=="68747470"||t.x509ExtName==="subjectAltName"&&ne==2)&&(E=rr(E));var v=n+"["+ne+"] "+E+`
`;return v}}return n+"UNKNOWN("+H+") "+a(h,r)+`
`};je.parse=function(e){var t=je,r=t.parse,n=t.isASN1HEX,u=t.getV,a=t.getTLV,i=t.getChildIdx,c=p.asn1,h=c.ASN1Util.oidHexToInt,m=c.x509.OID.oid2name,S=rr,E=mh,v=r_,g={"0c":"utf8str",12:"numstr",13:"prnstr",14:"telstr",16:"ia5str",17:"utctime",18:"gentime","1a":"visstr","1e":"bmpstr",30:"seq",31:"set"},b=function($){for(var j=[],R=i($,0),q=0;q<R.length;q++){var Q=R[q],V=a($,Q),z=r(V);j.push(z)}return j},w=e.substr(0,2),_={},A=u(e,0);if(w=="01")return e=="0101ff"?{bool:!0}:{bool:!1};if(w=="02")return{int:{hex:A}};if(w=="03")try{if(A.substr(0,2)!="00")throw"not encap";var C=A.substr(2);if(!n(C))throw"not encap";return{bitstr:{obj:r(C)}}}catch{var x=null;return A.length<=10&&(x=A0(A)),x==null?{bitstr:{hex:A}}:{bitstr:{bin:x}}}else if(w=="04")try{if(!n(A))throw"not encap";return{octstr:{obj:r(A)}}}catch{return{octstr:{hex:A}}}else{if(w=="05")return{null:""};if(w=="06"){var N=h(A),H=m(N);return H==""?{oid:N}:{oid:H}}else{if(w=="0a")return A.length>4?{enum:{hex:A}}:{enum:parseInt(A,16)};if(w=="30"||w=="31")return _[g[w]]=b(e),_;if(w=="14"){var ne=v(A);return _[g[w]]={str:ne},_}else if(w=="1e"){var ne=E(A);return _[g[w]]={str:ne},_}else if(":0c:12:13:16:17:18:1a:".indexOf(w)!=-1){var ne=S(A);return _[g[w]]={str:ne},_}else if(w.match(/^8[0-9]$/)){var ne=S(A);return ne==null|ne==""?{tag:{tag:w,explicit:!1,hex:A}}:ne.match(/[\x00-\x1F\x7F-\x9F]/)!=null||ne.match(/[\u0000-\u001F\u0080\u009F]/)!=null?{tag:{tag:w,explicit:!1,hex:A}}:{tag:{tag:w,explicit:!1,str:ne}}}else if(w.match(/^a[0-9]$/))try{if(!n(A))throw new Error("not encap");return{tag:{tag:w,explicit:!0,obj:r(A)}}}catch{return{tag:{tag:w,explicit:!0,hex:A}}}else{var pe=new p.asn1.ASN1Object;pe.hV=A;var P=pe.getLengthHexFromValue();return{asn1:{tlv:w+P+A}}}}}};je.isContextTag=function(e,t){e=e.toLowerCase();var r,n;try{r=parseInt(e,16)}catch{return-1}if(t===void 0)return(r&192)==128;try{var u=t.match(/^\[[0-9]+\]$/);return u==null||(n=parseInt(t.substr(1,t.length-1),10),n>31)?!1:(r&192)==128&&(r&31)==n}catch{return!1}};je.isASN1HEX=function(e){var t=je;if(e.length%2==1)return!1;var r=t.getVblen(e,0),n=e.substr(0,2),u=t.getL(e,0),a=e.length-n.length-u.length;return a==r*2};je.checkStrictDER=function(e,t,r,n,u){var a=je;if(r===void 0){if(typeof e!="string")throw new Error("not hex string");if(e=e.toLowerCase(),!p.lang.String.isHex(e))throw new Error("not hex string");r=e.length,n=e.length/2,n<128?u=1:u=Math.ceil(n.toString(16))+1}var i=a.getL(e,t);if(i.length>u*2)throw new Error("L of TLV too long: idx="+t);var c=a.getVblen(e,t);if(c>n)throw new Error("value of L too long than hex: idx="+t);var h=a.getTLV(e,t),m=h.length-2-a.getL(e,t).length;if(m!==c*2)throw new Error("V string length and L's value not the same:"+m+"/"+c*2);if(t===0&&e.length!=h.length)throw new Error("total length and TLV length unmatch:"+e.length+"!="+h.length);var S=e.substr(t,2);if(S==="02"){var E=a.getVidx(e,t);if(e.substr(E,2)=="00"&&e.charCodeAt(E+2)<56)throw new Error("not least zeros for DER INTEGER")}if(parseInt(S,16)&32){for(var v=a.getVblen(e,t),g=0,b=a.getChildIdx(e,t),w=0;w<b.length;w++){var _=a.getTLV(e,b[w]);g+=_.length,a.checkStrictDER(e,b[w],r,n,u)}if(v*2!=g)throw new Error("sum of children's TLV length and L unmatch: "+v*2+"!="+g)}};je.oidname=function(e){var t=p.asn1;p.lang.String.isHex(e)&&(e=t.ASN1Util.oidHexToInt(e));var r=t.x509.OID.oid2name(e);return r===""&&(r=e),r};(typeof p>"u"||!p)&&(p={});(typeof p.asn1>"u"||!p.asn1)&&(p.asn1={});(typeof p.asn1.x509>"u"||!p.asn1.x509)&&(p.asn1.x509={});p.asn1.x509.Certificate=function(e){p.asn1.x509.Certificate.superclass.constructor.call(this);var t=p,r=t.asn1,n=r.DERBitString,u=r.DERSequence,a=r.x509,i=a.TBSCertificate,c=a.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(h){this.params=h},this.sign=function(){var h=this.params,m=h.sigalg;h.sigalg.name!=null&&(m=h.sigalg.name);var S=h.tbsobj.tohex(),E=new p.crypto.Signature({alg:m});E.init(h.cakey),E.updateHex(S),h.sighex=E.sign()},this.getPEM=function(){return un(this.tohex(),"CERTIFICATE")},this.tohex=function(){var h=this.params;if((h.tbsobj==null||h.tbsobj==null)&&(h.tbsobj=new i(h)),h.sighex==null&&h.cakey!=null&&this.sign(),h.sighex==null)throw new Error("sighex or cakey parameter not defined");var m=[];m.push(h.tbsobj),m.push(new c({name:h.sigalg})),m.push(new n({hex:"00"+h.sighex}));var S=new u({array:m});return S.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&(this.params=e)};Fe(p.asn1.x509.Certificate,p.asn1.ASN1Object);p.asn1.x509.TBSCertificate=function(e){p.asn1.x509.TBSCertificate.superclass.constructor.call(this);var t=p,r=t.asn1,n=r.x509,u=r.DERTaggedObject,a=r.DERInteger,i=r.DERSequence,c=n.AlgorithmIdentifier,h=n.Time,m=n.X500Name,S=n.Extensions,E=n.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(v){this.params=v},this.tohex=function(){var v=[],g=this.params;if(g.version!=null||g.version!=1){var b=2;g.version!=null&&(b=g.version-1);var w=new u({obj:new a({int:b})});v.push(w)}v.push(new a(g.serial)),v.push(new c({name:g.sigalg})),v.push(new m(g.issuer)),v.push(new i({array:[new h(g.notbefore),new h(g.notafter)]})),v.push(new m(g.subject)),v.push(new E(Nt.getKey(g.sbjpubkey))),g.ext!==void 0&&g.ext.length>0&&v.push(new u({tag:"a3",obj:new S(g.ext)}));var _=new p.asn1.DERSequence({array:v});return _.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Fe(p.asn1.x509.TBSCertificate,p.asn1.ASN1Object);p.asn1.x509.Extensions=function(e){p.asn1.x509.Extensions.superclass.constructor.call(this);var t=p,r=t.asn1,n=r.DERSequence,u=r.x509;this.aParam=[],this.setByParam=function(a){this.aParam=a},this.tohex=function(){for(var a=[],i=0;i<this.aParam.length;i++){var c=this.aParam[i],h=c.extname,m=null;if(c.extn!=null)m=new u.PrivateExtension(c);else if(h=="subjectKeyIdentifier")m=new u.SubjectKeyIdentifier(c);else if(h=="keyUsage")m=new u.KeyUsage(c);else if(h=="subjectAltName")m=new u.SubjectAltName(c);else if(h=="issuerAltName")m=new u.IssuerAltName(c);else if(h=="basicConstraints")m=new u.BasicConstraints(c);else if(h=="nameConstraints")m=new u.NameConstraints(c);else if(h=="cRLDistributionPoints")m=new u.CRLDistributionPoints(c);else if(h=="certificatePolicies")m=new u.CertificatePolicies(c);else if(h=="policyMappings")m=new u.PolicyMappings(c);else if(h=="policyConstraints")m=new u.PolicyConstraints(c);else if(h=="inhibitAnyPolicy")m=new u.InhibitAnyPolicy(c);else if(h=="authorityKeyIdentifier")m=new u.AuthorityKeyIdentifier(c);else if(h=="extKeyUsage")m=new u.ExtKeyUsage(c);else if(h=="authorityInfoAccess")m=new u.AuthorityInfoAccess(c);else if(h=="cRLNumber")m=new u.CRLNumber(c);else if(h=="cRLReason")m=new u.CRLReason(c);else if(h=="ocspNonce")m=new u.OCSPNonce(c);else if(h=="ocspNoCheck")m=new u.OCSPNoCheck(c);else if(h=="adobeTimeStamp")m=new u.AdobeTimeStamp(c);else if(h=="subjectDirectoryAttributes")m=new u.SubjectDirectoryAttributes(c);else throw new Error("extension not supported:"+JSON.stringify(c));m!=null&&a.push(m)}var S=new n({array:a});return S.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Fe(p.asn1.x509.Extensions,p.asn1.ASN1Object);p.asn1.x509.Extension=function(e){p.asn1.x509.Extension.superclass.constructor.call(this);var t=null,r=p,n=r.asn1,u=n.DERObjectIdentifier,a=n.DEROctetString,i=n.DERBitString,c=n.DERBoolean,h=n.DERSequence;this.tohex=function(){var m=new u({oid:this.oid}),S=new a({hex:this.getExtnValueHex()}),E=new Array;E.push(m),this.critical&&E.push(new c),E.push(S);var v=new h({array:E});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},this.critical=!1,e!==void 0&&e.critical!==void 0&&(this.critical=e.critical)};Fe(p.asn1.x509.Extension,p.asn1.ASN1Object);p.asn1.x509.KeyUsage=function(e){p.asn1.x509.KeyUsage.superclass.constructor.call(this,e);var t=Error,r={digitalSignature:0,nonRepudiation:1,keyEncipherment:2,dataEncipherment:3,keyAgreement:4,keyCertSign:5,cRLSign:6,encipherOnly:7,decipherOnly:8};this.getExtnValueHex=function(){var n=this.getBinValue();return this.asn1ExtnValue=new p.asn1.DERBitString({bin:n}),this.asn1ExtnValue.tohex()},this.getBinValue=function(){var n=this.params;if(typeof n!="object"||typeof n.names!="object"&&typeof n.bin!="string")throw new t("parameter not yet set");if(n.names!=null)return oc(n.names,r);if(n.bin!=null)return n.bin;throw new t("parameter not set properly")},this.oid="2.5.29.15",e!==void 0&&(this.params=e)};Fe(p.asn1.x509.KeyUsage,p.asn1.x509.Extension);p.asn1.x509.BasicConstraints=function(e){p.asn1.x509.BasicConstraints.superclass.constructor.call(this,e);var t=p.asn1,r=t.DERBoolean,n=t.DERInteger,u=t.DERSequence,a=!1,i=-1;this.getExtnValueHex=function(){var c=new Array;this.cA&&c.push(new r),this.pathLen>-1&&c.push(new n({int:this.pathLen}));var h=new u({array:c});return this.asn1ExtnValue=h,this.asn1ExtnValue.tohex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,e!==void 0&&(e.cA!==void 0&&(this.cA=e.cA),e.pathLen!==void 0&&(this.pathLen=e.pathLen))};Fe(p.asn1.x509.BasicConstraints,p.asn1.x509.Extension);p.asn1.x509.CRLDistributionPoints=function(e){p.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,e);var t=p,r=t.asn1,n=r.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.setByDPArray=function(u){for(var a=[],i=0;i<u.length;i++)if(u[i]instanceof p.asn1.ASN1Object)a.push(u[i]);else{var c=new n.DistributionPoint(u[i]);a.push(c)}this.asn1ExtnValue=new r.DERSequence({array:a})},this.setByOneURI=function(u){var a=new n.DistributionPoint({fulluri:u});this.setByDPArray([a])},this.oid="2.5.29.31",e!==void 0&&(e.array!==void 0?this.setByDPArray(e.array):e.uri!==void 0&&this.setByOneURI(e.uri))};Fe(p.asn1.x509.CRLDistributionPoints,p.asn1.x509.Extension);p.asn1.x509.DistributionPoint=function(e){p.asn1.x509.DistributionPoint.superclass.constructor.call(this);var t=null,r=p,n=r.asn1,u=n.x509.DistributionPointName;this.tohex=function(){var a=new n.DERSequence;if(this.asn1DP!=null){var i=new n.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});a.appendASN1Object(i)}return this.hTLV=a.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(e.dpobj!==void 0?this.asn1DP=e.dpobj:e.dpname!==void 0?this.asn1DP=new u(e.dpname):e.fulluri!==void 0&&(this.asn1DP=new u({full:[{uri:e.fulluri}]})))};Fe(p.asn1.x509.DistributionPoint,p.asn1.ASN1Object);p.asn1.x509.DistributionPointName=function(e){p.asn1.x509.DistributionPointName.superclass.constructor.call(this);var t=null,r=null,n=null,u=null,a=p,i=a.asn1,c=i.DERTaggedObject;if(this.tohex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new c({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0)if(i.x509.GeneralNames.prototype.isPrototypeOf(e))this.type="full",this.tag="a0",this.asn1V=e;else if(e.full!==void 0)this.type="full",this.tag="a0",this.asn1V=new i.x509.GeneralNames(e.full);else throw new Error("This class supports GeneralNames only as argument")};Fe(p.asn1.x509.DistributionPointName,p.asn1.ASN1Object);p.asn1.x509.CertificatePolicies=function(e){p.asn1.x509.CertificatePolicies.superclass.constructor.call(this,e);var t=p,r=t.asn1,n=r.x509,u=r.DERSequence,a=n.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var i=[],c=0;c<this.params.array.length;c++)i.push(new a(this.params.array[c]));var h=new u({array:i});return this.asn1ExtnValue=h,this.asn1ExtnValue.tohex()},this.oid="2.5.29.32",e!==void 0&&(this.params=e)};Fe(p.asn1.x509.CertificatePolicies,p.asn1.x509.Extension);p.asn1.x509.PolicyInformation=function(e){p.asn1.x509.PolicyInformation.superclass.constructor.call(this,e);var t=p.asn1,r=t.DERSequence,n=t.DERObjectIdentifier,u=t.x509.PolicyQualifierInfo;this.params=null,this.tohex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var a=[new n(this.params.policyoid)];if(this.params.array!==void 0){for(var i=[],c=0;c<this.params.array.length;c++)i.push(new u(this.params.array[c]));i.length>0&&a.push(new r({array:i}))}var h=new r({array:a});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(this.params=e)};Fe(p.asn1.x509.PolicyInformation,p.asn1.ASN1Object);p.asn1.x509.PolicyQualifierInfo=function(e){p.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,e);var t=p.asn1,r=t.DERSequence,n=t.DERIA5String,u=t.DERObjectIdentifier,a=t.x509.UserNotice;this.params=null,this.tohex=function(){if(this.params.cps!==void 0){var i=new r({array:[new u({oid:"1.3.6.1.5.5.7.2.1"}),new n({str:this.params.cps})]});return i.tohex()}if(this.params.unotice!=null){var i=new r({array:[new u({oid:"1.3.6.1.5.5.7.2.2"}),new a(this.params.unotice)]});return i.tohex()}},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(this.params=e)};Fe(p.asn1.x509.PolicyQualifierInfo,p.asn1.ASN1Object);p.asn1.x509.UserNotice=function(e){p.asn1.x509.UserNotice.superclass.constructor.call(this,e);var t=p.asn1.DERSequence,r=p.asn1.DERInteger,n=p.asn1.x509.DisplayText,u=p.asn1.x509.NoticeReference;this.params=null,this.tohex=function(){var a=[];this.params.noticeref!==void 0&&a.push(new u(this.params.noticeref)),this.params.exptext!==void 0&&a.push(new n(this.params.exptext));var i=new t({array:a});return i.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(this.params=e)};Fe(p.asn1.x509.UserNotice,p.asn1.ASN1Object);p.asn1.x509.NoticeReference=function(e){p.asn1.x509.NoticeReference.superclass.constructor.call(this,e);var t=p.asn1.DERSequence,r=p.asn1.DERInteger,n=p.asn1.x509.DisplayText;this.params=null,this.tohex=function(){var u=[];if(this.params.org!==void 0&&u.push(new n(this.params.org)),this.params.noticenum!==void 0){for(var a=[],i=this.params.noticenum,c=0;c<i.length;c++)a.push(new r(i[c]));u.push(new t({array:a}))}if(u.length==0)throw new Error("parameter is empty");var h=new t({array:u});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(this.params=e)};Fe(p.asn1.x509.NoticeReference,p.asn1.ASN1Object);p.asn1.x509.DisplayText=function(e){p.asn1.x509.DisplayText.superclass.constructor.call(this,e),this.hT="0c",e!==void 0&&(e.type==="ia5"?this.hT="16":e.type==="vis"?this.hT="1a":e.type==="bmp"&&(this.hT="1e"))};Fe(p.asn1.x509.DisplayText,p.asn1.DERAbstractString);p.asn1.x509.PolicyMappings=function(e){p.asn1.x509.PolicyMappings.superclass.constructor.call(this,e);var t=p,r=t.asn1,n=r.x509,u=r.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){for(var a=this.params,i=[],c=0;c<a.array.length;c++){var h=a.array[c];i.push({seq:[{oid:h[0]},{oid:h[1]}]})}return this.asn1ExtnValue=u({seq:i}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.33",e!==void 0&&(this.params=e)};Fe(p.asn1.x509.PolicyMappings,p.asn1.x509.Extension);p.asn1.x509.PolicyConstraints=function(e){p.asn1.x509.PolicyConstraints.superclass.constructor.call(this,e);var t=p,r=t.asn1,n=r.x509,u=r.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){var a=this.params,i=[];return a.reqexp!=null&&i.push({tag:{tagi:"80",obj:{int:a.reqexp}}}),a.inhibit!=null&&i.push({tag:{tagi:"81",obj:{int:a.inhibit}}}),this.asn1ExtnValue=u({seq:i}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.36",e!==void 0&&(this.params=e)};Fe(p.asn1.x509.PolicyConstraints,p.asn1.x509.Extension);p.asn1.x509.InhibitAnyPolicy=function(e){p.asn1.x509.InhibitAnyPolicy.superclass.constructor.call(this,e);var t=p,r=t.asn1,n=r.x509,u=r.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=u({int:this.params.skip}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.54",e!==void 0&&(this.params=e)};Fe(p.asn1.x509.InhibitAnyPolicy,p.asn1.x509.Extension);p.asn1.x509.NameConstraints=function(e){p.asn1.x509.NameConstraints.superclass.constructor.call(this,e);var t=p,r=t.asn1,n=r.x509,u=r.ASN1Util.newObject,a=n.GeneralSubtree;this.params=null,this.getExtnValueHex=function(){var i=this.params,c=[];if(i.permit!=null&&i.permit.length!=null){for(var h=[],m=0;m<i.permit.length;m++)h.push(new a(i.permit[m]));c.push({tag:{tagi:"a0",obj:{seq:h}}})}if(i.exclude!=null&&i.exclude.length!=null){for(var S=[],m=0;m<i.exclude.length;m++)S.push(new a(i.exclude[m]));c.push({tag:{tagi:"a1",obj:{seq:S}}})}return this.asn1ExtnValue=u({seq:c}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.30",e!==void 0&&(this.params=e)};Fe(p.asn1.x509.NameConstraints,p.asn1.x509.Extension);p.asn1.x509.GeneralSubtree=function(e){p.asn1.x509.GeneralSubtree.superclass.constructor.call(this);var t=p.asn1,r=t.x509,n=r.GeneralName,u=t.ASN1Util.newObject;this.params=null,this.setByParam=function(a){this.params=a},this.tohex=function(){var a=this.params,i=[new n(a)];a.min!=null&&i.push({tag:{tagi:"80",obj:{int:a.min}}}),a.max!=null&&i.push({tag:{tagi:"81",obj:{int:a.max}}});var c=u({seq:i});return c.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Fe(p.asn1.x509.GeneralSubtree,p.asn1.ASN1Object);p.asn1.x509.ExtKeyUsage=function(e){p.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,e);var t=p,r=t.asn1;this.setPurposeArray=function(n){this.asn1ExtnValue=new r.DERSequence;for(var u=0;u<n.length;u++){var a=new r.DERObjectIdentifier(n[u]);this.asn1ExtnValue.appendASN1Object(a)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.37",e!==void 0&&e.array!==void 0&&this.setPurposeArray(e.array)};Fe(p.asn1.x509.ExtKeyUsage,p.asn1.x509.Extension);p.asn1.x509.AuthorityKeyIdentifier=function(e){p.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,e);var t=p,r=t.asn1,n=r.DERTaggedObject,u=r.x509.GeneralNames,a=t.crypto.Util.isKey;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var i=new Array;this.asn1KID&&i.push(new n({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&i.push(new n({explicit:!1,tag:"a1",obj:new u([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&i.push(new n({explicit:!1,tag:"82",obj:this.asn1CertSN}));var c=new r.DERSequence({array:i});return this.asn1ExtnValue=c,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(i){if(i.str!==void 0||i.hex!==void 0)this.asn1KID=new p.asn1.DEROctetString(i);else if(typeof i=="object"&&p.crypto.Util.isKey(i)||typeof i=="string"&&i.indexOf("BEGIN ")!=-1){var c=i;typeof i=="string"&&(c=Nt.getKey(i));var h=Nt.getKeyID(c);this.asn1KID=new p.asn1.DEROctetString({hex:h})}},this.setCertIssuerByParam=function(i){i.str!==void 0||i.ldapstr!==void 0||i.hex!==void 0||i.certsubject!==void 0||i.certissuer!==void 0?this.asn1CertIssuer=new p.asn1.x509.X500Name(i):typeof i=="string"&&i.indexOf("BEGIN ")!=-1&&i.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new p.asn1.x509.X500Name({certissuer:i}))},this.setCertSNByParam=function(i){if(i.str!==void 0||i.bigint!==void 0||i.hex!==void 0)this.asn1CertSN=new p.asn1.DERInteger(i);else if(typeof i=="string"&&i.indexOf("BEGIN ")!=-1&&i.indexOf("CERTIFICATE")){var c=new ht;c.readCertPEM(i);var h=c.getSerialNumberHex();this.asn1CertSN=new p.asn1.DERInteger({hex:h})}},this.oid="2.5.29.35",e!==void 0&&(e.kid!==void 0&&this.setKIDByParam(e.kid),e.issuer!==void 0&&this.setCertIssuerByParam(e.issuer),e.sn!==void 0&&this.setCertSNByParam(e.sn),e.issuersn!==void 0&&typeof e.issuersn=="string"&&e.issuersn.indexOf("BEGIN ")!=-1&&e.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(e.issuersn),this.setCertIssuerByParam(e.issuersn)))};Fe(p.asn1.x509.AuthorityKeyIdentifier,p.asn1.x509.Extension);p.asn1.x509.SubjectKeyIdentifier=function(e){p.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,e);var t=p,r=t.asn1,n=r.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(u){if(u.str!==void 0||u.hex!==void 0)this.asn1KID=new n(u);else if(typeof u=="object"&&p.crypto.Util.isKey(u)||typeof u=="string"&&u.indexOf("BEGIN")!=-1){var a=u;typeof u=="string"&&(a=Nt.getKey(u));var i=Nt.getKeyID(a);this.asn1KID=new p.asn1.DEROctetString({hex:i})}},this.oid="2.5.29.14",e!==void 0&&e.kid!==void 0&&this.setKIDByParam(e.kid)};Fe(p.asn1.x509.SubjectKeyIdentifier,p.asn1.x509.Extension);p.asn1.x509.AuthorityInfoAccess=function(e){p.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,e),this.setAccessDescriptionArray=function(t){for(var r=new Array,n=p,u=n.asn1,a=u.DERSequence,i=u.DERObjectIdentifier,c=u.x509.GeneralName,h=0;h<t.length;h++){var m,S=t[h];if(S.ocsp!==void 0)m=new a({array:[new i({oid:"1.3.6.1.5.5.7.48.1"}),new c({uri:S.ocsp})]});else if(S.caissuer!==void 0)m=new a({array:[new i({oid:"1.3.6.1.5.5.7.48.2"}),new c({uri:S.caissuer})]});else throw new Error("unknown AccessMethod parameter: "+JSON.stringify(S));r.push(m)}this.asn1ExtnValue=new a({array:r})},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.1.1",e!==void 0&&e.array!==void 0&&this.setAccessDescriptionArray(e.array)};Fe(p.asn1.x509.AuthorityInfoAccess,p.asn1.x509.Extension);p.asn1.x509.SubjectAltName=function(e){p.asn1.x509.SubjectAltName.superclass.constructor.call(this,e),this.setNameArray=function(t){this.asn1ExtnValue=new p.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.17",e!==void 0&&e.array!==void 0&&this.setNameArray(e.array)};Fe(p.asn1.x509.SubjectAltName,p.asn1.x509.Extension);p.asn1.x509.IssuerAltName=function(e){p.asn1.x509.IssuerAltName.superclass.constructor.call(this,e),this.setNameArray=function(t){this.asn1ExtnValue=new p.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.18",e!==void 0&&e.array!==void 0&&this.setNameArray(e.array)};Fe(p.asn1.x509.IssuerAltName,p.asn1.x509.Extension);p.asn1.x509.SubjectDirectoryAttributes=function(e){p.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,e);var t=p.asn1,r=t.DERSequence,n=t.ASN1Util.newObject,u=t.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var a=[],i=0;i<this.params.array.length;i++){var c=this.params.array[i];if(c.attr!=null&&c.array!=null){var h={seq:[{oid:c.attr},{set:c.array}]};a.push(n(h));continue}var m={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(c.attr=="dateOfBirth")m.seq[0].oid=u(c.attr),m.seq[1].set[0]={gentime:c.str};else if(c.attr=="placeOfBirth")m.seq[0].oid=u(c.attr),m.seq[1].set[0]={utf8str:c.str};else if(c.attr=="gender")m.seq[0].oid=u(c.attr),m.seq[1].set[0]={prnstr:c.str};else if(c.attr=="countryOfCitizenship")m.seq[0].oid=u(c.attr),m.seq[1].set[0]={prnstr:c.str};else if(c.attr=="countryOfResidence")m.seq[0].oid=u(c.attr),m.seq[1].set[0]={prnstr:c.str};else throw new Error("unsupported attribute: "+c.attr);a.push(new n(m))}var S=new r({array:a});return this.asn1ExtnValue=S,this.asn1ExtnValue.tohex()},this.oid="2.5.29.9",e!==void 0&&(this.params=e)};Fe(p.asn1.x509.SubjectDirectoryAttributes,p.asn1.x509.Extension);p.asn1.x509.PrivateExtension=function(e){p.asn1.x509.PrivateExtension.superclass.constructor.call(this,e);var t=p,r=t.lang.String.isHex,n=t.asn1,u=n.x509.OID.name2oid,a=n.ASN1Util.newObject;this.params=null,this.setByParam=function(i){this.oid=u(i.extname),this.params=i},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var i=this.params.extn;if(typeof i=="string"&&r(i))return i;if(typeof i=="object")try{return a(i).tohex()}catch{}throw new Error("unsupported extn value")},e!=null&&this.setByParam(e)};Fe(p.asn1.x509.PrivateExtension,p.asn1.x509.Extension);p.asn1.x509.CRL=function(e){p.asn1.x509.CRL.superclass.constructor.call(this);var t=p,r=t.asn1,n=r.DERSequence,u=r.DERBitString,a=r.x509,i=a.AlgorithmIdentifier,c=a.TBSCertList;this.params=void 0,this.setByParam=function(h){this.params=h},this.sign=function(){var h=new c(this.params).tohex(),m=new p.crypto.Signature({alg:this.params.sigalg});m.init(this.params.cakey),m.updateHex(h);var S=m.sign();this.params.sighex=S},this.getPEM=function(){return un(this.tohex(),"X509 CRL")},this.tohex=function(){var h=this.params;if(h.tbsobj==null&&(h.tbsobj=new c(h)),h.sighex==null&&h.cakey!=null&&this.sign(),h.sighex==null)throw new Error("sighex or cakey parameter not defined");var m=[];m.push(h.tbsobj),m.push(new i({name:h.sigalg})),m.push(new u({hex:"00"+h.sighex}));var S=new n({array:m});return S.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&(this.params=e)};Fe(p.asn1.x509.CRL,p.asn1.ASN1Object);p.asn1.x509.TBSCertList=function(e){p.asn1.x509.TBSCertList.superclass.constructor.call(this);var t=p,r=t.asn1,n=r.DERInteger,u=r.DERSequence,a=r.DERTaggedObject,i=r.DERObjectIdentifier,c=r.x509,h=c.AlgorithmIdentifier,m=c.Time,S=c.Extensions,E=c.X500Name;this.params=null,this.setByParam=function(v){this.params=v},this.getRevCertSequence=function(){for(var v=[],g=this.params.revcert,b=0;b<g.length;b++){var w=[new n(g[b].sn),new m(g[b].date)];g[b].ext!=null&&w.push(new S(g[b].ext)),v.push(new u({array:w}))}return new u({array:v})},this.tohex=function(){var v=[],g=this.params;if(g.version!=null){var b=g.version-1,w=new n({int:b});v.push(w)}if(v.push(new h({name:g.sigalg})),v.push(new E(g.issuer)),v.push(new m(g.thisupdate)),g.nextupdate!=null&&v.push(new m(g.nextupdate)),g.revcert!=null&&v.push(this.getRevCertSequence()),g.ext!=null){var _=new S(g.ext);v.push(new a({tag:"a0",explicit:!0,obj:_}))}var A=new u({array:v});return A.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Fe(p.asn1.x509.TBSCertList,p.asn1.ASN1Object);p.asn1.x509.CRLEntry=function(e){p.asn1.x509.CRLEntry.superclass.constructor.call(this);var t=null,r=null,n=p,u=n.asn1;this.setCertSerial=function(a){this.sn=new u.DERInteger(a)},this.setRevocationDate=function(a){this.time=new u.x509.Time(a)},this.tohex=function(){var a=new u.DERSequence({array:[this.sn,this.time]});return this.TLV=a.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(e.time!==void 0&&this.setRevocationDate(e.time),e.sn!==void 0&&this.setCertSerial(e.sn))};Fe(p.asn1.x509.CRLEntry,p.asn1.ASN1Object);p.asn1.x509.CRLNumber=function(e){p.asn1.x509.CRLNumber.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new p.asn1.DERInteger(this.params.num),this.asn1ExtnValue.tohex()},this.oid="2.5.29.20",e!=null&&(this.params=e)};Fe(p.asn1.x509.CRLNumber,p.asn1.x509.Extension);p.asn1.x509.CRLReason=function(e){p.asn1.x509.CRLReason.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new p.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.tohex()},this.oid="2.5.29.21",e!=null&&(this.params=e)};Fe(p.asn1.x509.CRLReason,p.asn1.x509.Extension);p.asn1.x509.OCSPNonce=function(e){p.asn1.x509.OCSPNonce.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new p.asn1.DEROctetString(this.params),this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.2",e!=null&&(this.params=e)};Fe(p.asn1.x509.OCSPNonce,p.asn1.x509.Extension);p.asn1.x509.OCSPNoCheck=function(e){p.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new p.asn1.DERNull,this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.5",e!=null&&(this.params=e)};Fe(p.asn1.x509.OCSPNoCheck,p.asn1.x509.Extension);p.asn1.x509.AdobeTimeStamp=function(e){p.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,e);var t=p,r=t.asn1,n=r.DERInteger,u=r.DERBoolean,a=r.DERSequence,i=r.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var c=this.params,h=[new n(1)];return h.push(new i({uri:c.uri})),c.reqauth!=null&&h.push(new u(c.reqauth)),this.asn1ExtnValue=new a({array:h}),this.asn1ExtnValue.tohex()},this.oid="1.2.840.113583.1.1.9.1",e!==void 0&&this.setByParam(e)};Fe(p.asn1.x509.AdobeTimeStamp,p.asn1.x509.Extension);p.asn1.x509.X500Name=function(e){p.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var t=p,r=t.asn1,n=r.x509,u=n.RDN,a=Fr;this.setByString=function(i,c){c!==void 0&&(this.sRule=c);var h=i.split("/");h.shift();for(var m=[],S=0;S<h.length;S++)if(h[S].match(/^[^=]+=.+$/))m.push(h[S]);else{var E=m.length-1;m[E]=m[E]+"/"+h[S]}for(var S=0;S<m.length;S++)this.asn1Array.push(new u({str:m[S],rule:this.sRule}))},this.setByLdapString=function(i,c){c!==void 0&&(this.sRule=c);var h=n.X500Name.ldapToCompat(i);this.setByString(h,c)},this.setByObject=function(i,c){c!==void 0&&(this.sRule=c);for(var h in i)if(i.hasOwnProperty(h)){var m=new u({str:h+"="+i[h],rule:this.sRule});this.asn1Array?this.asn1Array.push(m):this.asn1Array=[m]}},this.setByParam=function(i){if(i.rule!==void 0&&(this.sRule=i.rule),i.array!==void 0)this.paramArray=i.array;else if(i.str!==void 0)this.setByString(i.str);else if(i.ldapstr!==void 0)this.setByLdapString(i.ldapstr);else if(i.hex!==void 0)this.hTLV=i.hex;else if(i.certissuer!==void 0){var c=new ht;c.readCertPEM(i.certissuer),this.hTLV=c.getIssuerHex()}else if(i.certsubject!==void 0){var c=new ht;c.readCertPEM(i.certsubject),this.hTLV=c.getSubjectHex()}else typeof i=="object"&&i.certsubject===void 0&&i.certissuer===void 0&&this.setByObject(i)},this.tohex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var i=0;i<this.paramArray.length;i++){var c={array:this.paramArray[i]};this.sRule!="utf8"&&(c.rule=this.sRule);var h=new u(c);this.asn1Array.push(h)}var m=new r.DERSequence({array:this.asn1Array});return this.hTLV=m.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Fe(p.asn1.x509.X500Name,p.asn1.ASN1Object);p.asn1.x509.X500Name.compatToLDAP=function(e){if(e.substr(0,1)!=="/")throw"malformed input";var t="";e=e.substr(1);var r=e.split("/");return r.reverse(),r=r.map(function(n){return n.replace(/,/,"\\,")}),r.join(",")};p.asn1.x509.X500Name.onelineToLDAP=function(e){return p.asn1.x509.X500Name.compatToLDAP(e)};p.asn1.x509.X500Name.ldapToCompat=function(e){for(var t=e.split(","),r=!1,n=[],u=0;t.length>0;u++){var a=t.shift();if(r===!0){var i=n.pop(),c=(i+","+a).replace(/\\,/g,",");n.push(c),r=!1}else n.push(a);a.substr(-1,1)==="\\"&&(r=!0)}return n=n.map(function(h){return h.replace("/","\\/")}),n.reverse(),"/"+n.join("/")};p.asn1.x509.X500Name.ldapToOneline=function(e){return p.asn1.x509.X500Name.ldapToCompat(e)};p.asn1.x509.RDN=function(e){p.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var t=p.asn1.x509.AttributeTypeAndValue;this.setByParam=function(r){r.rule!==void 0&&(this.sRule=r.rule),r.str!==void 0&&this.addByMultiValuedString(r.str),r.array!==void 0&&(this.paramArray=r.array)},this.addByString=function(r){this.asn1Array.push(new p.asn1.x509.AttributeTypeAndValue({str:r,rule:this.sRule}))},this.addByMultiValuedString=function(r){for(var n=p.asn1.x509.RDN.parseString(r),u=0;u<n.length;u++)this.addByString(n[u])},this.tohex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var r=0;r<this.paramArray.length;r++){var n=this.paramArray[r];n.rule!==void 0&&this.sRule!="utf8"&&(n.rule=this.sRule);var u=new t(n);this.asn1Array.push(u)}var a=new p.asn1.DERSet({array:this.asn1Array});return this.TLV=a.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Fe(p.asn1.x509.RDN,p.asn1.ASN1Object);p.asn1.x509.RDN.parseString=function(e){for(var t=e.split(/\+/),r=!1,n=[],u=0;t.length>0;u++){var a=t.shift();if(r===!0){var i=n.pop(),c=(i+"+"+a).replace(/\\\+/g,"+");n.push(c),r=!1}else n.push(a);a.substr(-1,1)==="\\"&&(r=!0)}for(var h=!1,m=[],u=0;n.length>0;u++){var a=n.shift();if(h===!0){var S=m.pop();if(a.match(/"$/)){var c=(S+"+"+a).replace(/^([^=]+)="(.*)"$/,"$1=$2");m.push(c),h=!1}else m.push(S+"+"+a)}else m.push(a);a.match(/^[^=]+="/)&&(h=!0)}return m};p.asn1.x509.AttributeTypeAndValue=function(e){p.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var t=p,r=t.asn1,n=r.DERSequence,u=r.DERUTF8String,a=r.DERPrintableString,i=r.DERTeletexString,c=r.DERIA5String,h=r.DERVisibleString,m=r.DERBMPString,S=t.lang.String.isMail,E=t.lang.String.isPrintable;this.setByParam=function(v){if(v.rule!==void 0&&(this.sRule=v.rule),v.ds!==void 0&&(this.dsType=v.ds),v.value===void 0&&v.str!==void 0){var g=v.str,b=g.match(/^([^=]+)=(.+)$/);if(b)this.sType=b[1],this.sValue=b[2];else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)}else this.sType=v.type,this.sValue=v.value},this.setByString=function(v,g){g!==void 0&&(this.sRule=g);var b=v.match(/^([^=]+)=(.+)$/);if(b)this.setByAttrTypeAndValueStr(b[1],b[2]);else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)},this._getDsType=function(){var v=this.sType,g=this.sValue,b=this.sRule;return b==="prn"?v=="CN"&&S(g)?"ia5":E(g)?"prn":"utf8":b==="utf8"?v=="CN"&&S(g)?"ia5":v=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(v,g,b){b!==void 0&&(this.sRule=b),this.sType=v,this.sValue=g},this.getValueObj=function(v,g){if(v=="utf8")return new u({str:g});if(v=="prn")return new a({str:g});if(v=="tel")return new i({str:g});if(v=="ia5")return new c({str:g});if(v=="vis")return new h({str:g});if(v=="bmp")return new m({str:g});throw new Error("unsupported directory string type: type="+v+" value="+g)},this.tohex=function(){this.dsType==null&&(this.dsType=this._getDsType());var v=p.asn1.x509.OID.atype2obj(this.sType),g=this.getValueObj(this.dsType,this.sValue),b=new n({array:[v,g]});return this.TLV=b.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Fe(p.asn1.x509.AttributeTypeAndValue,p.asn1.ASN1Object);p.asn1.x509.SubjectPublicKeyInfo=function(e){p.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var t=null,r=null,n=p,u=n.asn1,a=u.DERInteger,i=u.DERBitString,c=u.DERObjectIdentifier,h=u.DERSequence,m=u.ASN1Util.newObject,S=u.x509,E=S.AlgorithmIdentifier,v=n.crypto,g=v.ECDSA,b=v.DSA;this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";var w=new h({array:[this.asn1AlgId,this.asn1SubjPKey]});return w},this.tohex=function(){var w=this.getASN1Object();return this.hTLV=w.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.setPubKey=function(w){try{if(w instanceof bt){var _=m({seq:[{int:{bigint:w.n}},{int:{int:w.e}}]}),A=_.tohex();this.asn1AlgId=new E({name:"rsaEncryption"}),this.asn1SubjPKey=new i({hex:"00"+A})}}catch{}try{if(w instanceof p.crypto.ECDSA){var C=new c({name:w.curveName});this.asn1AlgId=new E({name:"ecPublicKey",asn1params:C}),this.asn1SubjPKey=new i({hex:"00"+w.pubKeyHex})}}catch{}try{if(w instanceof p.crypto.DSA){var C=new m({seq:[{int:{bigint:w.p}},{int:{bigint:w.q}},{int:{bigint:w.g}}]});this.asn1AlgId=new E({name:"dsa",asn1params:C});var x=new a({bigint:w.y});this.asn1SubjPKey=new i({hex:"00"+x.tohex()})}}catch{}},e!==void 0&&this.setPubKey(e)};Fe(p.asn1.x509.SubjectPublicKeyInfo,p.asn1.ASN1Object);p.asn1.x509.Time=function(e){p.asn1.x509.Time.superclass.constructor.call(this);var t=null,r=null,n=p,u=n.asn1,a=u.DERUTCTime,i=u.DERGeneralizedTime;this.params=null,this.type=null,this.setTimeParams=function(c){this.timeParams=c},this.setByParam=function(c){this.params=c},this.getType=function(c){return c.match(/^[0-9]{12}Z$/)?"utc":c.match(/^[0-9]{14}Z$/)?"gen":c.match(/^[0-9]{12}\.[0-9]+Z$/)?"utc":c.match(/^[0-9]{14}\.[0-9]+Z$/)?"gen":null},this.tohex=function(){var c=this.params,h=null;if(typeof c=="string"&&(c={str:c}),c!=null&&c.str&&(c.type==null||c.type==null)&&(c.type=this.getType(c.str)),c!=null&&c.str?(c.type=="utc"&&(h=new a(c.str)),c.type=="gen"&&(h=new i(c.str))):this.type=="gen"?h=new i:h=new a,h==null)throw new Error("wrong setting for Time");return this.TLV=h.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};p.asn1.x509.Time_bak=function(e){p.asn1.x509.Time_bak.superclass.constructor.call(this);var t=null,r=null,n=p,u=n.asn1,a=u.DERUTCTime,i=u.DERGeneralizedTime;this.setTimeParams=function(c){this.timeParams=c},this.tohex=function(){var c=null;return this.timeParams!=null?this.type=="utc"?c=new a(this.timeParams):c=new i(this.timeParams):this.type=="utc"?c=new a:c=new i,this.TLV=c.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},this.type="utc",e!==void 0&&(e.type!==void 0?this.type=e.type:e.str!==void 0&&(e.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),e.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=e)};Fe(p.asn1.x509.Time,p.asn1.ASN1Object);p.asn1.x509.AlgorithmIdentifier=function(e){p.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var t=p,r=t.asn1,n=r.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.tohex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var a=null;for(var i in n)i===this.nameAlg&&(a=n[i]);if(a!==null)return this.hTLV=a,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=r.x509.OID.name2obj(this.nameAlg));var c=[this.asn1Alg];this.asn1Params!==null&&c.push(this.asn1Params);var h=new r.DERSequence({array:c});return this.hTLV=h.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(e.name!==void 0&&(this.nameAlg=e.name),e.asn1params!==void 0&&(this.asn1Params=e.asn1params),e.paramempty!==void 0&&(this.paramEmpty=e.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var u=this.nameAlg.toLowerCase();u.substr(-7,7)!=="withdsa"&&u.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new r.DERNull)}};Fe(p.asn1.x509.AlgorithmIdentifier,p.asn1.ASN1Object);p.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"};p.asn1.x509.GeneralName=function(e){p.asn1.x509.GeneralName.superclass.constructor.call(this);var t={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87",otherName:"a0"},r=p,n=r.asn1,u=n.x509,a=u.X500Name,i=u.OtherName,c=n.DERIA5String,h=n.DERPrintableString,m=n.DEROctetString,S=n.DERTaggedObject,E=n.ASN1Object,v=Error;this.params=null,this.setByParam=function(g){this.params=g},this.tohex=function(){var g=this.params,b,_,w,_=!1;if(g.other!==void 0)b="a0",w=new i(g.other);else if(g.rfc822!==void 0)b="81",w=new c({str:g.rfc822});else if(g.dns!==void 0)b="82",w=new c({str:g.dns});else if(g.dn!==void 0)b="a4",_=!0,typeof g.dn=="string"?w=new a({str:g.dn}):g.dn instanceof p.asn1.x509.X500Name?w=g.dn:w=new a(g.dn);else if(g.ldapdn!==void 0)b="a4",_=!0,w=new a({ldapstr:g.ldapdn});else if(g.certissuer!==void 0||g.certsubj!==void 0){b="a4",_=!0;var A,C,x=null;if(g.certsubj!==void 0?(A=!1,C=g.certsubj):(A=!0,C=g.certissuer),C.match(/^[0-9A-Fa-f]+$/)&&x==C,C.indexOf("-----BEGIN ")!=-1&&(x=Fr(C)),x==null)throw new Error("certsubj/certissuer not cert");var N=new ht;N.hex=x;var H;A?H=N.getIssuerHex():H=N.getSubjectHex(),w=new E,w.hTLV=H}else if(g.uri!==void 0)b="86",w=new c({str:g.uri});else if(g.ip!==void 0){b="87";var ne,pe=g.ip;try{if(pe.match(/^[0-9a-f]+$/)){var P=pe.length;if(P==8||P==16||P==32||P==64)ne=pe;else throw"err"}else ne=vh(pe)}catch(j){throw new v("malformed IP address: "+g.ip+":"+j.message)}w=new m({hex:ne})}else throw new v("improper params");var $=new S({tag:b,explicit:_,obj:w});return $.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Fe(p.asn1.x509.GeneralName,p.asn1.ASN1Object);p.asn1.x509.GeneralNames=function(e){p.asn1.x509.GeneralNames.superclass.constructor.call(this);var t=null,r=p,n=r.asn1;this.setByParamArray=function(u){for(var a=0;a<u.length;a++){var i=new n.x509.GeneralName(u[a]);this.asn1Array.push(i)}},this.tohex=function(){var u=new n.DERSequence({array:this.asn1Array});return u.tohex()},this.getEncodedHex=function(){return this.tohex()},this.asn1Array=new Array,typeof e<"u"&&this.setByParamArray(e)};Fe(p.asn1.x509.GeneralNames,p.asn1.ASN1Object);p.asn1.x509.OtherName=function(e){p.asn1.x509.OtherName.superclass.constructor.call(this);var t=null,r=null,n=p,u=n.asn1,a=u.DERObjectIdentifier,i=u.DERSequence,c=u.ASN1Util.newObject;this.params=null,this.setByParam=function(h){this.params=h},this.tohex=function(){var h=this.params;if(h.oid==null||h.value==null)throw new Error("oid or value not specified");var m=new a({oid:h.oid}),S=c({tag:{tag:"a0",explicit:!0,obj:h.value}}),E=new i({array:[m,S]});return E.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Fe(p.asn1.x509.OtherName,p.asn1.ASN1Object);p.asn1.x509.OID=new function(){var e=p.asn1.DERObjectIdentifier;this.name2oidList={"aes128-CBC":"2.16.840.1.101.3.4.1.2","aes256-CBC":"2.16.840.1.101.3.4.1.42",sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",hmacWithSHA1:"1.2.840.113549.2.7",hmacWithSHA224:"1.2.840.113549.2.8",hmacWithSHA256:"1.2.840.113549.2.9",hmacWithSHA384:"1.2.840.113549.2.10",hmacWithSHA512:"1.2.840.113549.2.11",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",policyMappings:"2.5.29.33",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",inhibitAnyPolicy:"2.5.29.54",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",smtpUTF8Mailbox:"1.3.6.1.5.5.7.8.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",secp521r1:"1.3.132.0.35",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1",smimeMailboxLegacy:"2.23.140.1.5.1.1",smimeMailboxMulti:"2.23.140.1.5.1.2",smimeMailboxStrict:"2.23.140.1.5.1.3",smimeOrganizationLegacy:"2.23.140.1.5.2.1",smimeOrganizationMulti:"2.23.140.1.5.2.2",smimeOrganizationStrict:"2.23.140.1.5.2.3",smimeSponsorLegacy:"2.23.140.1.5.3.1",smimeSponsorMulti:"2.23.140.1.5.3.2",smimeSponsorStrict:"2.23.140.1.5.3.3",smimeIndividualLegacy:"2.23.140.1.5.4.1",smimeIndividualMulti:"2.23.140.1.5.4.2",smimeIndividualStrict:"2.23.140.1.5.4.3"},this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",GN:"2.5.4.42",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.objCache={},this.name2obj=function(t){if(typeof this.objCache[t]<"u")return this.objCache[t];if(typeof this.name2oidList[t]>"u")throw"Name of ObjectIdentifier not defined: "+t;var r=this.name2oidList[t],n=new e({oid:r});return this.objCache[t]=n,n},this.atype2obj=function(t){if(this.objCache[t]!==void 0)return this.objCache[t];var r;if(t.match(/^\d+\.\d+\.[0-9.]+$/))r=t;else if(this.atype2oidList[t]!==void 0)r=this.atype2oidList[t];else if(this.name2oidList[t]!==void 0)r=this.name2oidList[t];else throw new Error("AttributeType name undefined: "+t);var n=new e({oid:r});return this.objCache[t]=n,n},this.registerOIDs=function(t){if(this.checkOIDs(t))for(var r in t)this.name2oidList[r]=t[r]},this.checkOIDs=function(t){try{var r=Object.keys(t);return r.length==0?!1:(r.map(function(n,u,a){var i=this[n];if(!i.match(/^[0-2]\.[0-9.]+$/))throw new Error("value is not OID")},t),!0)}catch{return!1}}};p.asn1.x509.OID.oid2name=function(e){var t=p.asn1.x509.OID.name2oidList;for(var r in t)if(t[r]==e)return r;return""};p.asn1.x509.OID.oid2atype=function(e){var t=p.asn1.x509.OID.atype2oidList;for(var r in t)if(t[r]==e)return r;return e};p.asn1.x509.OID.name2oid=function(e){if(e.match(/^[0-9.]+$/))return e;var t=p.asn1.x509.OID.name2oidList;return t[e]===void 0?"":t[e]};p.asn1.x509.X509Util={};p.asn1.x509.X509Util.newCertPEM=function(e){var t=p.asn1.x509,r=t.TBSCertificate,n=t.Certificate,u=new n(e);return u.getPEM()};(typeof p>"u"||!p)&&(p={});(typeof p.asn1>"u"||!p.asn1)&&(p.asn1={});(typeof p.asn1.cms>"u"||!p.asn1.cms)&&(p.asn1.cms={});p.asn1.cms.Attribute=function(e){var t=Error,r=p,n=r.asn1,u=n.DERSequence,a=n.DERSet,i=n.DERObjectIdentifier;this.params=null,this.typeOid=null,this.setByParam=function(c){this.params=c},this.getValueArray=function(){throw new t("not yet implemented abstract")},this.tohex=function(){var c=new i({oid:this.typeOid}),h=new a({array:this.getValueArray()}),m=new u({array:[c,h]});return m.tohex()},this.getEncodedHex=function(){return this.tohex()}};Fe(p.asn1.cms.Attribute,p.asn1.ASN1Object);p.asn1.cms.ContentType=function(e){var t=p,r=t.asn1;r.cms.ContentType.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.3",this.getValueArray=function(){var n=new r.DERObjectIdentifier(this.params.type);return[n]},e!=null&&this.setByParam(e)};Fe(p.asn1.cms.ContentType,p.asn1.cms.Attribute);p.asn1.cms.MessageDigest=function(e){var t=p,r=t.asn1,n=r.DEROctetString,u=r.cms;u.MessageDigest.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.4",this.getValueArray=function(){var a=new n(this.params);return[a]},e!=null&&this.setByParam(e)};Fe(p.asn1.cms.MessageDigest,p.asn1.cms.Attribute);p.asn1.cms.SigningTime=function(e){var t=p,r=t.asn1;r.cms.SigningTime.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.5",this.getValueArray=function(){var n=new r.x509.Time(this.params);return[n]},e!=null&&this.setByParam(e)};Fe(p.asn1.cms.SigningTime,p.asn1.cms.Attribute);p.asn1.cms.SigningCertificate=function(e){var t=Error,r=p,n=r.asn1,u=n.DERSequence,a=n.cms,i=a.ESSCertID,c=r.crypto;a.SigningCertificate.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.12",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new t("parameter 'array' not specified");for(var h=this.params.array,m=[],S=0;S<h.length;S++){var E=h[S];e.hasis==!1&&typeof E=="string"&&(E.indexOf("-----BEGIN")!=-1||je.isASN1HEX(E))&&(E={cert:E}),E.hasis!=!1&&e.hasis==!1&&(E.hasis=!1),m.push(new i(E))}var v=new u({array:m}),g=new u({array:[v]});return[g]},e!=null&&this.setByParam(e)};Fe(p.asn1.cms.SigningCertificate,p.asn1.cms.Attribute);p.asn1.cms.ESSCertID=function(e){p.asn1.cms.ESSCertID.superclass.constructor.call(this);var t=Error,r=p,n=r.asn1,u=n.DEROctetString,a=n.DERSequence,i=n.cms.IssuerSerial;this.params=null,this.getCertHash=function(c,h){if(c.hash!=null)return c.hash;if(typeof c=="string"&&c.indexOf("-----BEGIN")==-1&&!je.isASN1HEX(c))return c;var m;if(typeof c=="string")m=c;else if(c.cert!=null)m=c.cert;else throw new t("hash nor cert unspecified");var S;m.indexOf("-----BEGIN")!=-1?S=Fr(m):S=m,typeof c=="string"&&(c.indexOf("-----BEGIN")!=-1?S=Fr(c):je.isASN1HEX(c)&&(S=c));var E;if(c.alg!=null)E=c.alg;else if(h!=null)E=h;else throw new t("hash alg unspecified");return r.crypto.Util.hashHex(S,E)},this.tohex=function(){var c=this.params,h=this.getCertHash(c,"sha1"),m=[];m.push(new u({hex:h})),(typeof c=="string"&&c.indexOf("-----BEGIN")!=-1||c.cert!=null&&c.hasis!=!1||c.issuer!=null&&c.serial!=null)&&m.push(new i(c));var S=new a({array:m});return S.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Fe(p.asn1.cms.ESSCertID,p.asn1.ASN1Object);p.asn1.cms.SigningCertificateV2=function(e){var t=Error,r=p,n=r.asn1,u=n.DERSequence,a=n.x509,i=n.cms,c=i.ESSCertIDv2,h=r.crypto;i.SigningCertificateV2.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.47",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new t("parameter 'array' not specified");for(var m=this.params.array,S=[],E=0;E<m.length;E++){var v=m[E];(e.alg!=null||e.hasis==!1)&&typeof v=="string"&&(v.indexOf("-----BEGIN")!=-1||je.isASN1HEX(v))&&(v={cert:v}),v.alg==null&&e.alg!=null&&(v.alg=e.alg),v.hasis!=!1&&e.hasis==!1&&(v.hasis=!1),S.push(new c(v))}var g=new u({array:S}),b=new u({array:[g]});return[b]},e!=null&&this.setByParam(e)};Fe(p.asn1.cms.SigningCertificateV2,p.asn1.cms.Attribute);p.asn1.cms.ESSCertIDv2=function(e){p.asn1.cms.ESSCertIDv2.superclass.constructor.call(this);var t=Error,r=p,n=r.asn1,u=n.DEROctetString,a=n.DERSequence,i=n.cms.IssuerSerial,c=n.x509.AlgorithmIdentifier;this.params=null,this.tohex=function(){var h=this.params,m=this.getCertHash(h,"sha256"),S=[];h.alg!=null&&h.alg!="sha256"&&S.push(new c({name:h.alg})),S.push(new u({hex:m})),(typeof h=="string"&&h.indexOf("-----BEGIN")!=-1||h.cert!=null&&h.hasis!=!1||h.issuer!=null&&h.serial!=null)&&S.push(new i(h));var E=new a({array:S});return E.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Fe(p.asn1.cms.ESSCertIDv2,p.asn1.cms.ESSCertID);p.asn1.cms.IssuerSerial=function(e){var t=Error,r=p,n=r.asn1,u=n.DERInteger,a=n.DERSequence,i=n.cms,c=n.x509,h=c.GeneralNames,m=ht;i.IssuerSerial.superclass.constructor.call(this),this.setByParam=function(S){this.params=S},this.tohex=function(){var S=this.params,E,v;if(typeof S=="string"&&S.indexOf("-----BEGIN")!=-1||S.cert!=null){var g;S.cert!=null?g=S.cert:g=S;var b=new m;b.readCertPEM(g),E=b.getIssuer(),v={hex:b.getSerialNumberHex()}}else if(S.issuer!=null&&S.serial)E=S.issuer,v=S.serial;else throw new t("cert or issuer and serial parameter not specified");var w=new h([{dn:E}]),_=new u(v),A=new a({array:[w,_]});return A.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Fe(p.asn1.cms.IssuerSerial,p.asn1.ASN1Object);p.asn1.cms.SignerIdentifier=function(e){var t=p,r=t.asn1,n=r.DERInteger,u=r.DERSequence,a=r.cms,i=a.IssuerAndSerialNumber,c=a.SubjectKeyIdentifier,h=r.x509,m=h.X500Name,S=ht,E=Error;a.SignerIdentifier.superclass.constructor.call(this),this.params=null,this.tohex=function(){var v=this.params;if(v.type=="isssn"){var g=new i(v);return g.tohex()}else if(v.type=="skid"){var b=new c(v);return b.tohex()}else throw new Error("wrong property for isssn or skid")},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Fe(p.asn1.cms.SignerIdentifier,p.asn1.ASN1Object);p.asn1.cms.IssuerAndSerialNumber=function(e){var t=p,r=t.asn1,n=r.DERInteger,u=r.DERSequence,a=r.cms,i=r.x509,c=i.X500Name,h=ht,m=Error;a.IssuerAndSerialNumber.superclass.constructor.call(this),this.params=null,this.tohex=function(){var S=this.params,E,v;if(typeof S=="string"&&S.indexOf("-----BEGIN")!=-1||S.cert!=null){var g;S.cert!=null?g=S.cert:g=S;var b=new h;b.readCertPEM(g),E=b.getIssuer(),v={hex:b.getSerialNumberHex()}}else if(S.issuer!=null&&S.serial)E=S.issuer,v=S.serial;else throw new m("cert or issuer and serial parameter not specified");var w=new c(E),_=new n(v),A=new u({array:[w,_]});return A.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(S){this.params=S},e!=null&&this.setByParam(e)};Fe(p.asn1.cms.IssuerAndSerialNumber,p.asn1.ASN1Object);p.asn1.cms.SubjectKeyIdentifier=function(e){var t=p,r=t.asn1,n=r.DERInteger,u=r.DERSequence,a=r.ASN1Util.newObject,i=r.cms,c=i.IssuerAndSerialName,h=i.SubjectKeyIdentifier,m=r.x509,S=m.X500Name,E=ht,v=Error;i.SubjectKeyIdentifier.superclass.constructor.call(this),this.tohex=function(){var g=this.params;if(g.cert==null&&g.skid==null)throw new v("property cert nor skid undefined");var b;if(g.cert!=null){var w=new E(g.cert),_=w.getExtSubjectKeyIdentifier();b=_.kid.hex}else g.skid!=null&&(b=g.skid);var A=a({tag:{tage:"a0",obj:{octstr:{hex:b}}}});return A.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Fe(p.asn1.cms.SubjectKeyIdentifier,p.asn1.ASN1Object);p.asn1.cms.AttributeList=function(e){var t=Error,r=p,n=r.asn1,u=n.DERSet,a=n.cms;a.AttributeList.superclass.constructor.call(this),this.params=null,this.hTLV=null,this.setByParam=function(i){this.params=i},this.tohex=function(){var i=this.params;if(this.hTLV!=null)return this.hTLV;var c=!0;i.sortflag!=null&&(c=i.sortflag);for(var h=i.array,m=[],S=0;S<h.length;S++){var E=h[S],v=E.attr;if(v=="contentType")m.push(new a.ContentType(E));else if(v=="messageDigest")m.push(new a.MessageDigest(E));else if(v=="signingTime")m.push(new a.SigningTime(E));else if(v=="signingCertificate")m.push(new a.SigningCertificate(E));else if(v=="signingCertificateV2")m.push(new a.SigningCertificateV2(E));else if(v=="signaturePolicyIdentifier")m.push(new p.asn1.cades.SignaturePolicyIdentifier(E));else if(v=="signatureTimeStamp"||v=="timeStampToken")m.push(new p.asn1.cades.SignatureTimeStamp(E));else throw new t("unknown attr: "+v)}var g=new u({array:m,sortflag:c});return this.hTLV=g.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Fe(p.asn1.cms.AttributeList,p.asn1.ASN1Object);p.asn1.cms.SignerInfo=function(e){var t=Error,r=p,n=r.asn1,u=n.DERInteger,a=n.DEROctetString,i=n.DERSequence,c=n.DERTaggedObject,h=n.cms,m=h.SignerIdentifier,S=h.AttributeList,E=h.ContentType,v=h.EncapsulatedContentInfo,g=h.MessageDigest,b=h.SignedData,w=n.x509,_=w.AlgorithmIdentifier,A=r.crypto,C=Nt;h.SignerInfo.superclass.constructor.call(this),this.params=null,this.sign=function(){var x=this.params,N=x.sigalg,H=new S(x.sattrs).tohex(),ne=C.getKey(x.signkey),pe=new A.Signature({alg:N});pe.init(ne),pe.updateHex(H);var P=pe.sign();x.sighex=P},this.tohex=function(){var x=this.params,N=[];if(N.push(new u({int:x.version})),N.push(new m(x.id)),N.push(new _({name:x.hashalg})),x.sattrs!=null){var H=new S(x.sattrs);try{N.push(new c({tag:"a0",explicit:!1,obj:H}))}catch(pe){throw new t("si sattr error: "+pe)}}if(x.sigalgfield!=null?N.push(new _({name:x.sigalgfield})):N.push(new _({name:x.sigalg})),x.sighex==null&&x.signkey!=null&&this.sign(),N.push(new a({hex:x.sighex})),x.uattrs!=null){var H=new S(x.uattrs);try{N.push(new c({tag:"a1",explicit:!1,obj:H}))}catch(P){throw new t("si uattr error: "+P)}}var ne=new i({array:N});return ne.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Fe(p.asn1.cms.SignerInfo,p.asn1.ASN1Object);p.asn1.cms.EncapsulatedContentInfo=function(e){var t=p,r=t.asn1,n=r.DERTaggedObject,u=r.DERSequence,a=r.DERObjectIdentifier,i=r.DEROctetString,c=r.cms;c.EncapsulatedContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var h=this.params,m=[];if(m.push(new a(h.type)),h.content!=null&&(h.content.hex!=null||h.content.str!=null)&&h.isDetached!=!0){var S=new i(h.content),E=new n({tag:"a0",explicit:!0,obj:S});m.push(E)}var v=new u({array:m});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(h){this.params=h},e!=null&&this.setByParam(e)};Fe(p.asn1.cms.EncapsulatedContentInfo,p.asn1.ASN1Object);p.asn1.cms.ContentInfo=function(e){var t=p,r=t.asn1,n=r.DERTaggedObject,u=r.DERSequence,a=r.DERObjectIdentifier,i=r.x509,c=i.OID.name2obj;p.asn1.cms.ContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var h=this.params,m=[];m.push(new a(h.type));var S=new n({tag:"a0",explicit:!0,obj:h.obj});m.push(S);var E=new u({array:m});return E.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(h){this.params=h},e!=null&&this.setByParam(e)};Fe(p.asn1.cms.ContentInfo,p.asn1.ASN1Object);p.asn1.cms.SignedData=function(e){var t=Error,r=p,n=r.asn1,u=n.ASN1Object,a=n.DERInteger,i=n.DERSet,c=n.DERSequence,h=n.DERTaggedObject,m=n.cms,S=m.EncapsulatedContentInfo,E=m.SignerInfo,v=m.ContentInfo,g=m.CertificateSet,b=m.RevocationInfoChoices,w=n.x509,_=w.AlgorithmIdentifier;p.asn1.cms.SignedData.superclass.constructor.call(this),this.params=null,this.checkAndFixParam=function(){var A=this.params;this._setDigestAlgs(A),this._setContentTypeByEContent(A),this._setMessageDigestByEContent(A),this._setSignerInfoVersion(A),this._setSignedDataVersion(A)},this._setDigestAlgs=function(A){for(var C={},x=A.sinfos,N=0;N<x.length;N++){var H=x[N];C[H.hashalg]=1}A.hashalgs=Object.keys(C).sort()},this._setContentTypeByEContent=function(A){for(var C=A.econtent.type,x=A.sinfos,N=0;N<x.length;N++){var H=x[N],ne=this._getAttrParamByName(H,"contentType");ne.type=C}},this._setMessageDigestByEContent=function(A){var C=A.econtent,x=A.econtent.type,N=C.content.hex;N==null&&C.type=="data"&&C.content.str!=null&&(N=Fi(C.content.str));for(var H=A.sinfos,ne=0;ne<H.length;ne++){var pe=H[ne],P=pe.hashalg,$=this._getAttrParamByName(pe,"messageDigest"),j=p.crypto.Util.hashHex(N,P);$.hex=j}},this._getAttrParamByName=function(A,C){for(var x=A.sattrs.array,N=0;N<x.length;N++)if(x[N].attr==C)return x[N]},this._setSignerInfoVersion=function(A){for(var C=A.sinfos,x=0;x<C.length;x++){var N=C[x],H=1;N.id.type=="skid"&&(H=3),N.version=H}},this._setSignedDataVersion=function(A){var C=this._getSignedDataVersion(A);A.version=C},this._getSignedDataVersion=function(A){if(A.revinfos!=null)for(var C=A.revinfos,x=0;x<C.length;x++){var N=C[x];if(N.ocsp!=null)return 5}for(var H=A.sinfos,x=0;x<H.length;x++){var ne=A.sinfos[x];if(ne.version==3)return 3}return A.econtent.type!="data"?3:1},this.tohex=function(){var A=this.params;this.getEncodedHexPrepare!=null&&this.getEncodedHexPrepare(),A.fixed!=!0&&this.checkAndFixParam();var C=[];C.push(new a({int:A.version}));for(var x=[],N=0;N<A.hashalgs.length;N++){var H=A.hashalgs[N];x.push(new _({name:H}))}C.push(new i({array:x})),C.push(new S(A.econtent)),A.certs!=null&&C.push(new g(A.certs)),A.revinfos!=null&&C.push(new b(A.revinfos));for(var ne=[],N=0;N<A.sinfos.length;N++){var pe=A.sinfos[N];ne.push(new E(pe))}C.push(new i({array:ne}));var P=new c({array:C});return P.tohex()},this.getEncodedHex=function(){return this.tohex()},this.getContentInfo=function(){var A=new v({type:"signed-data",obj:this});return A},this.getContentInfoEncodedHex=function(){return this.getContentInfo().tohex()},e!=null&&this.setByParam(e)};Fe(p.asn1.cms.SignedData,p.asn1.ASN1Object);p.asn1.cms.CertificateSet=function(e){p.asn1.cms.CertificateSet.superclass.constructor.call(this);var t=Error,r=p.asn1,n=r.DERTaggedObject,u=r.DERSet,a=r.ASN1Object;this.params=null,this.tohex=function(){var i=this.params,c=[],h;if(i instanceof Array)h=i;else if(i.array!=null)h=i.array;else throw new t("cert array not specified");for(var m=0;m<h.length;m++){var S=h[m],E=Fr(S),v=new a;v.hTLV=E,c.push(v)}var g={array:c};i.sortflag==!1&&(g.sortflag=!1);var b=new u(g),w=new n({tag:"a0",explicit:!1,obj:b});return w.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Fe(p.asn1.cms.CertificateSet,p.asn1.ASN1Object);p.asn1.cms.RevocationInfoChoices=function(e){p.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(!(t instanceof Array))throw new Error("params is not array");for(var r=[],n=0;n<t.length;n++)r.push(new p.asn1.cms.RevocationInfoChoice(t[n]));var u=p.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:{set:r}}});return u.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Fe(p.asn1.cms.RevocationInfoChoices,p.asn1.ASN1Object);p.asn1.cms.RevocationInfoChoice=function(e){p.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(t.crl!=null&&typeof t.crl=="string"){var r=t.crl;return t.crl.indexOf("-----BEGIN")!=-1&&(r=Fr(t.crl)),r}else if(t.ocsp!=null){var n=p.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:new p.asn1.cms.OtherRevocationFormat(t)}});return n.tohex()}else throw new Error("property crl or ocsp undefined")},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Fe(p.asn1.cms.RevocationInfoChoice,p.asn1.ASN1Object);p.asn1.cms.OtherRevocationFormat=function(e){p.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);var t=Error,r=p,n=r.asn1,u=n.ASN1Util.newObject,a=r.lang.String.isHex;this.params=null,this.tohex=function(){var i=this.params;if(i.ocsp==null)throw new t("property ocsp not specified");if(!a(i.ocsp)||!je.isASN1HEX(i.ocsp))throw new t("ocsp value not ASN.1 hex string");var c=u({seq:[{oid:"1.3.6.1.5.5.7.16.2"},{asn1:{tlv:i.ocsp}}]});return c.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Fe(p.asn1.cms.OtherRevocationFormat,p.asn1.ASN1Object);p.asn1.cms.CMSUtil=new function(){};p.asn1.cms.CMSUtil.newSignedData=function(e){return new p.asn1.cms.SignedData(e)};p.asn1.cms.CMSUtil.verifySignedData=function(e){var t=p,r=t.asn1,n=r.cms,u=n.SignerInfo,a=n.SignedData,i=n.SigningTime,c=n.SigningCertificate,h=n.SigningCertificateV2,m=r.cades,S=m.SignaturePolicyIdentifier,E=t.lang.String.isHex,v=je,g=v.getVbyList,b=v.getTLVbyList,w=v.getIdxbyList,_=v.getChildIdx,A=v.getTLV,C=v.oidname,x=t.crypto.Util.hashHex;e.cms===void 0&&E(e.cms);var N=e.cms,H=function(z,te){for(var me,st=3;st<6;st++)if(me=w(z,0,[1,0,st]),me!==void 0){var it=z.substr(me,2);it==="a0"&&(te.certsIdx=me),it==="a1"&&(te.revinfosIdx=me),it==="31"&&(te.signerinfosIdx=me)}},ne=function(z,te){var me=te.signerinfosIdx;if(me!==void 0){var st=_(z,me);te.signerInfoIdxList=st;for(var it=0;it<st.length;it++){var ot=st[it],Ct={idx:ot};pe(z,Ct),te.signerInfos.push(Ct)}}},pe=function(z,te){var me=te.idx;te.signerid_issuer1=b(z,me,[1,0],"30"),te.signerid_serial1=g(z,me,[1,1],"02"),te.hashalg=C(g(z,me,[2,0],"06"));var st=w(z,me,[3],"a0");te.idxSignedAttrs=st,P(z,te,st);var it=_(z,me),ot=it.length;if(ot<6)throw"malformed SignerInfo";te.sigalg=C(g(z,me,[ot-2,0],"06")),te.sigval=g(z,me,[ot-1],"04")},P=function(z,te,me){var st=_(z,me);te.signedAttrIdxList=st;for(var it=0;it<st.length;it++){var ot=st[it],Ct=g(z,ot,[0],"06"),yt;Ct==="2a864886f70d010905"?(yt=rr(g(z,ot,[1,0])),te.saSigningTime=yt):Ct==="2a864886f70d010904"&&(yt=g(z,ot,[1,0],"04"),te.saMessageDigest=yt)}},$=function(z,te){if(g(z,0,[0],"06")!=="2a864886f70d010702")return te;te.cmsType="signedData",te.econtent=g(z,0,[1,0,2,1,0]),H(z,te),te.signerInfos=[],ne(z,te)},j=function(z,te){for(var me=te.parse.signerInfos,st=me.length,it=!0,ot=0;ot<st;ot++){var Ct=me[ot];q(z,te,Ct,ot),Ct.isValid||(it=!1)}te.isValid=it},R=function(z,te,me,st){var it=te.parse.certsIdx,ot;if(te.certs===void 0){ot=[],te.certkeys=[];for(var Ct=_(z,it),yt=0;yt<Ct.length;yt++){var Ht=A(z,Ct[yt]),Lt=new ht;Lt.readCertHex(Ht),ot[yt]=Lt,te.certkeys[yt]=Lt.getPublicKey()}te.certs=ot}else ot=te.certs;te.cccc=ot.length,te.cccci=Ct.length;for(var yt=0;yt<ot.length;yt++){var ln=Lt.getIssuerHex(),Ar=Lt.getSerialNumberHex();me.signerid_issuer1===ln&&me.signerid_serial1===Ar&&(me.certkey_idx=yt)}},q=function(z,te,me,st){me.verifyDetail={};var it=me.verifyDetail,ot=te.parse.econtent,Ct=me.hashalg,yt=me.saMessageDigest;it.validMessageDigest=!1,x(ot,Ct)===yt&&(it.validMessageDigest=!0),R(z,te,me,st),it.validSignatureValue=!1;var Ht=me.sigalg,Lt="31"+A(z,me.idxSignedAttrs).substr(2);me.signedattrshex=Lt;var ln=te.certs[me.certkey_idx].getPublicKey(),Ar=new p.crypto.Signature({alg:Ht});Ar.init(ln),Ar.updateHex(Lt);var cr=Ar.verify(me.sigval);it.validSignatureValue_isValid=cr,cr===!0&&(it.validSignatureValue=!0),me.isValid=!1,it.validMessageDigest&&it.validSignatureValue&&(me.isValid=!0)},Q=function(){},V={isValid:!1,parse:{}};return $(N,V.parse),j(N,V),V};p.asn1.cms.CMSParser=function(){var e=Error,t=ht,r=new t,n=je,u=n.getV,a=n.getTLV,i=n.getIdxbyList,c=n.getTLVbyList,h=n.getTLVbyListEx,m=n.getVbyList,S=n.getVbyListEx,E=n.getChildIdx;this.getCMSSignedData=function(v){var g=c(v,0,[1,0]),b=this.getSignedData(g);return b},this.getSignedData=function(v){var g=E(v,0),b={},w=u(v,g[0]),_=parseInt(w,16);b.version=_;var A=a(v,g[1]);b.hashalgs=this.getHashAlgArray(A);var C=a(v,g[2]);b.econtent=this.getEContent(C);var x=h(v,0,["[0]"]);x!=null&&(b.certs=this.getCertificateSet(x));var N=h(v,0,["[1]"]);N!=null;var H=h(v,0,[3]);return b.sinfos=this.getSignerInfos(H),b},this.getHashAlgArray=function(v){for(var g=E(v,0),b=new t,w=[],_=0;_<g.length;_++){var A=a(v,g[_]),C=b.getAlgorithmIdentifierName(A);w.push(C)}return w},this.getEContent=function(v){var g={},b=m(v,0,[0]),w=m(v,0,[1,0]);return g.type=p.asn1.x509.OID.oid2name(je.hextooidstr(b)),g.content={hex:w},g},this.getSignerInfos=function(v){for(var g=[],b=E(v,0),w=0;w<b.length;w++){var _=a(v,b[w]),A=this.getSignerInfo(_);g.push(A)}return g},this.getSignerInfo=function(v){var g={},b=E(v,0),w=n.getInt(v,b[0],-1);w!=-1&&(g.version=w);var _=a(v,b[1]),A=this.getIssuerAndSerialNumber(_);g.id=A;var C=a(v,b[2]),x=r.getAlgorithmIdentifierName(C);g.hashalg=x;var N=h(v,0,["[0]"]);if(N!=null){var H=this.getAttributeList(N);g.sattrs=H}var ne=h(v,0,[3]),pe=r.getAlgorithmIdentifierName(ne);g.sigalg=pe;var P=S(v,0,[4]);g.sighex=P;var $=h(v,0,["[1]"]);if($!=null){var j=this.getAttributeList($);g.uattrs=j}return g},this.getSignerIdentifier=function(v){if(v.substr(0,2)=="30")return this.getIssuerAndSerialNumber(v);throw new Error("SKID of signerIdentifier not supported")},this.getIssuerAndSerialNumber=function(v){var g={type:"isssn"},b=E(v,0),w=a(v,b[0]);g.issuer=r.getX500Name(w);var _=u(v,b[1]);return g.serial={hex:_},g},this.getAttributeList=function(v){for(var g=[],b=E(v,0),w=0;w<b.length;w++){var _=a(v,b[w]),A=this.getAttribute(_);g.push(A)}return{array:g}},this.getAttribute=function(v){var g={},b=E(v,0),w=n.getOID(v,b[0]),_=p.asn1.x509.OID.oid2name(w);g.attr=_;var A=a(v,b[1]),C=E(A,0);if(C.length==1)g.valhex=a(A,C[0]);else{for(var x=[],N=0;N<C.length;N++)x.push(a(A,C[N]));g.valhex=x}return _=="contentType"?this.setContentType(g):_=="messageDigest"?this.setMessageDigest(g):_=="signingTime"?this.setSigningTime(g):_=="signingCertificate"?this.setSigningCertificate(g):_=="signingCertificateV2"?this.setSigningCertificateV2(g):_=="signaturePolicyIdentifier"&&this.setSignaturePolicyIdentifier(g),g},this.setContentType=function(v){var g=n.getOIDName(v.valhex,0,null);g!=null&&(v.type=g,delete v.valhex)},this.setSigningTime=function(v){var g=u(v.valhex,0),b=rr(g);v.str=b,delete v.valhex},this.setMessageDigest=function(v){var g=u(v.valhex,0);v.hex=g,delete v.valhex},this.setSigningCertificate=function(v){var g=E(v.valhex,0);if(g.length>0){for(var b=a(v.valhex,g[0]),w=E(b,0),_=[],A=0;A<w.length;A++){var C=a(b,w[A]),x=this.getESSCertID(C);_.push(x)}v.array=_}if(g.length>1){var N=a(v.valhex,g[1]);v.polhex=N}delete v.valhex},this.setSignaturePolicyIdentifier=function(v){var g=E(v.valhex,0);if(g.length>0){var b=n.getOID(v.valhex,g[0]);v.oid=b}if(g.length>1){var w=new t,_=E(v.valhex,g[1]),A=a(v.valhex,_[0]),C=w.getAlgorithmIdentifierName(A);v.alg=C;var x=u(v.valhex,_[1]);v.hash=x}delete v.valhex},this.setSigningCertificateV2=function(v){var g=E(v.valhex,0);if(g.length>0){for(var b=a(v.valhex,g[0]),w=E(b,0),_=[],A=0;A<w.length;A++){var C=a(b,w[A]),x=this.getESSCertIDv2(C);_.push(x)}v.array=_}if(g.length>1){var N=a(v.valhex,g[1]);v.polhex=N}delete v.valhex},this.getESSCertID=function(v){var g={},b=E(v,0);if(b.length>0){var w=u(v,b[0]);g.hash=w}if(b.length>1){var _=a(v,b[1]),A=this.getIssuerSerial(_);A.serial!=null&&(g.serial=A.serial),A.issuer!=null&&(g.issuer=A.issuer)}return g},this.getESSCertIDv2=function(v){var g={},b=E(v,0);if(b.length<1||3<b.length)throw new e("wrong number of elements");var w=0;if(v.substr(b[0],2)=="30"){var _=a(v,b[0]);g.alg=r.getAlgorithmIdentifierName(_),w++}else g.alg="sha256";var A=u(v,b[w]);if(g.hash=A,b.length>w+1){var C=a(v,b[w+1]),x=this.getIssuerSerial(C);g.issuer=x.issuer,g.serial=x.serial}return g},this.getIssuerSerial=function(v){var g={},b=E(v,0),w=a(v,b[0]),_=r.getGeneralNames(w),A=_[0].dn;g.issuer=A;var C=u(v,b[1]);return g.serial={hex:C},g},this.getCertificateSet=function(v){for(var g=E(v,0),b=[],w=0;w<g.length;w++){var _=a(v,g[w]);if(_.substr(0,2)=="30"){var A=un(_,"CERTIFICATE");b.push(A)}}return{array:b,sortflag:!1}}};(typeof p>"u"||!p)&&(p={});(typeof p.asn1>"u"||!p.asn1)&&(p.asn1={});(typeof p.asn1.tsp>"u"||!p.asn1.tsp)&&(p.asn1.tsp={});p.asn1.tsp.TimeStampToken=function(e){var t=p,r=t.asn1,n=r.tsp;n.TimeStampToken.superclass.constructor.call(this),this.params=null,this.getEncodedHexPrepare=function(){var u=new n.TSTInfo(this.params.econtent.content);this.params.econtent.content.hex=u.tohex()},e!=null&&this.setByParam(e)};Fe(p.asn1.tsp.TimeStampToken,p.asn1.cms.SignedData);p.asn1.tsp.TSTInfo=function(e){var t=Error,r=p,n=r.asn1,u=n.DERSequence,a=n.DERInteger,i=n.DERBoolean,c=n.DERGeneralizedTime,h=n.DERObjectIdentifier,m=n.DERTaggedObject,S=n.tsp,E=S.MessageImprint,v=S.Accuracy,g=n.x509.X500Name,b=n.x509.GeneralName;if(S.TSTInfo.superclass.constructor.call(this),this.dVersion=new a({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerial=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.tohex=function(){var w=[this.dVersion];if(this.dPolicy==null)throw new Error("policy shall be specified.");if(w.push(this.dPolicy),this.dMessageImprint==null)throw new Error("messageImprint shall be specified.");if(w.push(this.dMessageImprint),this.dSerial==null)throw new Error("serialNumber shall be specified.");if(w.push(this.dSerial),this.dGenTime==null)throw new Error("genTime shall be specified.");w.push(this.dGenTime),this.dAccuracy!=null&&w.push(this.dAccuracy),this.dOrdering!=null&&w.push(this.dOrdering),this.dNonce!=null&&w.push(this.dNonce),this.dTsa!=null&&w.push(this.dTsa);var _=new u({array:w});return this.hTLV=_.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0){if(typeof e.policy=="string"){if(!e.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new h({oid:e.policy})}e.messageImprint!==void 0&&(this.dMessageImprint=new E(e.messageImprint)),e.serial!==void 0&&(this.dSerial=new a(e.serial)),e.genTime!==void 0&&(this.dGenTime=new c(e.genTime)),e.accuracy!==void 0&&(this.dAccuracy=new v(e.accuracy)),e.ordering!==void 0&&e.ordering==!0&&(this.dOrdering=new i),e.nonce!==void 0&&(this.dNonce=new a(e.nonce)),e.tsa!==void 0&&(this.dTsa=new m({tag:"a0",explicit:!0,obj:new b({dn:e.tsa})}))}};Fe(p.asn1.tsp.TSTInfo,p.asn1.ASN1Object);p.asn1.tsp.Accuracy=function(e){var t=p,r=t.asn1,n=r.ASN1Util.newObject;r.tsp.Accuracy.superclass.constructor.call(this),this.params=null,this.tohex=function(){var u=this.params,a=[];return u.seconds!=null&&typeof u.seconds=="number"&&a.push({int:u.seconds}),u.millis!=null&&typeof u.millis=="number"&&a.push({tag:{tagi:"80",obj:{int:u.millis}}}),u.micros!=null&&typeof u.micros=="number"&&a.push({tag:{tagi:"81",obj:{int:u.micros}}}),n({seq:a}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Fe(p.asn1.tsp.Accuracy,p.asn1.ASN1Object);p.asn1.tsp.MessageImprint=function(e){var t=p,r=t.asn1,n=r.DERSequence,u=r.DEROctetString,a=r.x509,i=a.AlgorithmIdentifier;r.tsp.MessageImprint.superclass.constructor.call(this),this.params=null,this.tohex=function(){var c=this.params,h=new i({name:c.alg}),m=new u({hex:c.hash}),S=new n({array:[h,m]});return S.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Fe(p.asn1.tsp.MessageImprint,p.asn1.ASN1Object);p.asn1.tsp.TimeStampReq=function(e){var t=p,r=t.asn1,n=r.DERSequence,u=r.DERInteger,a=r.DERBoolean,i=r.ASN1Object,c=r.DERObjectIdentifier,h=r.tsp,m=h.MessageImprint;h.TimeStampReq.superclass.constructor.call(this),this.params=null,this.tohex=function(){var S=this.params,E=[];E.push(new u({int:1})),S.messageImprint instanceof p.asn1.ASN1Object?E.push(S.messageImprint):E.push(new m(S.messageImprint)),S.policy!=null&&E.push(new c(S.policy)),S.nonce!=null&&E.push(new u(S.nonce)),S.certreq==!0&&E.push(new a);var v=new n({array:E});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Fe(p.asn1.tsp.TimeStampReq,p.asn1.ASN1Object);p.asn1.tsp.TimeStampResp=function(e){var t=p,r=t.asn1,n=r.DERSequence,u=r.ASN1Object,a=r.tsp,i=a.PKIStatusInfo;a.TimeStampResp.superclass.constructor.call(this),this.params=null,this.tohex=function(){var c=this.params,h=[];if(c.econtent!=null||c.tst!=null)if(c.statusinfo!=null?h.push(new i(c.statusinfo)):h.push(new i("granted")),c.econtent!=null)h.push(new a.TimeStampToken(c).getContentInfo());else if(c.tst instanceof r.ASN1Object)h.push(c.tst);else throw new Error("improper member tst value");else if(c.statusinfo!=null)h.push(new i(c.statusinfo));else throw new Error("parameter for token nor statusinfo not specified");var m=new n({array:h});return m.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Fe(p.asn1.tsp.TimeStampResp,p.asn1.ASN1Object);p.asn1.tsp.PKIStatusInfo=function(e){var t=Error,r=p,n=r.asn1,u=n.DERSequence,a=n.tsp,i=a.PKIStatus,c=a.PKIFreeText,h=a.PKIFailureInfo;a.PKIStatusInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var m=this.params,S=[];if(typeof m=="string")S.push(new i(m));else{if(m.status==null)throw new t("property 'status' unspecified");S.push(new i(m.status)),m.statusstr!=null&&S.push(new c(m.statusstr)),m.failinfo!=null&&S.push(new h(m.failinfo))}var E=new u({array:S});return E.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Fe(p.asn1.tsp.PKIStatusInfo,p.asn1.ASN1Object);p.asn1.tsp.PKIStatus=function(e){var t=Error,r=p,n=r.asn1,u=n.DERInteger,a=n.tsp;a.PKIStatus.superclass.constructor.call(this);var i={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5};this.params=null,this.tohex=function(){var c=this.params,h,m;if(typeof c=="string")try{m=i[c]}catch{throw new t("undefined name: "+c)}else if(typeof c=="number")m=c;else throw new t("unsupported params");return new u({int:m}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Fe(p.asn1.tsp.PKIStatus,p.asn1.ASN1Object);p.asn1.tsp.PKIFreeText=function(e){var t=Error,r=p,n=r.asn1,u=n.DERSequence,a=n.DERUTF8String,i=n.tsp;i.PKIFreeText.superclass.constructor.call(this),this.params=null,this.tohex=function(){var c=this.params;if(!(c instanceof Array))throw new t("wrong params: not array");for(var h=[],m=0;m<c.length;m++)h.push(new a({str:c[m]}));var S=new u({array:h});return S.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Fe(p.asn1.tsp.PKIFreeText,p.asn1.ASN1Object);p.asn1.tsp.PKIFailureInfo=function(e){var t=Error,r=p,n=r.asn1,u=n.DERBitString,a=n.tsp,i=a.PKIFailureInfo,c={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25};i.superclass.constructor.call(this),this.params=null,this.getBinValue=function(){var h=this.params,m=0;if(typeof h=="number"&&0<=h&&h<=25){m|=1<<h;for(var S=m.toString(2),E="",v=S.length-1;v>=0;v--)E+=S[v];return E}else{if(typeof h=="string"&&c[h]!=null)return oc([h],c);if(typeof h=="object"&&h.length!=null)return oc(h,c);throw new t("wrong params")}},this.tohex=function(){var h=this.params,m=this.getBinValue();return new u({bin:m}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Fe(p.asn1.tsp.PKIFailureInfo,p.asn1.ASN1Object);p.asn1.tsp.AbstractTSAAdapter=function(e){this.getTSTHex=function(t,r){throw"not implemented yet"}};p.asn1.tsp.SimpleTSAAdapter=function(e){var t=p,r=t.asn1,n=r.tsp,u=t.crypto.Util.hashHex;n.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(a,i){var c=u(a,i);this.params.econtent.content.messageImprint={alg:i,hash:c},this.params.econtent.content.serial={int:this.serial++};var h=Math.floor(Math.random()*1e9);this.params.econtent.content.nonce={int:h};var m=new n.TimeStampToken(this.params);return m.getContentInfoEncodedHex()},e!==void 0&&(this.params=e)};Fe(p.asn1.tsp.SimpleTSAAdapter,p.asn1.tsp.AbstractTSAAdapter);p.asn1.tsp.FixedTSAAdapter=function(e){var t=p,r=t.asn1,n=r.tsp,u=t.crypto.Util.hashHex;n.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(a,i){var c=u(a,i);this.params.econtent.content.messageImprint={alg:i,hash:c};var h=new n.TimeStampToken(this.params);return h.getContentInfoEncodedHex()},e!==void 0&&(this.params=e)};Fe(p.asn1.tsp.FixedTSAAdapter,p.asn1.tsp.AbstractTSAAdapter);p.asn1.tsp.TSPUtil=new function(){};p.asn1.tsp.TSPUtil.newTimeStampToken=function(e){return new p.asn1.tsp.TimeStampToken(e)};p.asn1.tsp.TSPUtil.parseTimeStampReq=function(e){var t=new p.asn1.tsp.TSPParser;return t.getTimeStampReq(e)};p.asn1.tsp.TSPUtil.parseMessageImprint=function(e){var t=new p.asn1.tsp.TSPParser;return t.getMessageImprint(e)};p.asn1.tsp.TSPParser=function(){var e=Error,t=ht,r=new t,n=je,u=n.getV,a=n.getTLV,i=n.getIdxbyList,c=n.getTLVbyListEx,h=n.getChildIdx,m=["granted","grantedWithMods","rejection","waiting","revocationWarning","revocationNotification"],S={0:"badAlg",2:"badRequest",5:"badDataFormat",14:"timeNotAvailable",15:"unacceptedPolicy",16:"unacceptedExtension",17:"addInfoNotAvailable",25:"systemFailure"};this.getResponse=function(E){var v=h(E,0);if(v.length==1)return this.getPKIStatusInfo(a(E,v[0]));if(v.length>1){var g=this.getPKIStatusInfo(a(E,v[0])),b=a(E,v[1]),w=this.getToken(b);return w.statusinfo=g,w}},this.getToken=function(E){var v=new p.asn1.cms.CMSParser,g=v.getCMSSignedData(E);return this.setTSTInfo(g),g},this.setTSTInfo=function(E){var v=E.econtent;if(v.type=="tstinfo"){var g=v.content.hex,b=this.getTSTInfo(g);v.content=b}},this.getTSTInfo=function(E){var v={},g=h(E,0),b=u(E,g[1]);v.policy=mc(b);var w=a(E,g[2]);v.messageImprint=this.getMessageImprint(w);var _=u(E,g[3]);v.serial={hex:_};var A=u(E,g[4]);v.genTime={str:rr(A)};var C=0;if(g.length>5&&E.substr(g[5],2)=="30"){var x=a(E,g[5]);v.accuracy=this.getAccuracy(x),C++}if(g.length>5+C&&E.substr(g[5+C],2)=="01"){var N=u(E,g[5+C]);N=="ff"&&(v.ordering=!0),C++}if(g.length>5+C&&E.substr(g[5+C],2)=="02"){var H=u(E,g[5+C]);v.nonce={hex:H},C++}if(g.length>5+C&&E.substr(g[5+C],2)=="a0"){var ne=a(E,g[5+C]);ne="30"+ne.substr(2),pGeneralNames=r.getGeneralNames(ne);var pe=pGeneralNames[0].dn;v.tsa=pe,C++}if(g.length>5+C&&E.substr(g[5+C],2)=="a1"){var P=a(E,g[5+C]);P="30"+P.substr(2);var $=r.getExtParamArray(P);v.ext=$,C++}return v},this.getAccuracy=function(E){for(var v={},g=h(E,0),b=0;b<g.length;b++){var w=E.substr(g[b],2),_=u(E,g[b]),A=parseInt(_,16);w=="02"?v.seconds=A:w=="80"?v.millis=A:w=="81"&&(v.micros=A)}return v},this.getMessageImprint=function(E){if(E.substr(0,2)!="30")throw new Error("head of messageImprint hex shall be x30");var v={},g=h(E,0),b=i(E,0,[0,0]),w=u(E,b),_=n.hextooidstr(w),A=p.asn1.x509.OID.oid2name(_);if(A=="")throw new Error("hashAlg name undefined: "+_);var C=A,x=i(E,0,[1]);return v.alg=C,v.hash=u(E,x),v},this.getPKIStatusInfo=function(E){var v={},g=h(E,0),b=0;try{var w=u(E,g[0]),_=parseInt(w,16);v.status=m[_]}catch{}if(g.length>1&&E.substr(g[1],2)=="30"){var A=a(E,g[1]);v.statusstr=this.getPKIFreeText(A),b++}if(g.length>b&&E.substr(g[1+b],2)=="03"){var C=a(E,g[1+b]);v.failinfo=this.getPKIFailureInfo(C)}return v},this.getPKIFreeText=function(E){for(var v=[],g=h(E,0),b=0;b<g.length;b++)v.push(n.getString(E,g[b]));return v},this.getPKIFailureInfo=function(E){var v=n.getInt(E,0);return S[v]!=null?S[v]:v},this.getTimeStampReq=function(E){var v={};v.certreq=!1;var g=h(E,0);if(g.length<2)throw new Error("TimeStampReq must have at least 2 items");var b=a(E,g[1]);v.messageImprint=p.asn1.tsp.TSPUtil.parseMessageImprint(b);for(var w=2;w<g.length;w++){var _=g[w],A=E.substr(_,2);if(A=="06"){var C=u(E,_);v.policy=n.hextooidstr(C)}A=="02"&&(v.nonce=u(E,_)),A=="01"&&(v.certreq=!0)}return v}};(typeof p>"u"||!p)&&(p={});(typeof p.asn1>"u"||!p.asn1)&&(p.asn1={});(typeof p.asn1.cades>"u"||!p.asn1.cades)&&(p.asn1.cades={});p.asn1.cades.SignaturePolicyIdentifier=function(e){var t=p,r=t.asn1,n=r.cades,u=n.SignaturePolicyId;n.SignaturePolicyIdentifier.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.15",this.params=null,this.getValueArray=function(){return[new u(this.params)]},this.setByParam=function(a){this.params=a},e!=null&&this.setByParam(e)};Fe(p.asn1.cades.SignaturePolicyIdentifier,p.asn1.cms.Attribute);p.asn1.cades.SignaturePolicyId=function(e){var t=p,r=t.asn1,n=r.DERSequence,u=r.DERObjectIdentifier,a=r.x509,i=a.AlgorithmIdentifier,c=r.cades,h=c.SignaturePolicyId,m=c.OtherHashAlgAndValue;h.superclass.constructor.call(this),this.params=null,this.tohex=function(){var S=this.params,E=[];E.push(new u(S.oid)),E.push(new m(S));var v=new n({array:E});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(S){this.params=S},e!=null&&this.setByParam(e)};Fe(p.asn1.cades.SignaturePolicyId,p.asn1.ASN1Object);p.asn1.cades.OtherHashAlgAndValue=function(e){var t=Error,r=p,n=r.asn1,u=n.DERSequence,a=n.DEROctetString,i=n.x509,c=i.AlgorithmIdentifier,h=n.cades,m=h.OtherHashAlgAndValue;m.superclass.constructor.call(this),this.params=null,this.tohex=function(){var S=this.params;if(S.alg==null)throw new t("property 'alg' not specified");if(S.hash==null&&S.cert==null)throw new t("property 'hash' nor 'cert' not specified");var E=null;if(S.hash!=null)E=S.hash;else if(S.cert!=null){if(typeof S.cert!="string")throw new t("cert not string");var v=S.cert;S.cert.indexOf("-----BEGIN")!=-1&&(v=Fr(S.cert)),E=p.crypto.Util.hashHex(v,S.alg)}var g=[];g.push(new c({name:S.alg})),g.push(new a({hex:E}));var b=new u({array:g});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Fe(p.asn1.cades.OtherHashAlgAndValue,p.asn1.ASN1Object);p.asn1.cades.OtherHashValue=function(e){p.asn1.cades.OtherHashValue.superclass.constructor.call(this);var t=Error,r=p,n=r.lang.String.isHex,u=r.asn1,a=u.DEROctetString,i=r.crypto.Util.hashHex;this.params=null,this.tohex=function(){var c=this.params;if(c.hash==null&&c.cert==null)throw new t("hash or cert not specified");var h=null;if(c.hash!=null)h=c.hash;else if(c.cert!=null){if(typeof c.cert!="string")throw new t("cert not string");var m=c.cert;c.cert.indexOf("-----BEGIN")!=-1&&(m=Fr(c.cert)),h=p.crypto.Util.hashHex(m,"sha1")}return new a({hex:h}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Fe(p.asn1.cades.OtherHashValue,p.asn1.ASN1Object);p.asn1.cades.SignatureTimeStamp=function(e){var t=Error,r=p,n=r.lang.String.isHex,u=r.asn1,a=u.ASN1Object,i=u.x509,c=u.cades;c.SignatureTimeStamp.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.14",this.params=null,this.getValueArray=function(){var h=this.params;if(h.tst!=null)if(n(h.tst)){var m=new a;return m.hTLV=h.tst,[m]}else{if(h.tst instanceof a)return[h.tst];throw new t("params.tst has wrong value")}else if(h.res!=null){var S=h.res;if(S instanceof a&&(S=S.tohex()),typeof S!="string"||!n(S))throw new t("params.res has wrong value");var E=je.getTLVbyList(S,0,[1]),m=new a;return m.hTLV=h.tst,[m]}},e!=null&&this.setByParam(e)};Fe(p.asn1.cades.SignatureTimeStamp,p.asn1.cms.Attribute);p.asn1.cades.CompleteCertificateRefs=function(e){var t=Error,r=p,n=r.asn1,u=n.DERSequence,a=n.cades,i=a.OtherCertID,c=r.lang.String.isHex;a.CompleteCertificateRefs.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.21",this.params=null,this.getValueArray=function(){for(var h=this.params,m=[],S=0;S<h.array.length;S++){var E=h.array[S];if(typeof E=="string")if(E.indexOf("-----BEGIN")!=-1)E={cert:E};else if(c(E))E={hash:E};else throw new t("unsupported value: "+E);h.alg!=null&&E.alg==null&&(E.alg=h.alg),h.hasis!=null&&E.hasis==null&&(E.hasis=h.hasis);var v=new i(E);m.push(v)}var g=new u({array:m});return[g]},e!=null&&this.setByParam(e)};Fe(p.asn1.cades.CompleteCertificateRefs,p.asn1.cms.Attribute);p.asn1.cades.OtherCertID=function(e){var t=p,r=t.asn1,n=r.DERSequence,u=r.cms,a=u.IssuerSerial,i=r.cades,c=i.OtherHashValue,h=i.OtherHashAlgAndValue;i.OtherCertID.superclass.constructor.call(this),this.params=e,this.tohex=function(){var m=this.params;typeof m=="string"&&(m.indexOf("-----BEGIN")!=-1?m={cert:m}:_isHex(m)&&(m={hash:m}));var S=[],E=null;if(m.alg!=null?E=new h(m):E=new c(m),S.push(E),m.cert!=null&&m.hasis==!0||m.issuer!=null&&m.serial!=null){var v=new a(m);S.push(v)}var g=new n({array:S});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Fe(p.asn1.cades.OtherCertID,p.asn1.ASN1Object);p.asn1.cades.OtherHash=function(e){var t=Error,r=p,n=r.asn1,u=n.cms,a=n.cades,i=a.OtherHashAlgAndValue,c=a.OtherHashValue,h=r.crypto.Util.hashHex,m=r.lang.String.isHex;a.OtherHash.superclass.constructor.call(this),this.params=null,this.tohex=function(){var S=this.params;typeof S=="string"&&(S.indexOf("-----BEGIN")!=-1?S={cert:S}:m(S)&&(S={hash:S}));var E=null;return S.alg!=null?E=new i(S):E=new c(S),E.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Fe(p.asn1.cades.OtherHash,p.asn1.ASN1Object);p.asn1.cades.CAdESUtil=new function(){};p.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(e){var t=new p.asn1.cms.CMSParser,r=t.getCMSSignedData(e);return r};p.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(e,t,r){var n=je,u=n.getChildIdx,a=n.getTLV,i=n.getV,c=p,h=c.asn1,m=h.ASN1Object,S=h.cms,E=S.AttributeList,v=S.SignerInfo,g={},b=u(e,t);if(b.length!=6)throw"not supported items for SignerInfo (!=6)";var w=b.shift();g.version=a(e,w);var _=b.shift();g.si=a(e,_);var A=b.shift();g.digalg=a(e,A);var C=b.shift();g.sattrs=a(e,C);var x=b.shift();g.sigalg=a(e,x);var N=b.shift();g.sig=a(e,N),g.sigval=i(e,N);var H=null;return g.obj=new v,H=new m,H.hTLV=g.version,g.obj.dCMSVersion=H,H=new m,H.hTLV=g.si,g.obj.dSignerIdentifier=H,H=new m,H.hTLV=g.digalg,g.obj.dDigestAlgorithm=H,H=new m,H.hTLV=g.sattrs,g.obj.dSignedAttrs=H,H=new m,H.hTLV=g.sigalg,g.obj.dSigAlg=H,H=new m,H.hTLV=g.sig,g.obj.dSig=H,g.obj.dUnsignedAttrs=new E,g};(typeof p.asn1.csr>"u"||!p.asn1.csr)&&(p.asn1.csr={});p.asn1.csr.CertificationRequest=function(e){var t=p,r=t.asn1,n=r.DERBitString,u=r.DERSequence,a=r.csr,i=r.x509,c=a.CertificationRequestInfo;a.CertificationRequest.superclass.constructor.call(this),this.setByParam=function(h){this.params=h},this.sign=function(){var h=new c(this.params).tohex(),m=new p.crypto.Signature({alg:this.params.sigalg});m.init(this.params.sbjprvkey),m.updateHex(h);var S=m.sign();this.params.sighex=S},this.getPEM=function(){return un(this.tohex(),"CERTIFICATE REQUEST")},this.tohex=function(){var h=this.params,m=new p.asn1.csr.CertificationRequestInfo(this.params),S=new p.asn1.x509.AlgorithmIdentifier({name:h.sigalg});if(h.sighex==null&&h.sbjprvkey!=null&&this.sign(),h.sighex==null)throw new Error("sighex or sbjprvkey parameter not defined");var E=new n({hex:"00"+h.sighex}),v=new u({array:[m,S,E]});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Fe(p.asn1.csr.CertificationRequest,p.asn1.ASN1Object);p.asn1.csr.CertificationRequestInfo=function(e){var t=p,r=t.asn1,n=r.DERBitString,u=r.DERSequence,a=r.DERInteger,i=r.DERUTF8String,c=r.DERTaggedObject,h=r.ASN1Util.newObject,m=r.csr,S=r.x509,E=S.X500Name,v=S.Extensions,g=S.SubjectPublicKeyInfo,b=m.AttributeList;m.CertificationRequestInfo.superclass.constructor.call(this),this.params=null,this.setByParam=function(_){_!=null&&(this.params=_)},this.tohex=function(){var _=this.params,A=[];if(A.push(new a({int:0})),A.push(new E(_.subject)),A.push(new g(Nt.getKey(_.sbjpubkey))),_.attrs!=null){var C=w(_.attrs),x=h({tag:{tage:"a0",obj:C}});A.push(x)}else if(_.extreq!=null){var N=new v(_.extreq),x=h({tag:{tage:"a0",obj:{seq:[{oid:"1.2.840.113549.1.9.14"},{set:[N]}]}}});A.push(x)}else A.push(new c({tag:"a0",explicit:!1,obj:new i({str:""})}));var H=new u({array:A});return H.tohex()},this.getEncodedHex=function(){return this.tohex()};function w(_){for(var A=Error,C=p.asn1.x509.Extensions,x=[],N=0;N<_.length;N++){var H=_[N],ne=H.attr;if(ne=="extensionRequest"){var pe=new C(H.ext),P={seq:[{oid:"1.2.840.113549.1.9.14"},{set:[pe]}]};x.push(P)}else if(ne=="unstructuredName"){var P={seq:[{oid:"1.2.840.113549.1.9.2"},{set:H.names}]};x.push(P)}else if(ne=="challengePassword"){var P={seq:[{oid:"1.2.840.113549.1.9.7"},{set:[{utf8str:H.password}]}]};x.push(P)}else throw new A("unknown CSR attribute")}return{set:x}}e!=null&&this.setByParam(e)};Fe(p.asn1.csr.CertificationRequestInfo,p.asn1.ASN1Object);p.asn1.csr.AttributeList=function(e){function t(r){}};Fe(p.asn1.csr.AttributeList,p.asn1.ASN1Object);p.asn1.csr.CSRUtil=new function(){};p.asn1.csr.CSRUtil.newCSRPEM=function(e){var t=Nt,r=p.asn1.csr,n=new r.CertificationRequest(e),u=n.getPEM();return u};p.asn1.csr.CSRUtil.getParam=function(e,t){var r=je,n=r.getV,u=r.getIdxbyList,a=r.getTLVbyList,i=r.getTLVbyListEx,c=r.getVbyListEx,h=function(C){var x=u(C,0,[0,3,0,0],"06");return n(C,x)!="2a864886f70d01090e"?null:a(C,0,[0,3,0,1,0],"30")},m={};if(e.indexOf("-----BEGIN CERTIFICATE REQUEST")==-1)throw new Error("argument is not PEM file");var S=Fr(e,"CERTIFICATE REQUEST");t&&(m.tbs=a(S,0,[0]));try{var E=i(S,0,[0,1]);if(E=="3000")m.subject={};else{var w=new ht;m.subject=w.getX500Name(E)}}catch{}var v=i(S,0,[0,2]),g=Nt.getKey(v,null,"pkcs8pub");m.sbjpubkey=Nt.getPEM(g,"PKCS8PUB");var b=h(S),w=new ht;b!=null&&(m.extreq=w.getExtParamArray(b));try{var _=i(S,0,[1],"30"),w=new ht;m.sigalg=w.getAlgorithmIdentifierName(_)}catch{}try{var A=c(S,0,[2]);m.sighex=A}catch{}return m};p.asn1.csr.CSRUtil.verifySignature=function(e){try{var t=null;if(typeof e=="string"&&e.indexOf("-----BEGIN CERTIFICATE REQUEST")!=-1?t=p.asn1.csr.CSRUtil.getParam(e,!0):typeof e=="object"&&e.sbjpubkey!=null&&e.sigalg!=null&&e.sighex!=null&&e.tbs!=null&&(t=e),t==null)return!1;var r=new p.crypto.Signature({alg:t.sigalg});return r.init(t.sbjpubkey),r.updateHex(t.tbs),r.verify(t.sighex)}catch(n){return alert(n),!1}};(typeof p>"u"||!p)&&(p={});(typeof p.asn1>"u"||!p.asn1)&&(p.asn1={});(typeof p.asn1.ocsp>"u"||!p.asn1.ocsp)&&(p.asn1.ocsp={});p.asn1.ocsp.DEFAULT_HASH="sha1";p.asn1.ocsp.OCSPResponse=function(e){p.asn1.ocsp.OCSPResponse.superclass.constructor.call(this);var t=p.asn1.DEREnumerated,r=p.asn1.ASN1Util.newObject,n=p.asn1.ocsp.ResponseBytes,u=["successful","malformedRequest","internalError","tryLater","_not_used_","sigRequired","unauthorized"];this.params=null,this._getStatusCode=function(){var a=this.params.resstatus;return typeof a=="number"?a:typeof a!="string"?-1:u.indexOf(a)},this.setByParam=function(a){this.params=a},this.tohex=function(){var a=this.params,i=this._getStatusCode();if(i==-1)throw new Error("responseStatus not supported: "+a.resstatus);if(i!=0)return r({seq:[{enum:{int:i}}]}).tohex();var c=new n(a);return r({seq:[{enum:{int:0}},{tag:{tag:"a0",explicit:!0,obj:c}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Fe(p.asn1.ocsp.OCSPResponse,p.asn1.ASN1Object);p.asn1.ocsp.ResponseBytes=function(e){p.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);var t=p.asn1,r=t.DERSequence,n=t.DERObjectIdentifier,u=t.DEROctetString,a=t.ocsp.BasicOCSPResponse;this.params=null,this.setByParam=function(i){this.params=i},this.tohex=function(){var i=this.params;if(i.restype!="ocspBasic")throw new Error("not supported responseType: "+i.restype);var c=new a(i),h=[];h.push(new n({name:"ocspBasic"})),h.push(new u({hex:c.tohex()}));var m=new r({array:h});return m.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Fe(p.asn1.ocsp.ResponseBytes,p.asn1.ASN1Object);p.asn1.ocsp.BasicOCSPResponse=function(e){p.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);var t=Error,r=p.asn1,n=r.ASN1Object,u=r.DERSequence,a=r.DERGeneralizedTime,i=r.DERTaggedObject,c=r.DERBitString,h=r.x509.Extensions,m=r.x509.AlgorithmIdentifier,S=r.ocsp,E=S.ResponderID;_SingleResponseList=S.SingleResponseList,_ResponseData=S.ResponseData,this.params=null,this.setByParam=function(v){this.params=v},this.sign=function(){var v=this.params,g=v.tbsresp.tohex(),b=new p.crypto.Signature({alg:v.sigalg});b.init(v.reskey),b.updateHex(g),v.sighex=b.sign()},this.tohex=function(){var v=this.params;v.tbsresp==null&&(v.tbsresp=new _ResponseData(v)),v.sighex==null&&v.reskey!=null&&this.sign();var g=[];if(g.push(v.tbsresp),g.push(new m({name:v.sigalg})),g.push(new c({hex:"00"+v.sighex})),v.certs!=null&&v.certs.length!=null){for(var b=[],w=0;w<v.certs.length;w++){var _=v.certs[w],A=null;if(je.isASN1HEX(_))A=_;else if(_.match(/-----BEGIN/))A=Fr(_);else throw new t("certs["+w+"] not hex or PEM");b.push(new n({tlv:A}))}var C=new u({array:b});g.push(new i({tag:"a0",explicit:!0,obj:C}))}var x=new u({array:g});return x.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Fe(p.asn1.ocsp.BasicOCSPResponse,p.asn1.ASN1Object);p.asn1.ocsp.ResponseData=function(e){p.asn1.ocsp.ResponseData.superclass.constructor.call(this);var t=Error,r=p.asn1,n=r.DERSequence,u=r.DERGeneralizedTime,a=r.DERTaggedObject,i=r.x509.Extensions,c=r.ocsp,h=c.ResponderID;_SingleResponseList=c.SingleResponseList,this.params=null,this.tohex=function(){var m=this.params;m.respid!=null&&new t("respid not specified"),m.prodat!=null&&new t("prodat not specified"),m.array!=null&&new t("array not specified");var S=[];if(S.push(new h(m.respid)),S.push(new u(m.prodat)),S.push(new _SingleResponseList(m.array)),m.ext!=null){var E=new i(m.ext);S.push(new a({tag:"a1",explicit:!0,obj:E}))}var v=new n({array:S});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(m){this.params=m},e!==void 0&&this.setByParam(e)};Fe(p.asn1.ocsp.ResponseData,p.asn1.ASN1Object);p.asn1.ocsp.ResponderID=function(e){p.asn1.ocsp.ResponderID.superclass.constructor.call(this);var t=p,r=t.asn1,n=r.ASN1Util.newObject,u=r.x509.X500Name,a=t.lang.String.isHex,i=Error;this.params=null,this.tohex=function(){var c=this.params;if(c.key!=null){var h=null;if(typeof c.key=="string"){if(a(c.key)&&(h=c.key),c.key.match(/-----BEGIN CERTIFICATE/)){var m=new ht(c.key),S=m.getExtSubjectKeyIdentifier();S!=null&&(h=S.kid.hex)}}else if(c.key instanceof ht){var S=c.key.getExtSubjectKeyIdentifier();S!=null&&(h=S.kid.hex)}if(h==null)throw new i("wrong key member value");var E=n({tag:{tag:"a2",explicit:!0,obj:{octstr:{hex:h}}}});return E.tohex()}else if(c.name!=null){var v=null;if(typeof c.name=="string"&&c.name.match(/-----BEGIN CERTIFICATE/)){var m=new ht(c.name);v=m.getSubject()}else c.name instanceof ht?v=c.name.getSubject():typeof c.name=="object"&&(c.name.array!=null||c.name.str!=null)&&(v=c.name);if(v==null)throw new i("wrong name member value");var E=n({tag:{tag:"a1",explicit:!0,obj:new u(v)}});return E.tohex()}throw new i("key or name not specified")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(c){this.params=c},e!==void 0&&this.setByParam(e)};Fe(p.asn1.ocsp.ResponderID,p.asn1.ASN1Object);p.asn1.ocsp.SingleResponseList=function(e){p.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);var t=p.asn1,r=t.DERSequence,n=t.ocsp.SingleResponse;this.params=null,this.tohex=function(){var u=this.params;if(typeof u!="object"||u.length==null)throw new Error("params not specified properly");for(var a=[],i=0;i<u.length;i++)a.push(new n(u[i]));var c=new r({array:a});return c.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(u){this.params=u},e!==void 0&&this.setByParam(e)};Fe(p.asn1.ocsp.SingleResponseList,p.asn1.ASN1Object);p.asn1.ocsp.SingleResponse=function(e){var t=Error,r=p,n=r.asn1,u=n.DERSequence,a=n.DERGeneralizedTime,i=n.DERTaggedObject,c=n.ocsp,h=c.CertID,m=c.CertStatus,S=n.x509,E=S.Extensions;c.SingleResponse.superclass.constructor.call(this),this.params=null,this.tohex=function(){var v=this.params,g=[];if(v.certid==null)throw new t("certid unspecified");if(v.status==null)throw new t("status unspecified");if(v.thisupdate==null)throw new t("thisupdate unspecified");if(g.push(new h(v.certid)),g.push(new m(v.status)),g.push(new a(v.thisupdate)),v.nextupdate!=null){var b=new a(v.nextupdate);g.push(new i({tag:"a0",explicit:!0,obj:b}))}if(v.ext!=null){var w=new E(v.ext);g.push(new i({tag:"a1",explicit:!0,obj:w}))}var _=new u({array:g});return _.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(v){this.params=v},e!==void 0&&this.setByParam(e)};Fe(p.asn1.ocsp.SingleResponse,p.asn1.ASN1Object);p.asn1.ocsp.CertID=function(e){var t=p,r=t.asn1,n=r.DEROctetString,u=r.DERInteger,a=r.DERSequence,i=r.x509,c=i.AlgorithmIdentifier,h=r.ocsp,m=h.DEFAULT_HASH,S=t.crypto,E=S.Util.hashHex,v=ht,g=je,b=g.getVbyList;h.CertID.superclass.constructor.call(this),this.DEFAULT_HASH="sha1",this.params=null,this.setByValue=function(w,_,A,C){C==null&&(C=this.DEFAULT_HASH),this.params={alg:C,issname:w,isskey:_,sbjsn:A}},this.setByCert=function(w,_,A){A==null&&(A=this.DEFAULT_HASH),this.params={alg:A,issuerCert:w,subjectCert:_}},this.getParamByCerts=function(w,_,A){A==null&&(A=this.DEFAULT_HASH);var C=new v(w),x=new v(_),N=E(C.getSubjectHex(),A),H=C.getPublicKeyHex(),ne=E(b(H,0,[1],"03",!0),A),pe=x.getSerialNumberHex(),P={alg:A,issname:N,isskey:ne,sbjsn:pe};return P},this.tohex=function(){if(typeof this.params!="object")throw new Error("params not set");var w=this.params,_,A,C,x;if(w.alg==null?x=this.DEFAULT_HASH:x=w.alg,w.issuerCert!=null&&w.subjectCert!=null){var N=this.getParamByCerts(w.issuerCert,w.subjectCert,x);_=N.issname,A=N.isskey,C=N.sbjsn}else if(w.issname!=null&&w.isskey!=null&&w.sbjsn!=null)_=w.issname,A=w.isskey,C=w.sbjsn;else throw new Error("required param members not defined");var H=new c({name:x}),ne=new n({hex:_}),pe=new n({hex:A}),P=new u({hex:C}),$=new a({array:[H,ne,pe,P]});return this.hTLV=$.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Fe(p.asn1.ocsp.CertID,p.asn1.ASN1Object);p.asn1.ocsp.CertStatus=function(e){p.asn1.ocsp.CertStatus.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(t.status=="good")return"8000";if(t.status=="unknown")return"8200";if(t.status=="revoked"){var r=[{gentime:{str:t.time}}];t.reason!=null&&r.push({tag:{tag:"a0",explicit:!0,obj:{enum:{int:t.reason}}}});var n={tag:"a1",explicit:!1,obj:{seq:r}};return p.asn1.ASN1Util.newObject({tag:n}).tohex()}throw new Error("bad status")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},e!==void 0&&this.setByParam(e)};Fe(p.asn1.ocsp.CertStatus,p.asn1.ASN1Object);p.asn1.ocsp.Request=function(e){var t=p,r=t.asn1,n=r.DERSequence,u=r.ocsp;if(u.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.tohex=function(){var i=[];if(this.dReqCert===null)throw"reqCert not set";i.push(this.dReqCert);var c=new n({array:i});return this.hTLV=c.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},typeof e<"u"){var a=new u.CertID(e);this.dReqCert=a}};Fe(p.asn1.ocsp.Request,p.asn1.ASN1Object);p.asn1.ocsp.TBSRequest=function(e){var t=p,r=t.asn1,n=r.DERSequence,u=r.ocsp;u.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(a){for(var i=[],c=0;c<a.length;c++){var h=new u.Request(a[0]);i.push(h)}this.dRequestList=i},this.tohex=function(){var a=[];if(this.version!==0)throw"not supported version: "+this.version;if(this.dRequestorName!==null)throw"requestorName not supported";var i=new n({array:this.dRequestList});if(a.push(i),this.dRequestExt!==null)throw"requestExtensions not supported";var c=new n({array:a});return this.hTLV=c.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&e.reqList!==void 0&&this.setRequestListByParam(e.reqList)};Fe(p.asn1.ocsp.TBSRequest,p.asn1.ASN1Object);p.asn1.ocsp.OCSPRequest=function(e){var t=p,r=t.asn1,n=r.DERSequence,u=r.ocsp;if(u.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.tohex=function(){var i=[];if(this.dTbsRequest!==null)i.push(this.dTbsRequest);else throw"tbsRequest not set";if(this.dOptionalSignature!==null)throw"optionalSignature not supported";var c=new n({array:i});return this.hTLV=c.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&e.reqList!==void 0){var a=new u.TBSRequest(e);this.dTbsRequest=a}};Fe(p.asn1.ocsp.OCSPRequest,p.asn1.ASN1Object);p.asn1.ocsp.OCSPUtil={};p.asn1.ocsp.OCSPUtil.getRequestHex=function(e,t,r){var n=p,u=n.asn1,a=u.ocsp;r===void 0&&(r=a.DEFAULT_HASH);var i={alg:r,issuerCert:e,subjectCert:t},c=new a.OCSPRequest({reqList:[i]});return c.tohex()};p.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(e){var t=je,r=t.getVbyList,n=t.getVbyListEx,u=t.getIdxbyList,a=t.getIdxbyListEx,i=t.getV,c={};try{var h=n(e,0,[0],"0a");c.responseStatus=parseInt(h,16)}catch{}if(c.responseStatus!==0)return c;try{var m=u(e,0,[1,0,1,0,0,2,0,1]);e.substr(m,2)==="80"?c.certStatus="good":e.substr(m,2)==="a1"?(c.certStatus="revoked",c.revocationTime=rr(r(e,m,[0]))):e.substr(m,2)==="82"&&(c.certStatus="unknown")}catch{}try{var S=u(e,0,[1,0,1,0,0,2,0,2]);c.thisUpdate=rr(i(e,S))}catch{}try{var E=u(e,0,[1,0,1,0,0,2,0,3]);e.substr(E,2)==="a0"&&(c.nextUpdate=rr(r(e,E,[0])))}catch{}return c};p.asn1.ocsp.OCSPParser=function(){var e=Error,t=ht,r=new t,n=je,u=n.getV,a=n.getTLV,i=n.getIdxbyList,c=n.getVbyList,h=n.getTLVbyList,m=n.getVbyListEx,S=n.getTLVbyListEx,E=n.getChildIdx;this.getOCSPRequest=function(v){var g=E(v,0);if(g.length!=1&&g.length!=2)throw new e("wrong number elements: "+g.length);var b=this.getTBSRequest(a(v,g[0]));return b},this.getTBSRequest=function(v){var g={},b=S(v,0,[0],"30");g.array=this.getRequestList(b);var w=S(v,0,["[2]",0],"30");return w!=null&&(g.ext=r.getExtParamArray(w)),g},this.getRequestList=function(v){for(var g=[],b=E(v,0),w=0;w<b.length;w++){var v=a(v,b[w]);g.push(this.getRequest(v))}return g},this.getRequest=function(v){var g=E(v,0);if(g.length!=1&&g.length!=2)throw new e("wrong number elements: "+g.length);var b=this.getCertID(a(v,g[0]));if(g.length==2){var w=i(v,0,[1,0]);b.ext=r.getExtParamArray(a(v,w))}return b},this.getCertID=function(v){var g=E(v,0);if(g.length!=4)throw new e("wrong number elements: "+g.length);var b=new t,w={};return w.alg=b.getAlgorithmIdentifierName(a(v,g[0])),w.issname=u(v,g[1]),w.isskey=u(v,g[2]),w.sbjsn=u(v,g[3]),w},this.getOCSPResponse=function(v){var g=E(v,0),b,w=u(v,g[0]),_=parseInt(w);if(g.length==1)return{resstatus:_};var A=h(v,0,[1,0]);return b=this.getResponseBytes(A),b.resstatus=_,b},this.getResponseBytes=function(v){var g=E(v,0),b,w=h(v,0,[1,0]);b=this.getBasicOCSPResponse(w);var _=u(v,g[0]);return b.restype=p.asn1.x509.OID.oid2name(mc(_)),b},this.getBasicOCSPResponse=function(v){var g=E(v,0),b;b=this.getResponseData(a(v,g[0]));var w=new ht;b.alg=w.getAlgorithmIdentifierName(a(v,g[1]));var _=u(v,g[2]);b.sighex=_.substr(2);var A=m(v,0,["[0]"]);if(A!=null){for(var C=E(A,0),x=[],N=0;N<C.length;N++){var H=a(A,C[N]);x.push(H)}b.certs=x}return b},this.getResponseData=function(v){var g=E(v,0),b=g.length,w={},_=0;v.substr(g[0],2)=="a0"&&_++,w.respid=this.getResponderID(a(v,g[_++]));var A=u(v,g[_++]);if(w.prodat=rr(A),w.array=this.getSingleResponseList(a(v,g[_++])),v.substr(g[b-1],2)=="a1"){var C=h(v,g[b-1],[0]),x=new ht;w.ext=x.getExtParamArray(C)}return w},this.getResponderID=function(v){var g={};if(v.substr(0,2)=="a2"){var b=c(v,0,[0]);g.key=b}if(v.substr(0,2)=="a1"){var w=h(v,0,[0]),_=new ht;g.name=_.getX500Name(w)}return g},this.getSingleResponseList=function(v){for(var g=E(v,0),b=[],w=0;w<g.length;w++){var _=this.getSingleResponse(a(v,g[w]));b.push(_)}return b},this.getSingleResponse=function(v){var g=E(v,0),b={},w=this.getCertID(a(v,g[0]));b.certid=w;var _=this.getCertStatus(a(v,g[1]));if(b.status=_,v.substr(g[2],2)=="18"){var A=u(v,g[2]);b.thisupdate=rr(A)}for(var C=3;C<g.length;C++){if(v.substr(g[C],2)=="a0"){var x=c(v,g[C],[0],"18");b.nextupdate=rr(x)}if(v.substr(g[C],2)=="a1"){var N=new ht,H=h(v,0,[C,0]);b.ext=N.getExtParamArray(H)}}return b},this.getCertStatus=function(v){var g={};if(v=="8000")return{status:"good"};if(v=="8200")return{status:"unknown"};if(v.substr(0,2)=="a1"){g.status="revoked";var b=c(v,0,[0]),w=rr(b);g.time=w}return g}};var p;(typeof p>"u"||!p)&&(p={});(typeof p.lang>"u"||!p.lang)&&(p.lang={});p.lang.String=function(){};function l0(e){for(var t=new Array,r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function f0(e){for(var t="",r=0;r<e.length;r++)t=t+String.fromCharCode(e[r]);return t}function fc(e){for(var t="",r=0;r<e.length;r++){var n=e[r].toString(16);n.length==1&&(n="0"+n),t=t+n}return t}function Pn(e){return fc(l0(e))}function XS(e){return Yi(Pn(e))}function ZS(e){return $a(Yi(Pn(e)))}function QS(e){return f0(i0(Ru(e)))}function $a(e){return e=e.replace(/\=/g,""),e=e.replace(/\+/g,"-"),e=e.replace(/\//g,"_"),e}function Ru(e){return e.length%4==2?e=e+"==":e.length%4==3&&(e=e+"="),e=e.replace(/-/g,"+"),e=e.replace(/_/g,"/"),e}function Kr(e){return e.length%2==1&&(e="0"+e),$a(Yi(e))}function br(e){return ka(Ru(e))}var $u,pi;typeof Buffer=="function"?($u=function(e){return $a(Buffer.from(e,"utf8").toString("base64"))},pi=function(e){return Buffer.from(Ru(e),"base64").toString("utf8")}):($u=function(e){return Kr(dc(vc(e)))},pi=function(e){return decodeURIComponent(gc(br(e)))});function e_(e){return Yi(dc(vc(e)))}function t_(e){return decodeURIComponent(gc(ka(e)))}function hc(e){return dc(vc(e)).toLowerCase()}function rr(e){try{return decodeURIComponent(gc(e))}catch{return null}}function r_(e){return rr(n_(e))}function n_(e){for(var t=e.match(/.{1,2}/g),r=[],n=0;n<t.length;n++){var u=parseInt(t[n],16);161<=u&&u<=191?(r.push("c2"),r.push(t[n])):192<=u&&u<=255?(r.push("c3"),r.push((u-64).toString(16))):r.push(t[n])}return r.join("")}function In(e){for(var t="",r=0;r<e.length-1;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t}function Fi(e){for(var t="",r=0;r<e.length;r++)t+=("0"+e.charCodeAt(r).toString(16)).slice(-2);return t}function dh(e){return Yi(e)}function i_(e){return pc(dh(e),64)}function pc(e,t){return e=e.replace(new RegExp("(.{"+t+"})","g"),`$1\r
`),e=e.replace(/\s+$/,""),e}function h0(e){var t=e.replace(/[^0-9A-Za-z\/+=]*/g,""),r=ka(t);return r}function s_(e,t){return"-----BEGIN "+t+`-----\r
`+pc(e,64)+`\r
-----END `+t+`-----\r
`}function un(e,t){return"-----BEGIN "+t+`-----\r
`+pc(dh(e),64)+`\r
-----END `+t+`-----\r
`}function Fr(e,t){if(e.indexOf("-----BEGIN ")==-1)throw new Error("can't find PEM header");return t!==void 0?(e=e.replace(new RegExp("^[^]*-----BEGIN "+t+"-----"),""),e=e.replace(new RegExp("-----END "+t+"-----[^]*$"),"")):(e=e.replace(/^[^]*-----BEGIN [^-]+-----/,""),e=e.replace(/-----END [^-]+-----[^]*$/,"")),h0(e)}function a_(e){return e.indexOf("-----BEGIN ")==-1||e.indexOf("-----END ")==-1?null:(e=e.replace(/^[\s\S]*?-----BEGIN [^-]+-----/m,""),e=e.replace(/-----END [\s\S]+$/m,""),e=e.replace(/\s+/g,""),e.match(/^[0-9a-zA-Z+/=]+$/)?e:null)}function u_(e){if(e.length%2!=0)throw"input is not even length";if(e.match(/^[0-9A-Fa-f]+$/)==null)throw"input is not hexadecimal";for(var t=new ArrayBuffer(e.length/2),r=new DataView(t),n=0;n<e.length/2;n++)r.setUint8(n,parseInt(e.substr(n*2,2),16));return t}function o_(e){for(var t="",r=new DataView(e),n=0;n<e.byteLength;n++)t+=("00"+r.getUint8(n).toString(16)).slice(-2);return t}function gh(e){var t,r,n,u,a,i,c,h,m,S,E,v;if(e=d0(e),v=e.match(/^(\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/),v)return t=parseInt(v[1]),r=parseInt(v[2])-1,n=parseInt(v[3]),u=parseInt(v[4]),a=parseInt(v[5]),i=parseInt(v[6]),c=0,S=v[7],S!==""&&(E=(S.substr(1)+"00").substr(0,3),c=parseInt(E)),Date.UTC(t,r,n,u,a,i,c);throw new Error("unsupported zulu format: "+e)}function c_(e){var t=new Date(e),r=("0000"+t.getUTCFullYear()).slice(-4),n=("00"+(t.getUTCMonth()+1)).slice(-2),u=("00"+t.getUTCDate()).slice(-2),a=("00"+t.getUTCHours()).slice(-2),i=("00"+t.getUTCMinutes()).slice(-2),c=("00"+t.getUTCSeconds()).slice(-2),h=("000"+t.getUTCMilliseconds()).slice(-3);return h=h.replace(/0+$/,""),h=h!=""?"."+h:h,r+n+u+a+i+c+h+"Z"}function p0(e){return Math.round(gh(e)/1e3)}function l_(e){return new Date(gh(e))}function f_(e,t,r){var n,u=e.getUTCFullYear();if(t){if(u<1950||2049<u)throw"not proper year for UTCTime: "+u;n=(""+u).slice(-2)}else n=("000"+u).slice(-4);if(n+=("0"+(e.getUTCMonth()+1)).slice(-2),n+=("0"+e.getUTCDate()).slice(-2),n+=("0"+e.getUTCHours()).slice(-2),n+=("0"+e.getUTCMinutes()).slice(-2),n+=("0"+e.getUTCSeconds()).slice(-2),r){var a=e.getUTCMilliseconds();a!==0&&(a=("00"+a).slice(-3),a=a.replace(/0+$/g,""),n+="."+a)}return n+="Z",n}function d0(e){return e.match(/^[0-9]{12}Z$/)||e.match(/^[0-9]{12}[.][0-9]*Z$/)?e.match(/^[0-4]/)?"20"+e:"19"+e:e}function dc(e){return e.replace(/%/g,"")}function gc(e){return e.replace(/(..)/g,"%$1")}function uh(e){var t="malformed IPv6 address";if(!e.match(/^[0-9A-Fa-f:]+$/))throw t;e=e.toLowerCase();var r=e.split(":").length-1;if(r<2)throw t;var n=":".repeat(7-r+2);e=e.replace("::",n);var u=e.split(":");if(u.length!=8)throw t;for(var a=0;a<8;a++)u[a]=("0000"+u[a]).slice(-4);return u.join("")}function oh(e){if(!e.match(/^[0-9A-Fa-f]{32}$/))throw new Error("malformed IPv6 address: "+e);e=e.toLowerCase();var t=e.match(/.{1,4}/g);t=t.map(function(u){return u.replace(/^0+/,"")}),t=t.map(function(u){return u==""?"0":u}),e=":"+t.join(":")+":";var r=e.match(/:(0:){2,}/g);if(r==null)return e.slice(1,-1);var n=r.sort().slice(-1)[0];return e=e.replace(n.substr(0,n.length-1),":"),e.substr(0,2)!="::"&&(e=e.substr(1)),e.substr(-2,2)!="::"&&(e=e.substr(0,e.length-1)),e}function ac(e){var t=new Error("malformed hex value");if(!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw t;if(e.length==8){var r;try{return r=parseInt(e.substr(0,2),16)+"."+parseInt(e.substr(2,2),16)+"."+parseInt(e.substr(4,2),16)+"."+parseInt(e.substr(6,2),16),r}catch{throw t}}else if(e.length==16)try{return ac(e.substr(0,8))+"/"+r0(e.substr(8))}catch{throw t}else{if(e.length==32)return oh(e);if(e.length==64){try{return oh(e.substr(0,32))+"/"+r0(e.substr(32))}catch{throw t}return}else return e}}function r0(e){var t=new Error("malformed mask"),r;try{r=new ae(e,16).toString(2)}catch{throw t}if(!r.match(/^1*0*$/))throw t;return r.replace(/0+$/,"").length}function vh(e){var t=new Error("malformed IP address");if(e=e.toLowerCase(e),!e.match(/^[0-9a-f.:/]+$/))throw t;if(e.match(/^[0-9.]+$/)){var r=e.split(".");if(r.length!==4)throw t;var n="";try{for(var u=0;u<4;u++){var a=parseInt(r[u]);n+=("0"+a.toString(16)).slice(-2)}return n}catch{throw t}}else if(e.match(/^[0-9.]+\/[0-9]+$/)){var i=e.split("/");return vh(i[0])+n0(parseInt(i[1]),32)}else{if(e.match(/^[0-9a-f:]+$/)&&e.indexOf(":")!==-1)return uh(e);if(e.match(/^[0-9a-f:]+\/[0-9]+$/)&&e.indexOf(":")!==-1){var i=e.split("/");return uh(i[0])+n0(parseInt(i[1]),128)}else throw t}}function n0(e,t){if(t==32&&e==0)return"00000000";if(t==128&&e==0)return"00000000000000000000000000000000";var r=Array(e+1).join("1")+Array(t-e+1).join("0");return new ae(r,2).toString(16)}function mh(e){function t(u){var a=parseInt(u.substr(0,2),16),i=parseInt(u.substr(2),16);if(a==0&i<128)return String.fromCharCode(i);if(a<8){var c=192|(a&7)<<3|(i&192)>>6,h=128|i&63;return rr(c.toString(16)+h.toString(16))}var c=224|(a&240)>>4,h=128|(a&15)<<2|(i&192)>>6,m=128|i&63;return rr(c.toString(16)+h.toString(16)+m.toString(16))}var r=e.match(/.{4}/g),n=r.map(t);return n.join("")}function vc(e){for(var t=encodeURIComponent(e),r="",n=0;n<t.length;n++)t[n]=="%"?(r=r+t.substr(n,3),n=n+2):r=r+"%"+Pn(t[n]);return r}function h_(e){return e=e.replace(/\r\n/mg,`
`),e}function p_(e){return e=e.replace(/\r\n/mg,`
`),e=e.replace(/\n/mg,`\r
`),e}p.lang.String.isInteger=function(e){return e.match(/^[0-9]+$/)?!0:!!e.match(/^-[0-9]+$/)};p.lang.String.isHex=function(e){return g0(e)};function g0(e){return!!(e.length%2==0&&(e.match(/^[0-9a-f]+$/)||e.match(/^[0-9A-F]+$/)))}p.lang.String.isBase64=function(e){return e=e.replace(/\s+/g,""),!!(e.match(/^[0-9A-Za-z+\/]+={0,3}$/)&&e.length%4==0)};p.lang.String.isBase64URL=function(e){return e.match(/[+/=]/)?!1:(e=Ru(e),p.lang.String.isBase64(e))};function wh(e){return!!e.match(/^[0-9A-Za-z-_.]+$/)}p.lang.String.isIntegerArray=function(e){return e=e.replace(/\s+/g,""),!!e.match(/^\[[0-9,]+\]$/)};p.lang.String.isPrintable=function(e){return e.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null};p.lang.String.isIA5=function(e){return e.match(/^[\x20-\x21\x23-\x7f]*$/)!==null};p.lang.String.isMail=function(e){return e.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};function ch(e){return e.length%2==1?"0"+e:e.substr(0,1)>"7"?"00"+e:e}function d_(e){e=e.replace(/^\s*\[\s*/,""),e=e.replace(/\s*\]\s*$/,""),e=e.replace(/\s*/g,"");try{var t=e.split(/,/).map(function(r,n,u){var a=parseInt(r);if(a<0||255<a)throw"integer not in range 0-255";var i=("00"+a.toString(16)).slice(-2);return i}).join("");return t}catch(r){throw"malformed integer array string: "+r}}var g_=function(e,t){var r=e.length;e.length>t.length&&(r=t.length);for(var n=0;n<r;n++)if(e.charCodeAt(n)!=t.charCodeAt(n))return n;return e.length!=t.length?r:-1};function v0(e){var t=function(c){var h=c.toString(16);return h.length==1&&(h="0"+h),h},r=function(c){var h="",m=parseInt(c,10),S=m.toString(2),E=7-S.length%7;E==7&&(E=0);for(var v="",g=0;g<E;g++)v+="0";S=v+S;for(var g=0;g<S.length-1;g+=7){var b=S.substr(g,7);g!=S.length-7&&(b="1"+b),h+=t(parseInt(b,2))}return h};try{if(!e.match(/^[0-9.]+$/))return null;var n="",u=e.split("."),a=parseInt(u[0],10)*40+parseInt(u[1],10);n+=t(a),u.splice(0,2);for(var i=0;i<u.length;i++)n+=r(u[i]);return n}catch{return null}}function mc(e){if(!g0(e))return null;try{var t=[],r=e.substr(0,2),n=parseInt(r,16);t[0]=new String(Math.floor(n/40)),t[1]=new String(n%40);for(var u=e.substr(2),a=[],i=0;i<u.length/2;i++)a.push(parseInt(u.substr(i*2,2),16));for(var c=[],h="",i=0;i<a.length;i++)a[i]&128?h=h+uc((a[i]&127).toString(2),7):(h=h+uc((a[i]&127).toString(2),7),c.push(new String(parseInt(h,2))),h="");var m=t.join(".");return c.length>0&&(m=m+"."+c.join(".")),m}catch{return null}}function m0(e){var t=new ae(String(e),10);return Bu(t)}function Bu(e){var t=e.toString(16);if(t.substr(0,1)!="-")return t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t),t;var r=t.substr(1),n=r.length;n%2==1?n+=1:t.match(/^[0-7]/)||(n+=2);for(var u="",a=0;a<n;a++)u+="f";var i=new ae(u,16),c=i.xor(e).add(ae.ONE);return t=c.toString(16).replace(/^-/,""),t}var uc=function(e,t,r){return r==null&&(r="0"),e.length>=t?e:new Array(t-e.length+1).join(r)+e};function w0(e){if(e.length%2!=0||(e=e.toLowerCase(),e.match(/^[0-9a-f]+$/)==null))return-1;try{var t=e.substr(0,2);if(t=="00")return parseInt(e.substr(2),16);var r=parseInt(t,16);if(r>7)return-1;var n=e.substr(2),u=parseInt(n,16).toString(2);u=="0"&&(u="00000000"),u=u.slice(0,0-r);var a=parseInt(u,2);return Number.isNaN(a)?-1:a}catch{return-1}}function b0(e){if(typeof e!="number"||e<0)return null;var t=Number(e).toString(2),r=8-t.length%8;r==8&&(r=0),t=t+uc("",r,"0");var n=parseInt(t,2).toString(16);n.length%2==1&&(n="0"+n);var u="0"+r;return u+n}function A0(e){if(typeof e!="string"||e.length%2!=0||!e.match(/^[0-9a-f]+$/))return null;try{var t=parseInt(e.substr(0,2),16);if(t<0||7<t)return null;for(var r=e.substr(2),n="",u=0;u<r.length;u+=2){var a=r.substr(u,2),i=parseInt(a,16).toString(2);i=("0000000"+i).slice(-8),n+=i}return n.substr(0,n.length-t)}catch{return null}}function v_(e){if(typeof e!="string"||e.match(/^[01]+$/)==null)return null;try{var t=parseInt(e,2);return b0(t)}catch{return null}}function oc(e,t){for(var r=0,n=0;n<e.length;n++)r|=1<<t[e[n]];for(var u=r.toString(2),a="",n=u.length-1;n>=0;n--)a+=u[n];return a}function or(e,n,r){if(typeof e=="object"){for(var n=String(n).split("."),u=0;u<n.length&&e;u++){var a=n[u];a.match(/^[0-9]+$/)&&(a=parseInt(a)),e=e[a]}return e||e===!1?e:r}}function Fe(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t)}(typeof p>"u"||!p)&&(p={});(typeof p.crypto>"u"||!p.crypto)&&(p.crypto={});p.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:We.algo.MD5,sha1:We.algo.SHA1,sha224:We.algo.SHA224,sha256:We.algo.SHA256,sha384:We.algo.SHA384,sha512:We.algo.SHA512,ripemd160:We.algo.RIPEMD160},this.getDigestInfoHex=function(e,t){if(typeof this.DIGESTINFOHEAD[t]>"u")throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.DIGESTINFOHEAD[t]+e},this.getPaddedDigestInfoHex=function(e,t,r){var n=this.getDigestInfoHex(e,t),u=r/4;if(n.length+22>u)throw"key is too short for SigAlg: keylen="+r+","+t;for(var a="0001",i="00"+n,c="",h=u-a.length-i.length,m=0;m<h;m+=2)c+="ff";var S=a+c+i;return S},this.hashString=function(e,t){var r=new p.crypto.MessageDigest({alg:t});return r.digestString(e)},this.hashHex=function(e,t){var r=new p.crypto.MessageDigest({alg:t});return r.digestHex(e)},this.sha1=function(e){return this.hashString(e,"sha1")},this.sha256=function(e){return this.hashString(e,"sha256")},this.sha256Hex=function(e){return this.hashHex(e,"sha256")},this.sha512=function(e){return this.hashString(e,"sha512")},this.sha512Hex=function(e){return this.hashHex(e,"sha512")},this.isKey=function(e){return e instanceof bt||e instanceof p.crypto.DSA||e instanceof p.crypto.ECDSA}};p.crypto.Util.md5=function(e){var t=new p.crypto.MessageDigest({alg:"md5",prov:"cryptojs"});return t.digestString(e)};p.crypto.Util.ripemd160=function(e){var t=new p.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"});return t.digestString(e)};p.crypto.Util.SECURERANDOMGEN=new xa;p.crypto.Util.getRandomHexOfNbytes=function(e){var t=new Array(e);return p.crypto.Util.SECURERANDOMGEN.nextBytes(t),fc(t)};p.crypto.Util.getRandomBigIntegerOfNbytes=function(e){return new ae(p.crypto.Util.getRandomHexOfNbytes(e),16)};p.crypto.Util.getRandomHexOfNbits=function(e){var t=e%8,r=(e-t)/8,n=new Array(r+1);return p.crypto.Util.SECURERANDOMGEN.nextBytes(n),n[0]=(255<<t&255^255)&n[0],fc(n)};p.crypto.Util.getRandomBigIntegerOfNbits=function(e){return new ae(p.crypto.Util.getRandomHexOfNbits(e),16)};p.crypto.Util.getRandomBigIntegerZeroToMax=function(e){for(var t=e.bitLength();;){var r=p.crypto.Util.getRandomBigIntegerOfNbits(t);if(e.compareTo(r)!=-1)return r}};p.crypto.Util.getRandomBigIntegerMinToMax=function(e,t){var r=e.compareTo(t);if(r==1)throw"biMin is greater than biMax";if(r==0)return e;var n=t.subtract(e),u=p.crypto.Util.getRandomBigIntegerZeroToMax(n);return u.add(e)};p.crypto.MessageDigest=function(e){var t=null,r=null,n=null;this.setAlgAndProvider=function(u,a){if(u=p.crypto.MessageDigest.getCanonicalAlgName(u),u!==null&&a===void 0&&(a=p.crypto.Util.DEFAULTPROVIDER[u]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(u)!=-1&&a=="cryptojs"){try{this.md=p.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[u].create()}catch(i){throw"setAlgAndProvider hash alg set fail alg="+u+"/"+i}this.updateString=function(i){this.md.update(i)},this.updateHex=function(i){var c=We.enc.Hex.parse(i);this.md.update(c)},this.digest=function(){var i=this.md.finalize();return i.toString(We.enc.Hex)},this.digestString=function(i){return this.updateString(i),this.digest()},this.digestHex=function(i){return this.updateHex(i),this.digest()}}if(":sha256:".indexOf(u)!=-1&&a=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(i){throw"setAlgAndProvider hash alg set fail alg="+u+"/"+i}this.updateString=function(i){this.md.update(i)},this.updateHex=function(i){var c=sjcl.codec.hex.toBits(i);this.md.update(c)},this.digest=function(){var i=this.md.finalize();return sjcl.codec.hex.fromBits(i)},this.digestString=function(i){return this.updateString(i),this.digest()},this.digestHex=function(i){return this.updateHex(i),this.digest()}}},this.updateString=function(u){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(u){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(u){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(u){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},e!==void 0&&e.alg!==void 0&&(this.algName=e.alg,e.prov===void 0&&(this.provName=p.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))};p.crypto.MessageDigest.getCanonicalAlgName=function(e){return typeof e=="string"&&(e=e.toLowerCase(),e=e.replace(/-/,"")),e};p.crypto.MessageDigest.getHashLength=function(e){var t=p.crypto.MessageDigest,r=t.getCanonicalAlgName(e);if(t.HASHLENGTH[r]===void 0)throw"not supported algorithm: "+e;return t.HASHLENGTH[r]};p.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20};p.crypto.Mac=function(e){var t=null,r=null,n=null,u=null,a=null;this.setAlgAndProvider=function(i,c){if(i=i.toLowerCase(),i==null&&(i="hmacsha1"),i=i.toLowerCase(),i.substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+i;c===void 0&&(c=p.crypto.Util.DEFAULTPROVIDER[i]),this.algProv=i+"/"+c;var h=i.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(h)!=-1&&c=="cryptojs"){try{var m=p.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[h];this.mac=We.algo.HMAC.create(m,this.pass)}catch(S){throw"setAlgAndProvider hash alg set fail hashAlg="+h+"/"+S}this.updateString=function(S){this.mac.update(S)},this.updateHex=function(S){var E=We.enc.Hex.parse(S);this.mac.update(E)},this.doFinal=function(){var S=this.mac.finalize();return S.toString(We.enc.Hex)},this.doFinalString=function(S){return this.updateString(S),this.doFinal()},this.doFinalHex=function(S){return this.updateHex(S),this.doFinal()}}},this.updateString=function(i){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(i){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(i){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(i){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(i){if(typeof i=="string"){var c=i;(i.length%2==1||!i.match(/^[0-9A-Fa-f]+$/))&&(c=Fi(i)),this.pass=We.enc.Hex.parse(c);return}if(typeof i!="object")throw"KJUR.crypto.Mac unsupported password type: "+i;var c=null;if(i.hex!==void 0){if(i.hex.length%2!=0||!i.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+i.hex;c=i.hex}if(i.utf8!==void 0&&(c=hc(i.utf8)),i.rstr!==void 0&&(c=Fi(i.rstr)),i.b64!==void 0&&(c=ka(i.b64)),i.b64u!==void 0&&(c=br(i.b64u)),c==null)throw"KJUR.crypto.Mac unsupported password type: "+i;this.pass=We.enc.Hex.parse(c)},e!==void 0&&(e.pass!==void 0&&this.setPassword(e.pass),e.alg!==void 0&&(this.algName=e.alg,e.prov===void 0&&(this.provName=p.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))};p.crypto.Signature=function(e){var t=null,r=null,n=null,u=null,a=null,i=null,c=null,h=null,m=null,S=null,E=-1,v=null,g=null,b=null,w=null,_=null;if(this._setAlgNames=function(){var A=this.algName.match(/^(.+)with(.+)$/);A&&(this.mdAlgName=A[1].toLowerCase(),this.pubkeyAlgName=A[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(A,C){for(var x="",N=C/4-A.length,H=0;H<N;H++)x=x+"0";return x+A},this.setAlgAndProvider=function(A,C){if(this._setAlgNames(),C!="cryptojs/jsrsa")throw new Error("provider not supported: "+C);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new p.crypto.MessageDigest({alg:this.mdAlgName})}catch(x){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+x)}this.init=function(x,N){var H=null;try{N===void 0?H=Nt.getKey(x):H=Nt.getKey(x,N)}catch(ne){throw"init failed:"+ne}if(H.isPrivate===!0)this.prvKey=H,this.state="SIGN";else if(H.isPublic===!0)this.pubKey=H,this.state="VERIFY";else throw"init failed.:"+H},this.updateString=function(x){this.md.updateString(x)},this.updateHex=function(x){this.md.updateHex(x)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&p.crypto.ECDSA!==void 0&&(this.prvKey=new p.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof bt&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof bt&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof p.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else if(this.prvKey instanceof p.crypto.DSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;return this.hSign},this.signString=function(x){return this.updateString(x),this.sign()},this.signHex=function(x){return this.updateHex(x),this.sign()},this.verify=function(x){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&p.crypto.ECDSA!==void 0&&(this.pubKey=new p.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof bt&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,x,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof bt&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,x);if(p.crypto.ECDSA!==void 0&&this.pubKey instanceof p.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,x);if(p.crypto.DSA!==void 0&&this.pubKey instanceof p.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,x);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(A,C){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(A){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(A){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(A){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(A){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(A){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=e,e!==void 0&&(e.alg!==void 0&&(this.algName=e.alg,e.prov===void 0?this.provName=p.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=e.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),e.psssaltlen!==void 0&&(this.pssSaltLen=e.psssaltlen),e.prvkeypem!==void 0)){if(e.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{var t=Nt.getKey(e.prvkeypem);this.init(t)}catch(A){throw"fatal error to load pem private key: "+A}}};p.crypto.Cipher=function(e){};p.crypto.Cipher.encrypt=function(e,t,r,n){if(or(n,"enclag")!=null&&(r=n.encalg),typeof r=="string"&&r.substr(-4)=="-CBC"){var u=t,a=e;or(n,"key")!=null&&(u=n.key),or(n,"enc")!=null&&(hEnc=n.enc);var i=We.enc.Hex.parse(u),c=We.enc.Hex.parse(a),h=We.enc.Hex.parse(n.iv),m;if(r=="des-EDE3-CBC")m=We.TripleDES.encrypt(c,i,{iv:h});else if(r=="aes128-CBC"||r=="aes256-CBC")m=We.AES.encrypt(c,i,{iv:h});else throw new Error("unsupported algorithm: "+r);return m+""}else throw new Error("Cipher.encrypt: unsupported key or algorithm")};p.crypto.Cipher.decrypt=function(e,t,r,n){if(or(n,"enclag")!=null&&(r=n.encalg),typeof r=="string"&&r.substr(-4)=="-CBC"){var u=t,a=e;or(n,"key")!=null&&(u=n.key),or(n,"enc")!=null&&(a=n.enc);var i=We.enc.Hex.parse(u),c=We.enc.Hex.parse(a),h=We.enc.Hex.parse(n.iv),m;if(r=="des-EDE3-CBC")m=We.TripleDES.decrypt({ciphertext:c},i,{iv:h});else if(r=="aes128-CBC"||r=="aes256-CBC")m=We.AES.decrypt({ciphertext:c},i,{iv:h});else throw new Error("unsupported algorithm: "+r);return We.enc.Hex.stringify(m)}else throw new Error("Cipher.decrypt: unsupported key or algorithm")};p.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040022":"secp384r1","2b81040023":"secp521r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};(typeof p>"u"||!p)&&(p={});(typeof p.crypto>"u"||!p.crypto)&&(p.crypto={});p.crypto.ECDSA=function(e){var t="secp256r1",r=null,n=null,u=null,a=Error,i=ae,c=Zt,h=p.crypto.ECDSA,m=p.crypto.ECParameterDB,S=h.getName,E=je,v=E.getVbyListEx,g=E.isASN1HEX,b=new xa,w=null;this.type="EC",this.isPrivate=!1,this.isPublic=!1;function _(A,C,x,N){for(var H=Math.max(C.bitLength(),N.bitLength()),ne=A.add2D(x),pe=A.curve.getInfinity(),P=H-1;P>=0;--P)pe=pe.twice2D(),pe.z=i.ONE,C.testBit(P)?N.testBit(P)?pe=pe.add2D(ne):pe=pe.add2D(A):N.testBit(P)&&(pe=pe.add2D(x));return pe}this.getBigRandom=function(A){return new i(A.bitLength(),b).mod(A.subtract(i.ONE)).add(i.ONE)},this.setNamedCurve=function(A){this.ecparams=m.getByName(A),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=A},this.setPrivateKeyHex=function(A){this.isPrivate=!0,this.prvKeyHex=A},this.setPublicKeyHex=function(A){this.isPublic=!0,this.pubKeyHex=A},this.getPublicKeyXYHex=function(){var A=this.pubKeyHex;if(A.substr(0,2)!=="04")throw"this method supports uncompressed format(04) only";var C=this.ecparams.keycharlen;if(A.length!==2+C*2)throw"malformed public key hex length";var x={};return x.x=A.substr(2,C),x.y=A.substr(2+C),x},this.getShortNISTPCurveName=function(){var A=this.curveName;return A==="secp256r1"||A==="NIST P-256"||A==="P-256"||A==="prime256v1"?"P-256":A==="secp384r1"||A==="NIST P-384"||A==="P-384"?"P-384":A==="secp521r1"||A==="NIST P-521"||A==="P-521"?"P-521":null},this.generateKeyPairHex=function(){var A=this.ecparams.n,C=this.getBigRandom(A),x=this.ecparams.keycharlen,N=("0000000000"+C.toString(16)).slice(-x);this.setPrivateKeyHex(N);var H=this.generatePublicKeyHex();return{ecprvhex:N,ecpubhex:H}},this.generatePublicKeyHex=function(){var A=new i(this.prvKeyHex,16),C=this.ecparams.G.multiply(A),x=C.getX().toBigInteger(),N=C.getY().toBigInteger(),H=this.ecparams.keycharlen,ne=("0000000000"+x.toString(16)).slice(-H),pe=("0000000000"+N.toString(16)).slice(-H),P="04"+ne+pe;return this.setPublicKeyHex(P),P},this.signWithMessageHash=function(A){return this.signHex(A,this.prvKeyHex)},this.signHex=function(A,C){var x=new i(C,16),N=this.ecparams.n,H=new i(A.substring(0,this.ecparams.keycharlen),16);do var ne=this.getBigRandom(N),pe=this.ecparams.G,P=pe.multiply(ne),$=P.getX().toBigInteger().mod(N);while($.compareTo(i.ZERO)<=0);var j=ne.modInverse(N).multiply(H.add(x.multiply($))).mod(N);return h.biRSSigToASN1Sig($,j)},this.sign=function(A,C){var x=C,N=this.ecparams.n,H=i.fromByteArrayUnsigned(A);do var ne=this.getBigRandom(N),pe=this.ecparams.G,P=pe.multiply(ne),$=P.getX().toBigInteger().mod(N);while($.compareTo(ae.ZERO)<=0);var j=ne.modInverse(N).multiply(H.add(x.multiply($))).mod(N);return this.serializeSig($,j)},this.verifyWithMessageHash=function(A,C){return this.verifyHex(A,C,this.pubKeyHex)},this.verifyHex=function(A,C,x){try{var N,H,ne=h.parseSigHex(C);N=ne.r,H=ne.s;var pe=c.decodeFromHex(this.ecparams.curve,x),P=new i(A.substring(0,this.ecparams.keycharlen),16);return this.verifyRaw(P,N,H,pe)}catch{return!1}},this.verify=function(A,C,x){var N,H;if(Bitcoin.Util.isArray(C)){var ne=this.parseSig(C);N=ne.r,H=ne.s}else if(typeof C=="object"&&C.r&&C.s)N=C.r,H=C.s;else throw"Invalid value for signature";var pe;if(x instanceof Zt)pe=x;else if(Bitcoin.Util.isArray(x))pe=c.decodeFrom(this.ecparams.curve,x);else throw"Invalid format for pubkey value, must be byte array or ECPointFp";var P=i.fromByteArrayUnsigned(A);return this.verifyRaw(P,N,H,pe)},this.verifyRaw=function(A,C,x,N){var H=this.ecparams.n,ne=this.ecparams.G;if(C.compareTo(i.ONE)<0||C.compareTo(H)>=0||x.compareTo(i.ONE)<0||x.compareTo(H)>=0)return!1;var pe=x.modInverse(H),P=A.multiply(pe).mod(H),$=C.multiply(pe).mod(H),j=ne.multiply(P).add(N.multiply($)),R=j.getX().toBigInteger().mod(H);return R.equals(C)},this.serializeSig=function(A,C){var x=A.toByteArraySigned(),N=C.toByteArraySigned(),H=[];return H.push(2),H.push(x.length),H=H.concat(x),H.push(2),H.push(N.length),H=H.concat(N),H.unshift(H.length),H.unshift(48),H},this.parseSig=function(A){var C;if(A[0]!=48)throw new Error("Signature not a valid DERSequence");if(C=2,A[C]!=2)throw new Error("First element in signature must be a DERInteger");var x=A.slice(C+2,C+2+A[C+1]);if(C+=2+A[C+1],A[C]!=2)throw new Error("Second element in signature must be a DERInteger");var N=A.slice(C+2,C+2+A[C+1]);C+=2+A[C+1];var H=i.fromByteArrayUnsigned(x),ne=i.fromByteArrayUnsigned(N);return{r:H,s:ne}},this.parseSigCompact=function(A){if(A.length!==65)throw"Signature has the wrong length";var C=A[0]-27;if(C<0||C>7)throw"Invalid signature type";var x=this.ecparams.n,N=i.fromByteArrayUnsigned(A.slice(1,33)).mod(x),H=i.fromByteArrayUnsigned(A.slice(33,65)).mod(x);return{r:N,s:H,i:C}},this.readPKCS5PrvKeyHex=function(A){if(g(A)===!1)throw new Error("not ASN.1 hex string");var C,x,N;try{C=v(A,0,["[0]",0],"06"),x=v(A,0,[1],"04");try{N=v(A,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=S(C),this.curveName===void 0)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(N),this.setPrivateKeyHex(x),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(A){if(g(A)===!1)throw new a("not ASN.1 hex string");var C,x,N,H;try{C=v(A,0,[1,0],"06"),x=v(A,0,[1,1],"06"),N=v(A,0,[2,0,1],"04");try{H=v(A,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new a("malformed PKCS#8 plain ECC private key")}if(this.curveName=S(x),this.curveName===void 0)throw new a("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(H),this.setPrivateKeyHex(N),this.isPublic=!1},this.readPKCS8PubKeyHex=function(A){if(g(A)===!1)throw new a("not ASN.1 hex string");var C,x,N;try{C=v(A,0,[0,0],"06"),x=v(A,0,[0,1],"06"),N=v(A,0,[1],"03")}catch{throw new a("malformed PKCS#8 ECC public key")}if(this.curveName=S(x),this.curveName===null)throw new a("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(N)},this.readCertPubKeyHex=function(A,C){if(g(A)===!1)throw new a("not ASN.1 hex string");var x,N;try{x=v(A,0,[0,5,0,1],"06"),N=v(A,0,[0,5,1],"03")}catch{throw new a("malformed X.509 certificate ECC public key")}if(this.curveName=S(x),this.curveName===null)throw new a("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(N)},e!==void 0&&e.curve!==void 0&&(this.curveName=e.curve),this.curveName===void 0&&(this.curveName=t),this.setNamedCurve(this.curveName),e!==void 0&&(e.prv!==void 0&&this.setPrivateKeyHex(e.prv),e.pub!==void 0&&this.setPublicKeyHex(e.pub))};p.crypto.ECDSA.parseSigHex=function(e){var t=p.crypto.ECDSA.parseSigHexInHexRS(e),r=new ae(t.r,16),n=new ae(t.s,16);return{r,s:n}};p.crypto.ECDSA.parseSigHexInHexRS=function(e){var t=je,r=t.getChildIdx,n=t.getV;if(t.checkStrictDER(e,0),e.substr(0,2)!="30")throw new Error("signature is not a ASN.1 sequence");var u=r(e,0);if(u.length!=2)throw new Error("signature shall have two elements");var a=u[0],i=u[1];if(e.substr(a,2)!="02")throw new Error("1st item not ASN.1 integer");if(e.substr(i,2)!="02")throw new Error("2nd item not ASN.1 integer");var c=n(e,a),h=n(e,i);return{r:c,s:h}};p.crypto.ECDSA.asn1SigToConcatSig=function(e){var t=p.crypto.ECDSA.parseSigHexInHexRS(e),r=t.r,n=t.s;if(r.length>=130&&r.length<=134){if(r.length%2!=0)throw Error("unknown ECDSA sig r length error");if(n.length%2!=0)throw Error("unknown ECDSA sig s length error");r.substr(0,2)=="00"&&(r=r.substr(2)),n.substr(0,2)=="00"&&(n=n.substr(2));var u=Math.max(r.length,n.length);return r=("000000"+r).slice(-u),n=("000000"+n).slice(-u),r+n}if(r.substr(0,2)=="00"&&r.length%32==2&&(r=r.substr(2)),n.substr(0,2)=="00"&&n.length%32==2&&(n=n.substr(2)),r.length%32==30&&(r="00"+r),n.length%32==30&&(n="00"+n),r.length%32!=0)throw Error("unknown ECDSA sig r length error");if(n.length%32!=0)throw Error("unknown ECDSA sig s length error");return r+n};p.crypto.ECDSA.concatSigToASN1Sig=function(e){if(e.length%4!=0)throw Error("unknown ECDSA concatinated r-s sig length error");var t=e.substr(0,e.length/2),r=e.substr(e.length/2);return p.crypto.ECDSA.hexRSSigToASN1Sig(t,r)};p.crypto.ECDSA.hexRSSigToASN1Sig=function(e,t){var r=new ae(e,16),n=new ae(t,16);return p.crypto.ECDSA.biRSSigToASN1Sig(r,n)};p.crypto.ECDSA.biRSSigToASN1Sig=function(e,t){var r=p.asn1,n=new r.DERInteger({bigint:e}),u=new r.DERInteger({bigint:t}),a=new r.DERSequence({array:[n,u]});return a.tohex()};p.crypto.ECDSA.getName=function(e){return e==="2b8104001f"?"secp192k1":e==="2a8648ce3d030107"?"secp256r1":e==="2b8104000a"?"secp256k1":e==="2b81040021"?"secp224r1":e==="2b81040022"?"secp384r1":e==="2b81040023"?"secp521r1":"|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(e)!==-1?"secp256r1":"|secp256k1|".indexOf(e)!==-1?"secp256k1":"|secp224r1|NIST P-224|P-224|".indexOf(e)!==-1?"secp224r1":"|secp384r1|NIST P-384|P-384|".indexOf(e)!==-1?"secp384r1":"|secp521r1|NIST P-521|P-521|".indexOf(e)!==-1?"secp521r1":null};(typeof p>"u"||!p)&&(p={});(typeof p.crypto>"u"||!p.crypto)&&(p.crypto={});p.crypto.ECParameterDB=new function(){var e={},t={};function r(n){return new ae(n,16)}this.getByName=function(n){var u=n;if(typeof t[u]<"u"&&(u=t[n]),typeof e[u]<"u")return e[u];throw"unregistered EC curve name: "+u},this.regist=function(n,u,a,i,c,h,m,S,E,v,g,b){e[n]={};var w=r(a),_=r(i),A=r(c),C=r(h),x=r(m),N=new Ji(w,_,A),H=N.decodePointHex("04"+S+E);e[n].name=n,e[n].keylen=u,e[n].keycharlen=Math.ceil(u/8)*2,e[n].curve=N,e[n].G=H,e[n].n=C,e[n].h=x,e[n].oid=g,e[n].info=b;for(var ne=0;ne<v.length;ne++)t[v[ne]]=n}};p.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field");p.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field");p.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field");p.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]);p.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]);p.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]);p.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]);p.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]);p.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]);p.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);(typeof p>"u"||!p)&&(p={});(typeof p.crypto>"u"||!p.crypto)&&(p.crypto={});p.crypto.DSA=function(){var e=je,t=e.getVbyList,r=e.getVbyListEx,n=e.isASN1HEX,u=ae;this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(a,i,c,h,m){this.isPrivate=!0,this.p=a,this.q=i,this.g=c,this.y=h,this.x=m},this.setPrivateHex=function(a,i,c,h,m){var S,E,v,g,b;S=new ae(a,16),E=new ae(i,16),v=new ae(c,16),typeof h=="string"&&h.length>1?g=new ae(h,16):g=null,b=new ae(m,16),this.setPrivate(S,E,v,g,b)},this.setPublic=function(a,i,c,h){this.isPublic=!0,this.p=a,this.q=i,this.g=c,this.y=h,this.x=null},this.setPublicHex=function(a,i,c,h){var m,S,E,v;m=new ae(a,16),S=new ae(i,16),E=new ae(c,16),v=new ae(h,16),this.setPublic(m,S,E,v)},this.signWithMessageHash=function(a){var i=this.p,c=this.q,h=this.g,m=this.y,S=this.x,E=p.crypto.Util.getRandomBigIntegerMinToMax(ae.ONE.add(ae.ONE),c.subtract(ae.ONE)),v=a.substr(0,c.bitLength()/4),g=new ae(v,16),b=h.modPow(E,i).mod(c),w=E.modInverse(c).multiply(g.add(S.multiply(b))).mod(c),_=p.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:b}},{int:{bigint:w}}]});return _},this.verifyWithMessageHash=function(a,i){var c=this.p,h=this.q,m=this.g,S=this.y,E=this.parseASN1Signature(i),v=E[0],g=E[1],b=a.substr(0,h.bitLength()/4),w=new ae(b,16);if(ae.ZERO.compareTo(v)>0||v.compareTo(h)>0||ae.ZERO.compareTo(g)>=0||g.compareTo(h)>0)throw"invalid DSA signature";var _=g.modInverse(h),A=w.multiply(_).mod(h),C=v.multiply(_).mod(h),x=m.modPow(A,c).multiply(S.modPow(C,c)).mod(c).mod(h);return x.compareTo(v)==0},this.parseASN1Signature=function(a){try{var i=new u(r(a,0,[0],"02"),16),c=new u(r(a,0,[1],"02"),16);return[i,c]}catch{throw new Error("malformed ASN.1 DSA signature")}},this.readPKCS5PrvKeyHex=function(a){var i,c,h,m,S;if(n(a)===!1)throw new Error("not ASN.1 hex string");try{i=r(a,0,[1],"02"),c=r(a,0,[2],"02"),h=r(a,0,[3],"02"),m=r(a,0,[4],"02"),S=r(a,0,[5],"02")}catch{throw new Error("malformed PKCS#1/5 plain DSA private key")}this.setPrivateHex(i,c,h,m,S)},this.readPKCS8PrvKeyHex=function(a){var i,c,h,m;if(n(a)===!1)throw new Error("not ASN.1 hex string");try{i=r(a,0,[1,1,0],"02"),c=r(a,0,[1,1,1],"02"),h=r(a,0,[1,1,2],"02"),m=r(a,0,[2,0],"02")}catch{throw new Error("malformed PKCS#8 plain DSA private key")}this.setPrivateHex(i,c,h,null,m)},this.readPKCS8PubKeyHex=function(a){var i,c,h,m;if(n(a)===!1)throw new Error("not ASN.1 hex string");try{i=r(a,0,[0,1,0],"02"),c=r(a,0,[0,1,1],"02"),h=r(a,0,[0,1,2],"02"),m=r(a,0,[1,0],"02")}catch{throw new Error("malformed PKCS#8 DSA public key")}this.setPublicHex(i,c,h,m)},this.readCertPubKeyHex=function(a,i){var c,h,m,S;if(n(a)===!1)throw new Error("not ASN.1 hex string");try{c=r(a,0,[0,5,0,1,0],"02"),h=r(a,0,[0,5,0,1,1],"02"),m=r(a,0,[0,5,0,1,2],"02"),S=r(a,0,[0,5,1,0],"02")}catch{throw new Error("malformed X.509 certificate DSA public key")}this.setPublicHex(c,h,m,S)}};var Nt=(function(){var e=function(w,_,A){return n(We.AES,w,_,A)},t=function(w,_,A){return n(We.TripleDES,w,_,A)},r=function(w,_,A){return n(We.DES,w,_,A)},n=function(w,_,A,C){var x=We.enc.Hex.parse(_),N=We.enc.Hex.parse(A),H=We.enc.Hex.parse(C),ne={};ne.key=N,ne.iv=H,ne.ciphertext=x;var pe=w.decrypt(ne,N,{iv:H});return We.enc.Hex.stringify(pe)},u=function(w,_,A){return c(We.AES,w,_,A)},a=function(w,_,A){return c(We.TripleDES,w,_,A)},i=function(w,_,A){return c(We.DES,w,_,A)},c=function(w,_,A,C){var x=We.enc.Hex.parse(_),N=We.enc.Hex.parse(A),H=We.enc.Hex.parse(C),ne=w.encrypt(x,N,{iv:H}),pe=We.enc.Hex.parse(ne.toString()),P=We.enc.Base64.stringify(pe);return P},h={"AES-256-CBC":{proc:e,eproc:u,keylen:32,ivlen:16},"AES-192-CBC":{proc:e,eproc:u,keylen:24,ivlen:16},"AES-128-CBC":{proc:e,eproc:u,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:t,eproc:a,keylen:24,ivlen:8},"DES-CBC":{proc:r,eproc:i,keylen:8,ivlen:8}},m=function(w){return h[w].proc},S=function(w){var _=We.lib.WordArray.random(w),A=We.enc.Hex.stringify(_);return A},E=function(w){var _={},A=w.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));A&&(_.cipher=A[1],_.ivsalt=A[2]);var C=w.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));C&&(_.type=C[1]);var x=-1,N=0;w.indexOf(`\r
\r
`)!=-1&&(x=w.indexOf(`\r
\r
`),N=2),w.indexOf(`

`)!=-1&&(x=w.indexOf(`

`),N=1);var H=w.indexOf("-----END");if(x!=-1&&H!=-1){var ne=w.substring(x+N*2,H-N);ne=ne.replace(/\s+/g,""),_.data=ne}return _},v=function(w,_,A){for(var C=A.substring(0,16),x=We.enc.Hex.parse(C),N=We.enc.Utf8.parse(_),H=h[w].keylen+h[w].ivlen,ne="",pe=null;;){var P=We.algo.MD5.create();if(pe!=null&&P.update(pe),P.update(N),P.update(x),pe=P.finalize(),ne=ne+We.enc.Hex.stringify(pe),ne.length>=H*2)break}var $={};return $.keyhex=ne.substr(0,h[w].keylen*2),$.ivhex=ne.substr(h[w].keylen*2,h[w].ivlen*2),$},g=function(w,_,A,C){var x=We.enc.Base64.parse(w),N=We.enc.Hex.stringify(x),H=h[_].proc,ne=H(N,A,C);return ne},b=function(w,_,A,C){var x=h[_].eproc,N=x(w,A,C);return N};return{version:"1.0.0",parsePKCS5PEM:function(w){return E(w)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(w,_,A){return v(w,_,A)},decryptKeyB64:function(w,_,A,C){return g(w,_,A,C)},getDecryptedKeyHex:function(w,_){var A=E(w),C=A.type,x=A.cipher,N=A.ivsalt,H=A.data,ne=v(x,_,N),pe=ne.keyhex,P=g(H,x,pe,N);return P},getEncryptedPKCS5PEMFromPrvKeyHex:function(w,_,A,C,x){var j="";if((typeof C>"u"||C==null)&&(C="AES-256-CBC"),typeof h[C]>"u")throw new Error("KEYUTIL unsupported algorithm: "+C);if(typeof x>"u"||x==null){var N=h[C].ivlen,H=S(N);x=H.toUpperCase()}var ne=v(C,A,x),pe=ne.keyhex,P=b(_,C,pe,x),$=P.replace(/(.{64})/g,`$1\r
`),j="-----BEGIN "+w+` PRIVATE KEY-----\r
`;return j+=`Proc-Type: 4,ENCRYPTED\r
`,j+="DEK-Info: "+C+","+x+`\r
`,j+=`\r
`,j+=$,j+=`\r
-----END `+w+` PRIVATE KEY-----\r
`,j},getEncryptedPKCS8PEM:function(w,_,A){var C=this.getEncryptedPKCS8Hex(w,_,A);return un(C,"ENCRYPTED PRIVATE KEY")},getEncryptedPKCS8Hex:function(w,_,A){var C;A==null||A==null?C={}:C=JSON.parse(JSON.stringify(A)),C.plain=w,this.initPBES2Param(C),this.encryptPBES2Param(C,_);var x=this.generatePBES2ASN1Param(C);return p.asn1.ASN1Util.newObject(x).tohex()},initPBES2Param:function(w){if(or(w,"encalg")==null&&(w.encalg="aes256-CBC"),or(w,"iter")==null&&(w.iter=2048),or(w,"prf")==null&&(w.prf="hmacWithSHA256"),or(w,"salt")==null&&(w.salt=We.enc.Hex.stringify(We.lib.WordArray.random(8))),or(w,"enciv")==null){var _;w.encalg=="des-EDE3-CBC"&&(_=8),w.encalg=="aes128-CBC"&&(_=16),w.encalg=="aes256-CBC"&&(_=16),w.enciv=We.enc.Hex.stringify(We.lib.WordArray.random(_))}},encryptPBES2Param:function(w,_){var A=Nt.getDKFromPBES2Param(w,_);try{var C=p.crypto.Cipher.encrypt(w.plain,A,w.encalg,{iv:w.enciv})}catch{throw new Error("encrypt error: "+w.plain+" "+A+" "+w.encalg+" "+w.enciv)}w.enc=C},generatePBES2ASN1Param:function(w){var _={seq:[{seq:[{oid:"pkcs5PBES2"},{seq:[{seq:[{oid:"pkcs5PBKDF2"},{seq:[{octstr:{hex:w.salt}},{int:{hex:m0(w.iter)}}]}]},{seq:[{oid:w.encalg},{octstr:{hex:w.enciv}}]}]}]},{octstr:{hex:w.enc}}]};return w.prf!="hmacWithSHA1"&&_.seq[0].seq[1].seq[0].seq[1].seq.push({seq:[{oid:w.prf},{null:""}]}),_},parseHexOfEncryptedPKCS8:function(w){var _=je,A=_.getChildIdx,C=_.getV,x={},N=A(w,0);if(N.length!=2)throw new Error("malformed format: SEQUENCE(0).items != 2: "+N.length);x.ciphertext=C(w,N[1]);var H=A(w,N[0]);if(H.length!=2)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+H.length);if(C(w,H[0])!="2a864886f70d01050d")throw new Error("this only supports pkcs5PBES2");var ne=A(w,H[1]);if(H.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+ne.length);var pe=A(w,ne[1]);if(pe.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+pe.length);if(C(w,pe[0])!="2a864886f70d0307")throw"this only supports TripleDES";x.encryptionSchemeAlg="TripleDES",x.encryptionSchemeIV=C(w,pe[1]);var P=A(w,ne[0]);if(P.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+P.length);if(C(w,P[0])!="2a864886f70d01050c")throw new Error("this only supports pkcs5PBKDF2");var $=A(w,P[1]);if($.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+$.length);x.pbkdf2Salt=C(w,$[0]);var j=C(w,$[1]);try{x.pbkdf2Iter=parseInt(j,16)}catch{throw new Error("malformed format pbkdf2Iter: "+j)}return x},getPBKDF2KeyHexFromParam:function(w,_){var A=We.enc.Hex.parse(w.pbkdf2Salt),C=w.pbkdf2Iter,x=We.PBKDF2(_,A,{keySize:192/32,iterations:C}),N=We.enc.Hex.stringify(x);return N},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(w,_){var A=Fr(w,"ENCRYPTED PRIVATE KEY"),C=this.parseHexOfEncryptedPKCS8(A),x=Nt.getPBKDF2KeyHexFromParam(C,_),N={};N.ciphertext=We.enc.Hex.parse(C.ciphertext);var H=We.enc.Hex.parse(x),ne=We.enc.Hex.parse(C.encryptionSchemeIV),pe=We.TripleDES.decrypt(N,H,{iv:ne}),P=We.enc.Hex.stringify(pe);return P},parsePBES2:function(w){var _=je.parse(w);if(or(_,"seq.0.seq.0.oid")!="pkcs5PBES2"||or(_,"seq.0.seq.1.seq.0.seq.0.oid")!="pkcs5PBKDF2")throw new Error("not pkcs5PBES2 and pkcs5PBKDF2 used");var A=or(_,"seq.0.seq.1.seq.0.seq.1.seq");if(A==null)throw new Error("PBKDF2 parameter not found");var C=or(A,"0.octstr.hex"),x=or(A,"1.int.hex"),N=or(A,"2.seq.0.oid","hmacWithSHA1"),H=-1;try{H=parseInt(x,16)}catch{throw new Error("iter not proper value")}var ne=or(_,"seq.0.seq.1.seq.1.seq.0.oid"),pe=or(_,"seq.0.seq.1.seq.1.seq.1.octstr.hex"),P=or(_,"seq.1.octstr.hex");if(ne==null||pe==null||P==null)throw new Error("encalg, enciv or enc is undefined");var $={salt:C,iter:H,prf:N,encalg:ne,enciv:pe,enc:P};return $},getDKFromPBES2Param:function(w,_){var A={hmacWithSHA1:We.algo.SHA1,hmacWithSHA224:We.algo.SHA224,hmacWithSHA256:We.algo.SHA256,hmacWithSHA384:We.algo.SHA384,hmacWithSHA512:We.algo.SHA512},C={"des-EDE3-CBC":192/32,"aes128-CBC":128/32,"aes256-CBC":256/32},x=A[w.prf];if(x==null)throw new Error("unsupported prf");var N=C[w.encalg];if(N==null)throw new Error("unsupported encalg");var H=We.enc.Hex.parse(w.salt),ne=w.iter;try{var pe=We.PBKDF2(_,H,{keySize:N,iterations:ne,hasher:x});return We.enc.Hex.stringify(pe)}catch(P){throw new Error("PBKDF2 error: "+P+" "+JSON.stringify(w)+" "+_)}},getPlainHexFromEncryptedPKCS8PEM:function(w,_){if(w.indexOf("BEGIN ENCRYPTED PRIVATE KEY")==-1)throw new Error("not Encrypted PKCS#8 PEM string");var A=Fr(w),C;try{C=Nt.parsePBES2(A)}catch(N){throw new Error("malformed PBES2 format: "+N.message)}var x=Nt.getDKFromPBES2Param(C,_);return p.crypto.Cipher.decrypt(C.enc,x,C.encalg,{iv:C.enciv})},getKeyFromEncryptedPKCS8PEM:function(w,_){var A=this.getPlainHexFromEncryptedPKCS8PEM(w,_),C=this.getKeyFromPlainPrivatePKCS8Hex(A);return C},parsePlainPrivatePKCS8Hex:function(w){var _=je,A=_.getChildIdx,C=_.getV,x={};if(x.algparam=null,w.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var N=A(w,0);if(N.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(w.substr(N[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var H=A(w,N[1]);if(H.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(w.substr(H[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(x.algoid=C(w,H[0]),w.substr(H[1],2)=="06"&&(x.algparam=C(w,H[1])),w.substr(N[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return x.keyidx=_.getVidx(w,N[2]),x},getKeyFromPlainPrivatePKCS8PEM:function(w){var _=Fr(w,"PRIVATE KEY"),A=this.getKeyFromPlainPrivatePKCS8Hex(_);return A},getKeyFromPlainPrivatePKCS8Hex:function(w){var _=this.parsePlainPrivatePKCS8Hex(w),A;if(_.algoid=="2a864886f70d010101")A=new bt;else if(_.algoid=="2a8648ce380401")A=new p.crypto.DSA;else if(_.algoid=="2a8648ce3d0201")A=new p.crypto.ECDSA;else throw new Error("unsupported private key algorithm");return A.readPKCS8PrvKeyHex(w),A},_getKeyFromPublicPKCS8Hex:function(w){var _,A=je.getVbyList(w,0,[0,0],"06");if(A==="2a864886f70d010101")_=new bt;else if(A==="2a8648ce380401")_=new p.crypto.DSA;else if(A==="2a8648ce3d0201")_=new p.crypto.ECDSA;else throw new Error("unsupported PKCS#8 public key hex");return _.readPKCS8PubKeyHex(w),_},parsePublicRawRSAKeyHex:function(w){var _=je,A=_.getChildIdx,C=_.getV,x={};if(w.substr(0,2)!="30")throw new Error("malformed RSA key(code:001)");var N=A(w,0);if(N.length!=2)throw new Error("malformed RSA key(code:002)");if(w.substr(N[0],2)!="02")throw new Error("malformed RSA key(code:003)");if(x.n=C(w,N[0]),w.substr(N[1],2)!="02")throw new Error("malformed RSA key(code:004)");return x.e=C(w,N[1]),x},parsePublicPKCS8Hex:function(w){var _=je,A=_.getChildIdx,C=_.getV,x={};x.algparam=null;var N=A(w,0);if(N.length!=2)throw new Error("outer DERSequence shall have 2 elements: "+N.length);var H=N[0];if(w.substr(H,2)!="30")throw new Error("malformed PKCS8 public key(code:001)");var ne=A(w,H);if(ne.length!=2)throw new Error("malformed PKCS8 public key(code:002)");if(w.substr(ne[0],2)!="06")throw new Error("malformed PKCS8 public key(code:003)");if(x.algoid=C(w,ne[0]),w.substr(ne[1],2)=="06"?x.algparam=C(w,ne[1]):w.substr(ne[1],2)=="30"&&(x.algparam={},x.algparam.p=_.getVbyList(w,ne[1],[0],"02"),x.algparam.q=_.getVbyList(w,ne[1],[1],"02"),x.algparam.g=_.getVbyList(w,ne[1],[2],"02")),w.substr(N[1],2)!="03")throw new Error("malformed PKCS8 public key(code:004)");return x.key=C(w,N[1]).substr(2),x}}})();Nt.getKey=function(e,t,r){var n=je,u=n.getChildIdx,a=n.getV,i=n.getVbyList,c=p.crypto,h=c.ECDSA,m=c.DSA,S=bt,E=Fr,v=Nt;if(typeof S<"u"&&e instanceof S||typeof h<"u"&&e instanceof h||typeof m<"u"&&e instanceof m)return e;if(e.curve!==void 0&&e.xy!==void 0&&e.d===void 0)return new h({pub:e.xy,curve:e.curve});if(e.curve!==void 0&&e.d!==void 0)return new h({prv:e.d,curve:e.curve});if(e.kty===void 0&&e.n!==void 0&&e.e!==void 0&&e.d===void 0){var g=new S;return g.setPublic(e.n,e.e),g}if(e.kty===void 0&&e.n!==void 0&&e.e!==void 0&&e.d!==void 0&&e.p!==void 0&&e.q!==void 0&&e.dp!==void 0&&e.dq!==void 0&&e.co!==void 0&&e.qi===void 0){var g=new S;return g.setPrivateEx(e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.co),g}if(e.kty===void 0&&e.n!==void 0&&e.e!==void 0&&e.d!==void 0&&e.p===void 0){var g=new S;return g.setPrivate(e.n,e.e,e.d),g}if(e.p!==void 0&&e.q!==void 0&&e.g!==void 0&&e.y!==void 0&&e.x===void 0){var g=new m;return g.setPublic(e.p,e.q,e.g,e.y),g}if(e.p!==void 0&&e.q!==void 0&&e.g!==void 0&&e.y!==void 0&&e.x!==void 0){var g=new m;return g.setPrivate(e.p,e.q,e.g,e.y,e.x),g}if(e.kty==="RSA"&&e.n!==void 0&&e.e!==void 0&&e.d===void 0){var g=new S;return g.setPublic(br(e.n),br(e.e)),g}if(e.kty==="RSA"&&e.n!==void 0&&e.e!==void 0&&e.d!==void 0&&e.p!==void 0&&e.q!==void 0&&e.dp!==void 0&&e.dq!==void 0&&e.qi!==void 0){var g=new S;return g.setPrivateEx(br(e.n),br(e.e),br(e.d),br(e.p),br(e.q),br(e.dp),br(e.dq),br(e.qi)),g}if(e.kty==="RSA"&&e.n!==void 0&&e.e!==void 0&&e.d!==void 0){var g=new S;return g.setPrivate(br(e.n),br(e.e),br(e.d)),g}if(e.kty==="EC"&&e.crv!==void 0&&e.x!==void 0&&e.y!==void 0&&e.d===void 0){var b=new h({curve:e.crv}),w=b.ecparams.keycharlen,_=("0000000000"+br(e.x)).slice(-w),A=("0000000000"+br(e.y)).slice(-w),C="04"+_+A;return b.setPublicKeyHex(C),b}if(e.kty==="EC"&&e.crv!==void 0&&e.x!==void 0&&e.y!==void 0&&e.d!==void 0){var b=new h({curve:e.crv}),w=b.ecparams.keycharlen,_=("0000000000"+br(e.x)).slice(-w),A=("0000000000"+br(e.y)).slice(-w),C="04"+_+A,x=("0000000000"+br(e.d)).slice(-w);return b.setPublicKeyHex(C),b.setPrivateKeyHex(x),b}if(r==="pkcs5prv"){var N=e,n=je,H,g;if(H=u(N,0),H.length===9)g=new S,g.readPKCS5PrvKeyHex(N);else if(H.length===6)g=new m,g.readPKCS5PrvKeyHex(N);else if(H.length>2&&N.substr(H[1],2)==="04")g=new h,g.readPKCS5PrvKeyHex(N);else throw new Error("unsupported PKCS#1/5 hexadecimal key");return g}if(r==="pkcs8prv"){var g=v.getKeyFromPlainPrivatePKCS8Hex(e);return g}if(r==="pkcs8pub")return v._getKeyFromPublicPKCS8Hex(e);if(r==="x509pub")return ht.getPublicKeyFromCertHex(e);if(e.indexOf("-END CERTIFICATE-",0)!=-1||e.indexOf("-END X509 CERTIFICATE-",0)!=-1||e.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return ht.getPublicKeyFromCertPEM(e);if(e.indexOf("-END PUBLIC KEY-")!=-1){var ne=Fr(e,"PUBLIC KEY");return v._getKeyFromPublicPKCS8Hex(ne)}if(e.indexOf("-END RSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")==-1){var pe=E(e,"RSA PRIVATE KEY");return v.getKey(pe,null,"pkcs5prv")}if(e.indexOf("-END DSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")==-1){var P=E(e,"DSA PRIVATE KEY"),$=i(P,0,[1],"02"),j=i(P,0,[2],"02"),R=i(P,0,[3],"02"),q=i(P,0,[4],"02"),Q=i(P,0,[5],"02"),g=new m;return g.setPrivate(new ae($,16),new ae(j,16),new ae(R,16),new ae(q,16),new ae(Q,16)),g}if(e.indexOf("-END EC PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")==-1){var pe=E(e,"EC PRIVATE KEY");return v.getKey(pe,null,"pkcs5prv")}if(e.indexOf("-END PRIVATE KEY-")!=-1)return v.getKeyFromPlainPrivatePKCS8PEM(e);if(e.indexOf("-END RSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")!=-1){var V=v.getDecryptedKeyHex(e,t),z=new bt;return z.readPKCS5PrvKeyHex(V),z}if(e.indexOf("-END EC PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")!=-1){var P=v.getDecryptedKeyHex(e,t),g=i(P,0,[1],"04"),te=i(P,0,[2,0],"06"),me=i(P,0,[3,0],"03").substr(2),st="";if(p.crypto.OID.oidhex2name[te]!==void 0)st=p.crypto.OID.oidhex2name[te];else throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+te);var b=new h({curve:st});return b.setPublicKeyHex(me),b.setPrivateKeyHex(g),b.isPublic=!1,b}if(e.indexOf("-END DSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")!=-1){var P=v.getDecryptedKeyHex(e,t),$=i(P,0,[1],"02"),j=i(P,0,[2],"02"),R=i(P,0,[3],"02"),q=i(P,0,[4],"02"),Q=i(P,0,[5],"02"),g=new m;return g.setPrivate(new ae($,16),new ae(j,16),new ae(R,16),new ae(q,16),new ae(Q,16)),g}if(e.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return v.getKeyFromEncryptedPKCS8PEM(e,t);throw new Error("not supported argument")};Nt.generateKeypair=function(e,t){if(e=="RSA"){var r=t,n=new bt;n.generate(r,"10001"),n.isPrivate=!0,n.isPublic=!0;var u=new bt,a=n.n.toString(16),i=n.e.toString(16);u.setPublic(a,i),u.isPrivate=!1,u.isPublic=!0;var c={};return c.prvKeyObj=n,c.pubKeyObj=u,c}else if(e=="EC"){var h=t,m=new p.crypto.ECDSA({curve:h}),S=m.generateKeyPairHex(),n=new p.crypto.ECDSA({curve:h});n.setPublicKeyHex(S.ecpubhex),n.setPrivateKeyHex(S.ecprvhex),n.isPrivate=!0,n.isPublic=!1;var u=new p.crypto.ECDSA({curve:h});u.setPublicKeyHex(S.ecpubhex),u.isPrivate=!1,u.isPublic=!0;var c={};return c.prvKeyObj=n,c.pubKeyObj=u,c}else throw new Error("unknown algorithm: "+e)};Nt.getPEM=function(e,t,r,n,u,a){var i=p,c=i.asn1,h=c.DERObjectIdentifier,m=c.DERInteger,S=c.ASN1Util.newObject,E=c.x509,v=E.SubjectPublicKeyInfo,g=i.crypto,b=g.DSA,w=g.ECDSA,_=bt;function A(z){var te=S({seq:[{int:0},{int:{bigint:z.n}},{int:z.e},{int:{bigint:z.d}},{int:{bigint:z.p}},{int:{bigint:z.q}},{int:{bigint:z.dmp1}},{int:{bigint:z.dmq1}},{int:{bigint:z.coeff}}]});return te}function C(z){var te=S({seq:[{int:1},{octstr:{hex:z.prvKeyHex}},{tag:["a0",!0,{oid:{name:z.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+z.pubKeyHex}}]}]});return te}function x(z){var te=S({seq:[{int:0},{int:{bigint:z.p}},{int:{bigint:z.q}},{int:{bigint:z.g}},{int:{bigint:z.y}},{int:{bigint:z.x}}]});return te}if((_!==void 0&&e instanceof _||b!==void 0&&e instanceof b||w!==void 0&&e instanceof w)&&e.isPublic==!0&&(t===void 0||t=="PKCS8PUB")){var N=new v(e),H=N.tohex();return un(H,"PUBLIC KEY")}if(t=="PKCS1PRV"&&_!==void 0&&e instanceof _&&(r===void 0||r==null)&&e.isPrivate==!0){var N=A(e),H=N.tohex();return un(H,"RSA PRIVATE KEY")}if(t=="PKCS1PRV"&&w!==void 0&&e instanceof w&&(r===void 0||r==null)&&e.isPrivate==!0){var ne=new h({name:e.curveName}),pe=ne.tohex(),P=C(e),$=P.tohex(),j="";return j+=un(pe,"EC PARAMETERS"),j+=un($,"EC PRIVATE KEY"),j}if(t=="PKCS1PRV"&&b!==void 0&&e instanceof b&&(r===void 0||r==null)&&e.isPrivate==!0){var N=x(e),H=N.tohex();return un(H,"DSA PRIVATE KEY")}if(t=="PKCS5PRV"&&_!==void 0&&e instanceof _&&r!==void 0&&r!=null&&e.isPrivate==!0){var N=A(e),H=N.tohex();return n===void 0&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",H,r,n,a)}if(t=="PKCS5PRV"&&w!==void 0&&e instanceof w&&r!==void 0&&r!=null&&e.isPrivate==!0){var N=C(e),H=N.tohex();return n===void 0&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",H,r,n,a)}if(t=="PKCS5PRV"&&b!==void 0&&e instanceof b&&r!==void 0&&r!=null&&e.isPrivate==!0){var N=x(e),H=N.tohex();return n===void 0&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",H,r,n,a)}var R=function(z,te){if(typeof te=="string")return Nt.getEncryptedPKCS8PEM(z,te);if(typeof te=="object"&&or(te,"passcode")!=null){var me=JSON.parse(JSON.stringify(te)),st=me.passcode;return delete me.passcode,Nt.getEncryptedPKCS8PEM(z,st,me)}};if(t=="PKCS8PRV"&&_!=null&&e instanceof _&&e.isPrivate==!0){var q=A(e),Q=q.tohex(),N=S({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:Q}}]}),H=N.tohex();return r===void 0||r==null?un(H,"PRIVATE KEY"):R(H,r)}if(t=="PKCS8PRV"&&w!==void 0&&e instanceof w&&e.isPrivate==!0){var V={seq:[{int:1},{octstr:{hex:e.prvKeyHex}}]};typeof e.pubKeyHex=="string"&&V.seq.push({tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]});var q=new S(V),Q=q.tohex(),N=S({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:e.curveName}}]},{octstr:{hex:Q}}]}),H=N.tohex();return r===void 0||r==null?un(H,"PRIVATE KEY"):R(H,r)}if(t=="PKCS8PRV"&&b!==void 0&&e instanceof b&&e.isPrivate==!0){var q=new m({bigint:e.x}),Q=q.tohex(),N=S({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}]},{octstr:{hex:Q}}]}),H=N.tohex();return r===void 0||r==null?un(H,"PRIVATE KEY"):R(H,r)}throw new Error("unsupported object nor format")};Nt.getKeyFromCSRPEM=function(e){var t=Fr(e,"CERTIFICATE REQUEST"),r=Nt.getKeyFromCSRHex(t);return r};Nt.getKeyFromCSRHex=function(e){var t=Nt.parseCSRHex(e),r=Nt.getKey(t.p8pubkeyhex,null,"pkcs8pub");return r};Nt.parseCSRHex=function(e){var t=je,r=t.getChildIdx,n=t.getTLV,u={},a=e;if(a.substr(0,2)!="30")throw new Error("malformed CSR(code:001)");var i=r(a,0);if(i.length<1)throw new Error("malformed CSR(code:002)");if(a.substr(i[0],2)!="30")throw new Error("malformed CSR(code:003)");var c=r(a,i[0]);if(c.length<3)throw new Error("malformed CSR(code:004)");return u.p8pubkeyhex=n(a,c[2]),u};Nt.getKeyID=function(e){var t=Nt,r=je;typeof e=="string"&&e.indexOf("BEGIN ")!=-1&&(e=t.getKey(e));var n=Fr(t.getPEM(e)),u=r.getIdxbyList(n,0,[1]),a=r.getV(n,u).substring(2);return p.crypto.Util.hashHex(a,"sha1")};Nt.getJWK=function(e,t,r,n,u){var a,i={},c,h=p.crypto.Util.hashHex;if(typeof e=="string")a=Nt.getKey(e),e.indexOf("CERTIFICATE")!=-1&&(c=Fr(e));else if(typeof e=="object")e instanceof ht?(a=e.getPublicKey(),c=e.hex):a=e;else throw new Error("unsupported keyinfo type");if(a instanceof bt&&a.isPrivate)i.kty="RSA",i.n=Kr(a.n.toString(16)),i.e=Kr(a.e.toString(16)),i.d=Kr(a.d.toString(16)),i.p=Kr(a.p.toString(16)),i.q=Kr(a.q.toString(16)),i.dp=Kr(a.dmp1.toString(16)),i.dq=Kr(a.dmq1.toString(16)),i.qi=Kr(a.coeff.toString(16));else if(a instanceof bt&&a.isPublic)i.kty="RSA",i.n=Kr(a.n.toString(16)),i.e=Kr(a.e.toString(16));else if(a instanceof p.crypto.ECDSA&&a.isPrivate){var m=a.getShortNISTPCurveName();if(m!=="P-256"&&m!=="P-384"&&m!=="P-521")throw new Error("unsupported curve name for JWT: "+m);var S=a.getPublicKeyXYHex();i.kty="EC",i.crv=m,i.x=Kr(S.x),i.y=Kr(S.y),i.d=Kr(a.prvKeyHex)}else if(a instanceof p.crypto.ECDSA&&a.isPublic){var m=a.getShortNISTPCurveName();if(m!=="P-256"&&m!=="P-384"&&m!=="P-521")throw new Error("unsupported curve name for JWT: "+m);var S=a.getPublicKeyXYHex();i.kty="EC",i.crv=m,i.x=Kr(S.x),i.y=Kr(S.y)}if(i.kty==null)throw new Error("unsupported keyinfo");return!a.isPrivate&&t!=!0&&(i.kid=p.jws.JWS.getJWKthumbprint(i)),c!=null&&r!=!0&&(i.x5c=[Yi(c)]),c!=null&&n!=!0&&(i.x5t=$a(Yi(h(c,"sha1")))),c!=null&&u!=!0&&(i["x5t#S256"]=$a(Yi(h(c,"sha256")))),i};Nt.getJWKFromKey=function(e){return Nt.getJWK(e,!0,!0,!0,!0)};bt.getPosArrayOfChildrenFromHex=function(e){return je.getChildIdx(e,0)};bt.getHexValueArrayOfChildrenFromHex=function(e){var t=je,r=t.getV,v=bt.getPosArrayOfChildrenFromHex(e),n=r(e,v[0]),u=r(e,v[1]),a=r(e,v[2]),i=r(e,v[3]),c=r(e,v[4]),h=r(e,v[5]),m=r(e,v[6]),S=r(e,v[7]),E=r(e,v[8]),v=new Array;return v.push(n,u,a,i,c,h,m,S,E),v};bt.prototype.readPrivateKeyFromPEMString=function(e){var t=Fr(e),r=bt.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])};bt.prototype.readPKCS5PrvKeyHex=function(e){var t=bt.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])};bt.prototype.readPKCS8PrvKeyHex=function(e){var t,r,n,u,a,i,c,h,m=je,S=m.getVbyListEx;if(m.isASN1HEX(e)===!1)throw new Error("not ASN.1 hex string");try{t=S(e,0,[2,0,1],"02"),r=S(e,0,[2,0,2],"02"),n=S(e,0,[2,0,3],"02"),u=S(e,0,[2,0,4],"02"),a=S(e,0,[2,0,5],"02"),i=S(e,0,[2,0,6],"02"),c=S(e,0,[2,0,7],"02"),h=S(e,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(t,r,n,u,a,i,c,h)};bt.prototype.readPKCS5PubKeyHex=function(e){var t=je,r=t.getV;if(t.isASN1HEX(e)===!1)throw new Error("keyHex is not ASN.1 hex string");var n=t.getChildIdx(e,0);if(n.length!==2||e.substr(n[0],2)!=="02"||e.substr(n[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var u=r(e,n[0]),a=r(e,n[1]);this.setPublic(u,a)};bt.prototype.readPKCS8PubKeyHex=function(e){var t=je;if(t.isASN1HEX(e)===!1)throw new Error("not ASN.1 hex string");if(t.getTLVbyListEx(e,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var r=t.getTLVbyListEx(e,0,[1,0]);this.readPKCS5PubKeyHex(r)};bt.prototype.readCertPubKeyHex=function(e,t){var r,n;r=new ht,r.readCertHex(e),n=r.getPublicKeyHex(),this.readPKCS8PubKeyHex(n)};var QF=new RegExp("[^0-9a-f]","gi");function E0(e,t){for(var r="",n=t/4-e.length,u=0;u<n;u++)r=r+"0";return r+e}bt.prototype.sign=function(e,t){var r=function(u){return p.crypto.Util.hashString(u,t)},n=r(e);return this.signWithMessageHash(n,t)};bt.prototype.signWithMessageHash=function(e,t){var r=p.crypto.Util.getPaddedDigestInfoHex(e,t,this.n.bitLength()),n=Cn(r,16),u=this.doPrivate(n),a=u.toString(16);return E0(a,this.n.bitLength())};function S0(e,t,r){for(var n="",u=0;n.length<t;)n+=In(r(Fi(e+String.fromCharCode.apply(String,[(u&4278190080)>>24,(u&16711680)>>16,(u&65280)>>8,u&255])))),u+=1;return n}bt.prototype.signPSS=function(e,t,r){var n=function(a){return p.crypto.Util.hashHex(a,t)},u=n(Fi(e));return r===void 0&&(r=-1),this.signWithMessageHashPSS(u,t,r)};bt.prototype.signWithMessageHashPSS=function(e,t,r){var n=In(e),u=n.length,a=this.n.bitLength()-1,i=Math.ceil(a/8),c,h=function(_){return p.crypto.Util.hashHex(_,t)};if(r===-1||r===void 0)r=u;else if(r===-2)r=i-u-2;else if(r<-2)throw new Error("invalid salt length");if(i<u+r+2)throw new Error("data too long");var m="";r>0&&(m=new Array(r),new xa().nextBytes(m),m=String.fromCharCode.apply(String,m));var S=In(h(Fi("\0\0\0\0\0\0\0\0"+n+m))),E=[];for(c=0;c<i-r-u-2;c+=1)E[c]=0;var v=String.fromCharCode.apply(String,E)+""+m,g=S0(S,v.length,h),b=[];for(c=0;c<v.length;c+=1)b[c]=v.charCodeAt(c)^g.charCodeAt(c);var w=65280>>8*i-a&255;for(b[0]&=~w,c=0;c<u;c++)b.push(S.charCodeAt(c));return b.push(188),E0(this.doPrivate(new ae(b)).toString(16),this.n.bitLength())};function _0(e){for(var t in p.crypto.Util.DIGESTINFOHEAD){var r=p.crypto.Util.DIGESTINFOHEAD[t],n=r.length;if(e.substring(0,n)==r){var u=[t,e.substring(n)];return u}}return[]}bt.prototype.verify=function(e,t){if(t=t.toLowerCase(),t.match(/^[0-9a-f]+$/)==null)return!1;var r=Cn(t,16),n=this.n.bitLength();if(r.bitLength()>n)return!1;var u=this.doPublic(r),a=u.toString(16);if(a.length+3!=n/4)return!1;var i=a.replace(/^1f+00/,""),c=_0(i);if(c.length==0)return!1;var h=c[0],m=c[1],S=function(v){return p.crypto.Util.hashString(v,h)},E=S(e);return m==E};bt.prototype.verifyWithMessageHash=function(e,t){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var r=Cn(t,16);if(r.bitLength()>this.n.bitLength())return 0;var n=this.doPublic(r),u=n.toString(16).replace(/^1f+00/,""),a=_0(u);if(a.length==0)return!1;var i=a[0],c=a[1];return c==e};bt.prototype.verifyPSS=function(e,t,r,n){var u=function(i){return p.crypto.Util.hashHex(i,r)},a=u(Fi(e));return n===void 0&&(n=-1),this.verifyWithMessageHashPSS(a,t,r,n)};bt.prototype.verifyWithMessageHashPSS=function(e,t,r,n){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var u=new ae(t,16),a=function(C){return p.crypto.Util.hashHex(C,r)},i=In(e),c=i.length,h=this.n.bitLength()-1,m=Math.ceil(h/8),S;if(n===-1||n===void 0)n=c;else if(n===-2)n=m-c-2;else if(n<-2)throw new Error("invalid salt length");if(m<c+n+2)throw new Error("data too long");var E=this.doPublic(u).toByteArray();for(S=0;S<E.length;S+=1)E[S]&=255;for(;E.length<m;)E.unshift(0);if(E[m-1]!==188)throw new Error("encoded message does not end in 0xbc");E=String.fromCharCode.apply(String,E);var v=E.substr(0,m-c-1),g=E.substr(v.length,c),b=65280>>8*m-h&255;if((v.charCodeAt(0)&b)!==0)throw new Error("bits beyond keysize not zero");var w=S0(g,v.length,a),_=[];for(S=0;S<v.length;S+=1)_[S]=v.charCodeAt(S)^w.charCodeAt(S);_[0]&=~b;var A=m-c-n-2;for(S=0;S<A;S+=1)if(_[S]!==0)throw new Error("leftmost octets not zero");if(_[A]!==1)throw new Error("0x01 marker not found");return g===In(a(Fi("\0\0\0\0\0\0\0\0"+i+String.fromCharCode.apply(String,_.slice(-n)))))};bt.SALT_LEN_HLEN=-1;bt.SALT_LEN_MAX=-2;bt.SALT_LEN_RECOVER=-2;function ht(e){var t=je,r=t.getChildIdx,n=t.getV,u=t.dump,a=t.parse,i=t.getTLV,c=t.getVbyList,h=t.getVbyListEx,m=t.getTLVbyList,S=t.getTLVbyListEx,E=t.getIdxbyList,v=t.getIdxbyListEx,g=t.getVidx,b=t.getInt,w=t.oidname,_=t.hextooidstr,A=ht,C=Fr,x,N=Error;try{x=p.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var P=m(this.hex,0,[0,0]);if(P.substr(0,2)=="a0"){var $=m(P,0,[0]),j=b($,0);if(j<0||2<j)throw new Error("malformed version field");return this.version=j+1,this.version}else return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return h(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var P=S(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(P)},this.getAlgorithmIdentifierName=function(P){for(var $ in x)if(P===x[$])return $;return w(h(P,0,[0],"06"))},this.getIssuer=function(P,$){return this.getX500Name(this.getIssuerHex(),P,$)},this.getIssuerHex=function(){return m(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){var P=this.getIssuer();return P.str},this.getSubject=function(P,$){return this.getX500Name(this.getSubjectHex(),P,$)},this.getSubjectHex=function(){return m(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){var P=this.getSubject();return P.str},this.getNotBefore=function(){var P=c(this.hex,0,[0,4+this.foffset,0]);return P=P.replace(/(..)/g,"%$1"),P=decodeURIComponent(P),P},this.getNotAfter=function(){var P=c(this.hex,0,[0,4+this.foffset,1]);return P=P.replace(/(..)/g,"%$1"),P=decodeURIComponent(P),P},this.getPublicKeyHex=function(){return this.getSPKI()},this.getSPKI=function(){return m(this.hex,0,[0,6+this.foffset],"30")},this.getSPKIValue=function(){var P=this.getSPKI();return P==null?null:c(P,0,[1],"03",!0)},this.getPublicKeyIdx=function(){return E(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var P=this.getPublicKeyIdx();return E(this.hex,P,[1,0],"30")},this.getPublicKey=function(){return Nt.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var P=m(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(P)},this.getSignatureValueHex=function(){return c(this.hex,0,[2],"03",!0)},this.verifySignature=function(P){var $=this.getSignatureAlgorithmField(),j=this.getSignatureValueHex(),R=m(this.hex,0,[0],"30"),q=new p.crypto.Signature({alg:$});return q.init(P),q.updateHex(R),q.verify(j)},this.parseExt=function(P){var $,j,R;if(P===void 0){if(R=this.hex,this.version!==3)return-1;$=E(R,0,[0,7,0],"30"),j=r(R,$)}else{R=Fr(P);var q=E(R,0,[0,3,0,0],"06");if(n(R,q)!="2a864886f70d01090e"){this.aExtInfo=new Array;return}$=E(R,0,[0,3,0,1,0],"30"),j=r(R,$),this.hex=R}this.aExtInfo=new Array;for(var Q=0;Q<j.length;Q++){var V={};V.critical=!1;var z=r(R,j[Q]),te=0;z.length===3&&(V.critical=!0,te=1),V.oid=t.hextooidstr(c(R,j[Q],[0],"06"));var me=E(R,j[Q],[1+te]);V.vidx=g(R,me),this.aExtInfo.push(V)}},this.getExtInfo=function(P){var $=this.aExtInfo,j=P;if(P.match(/^[0-9.]+$/)||(j=p.asn1.x509.OID.name2oid(P)),j!==""){for(var R=0;R<$.length;R++)if($[R].oid===j)return $[R]}},this.getCriticalExtV=function(P,$,j){if($!=null)return[$,j];var R=this.getExtInfo(P);return R==null?[null,null]:[i(this.hex,R.vidx),R.critical]},this.getExtBasicConstraints=function(P,$){if(P===void 0&&$===void 0){var j=this.getExtInfo("basicConstraints");if(j===void 0)return;P=i(this.hex,j.vidx),$=j.critical}var R={extname:"basicConstraints"};if($&&(R.critical=!0),P==="3000")return R;if(P==="30030101ff")return R.cA=!0,R;if(P.substr(0,12)==="30060101ff02"){var q=n(P,10),Q=parseInt(q,16);return R.cA=!0,R.pathLen=Q,R}throw new Error("hExtV parse error: "+P)},this.getExtNameConstraints=function(P,$){var j=this.getCriticalExtV("nameConstraints",P,$);if(P=j[0],$=j[1],P!=null){var R={extname:"nameConstraints"};$&&(R.critical=!0);for(var q=r(P,0),Q=0;Q<q.length;Q++){for(var V=[],z=r(P,q[Q]),te=0;te<z.length;te++){var me=i(P,z[te]),st=this.getGeneralSubtree(me);V.push(st)}var it=P.substr(q[Q],2);it=="a0"?R.permit=V:it=="a1"&&(R.exclude=V)}return R}},this.getGeneralSubtree=function(P){var $=r(P,0),j=$.length;if(j<1||2<j)throw new Error("wrong num elements");for(var R=this.getGeneralName(i(P,$[0])),q=1;q<j;q++){var Q=P.substr($[q],2),V=n(P,$[q]),z=parseInt(V,16);Q=="80"&&(R.min=z),Q=="81"&&(R.max=z)}return R},this.getExtKeyUsage=function(P,$){var j=this.getCriticalExtV("keyUsage",P,$);if(P=j[0],$=j[1],P!=null){var R={extname:"keyUsage"};return $&&(R.critical=!0),R.names=this.getExtKeyUsageString(P).split(","),R}},this.getExtKeyUsageBin=function(P){if(P===void 0){var $=this.getExtInfo("keyUsage");if($===void 0)return"";P=i(this.hex,$.vidx)}if(P.length!=8&&P.length!=10)throw new Error("malformed key usage value: "+P);var j="000000000000000"+parseInt(P.substr(6),16).toString(2);return P.length==8&&(j=j.slice(-8)),P.length==10&&(j=j.slice(-16)),j=j.replace(/0+$/,""),j==""&&(j="0"),j},this.getExtKeyUsageString=function(P){for(var $=this.getExtKeyUsageBin(P),j=new Array,R=0;R<$.length;R++)$.substr(R,1)=="1"&&j.push(ht.KEYUSAGE_NAME[R]);return j.join(",")},this.getExtSubjectKeyIdentifier=function(P,$){if(P===void 0&&$===void 0){var j=this.getExtInfo("subjectKeyIdentifier");if(j===void 0)return;P=i(this.hex,j.vidx),$=j.critical}var R={extname:"subjectKeyIdentifier"};$&&(R.critical=!0);var q=n(P,0);return R.kid={hex:q},R},this.getExtAuthorityKeyIdentifier=function(P,$){if(P===void 0&&$===void 0){var j=this.getExtInfo("authorityKeyIdentifier");if(j===void 0)return;P=i(this.hex,j.vidx),$=j.critical}var R={extname:"authorityKeyIdentifier"};$&&(R.critical=!0);for(var q=r(P,0),Q=0;Q<q.length;Q++){var V=P.substr(q[Q],2);if(V==="80"&&(R.kid={hex:n(P,q[Q])}),V==="a1"){var z=i(P,q[Q]),te=this.getGeneralNames(z);R.issuer=te[0].dn}V==="82"&&(R.sn={hex:n(P,q[Q])})}return R},this.getExtExtKeyUsage=function(P,$){if(P===void 0&&$===void 0){var j=this.getExtInfo("extKeyUsage");if(j===void 0)return;P=i(this.hex,j.vidx),$=j.critical}var R={extname:"extKeyUsage",array:[]};$&&(R.critical=!0);for(var q=r(P,0),Q=0;Q<q.length;Q++)R.array.push(w(n(P,q[Q])));return R},this.getExtExtKeyUsageName=function(){var P=this.getExtInfo("extKeyUsage");if(P===void 0)return P;var $=new Array,j=i(this.hex,P.vidx);if(j==="")return $;for(var R=r(j,0),q=0;q<R.length;q++)$.push(w(n(j,R[q])));return $},this.getExtSubjectAltName=function(P,$){if(P===void 0&&$===void 0){var j=this.getExtInfo("subjectAltName");if(j===void 0)return;P=i(this.hex,j.vidx),$=j.critical}var R={extname:"subjectAltName",array:[]};return $&&(R.critical=!0),R.array=this.getGeneralNames(P),R},this.getExtIssuerAltName=function(P,$){if(P===void 0&&$===void 0){var j=this.getExtInfo("issuerAltName");if(j===void 0)return;P=i(this.hex,j.vidx),$=j.critical}var R={extname:"issuerAltName",array:[]};return $&&(R.critical=!0),R.array=this.getGeneralNames(P),R},this.getGeneralNames=function(P){for(var $=r(P,0),j=[],R=0;R<$.length;R++){var q=this.getGeneralName(i(P,$[R]));q!==void 0&&j.push(q)}return j},this.getGeneralName=function(P){var $=P.substr(0,2),j=n(P,0),R=In(j);if($=="81")return{rfc822:R};if($=="82")return{dns:R};if($=="86")return{uri:R};if($=="87")return{ip:ac(j)};if($=="a4")return{dn:this.getX500Name(j)};if($=="a0")return{other:this.getOtherName(P)}},this.getExtSubjectAltName2=function(){var P,$,j,R=this.getExtInfo("subjectAltName");if(R===void 0)return R;for(var q=new Array,Q=i(this.hex,R.vidx),V=r(Q,0),z=0;z<V.length;z++)j=Q.substr(V[z],2),P=n(Q,V[z]),j==="81"&&($=rr(P),q.push(["MAIL",$])),j==="82"&&($=rr(P),q.push(["DNS",$])),j==="84"&&($=ht.hex2dn(P,0),q.push(["DN",$])),j==="86"&&($=rr(P),q.push(["URI",$])),j==="87"&&($=ac(P),q.push(["IP",$]));return q},this.getExtCRLDistributionPoints=function(P,$){if(P===void 0&&$===void 0){var j=this.getExtInfo("cRLDistributionPoints");if(j===void 0)return;P=i(this.hex,j.vidx),$=j.critical}var R={extname:"cRLDistributionPoints",array:[]};$&&(R.critical=!0);for(var q=r(P,0),Q=0;Q<q.length;Q++){var V=i(P,q[Q]);R.array.push(this.getDistributionPoint(V))}return R},this.getDistributionPoint=function(P){for(var $={},j=r(P,0),R=0;R<j.length;R++){var q=P.substr(j[R],2),Q=i(P,j[R]);q=="a0"&&($.dpname=this.getDistributionPointName(Q))}return $},this.getDistributionPointName=function(P){for(var $={},j=r(P,0),R=0;R<j.length;R++){var q=P.substr(j[R],2),Q=i(P,j[R]);q=="a0"&&($.full=this.getGeneralNames(Q))}return $},this.getExtCRLDistributionPointsURI=function(){var P=this.getExtCRLDistributionPoints();if(P==null)return P;for(var $=P.array,j=[],R=0;R<$.length;R++)try{$[R].dpname.full[0].uri!=null&&j.push($[R].dpname.full[0].uri)}catch{}return j},this.getExtAIAInfo=function(){var P=this.getExtInfo("authorityInfoAccess");if(P===void 0)return P;for(var $={ocsp:[],caissuer:[]},j=r(this.hex,P.vidx),R=0;R<j.length;R++){var q=c(this.hex,j[R],[0],"06"),Q=c(this.hex,j[R],[1],"86");q==="2b06010505073001"&&$.ocsp.push(rr(Q)),q==="2b06010505073002"&&$.caissuer.push(rr(Q))}return $},this.getExtAuthorityInfoAccess=function(P,$){if(P===void 0&&$===void 0){var j=this.getExtInfo("authorityInfoAccess");if(j===void 0)return;P=i(this.hex,j.vidx),$=j.critical}var R={extname:"authorityInfoAccess",array:[]};$&&(R.critical=!0);for(var q=r(P,0),Q=0;Q<q.length;Q++){var V=h(P,q[Q],[0],"06"),z=c(P,q[Q],[1],"86"),te=rr(z);if(V=="2b06010505073001")R.array.push({ocsp:te});else if(V=="2b06010505073002")R.array.push({caissuer:te});else throw new Error("unknown method: "+V)}return R},this.getExtCertificatePolicies=function(P,$){if(P===void 0&&$===void 0){var j=this.getExtInfo("certificatePolicies");if(j===void 0)return;P=i(this.hex,j.vidx),$=j.critical}var R={extname:"certificatePolicies",array:[]};$&&(R.critical=!0);for(var q=r(P,0),Q=0;Q<q.length;Q++){var V=i(P,q[Q]),z=this.getPolicyInformation(V);R.array.push(z)}return R},this.getPolicyInformation=function(P){var $={},j=c(P,0,[0],"06");$.policyoid=w(j);var R=v(P,0,[1],"30");if(R!=-1){$.array=[];for(var q=r(P,R),Q=0;Q<q.length;Q++){var V=i(P,q[Q]),z=this.getPolicyQualifierInfo(V);$.array.push(z)}}return $},this.getOtherName=function(P){var $={},j=r(P,0),R=c(P,j[0],[],"06"),q=c(P,j[1],[]);return $.oid=w(R),$.value=a(q),$},this.getPolicyQualifierInfo=function(P){var $={},j=c(P,0,[0],"06");if(j==="2b06010505070201"){var R=h(P,0,[1],"16");$.cps=In(R)}else if(j==="2b06010505070202"){var q=m(P,0,[1],"30");$.unotice=this.getUserNotice(q)}return $},this.getUserNotice=function(P){var $=null,j={};try{$=t.parse(P);var R=this._asn1ToUnotice($);return R}catch{return}},this._asn1ToUnotice=function(P){try{for(var $={},j=or(P,"seq"),R=0;R<j.length;R++){var q=this._asn1ToNoticeRef(j[R]);q!=null&&($.noticeref=q);var Q=this.asn1ToDisplayText(j[R]);Q!=null&&($.exptext=Q)}return Object.keys($).length>0?$:void 0}catch{return}},this._asn1ToNoticeRef=function(P){try{for(var $={},j=or(P,"seq"),R=0;R<j.length;R++){var q=this._asn1ToNoticeNum(j[R]);q!=null&&($.noticenum=q);var Q=this.asn1ToDisplayText(j[R]);Q!=null&&($.org=Q)}return Object.keys($).length>0?$:void 0}catch{return}},this._asn1ToNoticeNum=function(P){try{for(var $=or(P,"seq"),j=[],R=0;R<$.length;R++){var q=$[R];j.push(parseInt(or(q,"int.hex"),16))}return j}catch{return}},this.getDisplayText=function(P){var $={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"},j={};return j.type=$[P.substr(0,2)],j.str=In(n(P,0)),j},this.asn1ToDisplayText=function(P){if(P.utf8str!=null)return{type:"utf8",str:P.utf8str.str};if(P.ia5str!=null)return{type:"ia5",str:P.ia5str.str};if(P.visstr!=null)return{type:"vis",str:P.visstr.str};if(P.bmpstr!=null)return{type:"bmp",str:P.bmpstr.str};if(P.prnstr!=null)return{type:"prn",str:P.prnstr.str}},this.getExtPolicyMappings=function(P,$){var j=this.getCriticalExtV("policyMappings",P,$);if(P=j[0],$=j[1],P!=null){var R={extname:"policyMappings"};$&&(R.critical=!0);try{for(var q=a(P),Q=q.seq,V=[],z=0;z<Q.length;z++){var te=Q[z].seq;V.push([te[0].oid,te[1].oid])}R.array=V}catch{throw new N("malformed policyMappings")}return R}},this.getExtPolicyConstraints=function(P,$){var j=this.getCriticalExtV("policyConstraints",P,$);if(P=j[0],$=j[1],P!=null){var R={extname:"policyConstraints"};$&&(R.critical=!0);var q=a(P);try{for(var Q=q.seq,V=0;V<Q.length;V++){var z=Q[V].tag;z.explicit==!1&&(z.tag=="80"&&(R.reqexp=parseInt(z.hex,16)),z.tag=="81"&&(R.inhibit=parseInt(z.hex,16)))}}catch{return new N("malformed policyConstraints value")}return R}},this.getExtInhibitAnyPolicy=function(P,$){var j=this.getCriticalExtV("inhibitAnyPolicy",P,$);if(P=j[0],$=j[1],P!=null){var R={extname:"inhibitAnyPolicy"};$&&(R.critical=!0);var q=b(P,0);return q==-1?new N("wrong value"):(R.skip=q,R)}},this.getExtCRLNumber=function(P,$){var j={extname:"cRLNumber"};if($&&(j.critical=!0),P.substr(0,2)=="02")return j.num={hex:n(P,0)},j;throw new N("hExtV parse error: "+P)},this.getExtCRLReason=function(P,$){var j={extname:"cRLReason"};if($&&(j.critical=!0),P.substr(0,2)=="0a")return j.code=parseInt(n(P,0),16),j;throw new Error("hExtV parse error: "+P)},this.getExtOcspNonce=function(P,$){var j={extname:"ocspNonce"};$&&(j.critical=!0);var R=n(P,0);return j.hex=R,j},this.getExtOcspNoCheck=function(P,$){var j={extname:"ocspNoCheck"};return $&&(j.critical=!0),j},this.getExtAdobeTimeStamp=function(P,$){if(P===void 0&&$===void 0){var j=this.getExtInfo("adobeTimeStamp");if(j===void 0)return;P=i(this.hex,j.vidx),$=j.critical}var R={extname:"adobeTimeStamp"};$&&(R.critical=!0);var q=r(P,0);if(q.length>1){var Q=i(P,q[1]),V=this.getGeneralName(Q);V.uri!=null&&(R.uri=V.uri)}if(q.length>2){var z=i(P,q[2]);z=="0101ff"&&(R.reqauth=!0),z=="010100"&&(R.reqauth=!1)}return R},this.getExtSubjectDirectoryAttributes=function(P,$){if(P===void 0&&$===void 0){var j=this.getExtInfo("subjectDirectoryAttributes");if(j===void 0)return;P=i(this.hex,j.vidx),$=j.critical}var R={extname:"subjectDirectoryAttributes"};$&&(R.critical=!0);try{for(var q=a(P),Q=[],V=0;V<q.seq.length;V++){var z=q.seq[V],te=or(z,"seq.0.oid"),me=or(z,"seq.1.set");if(te==null||me==null)throw"error";Q.push({attr:te,array:me})}return R.array=Q,R}catch{throw new Error("malformed subjectDirectoryAttributes extension value")}};var H=function(P){var $={};try{var j=P.seq[0].oid,R=p.asn1.x509.OID.name2oid(j);$.type=p.asn1.x509.OID.oid2atype(R);var q=P.seq[1];if(q.utf8str!=null)$.ds="utf8",$.value=q.utf8str.str;else if(q.numstr!=null)$.ds="num",$.value=q.numstr.str;else if(q.telstr!=null)$.ds="tel",$.value=q.telstr.str;else if(q.prnstr!=null)$.ds="prn",$.value=q.prnstr.str;else if(q.ia5str!=null)$.ds="ia5",$.value=q.ia5str.str;else if(q.visstr!=null)$.ds="vis",$.value=q.visstr.str;else if(q.bmpstr!=null)$.ds="bmp",$.value=q.bmpstr.str;else throw"error";return $}catch{throw new Erorr("improper ASN.1 parsed AttrTypeAndValue")}},ne=function(P){try{return P.set.map(function($){return H($)})}catch($){throw new Error("improper ASN.1 parsed RDN: "+$)}},pe=function(P){try{return P.seq.map(function($){return ne($)})}catch($){throw new Error("improper ASN.1 parsed X500Name: "+$)}};this.getX500NameRule=function(P){for(var $=!0,j=!0,R=!1,q="",Q="",V=null,z=[],te=0;te<P.length;te++)for(var me=P[te],st=0;st<me.length;st++)z.push(me[st]);for(var te=0;te<z.length;te++){var it=z[te],ot=it.ds,Ct=it.value,yt=it.type;if(q+=":"+ot,ot!="prn"&&ot!="utf8"&&ot!="ia5")return"mixed";if(ot=="ia5"){if(yt!="CN")return"mixed";if(p.lang.String.isMail(Ct))continue;return"mixed"}if(yt=="C"){if(ot=="prn")continue;return"mixed"}if(Q+=":"+ot,V==null)V=ot;else if(V!==ot)return"mixed"}return V??"prn"},this.getAttrTypeAndValue=function(P){var $=a(P);return H($)},this.getRDN=function(P){var $=a(P);return ne($)},this.getX500NameArray=function(P){var $=a(P);return pe($)},this.getX500Name=function(P,$,j){var R=this.getX500NameArray(P),q=this.dnarraytostr(R),Q={str:q};return Q.array=R,j==!0&&(Q.hex=P),$==!0&&(Q.canon=this.c14nRDNArray(R)),Q},this.readCertPEM=function(P){this.readCertHex(C(P))},this.readCertHex=function(P){this.hex=P,this.getVersion();try{E(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(P){var $={};return P==null&&(P={}),$.version=this.getVersion(),$.serial={hex:this.getSerialNumberHex()},$.sigalg=this.getSignatureAlgorithmField(),$.issuer=this.getIssuer(P.dncanon,P.dnhex),$.notbefore=this.getNotBefore(),$.notafter=this.getNotAfter(),$.subject=this.getSubject(P.dncanon,P.dnhex),$.sbjpubkey=un(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo!=null&&this.aExtInfo.length>0&&($.ext=this.getExtParamArray()),$.sighex=this.getSignatureValueHex(),P.tbshex==!0&&($.tbshex=m(this.hex,0,[0])),P.nodnarray==!0&&(delete $.issuer.array,delete $.subject.array),$},this.getExtParamArray=function(P){if(P==null){var $=v(this.hex,0,[0,"[3]"]);$!=-1&&(P=S(this.hex,0,[0,"[3]",0],"30"))}for(var j=[],R=r(P,0),q=0;q<R.length;q++){var Q=i(P,R[q]),V=this.getExtParam(Q);V!=null&&j.push(V)}return j},this.getExtParam=function(P){var $={},j=r(P,0),R=j.length;if(R!=2&&R!=3)throw new Error("wrong number elements in Extension: "+R+" "+P);var q=_(c(P,0,[0],"06")),Q=!1;R==3&&m(P,0,[1])=="0101ff"&&(Q=!0);var V=m(P,0,[R-1,0]),z=void 0;if(q=="2.5.29.14"?z=this.getExtSubjectKeyIdentifier(V,Q):q=="2.5.29.15"?z=this.getExtKeyUsage(V,Q):q=="2.5.29.17"?z=this.getExtSubjectAltName(V,Q):q=="2.5.29.18"?z=this.getExtIssuerAltName(V,Q):q=="2.5.29.19"?z=this.getExtBasicConstraints(V,Q):q=="2.5.29.30"?z=this.getExtNameConstraints(V,Q):q=="2.5.29.31"?z=this.getExtCRLDistributionPoints(V,Q):q=="2.5.29.32"?z=this.getExtCertificatePolicies(V,Q):q=="2.5.29.33"?z=this.getExtPolicyMappings(V,Q):q=="2.5.29.35"?z=this.getExtAuthorityKeyIdentifier(V,Q):q=="2.5.29.36"?z=this.getExtPolicyConstraints(V,Q):q=="2.5.29.37"?z=this.getExtExtKeyUsage(V,Q):q=="2.5.29.54"?z=this.getExtInhibitAnyPolicy(V,Q):q=="1.3.6.1.5.5.7.1.1"?z=this.getExtAuthorityInfoAccess(V,Q):q=="2.5.29.20"?z=this.getExtCRLNumber(V,Q):q=="2.5.29.21"?z=this.getExtCRLReason(V,Q):q=="2.5.29.9"?z=this.getExtSubjectDirectoryAttributes(V,Q):q=="1.3.6.1.5.5.7.48.1.2"?z=this.getExtOcspNonce(V,Q):q=="1.3.6.1.5.5.7.48.1.5"?z=this.getExtOcspNoCheck(V,Q):q=="1.2.840.113583.1.1.9.1"?z=this.getExtAdobeTimeStamp(V,Q):ht.EXT_PARSER[q]!=null&&(z=ht.EXT_PARSER[q](q,Q,V)),z!=null)return z;var te={extname:q,extn:V};try{te.extn=a(V)}catch{}return Q&&(te.critical=!0),te},this.findExt=function(P,$){for(var j=0;j<P.length;j++)if(P[j].extname==$)return P[j];return null},this.updateExtCDPFullURI=function(P,$){var j=this.findExt(P,"cRLDistributionPoints");if(j!=null&&j.array!=null){for(var R=j.array,q=0;q<R.length;q++)if(R[q].dpname!=null&&R[q].dpname.full!=null)for(var Q=R[q].dpname.full,V=0;V<Q.length;V++){var z=Q[q];z.uri!=null&&(z.uri=$)}}},this.updateExtAIAOCSP=function(P,$){var j=this.findExt(P,"authorityInfoAccess");if(j!=null&&j.array!=null)for(var R=j.array,q=0;q<R.length;q++)R[q].ocsp!=null&&(R[q].ocsp=$)},this.updateExtAIACAIssuer=function(P,$){var j=this.findExt(P,"authorityInfoAccess");if(j!=null&&j.array!=null)for(var R=j.array,q=0;q<R.length;q++)R[q].caissuer!=null&&(R[q].caissuer=$)},this.dnarraytostr=function(P){function $(R){return R.map(function(q){return j(q).replace(/\+/,"\\+")}).join("+")}function j(R){return R.type+"="+R.value}return"/"+P.map(function(R){return $(R).replace(/\//,"\\/")}).join("/")},this.setCanonicalizedDN=function(P){var $;if(P.str!=null&&P.array==null){var j=new p.asn1.x509.X500Name({str:P.str}),R=j.tohex();$=this.getX500NameArray(R)}else $=P.array;P.canon==null&&(P.canon=this.c14nRDNArray($))},this.c14nRDNArray=function(P){for(var $=[],j=0;j<P.length;j++){for(var R=P[j],q=[],Q=0;Q<R.length;Q++){var V=R[Q],z=V.value;z=z.replace(/^\s*/,""),z=z.replace(/\s*$/,""),z=z.replace(/\s+/g," "),z=z.toLowerCase(),q.push(V.type.toLowerCase()+"="+z)}$.push(q.join("+"))}return"/"+$.join("/")},this.getInfo=function(){var P=function(_r){for(var Bt="",lr="    ",At=`
`,Be=_r.array,$e=0;$e<Be.length;$e++){var ve=Be[$e];if(ve.dn!=null&&(Bt+=lr+"dn: "+ve.dn.str+At),ve.ip!=null&&(Bt+=lr+"ip: "+ve.ip+At),ve.rfc822!=null&&(Bt+=lr+"rfc822: "+ve.rfc822+At),ve.dns!=null&&(Bt+=lr+"dns: "+ve.dns+At),ve.uri!=null&&(Bt+=lr+"uri: "+ve.uri+At),ve.other!=null){var Se=ve.other.oid,Y=JSON.stringify(ve.other.value).replace(/\"/g,"");Bt+=lr+"other: "+Se+"="+Y+At}}return Bt=Bt.replace(/\n$/,""),Bt},$=function(_r){for(var Bt="",lr=_r.array,At=0;At<lr.length;At++){var Be=lr[At];if(Bt+="    policy oid: "+Be.policyoid+`
`,Be.array!==void 0)for(var $e=0;$e<Be.array.length;$e++){var ve=Be.array[$e];ve.cps!==void 0&&(Bt+="    cps: "+ve.cps+`
`)}}return Bt},j=function(_r){for(var Bt="",lr=_r.array,At=0;At<lr.length;At++){var Be=lr[At];try{Be.dpname.full[0].uri!==void 0&&(Bt+="    "+Be.dpname.full[0].uri+`
`)}catch{}try{Be.dname.full[0].dn.hex!==void 0&&(Bt+="    "+ht.hex2dn(Be.dpname.full[0].dn.hex)+`
`)}catch{}}return Bt},R=function(_r){for(var Bt="",lr=_r.array,At=0;At<lr.length;At++){var Be=lr[At];Be.caissuer!==void 0&&(Bt+="    caissuer: "+Be.caissuer+`
`),Be.ocsp!==void 0&&(Bt+="    ocsp: "+Be.ocsp+`
`)}return Bt},q=ht,Q,V,z;if(Q=`Basic Fields
`,Q+="  serial number: "+this.getSerialNumberHex()+`
`,Q+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,Q+="  issuer: "+this.getIssuerString()+`
`,Q+="  notBefore: "+this.getNotBefore()+`
`,Q+="  notAfter: "+this.getNotAfter()+`
`,Q+="  subject: "+this.getSubjectString()+`
`,Q+=`  subject public key info: 
`,V=this.getPublicKey(),Q+="    key algorithm: "+V.type+`
`,V.type==="RSA"&&(Q+="    n="+ch(V.n.toString(16)).substr(0,16)+`...
`,Q+="    e="+ch(V.e.toString(16))+`
`),z=this.aExtInfo,z!=null){Q+=`X509v3 Extensions:
`;for(var te=0;te<z.length;te++){var me=z[te],st=p.asn1.x509.OID.oid2name(me.oid);st===""&&(st=me.oid);var it="";if(me.critical===!0&&(it="CRITICAL"),Q+="  "+st+" "+it+`:
`,st==="basicConstraints"){var ot=this.getExtBasicConstraints();ot.cA===void 0?Q+=`    {}
`:(Q+="    cA=true",ot.pathLen!==void 0&&(Q+=", pathLen="+ot.pathLen),Q+=`
`)}else if(st=="policyMappings"){var Ct=this.getExtPolicyMappings().array,yt=Ct.map(function(_r){var Bt=_r;return Bt[0]+":"+Bt[1]}).join(", ");Q+="    "+yt+`
`}else if(st=="policyConstraints"){var Ht=this.getExtPolicyConstraints();Q+="    ",Ht.reqexp!=null&&(Q+=" reqexp="+Ht.reqexp),Ht.inhibit!=null&&(Q+=" inhibit="+Ht.inhibit),Q+=`
`}else if(st=="inhibitAnyPolicy"){var Ht=this.getExtInhibitAnyPolicy();Q+="    skip="+Ht.skip+`
`}else if(st=="keyUsage")Q+="    "+this.getExtKeyUsageString()+`
`;else if(st=="subjectKeyIdentifier")Q+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(st=="authorityKeyIdentifier"){var Lt=this.getExtAuthorityKeyIdentifier();Lt.kid!==void 0&&(Q+="    kid="+Lt.kid.hex+`
`)}else if(st=="extKeyUsage"){var ln=this.getExtExtKeyUsage().array;Q+="    "+ln.join(", ")+`
`}else if(st=="subjectAltName"){var Ar=P(this.getExtSubjectAltName());Q+=Ar+`
`}else if(st=="cRLDistributionPoints"){var cr=this.getExtCRLDistributionPoints();Q+=j(cr)}else if(st=="authorityInfoAccess"){var Or=this.getExtAuthorityInfoAccess();Q+=R(Or)}else st=="certificatePolicies"&&(Q+=$(this.getExtCertificatePolicies()))}}return Q+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,Q+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`,Q},typeof e=="string"&&(e.indexOf("-----BEGIN")!=-1?this.readCertPEM(e):p.lang.String.isHex(e)&&this.readCertHex(e))}ht.EXT_PARSER={};ht.registExtParser=function(e,t){ht.EXT_PARSER[e]=t};ht.hex2dn=function(e,t){t===void 0&&(t=0);var r=new ht,n=je.getTLV(e,t),u=r.getX500Name(e);return u.str};ht.hex2rdn=function(e,t){if(t===void 0&&(t=0),e.substr(t,2)!=="31")throw new Error("malformed RDN");for(var r=new Array,n=je.getChildIdx(e,t),u=0;u<n.length;u++)r.push(ht.hex2attrTypeValue(e,n[u]));return r=r.map(function(a){return a.replace("+","\\+")}),r.join("+")};ht.hex2attrTypeValue=function(e,t){var r=je,n=r.getV;if(t===void 0&&(t=0),e.substr(t,2)!=="30")throw new Error("malformed attribute type and value");var u=r.getChildIdx(e,t);u.length!==2||e.substr(u[0],2);var a=n(e,u[0]),i=p.asn1.ASN1Util.oidHexToInt(a),c=p.asn1.x509.OID.oid2atype(i),h=n(e,u[1]),m=In(h);return c+"="+m};ht.getPublicKeyFromCertHex=function(e){var t=new ht;return t.readCertHex(e),t.getPublicKey()};ht.getPublicKeyFromCertPEM=function(e){var t=new ht;return t.readCertPEM(e),t.getPublicKey()};ht.getPublicKeyInfoPropOfCertPEM=function(e){var t=je,r=t.getVbyList,n={},u,a,i;return n.algparam=null,u=new ht,u.readCertPEM(e),a=u.getPublicKeyHex(),n.keyhex=r(a,0,[1],"03").substr(2),n.algoid=r(a,0,[0,0],"06"),n.algoid==="2a8648ce3d0201"&&(n.algparam=r(a,0,[0,1],"06")),n};ht.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var m_=function(e){var t=p,r=t.lang.String.isHex,n=je,u=n.getV,a=n.getTLV,i=n.getVbyList,c=n.getTLVbyList,h=n.getTLVbyListEx,m=n.getIdxbyList,S=n.getIdxbyListEx,E=n.getChildIdx,v=new ht;this.hex=null,this.posSigAlg=null,this.posRevCert=null,this.parsed=null,this._setPos=function(){var g=m(this.hex,0,[0,0]),b=this.hex.substr(g,2);if(b=="02")this.posSigAlg=1;else if(b=="30")this.posSigAlg=0;else throw new Error("malformed 1st item of TBSCertList: "+b);var w=m(this.hex,0,[0,this.posSigAlg+3]),_=this.hex.substr(w,2);if(_=="17"||_=="18"){var A,C;A=m(this.hex,0,[0,this.posSigAlg+4]),this.posRevCert=null,A!=-1&&(C=this.hex.substr(A,2),C=="30"&&(this.posRevCert=this.posSigAlg+4))}else if(_=="30")this.posRevCert=this.posSigAlg+3;else if(_=="a0")this.posRevCert=null;else throw new Error("malformed nextUpdate or revCert tag: "+_)},this.getVersion=function(){return this.posSigAlg==0?null:parseInt(i(this.hex,0,[0,0],"02"),16)+1},this.getSignatureAlgorithmField=function(){var g=c(this.hex,0,[0,this.posSigAlg],"30");return v.getAlgorithmIdentifierName(g)},this.getIssuer=function(){return v.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return c(this.hex,0,[0,this.posSigAlg+1],"30")},this.getThisUpdate=function(){var g=i(this.hex,0,[0,this.posSigAlg+2]);return result=In(g)},this.getNextUpdate=function(){var g=m(this.hex,0,[0,this.posSigAlg+3]),b=this.hex.substr(g,2);return b!="17"&&b!="18"?null:In(u(this.hex,g))},this.getRevCertArray=function(){if(this.posRevCert==null)return null;for(var g=[],b=m(this.hex,0,[0,this.posRevCert]),w=E(this.hex,b),_=0;_<w.length;_++){var A=a(this.hex,w[_]);g.push(this.getRevCert(A))}return g},this.getRevCert=function(g){var b={},w=E(g,0);return b.sn={hex:i(g,0,[0],"02")},b.date=In(i(g,0,[1])),w.length==3&&(b.ext=v.getExtParamArray(c(g,0,[2]))),b},this.findRevCert=function(g){var b=new ht(g),w=b.getSerialNumberHex();return this.findRevCertBySN(w)},this.findRevCertBySN=function(g){if(this.parsed==null&&this.getParam(),this.parsed.revcert==null)return null;for(var b=this.parsed.revcert,w=0;w<b.length;w++)if(g==b[w].sn.hex)return b[w];return null},this.getSignatureValueHex=function(){return i(this.hex,0,[2],"03",!0)},this.verifySignature=function(g){var b=this.getSignatureAlgorithmField(),w=this.getSignatureValueHex(),_=c(this.hex,0,[0],"30"),A=new p.crypto.Signature({alg:b});return A.init(g),A.updateHex(_),A.verify(w)},this.getParam=function(g){var b={},w=this.getVersion();w!=null&&(b.version=w),b.sigalg=this.getSignatureAlgorithmField(),b.issuer=this.getIssuer(),b.thisupdate=this.getThisUpdate();var _=this.getNextUpdate();_!=null&&(b.nextupdate=_);var A=this.getRevCertArray();A!=null&&(b.revcert=A);var C=S(this.hex,0,[0,"[0]"]);if(C!=-1){var x=h(this.hex,0,[0,"[0]",0]);b.ext=v.getExtParamArray(x)}return b.sighex=this.getSignatureValueHex(),this.parsed=b,typeof g=="object"&&(g.tbshex==!0&&(b.tbshex=c(this.hex,0,[0])),g.nodnarray==!0&&delete b.issuer.array),b},typeof e=="string"&&(r(e)?this.hex=e:e.match(/-----BEGIN X509 CRL/)&&(this.hex=Fr(e)),this._setPos())};(typeof p>"u"||!p)&&(p={});(typeof p.jws>"u"||!p.jws)&&(p.jws={});p.jws.JWS=function(){var e=p,t=e.jws.JWS,r=t.isSafeJSONString;this.parseJWS=function(n,u){if(!(this.parsedJWS!==void 0&&(u||this.parsedJWS.sigvalH!==void 0))){var a=n.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(a==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var i=a[1],c=a[2],h=a[3],m=i+"."+c;if(this.parsedJWS={},this.parsedJWS.headB64U=i,this.parsedJWS.payloadB64U=c,this.parsedJWS.sigvalB64U=h,this.parsedJWS.si=m,!u){var S=br(h),E=Cn(S,16);this.parsedJWS.sigvalH=S,this.parsedJWS.sigvalBI=E}var v=pi(i),g=pi(c);if(this.parsedJWS.headS=v,this.parsedJWS.payloadS=g,!r(v,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+v}}};p.jws.JWS.sign=function(e,t,r,n,u){var a=p,i=a.jws,c=i.JWS,h=c.readSafeJSONString,m=c.isSafeJSONString,S=a.crypto,E=S.ECDSA,v=S.Mac,g=S.Signature,b=JSON,w,_,A;if(typeof t!="string"&&typeof t!="object")throw"spHeader must be JSON string or object: "+t;if(typeof t=="object"&&(_=t,w=b.stringify(_)),typeof t=="string"){if(w=t,!m(w))throw"JWS Head is not safe JSON string: "+w;_=h(w)}if(A=r,typeof r=="object"&&(A=b.stringify(r)),(e==""||e==null)&&_.alg!==void 0&&(e=_.alg),e!=""&&e!=null&&_.alg===void 0&&(_.alg=e,w=b.stringify(_)),e!==_.alg)throw"alg and sHeader.alg doesn't match: "+e+"!="+_.alg;var C=null;if(c.jwsalg2sigalg[e]===void 0)throw"unsupported alg name: "+e;C=c.jwsalg2sigalg[e];var x=$u(w),N=$u(A),H=x+"."+N,ne="";if(C.substr(0,4)=="Hmac"){if(n===void 0)throw"mac key shall be specified for HS* alg";var pe=new v({alg:C,prov:"cryptojs",pass:n});pe.updateString(H),ne=pe.doFinal()}else if(C.indexOf("withECDSA")!=-1){var P=new g({alg:C});P.init(n,u),P.updateString(H);var $=P.sign();ne=p.crypto.ECDSA.asn1SigToConcatSig($)}else if(C!="none"){var P=new g({alg:C});P.init(n,u),P.updateString(H),ne=P.sign()}var j=Kr(ne);return H+"."+j};p.jws.JWS.verify=function(e,t,r){var n=p,u=n.jws,a=u.JWS,i=a.readSafeJSONString,c=n.crypto,h=c.ECDSA,m=c.Mac,S=c.Signature,E;if(typeof bt!==void 0&&(E=bt),!wh(e))return!1;var v=e.split(".");if(v.length!==3)return!1;var g=v[0],b=v[1],w=g+"."+b,_=br(v[2]),A=i(pi(v[0])),C=null,x=null;if(A.alg===void 0)throw"algorithm not specified in header";if(C=A.alg,x=C.substr(0,2),r!=null&&Object.prototype.toString.call(r)==="[object Array]"&&r.length>0){var N=":"+r.join(":")+":";if(N.indexOf(":"+C+":")==-1)throw"algorithm '"+C+"' not accepted in the list"}if(C!="none"&&t===null)throw"key shall be specified to verify.";if(typeof t=="string"&&t.indexOf("-----BEGIN ")!=-1&&(t=Nt.getKey(t)),(x=="RS"||x=="PS")&&!(t instanceof E))throw"key shall be a RSAKey obj for RS* and PS* algs";if(x=="ES"&&!(t instanceof h))throw"key shall be a ECDSA obj for ES* algs";C=="none";var H=null;if(a.jwsalg2sigalg[A.alg]===void 0)throw"unsupported alg name: "+C;if(H=a.jwsalg2sigalg[C],H=="none")throw"not supported";if(H.substr(0,4)=="Hmac"){var ne=null;if(t===void 0)throw"hexadecimal key shall be specified for HMAC";var pe=new m({alg:H,pass:t});return pe.updateString(w),ne=pe.doFinal(),_==ne}else if(H.indexOf("withECDSA")!=-1){var P=null;try{P=h.concatSigToASN1Sig(_)}catch{return!1}var $=new S({alg:H});return $.init(t),$.updateString(w),$.verify(P)}else{var $=new S({alg:H});return $.init(t),$.updateString(w),$.verify(_)}};p.jws.JWS.parse=function(e){var t=e.split("."),r={},n,u,a;if(t.length!=2&&t.length!=3)throw"malformed sJWS: wrong number of '.' splitted elements";return n=t[0],u=t[1],t.length==3&&(a=t[2]),r.headerObj=p.jws.JWS.readSafeJSONString(pi(n)),r.payloadObj=p.jws.JWS.readSafeJSONString(pi(u)),r.headerPP=JSON.stringify(r.headerObj,null,"  "),r.payloadObj==null?r.payloadPP=pi(u):r.payloadPP=JSON.stringify(r.payloadObj,null,"  "),a!==void 0&&(r.sigHex=br(a)),r};p.jws.JWS.verifyJWT=function(e,t,r){var n=p,u=n.jws,a=u.JWS,i=a.readSafeJSONString,c=a.inArray,h=a.includedArray;if(!wh(e))return!1;var m=e.split(".");if(m.length!=3)return!1;var S=m[0],E=m[1],v=S+"."+E,g=br(m[2]),b=i(pi(S)),w=i(pi(E));if(b.alg===void 0)return!1;if(r.alg===void 0)throw"acceptField.alg shall be specified";if(!c(b.alg,r.alg)||w.iss!==void 0&&typeof r.iss=="object"&&!c(w.iss,r.iss)||w.sub!==void 0&&typeof r.sub=="object"&&!c(w.sub,r.sub))return!1;if(w.aud!==void 0&&typeof r.aud=="object"){if(typeof w.aud=="string"){if(!c(w.aud,r.aud))return!1}else if(typeof w.aud=="object"&&!h(w.aud,r.aud))return!1}var _=u.IntDate.getNow();return r.verifyAt!==void 0&&typeof r.verifyAt=="number"&&(_=r.verifyAt),(r.gracePeriod===void 0||typeof r.gracePeriod!="number")&&(r.gracePeriod=0),!(w.exp!==void 0&&typeof w.exp=="number"&&w.exp+r.gracePeriod<_||w.nbf!==void 0&&typeof w.nbf=="number"&&_<w.nbf-r.gracePeriod||w.iat!==void 0&&typeof w.iat=="number"&&_<w.iat-r.gracePeriod||w.jti!==void 0&&r.jti!==void 0&&w.jti!==r.jti||!a.verify(e,t,r.alg))};p.jws.JWS.includedArray=function(e,t){var r=p.jws.JWS.inArray;if(e===null||typeof e!="object"||typeof e.length!="number")return!1;for(var n=0;n<e.length;n++)if(!r(e[n],t))return!1;return!0};p.jws.JWS.inArray=function(e,t){if(t===null||typeof t!="object"||typeof t.length!="number")return!1;for(var r=0;r<t.length;r++)if(t[r]==e)return!0;return!1};p.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",ES512:"SHA512withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"};p.jws.JWS.isSafeJSONString=function(e,t,r){var n=null;try{return n=c0(e),typeof n!="object"||n.constructor===Array?0:(t&&(t[r]=n),1)}catch{return 0}};p.jws.JWS.readSafeJSONString=function(e){var t=null;try{return t=c0(e),typeof t!="object"||t.constructor===Array?null:t}catch{return null}};p.jws.JWS.getEncodedSignatureValueFromJWS=function(e){var t=e.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(t==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return t[1]};p.jws.JWS.getJWKthumbprint=function(e){if(e.kty!=="RSA"&&e.kty!=="EC"&&e.kty!=="oct")throw"unsupported algorithm for JWK Thumprint";var t="{";if(e.kty==="RSA"){if(typeof e.n!="string"||typeof e.e!="string")throw"wrong n and e value for RSA key";t+='"e":"'+e.e+'",',t+='"kty":"'+e.kty+'",',t+='"n":"'+e.n+'"}'}else if(e.kty==="EC"){if(typeof e.crv!="string"||typeof e.x!="string"||typeof e.y!="string")throw"wrong crv, x and y value for EC key";t+='"crv":"'+e.crv+'",',t+='"kty":"'+e.kty+'",',t+='"x":"'+e.x+'",',t+='"y":"'+e.y+'"}'}else if(e.kty==="oct"){if(typeof e.k!="string")throw"wrong k value for oct(symmetric) key";t+='"kty":"'+e.kty+'",',t+='"k":"'+e.k+'"}'}var r=Fi(t),n=p.crypto.Util.hashHex(r,"sha256"),u=Kr(n);return u};p.jws.IntDate={};p.jws.IntDate.get=function(e){var t=p.jws.IntDate,r=t.getNow,n=t.getZulu;if(e=="now")return r();if(e=="now + 1hour")return r()+3600;if(e=="now + 1day")return r()+3600*24;if(e=="now + 1month")return r()+3600*24*30;if(e=="now + 1year")return r()+3600*24*365;if(e.match(/Z$/))return n(e);if(e.match(/^[0-9]+$/))return parseInt(e);throw"unsupported format: "+e};p.jws.IntDate.getZulu=function(e){return p0(e)};p.jws.IntDate.getNow=function(){var e=~~(new Date/1e3);return e};p.jws.IntDate.intDate2UTCString=function(e){var t=new Date(e*1e3);return t.toUTCString()};p.jws.IntDate.intDate2Zulu=function(e){var t=new Date(e*1e3),r=("0000"+t.getUTCFullYear()).slice(-4),n=("00"+(t.getUTCMonth()+1)).slice(-2),u=("00"+t.getUTCDate()).slice(-2),a=("00"+t.getUTCHours()).slice(-2),i=("00"+t.getUTCMinutes()).slice(-2),c=("00"+t.getUTCSeconds()).slice(-2);return r+n+u+a+i+c+"Z"};(typeof p>"u"||!p)&&(p={});(typeof p.jws>"u"||!p.jws)&&(p.jws={});p.jws.JWSJS=function(){var e=p,t=e.jws,r=t.JWS,n=r.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(u){this.init();var a=u.split(".");if(a.length!=3)throw"malformed input JWS";this.aHeader.push(a[0]),this.sPayload=a[1],this.aSignature.push(a[2])},this.addSignature=function(u,a,i,c){if(this.sPayload===void 0||this.sPayload===null)throw"there's no JSON-JS signature to add.";var h=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var m=p.jws.JWS.sign(u,a,this.sPayload,i,c),S=m.split("."),E=S[0],v=S[2];this.aHeader.push(S[0]),this.aSignature.push(S[2])}catch(g){throw this.aHeader.length>h&&this.aHeader.pop(),this.aSignature.length>h&&this.aSignature.pop(),"addSignature failed: "+g}},this.verifyAll=function(u){if(this.aHeader.length!==u.length||this.aSignature.length!==u.length)return!1;for(var a=0;a<u.length;a++){var i=u[a];if(i.length!==2)return!1;var c=this.verifyNth(a,i[0],i[1]);if(c===!1)return!1}return!0},this.verifyNth=function(u,a,i){if(this.aHeader.length<=u||this.aSignature.length<=u)return!1;var c=this.aHeader[u],h=this.aSignature[u],m=c+"."+this.sPayload+"."+h,S=!1;try{S=r.verify(m,a,i)}catch{return!1}return S},this.readJWSJS=function(u){if(typeof u=="string"){var a=n(u);if(a==null)throw"argument is not safe JSON object string";this.aHeader=a.headers,this.sPayload=a.payload,this.aSignature=a.signatures}else try{if(u.headers.length>0)this.aHeader=u.headers;else throw"malformed header";if(typeof u.payload=="string")this.sPayload=u.payload;else throw"malformed signatures";if(u.signatures.length>0)this.aSignature=u.signatures;else throw"malformed signatures"}catch(i){throw"malformed JWS-JS JSON object: "+i}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return this.aHeader.length==0?1:0}};ze.SecureRandom=xa;ze.rng_seed_time=ph;ze.BigInteger=ae;ze.RSAKey=bt;ze.ECDSA=p.crypto.ECDSA;ze.DSA=p.crypto.DSA;ze.Signature=p.crypto.Signature;ze.MessageDigest=p.crypto.MessageDigest;ze.Mac=p.crypto.Mac;ze.KEYUTIL=Nt;ze.ASN1HEX=je;ze.X509=ht;ze.X509CRL=m_;ze.CryptoJS=We;ze.b64tohex=ka;ze.b64toBA=i0;ze.ECFieldElementFp=zr;ze.ECPointFp=Zt;ze.ECCurveFp=Ji;ze.stoBA=l0;ze.BAtos=f0;ze.BAtohex=fc;ze.stohex=Pn;ze.stob64=XS;ze.stob64u=ZS;ze.b64utos=QS;ze.b64tob64u=$a;ze.b64utob64=Ru;ze.hex2b64=Yi;ze.hextob64u=Kr;ze.b64utohex=br;ze.utf8tob64u=$u;ze.b64utoutf8=pi;ze.utf8tob64=e_;ze.b64toutf8=t_;ze.utf8tohex=hc;ze.hextoutf8=rr;ze.hextorstr=In;ze.rstrtohex=Fi;ze.hextob64=dh;ze.hextob64nl=i_;ze.b64nltohex=h0;ze.hextopem=un;ze.pemtohex=Fr;ze.hextoArrayBuffer=u_;ze.ArrayBuffertohex=o_;ze.zulutomsec=gh;ze.msectozulu=c_;ze.zulutosec=p0;ze.zulutodate=l_;ze.datetozulu=f_;ze.uricmptohex=dc;ze.hextouricmp=gc;ze.ipv6tohex=uh;ze.hextoipv6=oh;ze.hextoip=ac;ze.iptohex=vh;ze.ucs2hextoutf8=mh;ze.encodeURIComponentAll=vc;ze.newline_toUnix=h_;ze.newline_toDos=p_;ze.hextoposhex=ch;ze.intarystrtohex=d_;ze.strdiffidx=g_;ze.oidtohex=v0;ze.hextooid=mc;ze.strpad=uc;ze.bitstrtoint=w0;ze.inttobitstr=b0;ze.bitstrtobinstr=A0;ze.binstrtobitstr=v_;ze.isBase64URLDot=wh;ze.namearraytobinstr=oc;ze.extendClass=Fe;ze.foldnl=pc;ze.b64topem=s_;ze.pemtob64=a_;ze.timeogen=d0;ze.aryval=or;ze.inttohex=m0;ze.twoscompl=Bu;ze.KJUR=p;ze.crypto=p.crypto;ze.asn1=p.asn1;ze.jws=p.jws;ze.lang=p.lang;ze.VERSION=FA;ze.VERSION_FULL=CA});var wc=St(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});js.isInSubnet=b_;js.isCorrect=A_;js.numberToPaddedHex=F0;js.stringToPaddedHex=E_;js.testBit=S_;function b_(e){return this.subnetMask<e.subnetMask?!1:this.mask(e.subnetMask)===e.mask()}function A_(e){return function(){return this.addressMinusSuffix!==this.correctForm()?!1:this.subnetMask===e&&!this.parsedSubnet?!0:this.parsedSubnet===String(this.subnetMask)}}function F0(e){return e.toString(16).padStart(2,"0")}function E_(e){return F0(parseInt(e,10))}function S_(e,t){let{length:r}=e;if(t>r)return!1;let n=r-t;return e.substring(n,n+1)==="1"}});var Ah=St(Ci=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});Ci.RE_SUBNET_STRING=Ci.RE_ADDRESS=Ci.GROUPS=Ci.BITS=void 0;Ci.BITS=32;Ci.GROUPS=4;Ci.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g;Ci.RE_SUBNET_STRING=/\/\d{1,2}$/});var Ac=St(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});bc.AddressError=void 0;var Eh=class extends Error{constructor(t,r){super(t),this.name="AddressError",this.parseMessage=r}};bc.AddressError=Eh});var _h=St(Pi=>{"use strict";var __=Pi&&Pi.__createBinding||(Object.create?(function(e,t,r,n){n===void 0&&(n=r);var u=Object.getOwnPropertyDescriptor(t,r);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,u)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]})),y_=Pi&&Pi.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t}),P0=Pi&&Pi.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&__(t,e,r);return y_(t,e),t};Object.defineProperty(Pi,"__esModule",{value:!0});Pi.Address4=void 0;var Ta=P0(wc()),di=P0(Ah()),C0=Ac(),Sh=class e{constructor(t){this.groups=di.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=Ta.isCorrect(di.BITS),this.isInSubnet=Ta.isInSubnet,this.address=t;let r=di.RE_SUBNET_STRING.exec(t);if(r){if(this.parsedSubnet=r[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,this.subnetMask<0||this.subnetMask>di.BITS)throw new C0.AddressError("Invalid subnet mask.");t=t.replace(di.RE_SUBNET_STRING,"")}this.addressMinusSuffix=t,this.parsedAddress=this.parse(t)}static isValid(t){try{return new e(t),!0}catch{return!1}}parse(t){let r=t.split(".");if(!t.match(di.RE_ADDRESS))throw new C0.AddressError("Invalid IPv4 address.");return r}correctForm(){return this.parsedAddress.map(t=>parseInt(t,10)).join(".")}static fromHex(t){let r=t.replace(/:/g,"").padStart(8,"0"),n=[],u;for(u=0;u<8;u+=2){let a=r.slice(u,u+2);n.push(parseInt(a,16))}return new e(n.join("."))}static fromInteger(t){return e.fromHex(t.toString(16))}static fromArpa(t){let n=t.replace(/(\.in-addr\.arpa)?\.$/,"").split(".").reverse().join(".");return new e(n)}toHex(){return this.parsedAddress.map(t=>Ta.stringToPaddedHex(t)).join(":")}toArray(){return this.parsedAddress.map(t=>parseInt(t,10))}toGroup6(){let t=[],r;for(r=0;r<di.GROUPS;r+=2)t.push(`${Ta.stringToPaddedHex(this.parsedAddress[r])}${Ta.stringToPaddedHex(this.parsedAddress[r+1])}`);return t.join(":")}bigInt(){return BigInt(`0x${this.parsedAddress.map(t=>Ta.stringToPaddedHex(t)).join("")}`)}_startAddress(){return BigInt(`0b${this.mask()+"0".repeat(di.BITS-this.subnetMask)}`)}startAddress(){return e.fromBigInt(this._startAddress())}startAddressExclusive(){let t=BigInt("1");return e.fromBigInt(this._startAddress()+t)}_endAddress(){return BigInt(`0b${this.mask()+"1".repeat(di.BITS-this.subnetMask)}`)}endAddress(){return e.fromBigInt(this._endAddress())}endAddressExclusive(){let t=BigInt("1");return e.fromBigInt(this._endAddress()-t)}static fromBigInt(t){return e.fromHex(t.toString(16))}mask(t){return t===void 0&&(t=this.subnetMask),this.getBitsBase2(0,t)}getBitsBase2(t,r){return this.binaryZeroPad().slice(t,r)}reverseForm(t){t||(t={});let r=this.correctForm().split(".").reverse().join(".");return t.omitSuffix?r:`${r}.in-addr.arpa.`}isMulticast(){return this.isInSubnet(new e("224.0.0.0/4"))}binaryZeroPad(){return this.bigInt().toString(2).padStart(di.BITS,"0")}groupForV6(){let t=this.parsedAddress;return this.address.replace(di.RE_ADDRESS,`<span class="hover-group group-v4 group-6">${t.slice(0,2).join(".")}</span>.<span class="hover-group group-v4 group-7">${t.slice(2,4).join(".")}</span>`)}};Pi.Address4=Sh});var yh=St(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.RE_URL_WITH_PORT=Ir.RE_URL=Ir.RE_ZONE_STRING=Ir.RE_SUBNET_STRING=Ir.RE_BAD_ADDRESS=Ir.RE_BAD_CHARACTERS=Ir.TYPES=Ir.SCOPES=Ir.GROUPS=Ir.BITS=void 0;Ir.BITS=128;Ir.GROUPS=8;Ir.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"};Ir.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"};Ir.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi;Ir.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi;Ir.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/;Ir.RE_ZONE_STRING=/%.*$/;Ir.RE_URL=/^\[{0,1}([0-9a-f:]+)\]{0,1}/;Ir.RE_URL_WITH_PORT=/\[([0-9a-f:]+)\]:([0-9]{1,5})/});var Dh=St(Oa=>{"use strict";Object.defineProperty(Oa,"__esModule",{value:!0});Oa.spanAllZeroes=I0;Oa.spanAll=D_;Oa.spanLeadingZeroes=F_;Oa.simpleGroup=C_;function I0(e){return e.replace(/(0+)/g,'<span class="zero">$1</span>')}function D_(e,t=0){return e.split("").map((n,u)=>`<span class="digit value-${n} position-${u+t}">${I0(n)}</span>`).join("")}function $0(e){return e.replace(/^(0+)/,'<span class="zero">$1</span>')}function F_(e){return e.split(":").map(r=>$0(r)).join(":")}function C_(e,t=0){return e.split(":").map((n,u)=>/group-v4/.test(n)?n:`<span class="hover-group group-${u+t}">${$0(n)}</span>`)}});var k0=St($n=>{"use strict";var P_=$n&&$n.__createBinding||(Object.create?(function(e,t,r,n){n===void 0&&(n=r);var u=Object.getOwnPropertyDescriptor(t,r);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,u)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]})),I_=$n&&$n.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t}),$_=$n&&$n.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&P_(t,e,r);return I_(t,e),t};Object.defineProperty($n,"__esModule",{value:!0});$n.ADDRESS_BOUNDARY=void 0;$n.groupPossibilities=Sc;$n.padGroup=Ec;$n.simpleRegularExpression=R_;$n.possibleElisions=B_;var k_=$_(yh());function Sc(e){return`(${e.join("|")})`}function Ec(e){return e.length<4?`0{0,${4-e.length}}${e}`:e}$n.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]";function R_(e){let t=[];e.forEach((n,u)=>{parseInt(n,16)===0&&t.push(u)});let r=t.map(n=>e.map((u,a)=>{if(a===n){let i=a===0||a===k_.GROUPS-1?":":"";return Sc([Ec(u),i])}return Ec(u)}).join(":"));return r.push(e.map(Ec).join(":")),Sc(r)}function B_(e,t,r){let n=t?"":":",u=r?"":":",a=[];!t&&!r&&a.push("::"),t&&r&&a.push(""),(r&&!t||!r&&t)&&a.push(":"),a.push(`${n}(:0{1,4}){1,${e-1}}`),a.push(`(0{1,4}:){1,${e-1}}${u}`),a.push(`(0{1,4}:){${e-1}}0{1,4}`);for(let i=1;i<e-1;i++)for(let c=1;c<e-i;c++)a.push(`(0{1,4}:){${c}}:(0{1,4}:){${e-c-i-1}}0{1,4}`);return Sc(a)}});var T0=St(Ii=>{"use strict";var x_=Ii&&Ii.__createBinding||(Object.create?(function(e,t,r,n){n===void 0&&(n=r);var u=Object.getOwnPropertyDescriptor(t,r);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,u)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]})),T_=Ii&&Ii.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t}),Dc=Ii&&Ii.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&x_(t,e,r);return T_(t,e),t};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.Address6=void 0;var R0=Dc(wc()),Fh=Dc(Ah()),mr=Dc(yh()),Ch=Dc(Dh()),Ms=_h(),qs=k0(),Xi=Ac(),_c=wc();function yc(e){if(!e)throw new Error("Assertion failed.")}function O_(e){let t=/(\d+)(\d{3})/;for(;t.test(e);)e=e.replace(t,"$1,$2");return e}function N_(e){return e=e.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2'),e=e.replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2'),e}function H_(e,t){let r=[],n=[],u;for(u=0;u<e.length;u++)u<t[0]?r.push(e[u]):u>t[1]&&n.push(e[u]);return r.concat(["compact"]).concat(n)}function B0(e){return parseInt(e,16).toString(16).padStart(4,"0")}function x0(e){return e&255}var Ph=class e{constructor(t,r){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=R0.isInSubnet,this.isCorrect=R0.isCorrect(mr.BITS),r===void 0?this.groups=mr.GROUPS:this.groups=r,this.address=t;let n=mr.RE_SUBNET_STRING.exec(t);if(n){if(this.parsedSubnet=n[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>mr.BITS)throw new Xi.AddressError("Invalid subnet mask.");t=t.replace(mr.RE_SUBNET_STRING,"")}else if(/\//.test(t))throw new Xi.AddressError("Invalid subnet mask.");let u=mr.RE_ZONE_STRING.exec(t);u&&(this.zone=u[0],t=t.replace(mr.RE_ZONE_STRING,"")),this.addressMinusSuffix=t,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(t){try{return new e(t),!0}catch{return!1}}static fromBigInt(t){let r=t.toString(16).padStart(32,"0"),n=[],u;for(u=0;u<mr.GROUPS;u++)n.push(r.slice(u*4,(u+1)*4));return new e(n.join(":"))}static fromURL(t){let r,n=null,u;if(t.indexOf("[")!==-1&&t.indexOf("]:")!==-1){if(u=mr.RE_URL_WITH_PORT.exec(t),u===null)return{error:"failed to parse address with port",address:null,port:null};r=u[1],n=u[2]}else if(t.indexOf("/")!==-1){if(t=t.replace(/^[a-z0-9]+:\/\//,""),u=mr.RE_URL.exec(t),u===null)return{error:"failed to parse address from URL",address:null,port:null};r=u[1]}else r=t;return n?(n=parseInt(n,10),(n<0||n>65536)&&(n=null)):n=null,{address:new e(r),port:n}}static fromAddress4(t){let r=new Ms.Address4(t),n=mr.BITS-(Fh.BITS-r.subnetMask);return new e(`::ffff:${r.correctForm()}/${n}`)}static fromArpa(t){let r=t.replace(/(\.ip6\.arpa)?\.$/,""),n=7;if(r.length!==63)throw new Xi.AddressError("Invalid 'ip6.arpa' form.");let u=r.split(".").reverse();for(let a=n;a>0;a--){let i=a*4;u.splice(i,0,":")}return r=u.join(""),new e(r)}microsoftTranscription(){return`${this.correctForm().replace(/:/g,"-")}.ipv6-literal.net`}mask(t=this.subnetMask){return this.getBitsBase2(0,t)}possibleSubnets(t=128){let r=mr.BITS-this.subnetMask,n=Math.abs(t-mr.BITS),u=r-n;return u<0?"0":O_((BigInt("2")**BigInt(u)).toString(10))}_startAddress(){return BigInt(`0b${this.mask()+"0".repeat(mr.BITS-this.subnetMask)}`)}startAddress(){return e.fromBigInt(this._startAddress())}startAddressExclusive(){let t=BigInt("1");return e.fromBigInt(this._startAddress()+t)}_endAddress(){return BigInt(`0b${this.mask()+"1".repeat(mr.BITS-this.subnetMask)}`)}endAddress(){return e.fromBigInt(this._endAddress())}endAddressExclusive(){let t=BigInt("1");return e.fromBigInt(this._endAddress()-t)}getScope(){let t=mr.SCOPES[parseInt(this.getBits(12,16).toString(10),10)];return this.getType()==="Global unicast"&&t!=="Link local"&&(t="Global"),t||"Unknown"}getType(){for(let t of Object.keys(mr.TYPES))if(this.isInSubnet(new e(t)))return mr.TYPES[t];return"Global unicast"}getBits(t,r){return BigInt(`0b${this.getBitsBase2(t,r)}`)}getBitsBase2(t,r){return this.binaryZeroPad().slice(t,r)}getBitsBase16(t,r){let n=r-t;if(n%4!==0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(t,r).toString(16).padStart(n/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,mr.BITS)}reverseForm(t){t||(t={});let r=Math.floor(this.subnetMask/4),n=this.canonicalForm().replace(/:/g,"").split("").slice(0,r).reverse().join(".");return r>0?t.omitSuffix?n:`${n}.ip6.arpa.`:t.omitSuffix?"":"ip6.arpa."}correctForm(){let t,r=[],n=0,u=[];for(t=0;t<this.parsedAddress.length;t++){let c=parseInt(this.parsedAddress[t],16);c===0&&n++,c!==0&&n>0&&(n>1&&u.push([t-n,t-1]),n=0)}n>1&&u.push([this.parsedAddress.length-n,this.parsedAddress.length-1]);let a=u.map(c=>c[1]-c[0]+1);if(u.length>0){let c=a.indexOf(Math.max(...a));r=H_(this.parsedAddress,u[c])}else r=this.parsedAddress;for(t=0;t<r.length;t++)r[t]!=="compact"&&(r[t]=parseInt(r[t],16).toString(16));let i=r.join(":");return i=i.replace(/^compact$/,"::"),i=i.replace(/(^compact)|(compact$)/,":"),i=i.replace(/compact/,""),i}binaryZeroPad(){return this.bigInt().toString(2).padStart(mr.BITS,"0")}parse4in6(t){let r=t.split(":"),u=r.slice(-1)[0].match(Fh.RE_ADDRESS);if(u){this.parsedAddress4=u[0],this.address4=new Ms.Address4(this.parsedAddress4);for(let a=0;a<this.address4.groups;a++)if(/^0[0-9]+/.test(this.address4.parsedAddress[a]))throw new Xi.AddressError("IPv4 addresses can't have leading zeroes.",t.replace(Fh.RE_ADDRESS,this.address4.parsedAddress.map(N_).join(".")));this.v4=!0,r[r.length-1]=this.address4.toGroup6(),t=r.join(":")}return t}parse(t){t=this.parse4in6(t);let r=t.match(mr.RE_BAD_CHARACTERS);if(r)throw new Xi.AddressError(`Bad character${r.length>1?"s":""} detected in address: ${r.join("")}`,t.replace(mr.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));let n=t.match(mr.RE_BAD_ADDRESS);if(n)throw new Xi.AddressError(`Address failed regex: ${n.join("")}`,t.replace(mr.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));let u=[],a=t.split("::");if(a.length===2){let i=a[0].split(":"),c=a[1].split(":");i.length===1&&i[0]===""&&(i=[]),c.length===1&&c[0]===""&&(c=[]);let h=this.groups-(i.length+c.length);if(!h)throw new Xi.AddressError("Error parsing groups");this.elidedGroups=h,this.elisionBegin=i.length,this.elisionEnd=i.length+this.elidedGroups,u=u.concat(i);for(let m=0;m<h;m++)u.push("0");u=u.concat(c)}else if(a.length===1)u=t.split(":"),this.elidedGroups=0;else throw new Xi.AddressError("Too many :: groups found");if(u=u.map(i=>parseInt(i,16).toString(16)),u.length!==this.groups)throw new Xi.AddressError("Incorrect number of groups found");return u}canonicalForm(){return this.parsedAddress.map(B0).join(":")}decimal(){return this.parsedAddress.map(t=>parseInt(t,16).toString(10).padStart(5,"0")).join(":")}bigInt(){return BigInt(`0x${this.parsedAddress.map(B0).join("")}`)}to4(){let t=this.binaryZeroPad().split("");return Ms.Address4.fromHex(BigInt(`0b${t.slice(96,128).join("")}`).toString(16))}to4in6(){let t=this.to4(),n=new e(this.parsedAddress.slice(0,6).join(":"),6).correctForm(),u="";return/:$/.test(n)||(u=":"),n+u+t.address}inspectTeredo(){let t=this.getBitsBase16(0,32),n=(this.getBits(80,96)^BigInt("0xffff")).toString(),u=Ms.Address4.fromHex(this.getBitsBase16(32,64)),a=this.getBits(96,128),i=Ms.Address4.fromHex((a^BigInt("0xffffffff")).toString(16)),c=this.getBitsBase2(64,80),h=(0,_c.testBit)(c,15),m=(0,_c.testBit)(c,14),S=(0,_c.testBit)(c,8),E=(0,_c.testBit)(c,9),v=BigInt(`0b${c.slice(2,6)+c.slice(8,16)}`).toString(10);return{prefix:`${t.slice(0,4)}:${t.slice(4,8)}`,server4:u.address,client4:i.address,flags:c,coneNat:h,microsoft:{reserved:m,universalLocal:E,groupIndividual:S,nonce:v},udpPort:n}}inspect6to4(){let t=this.getBitsBase16(0,16),r=Ms.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:t.slice(0,4),gateway:r.address}}to6to4(){if(!this.is4())return null;let t=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new e(t)}toByteArray(){let t=this.bigInt().toString(16),n=`${"0".repeat(t.length%2)}${t}`,u=[];for(let a=0,i=n.length;a<i;a+=2)u.push(parseInt(n.substring(a,a+2),16));return u}toUnsignedByteArray(){return this.toByteArray().map(x0)}static fromByteArray(t){return this.fromUnsignedByteArray(t.map(x0))}static fromUnsignedByteArray(t){let r=BigInt("256"),n=BigInt("0"),u=BigInt("1");for(let a=t.length-1;a>=0;a--)n+=u*BigInt(t[a].toString(10)),u*=r;return e.fromBigInt(n)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){return this.getBitsBase2(0,64)==="1111111010000000000000000000000000000000000000000000000000000000"}isMulticast(){return this.getType()==="Multicast"}is4(){return this.v4}isTeredo(){return this.isInSubnet(new e("2001::/32"))}is6to4(){return this.isInSubnet(new e("2002::/16"))}isLoopback(){return this.getType()==="Loopback"}href(t){return t===void 0?t="":t=`:${t}`,`http://[${this.correctForm()}]${t}/`}link(t){t||(t={}),t.className===void 0&&(t.className=""),t.prefix===void 0&&(t.prefix="/#address="),t.v4===void 0&&(t.v4=!1);let r=this.correctForm;t.v4&&(r=this.to4in6);let n=r.call(this);return t.className?`<a href="${t.prefix}${n}" class="${t.className}">${n}</a>`:`<a href="${t.prefix}${n}">${n}</a>`}group(){if(this.elidedGroups===0)return Ch.simpleGroup(this.address).join(":");yc(typeof this.elidedGroups=="number"),yc(typeof this.elisionBegin=="number");let t=[],[r,n]=this.address.split("::");r.length?t.push(...Ch.simpleGroup(r)):t.push("");let u=["hover-group"];for(let a=this.elisionBegin;a<this.elisionBegin+this.elidedGroups;a++)u.push(`group-${a}`);return t.push(`<span class="${u.join(" ")}"></span>`),n.length?t.push(...Ch.simpleGroup(n,this.elisionEnd)):t.push(""),this.is4()&&(yc(this.address4 instanceof Ms.Address4),t.pop(),t.push(this.address4.groupForV6())),t.join(":")}regularExpressionString(t=!1){let r=[],n=new e(this.correctForm());if(n.elidedGroups===0)r.push((0,qs.simpleRegularExpression)(n.parsedAddress));else if(n.elidedGroups===mr.GROUPS)r.push((0,qs.possibleElisions)(mr.GROUPS));else{let u=n.address.split("::");u[0].length&&r.push((0,qs.simpleRegularExpression)(u[0].split(":"))),yc(typeof n.elidedGroups=="number"),r.push((0,qs.possibleElisions)(n.elidedGroups,u[0].length!==0,u[1].length!==0)),u[1].length&&r.push((0,qs.simpleRegularExpression)(u[1].split(":"))),r=[r.join(":")]}return t||(r=["(?=^|",qs.ADDRESS_BOUNDARY,"|[^\\w\\:])(",...r,")(?=[^\\w\\:]|",qs.ADDRESS_BOUNDARY,"|$)"]),r.join("")}regularExpression(t=!1){return new RegExp(this.regularExpressionString(t),"i")}};Ii.Address6=Ph});var O0=St(on=>{"use strict";var L_=on&&on.__createBinding||(Object.create?(function(e,t,r,n){n===void 0&&(n=r);var u=Object.getOwnPropertyDescriptor(t,r);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,u)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]})),j_=on&&on.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t}),M_=on&&on.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&L_(t,e,r);return j_(t,e),t};Object.defineProperty(on,"__esModule",{value:!0});on.v6=on.AddressError=on.Address6=on.Address4=void 0;var q_=_h();Object.defineProperty(on,"Address4",{enumerable:!0,get:function(){return q_.Address4}});var U_=T0();Object.defineProperty(on,"Address6",{enumerable:!0,get:function(){return U_.Address6}});var V_=Ac();Object.defineProperty(on,"AddressError",{enumerable:!0,get:function(){return V_.AddressError}});var K_=M_(Dh());on.v6={helpers:K_}});var Vs=St((p6,Us)=>{"use strict";function j0(e){return typeof e>"u"||e===null}function Y_(e){return typeof e=="object"&&e!==null}function J_(e){return Array.isArray(e)?e:j0(e)?[]:[e]}function X_(e,t){var r,n,u,a;if(t)for(a=Object.keys(t),r=0,n=a.length;r<n;r+=1)u=a[r],e[u]=t[u];return e}function Z_(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function Q_(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}Us.exports.isNothing=j0;Us.exports.isObject=Y_;Us.exports.toArray=J_;Us.exports.repeat=Z_;Us.exports.isNegativeZero=Q_;Us.exports.extend=X_});var Ha=St((d6,M0)=>{"use strict";function Tu(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Tu.prototype=Object.create(Error.prototype);Tu.prototype.constructor=Tu;Tu.prototype.toString=function(t){var r=this.name+": ";return r+=this.reason||"(unknown reason)",!t&&this.mark&&(r+=" "+this.mark.toString()),r};M0.exports=Tu});var V0=St((g6,U0)=>{"use strict";var q0=Vs();function Ih(e,t,r,n,u){this.name=e,this.buffer=t,this.position=r,this.line=n,this.column=u}Ih.prototype.getSnippet=function(t,r){var n,u,a,i,c;if(!this.buffer)return null;for(t=t||4,r=r||75,n="",u=this.position;u>0&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(u-1))===-1;)if(u-=1,this.position-u>r/2-1){n=" ... ",u+=5;break}for(a="",i=this.position;i<this.buffer.length&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(i))===-1;)if(i+=1,i-this.position>r/2-1){a=" ... ",i-=5;break}return c=this.buffer.slice(u,i),q0.repeat(" ",t)+n+c+a+`
`+q0.repeat(" ",t+this.position-u+n.length)+"^"};Ih.prototype.toString=function(t){var r,n="";return this.name&&(n+='in "'+this.name+'" '),n+="at line "+(this.line+1)+", column "+(this.column+1),t||(r=this.getSnippet(),r&&(n+=`:
`+r)),n};U0.exports=Ih});var Gr=St((v6,z0)=>{"use strict";var K0=Ha(),ey=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],ty=["scalar","sequence","mapping"];function ry(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function ny(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(ey.indexOf(r)===-1)throw new K0('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=ry(t.styleAliases||null),ty.indexOf(this.kind)===-1)throw new K0('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}z0.exports=ny});var Ks=St((m6,W0)=>{"use strict";var G0=Vs(),Cc=Ha(),iy=Gr();function $h(e,t,r){var n=[];return e.include.forEach(function(u){r=$h(u,t,r)}),e[t].forEach(function(u){r.forEach(function(a,i){a.tag===u.tag&&a.kind===u.kind&&n.push(i)}),r.push(u)}),r.filter(function(u,a){return n.indexOf(a)===-1})}function sy(){var e={scalar:{},sequence:{},mapping:{},fallback:{}},t,r;function n(u){e[u.kind][u.tag]=e.fallback[u.tag]=u}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function La(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach(function(t){if(t.loadKind&&t.loadKind!=="scalar")throw new Cc("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=$h(this,"implicit",[]),this.compiledExplicit=$h(this,"explicit",[]),this.compiledTypeMap=sy(this.compiledImplicit,this.compiledExplicit)}La.DEFAULT=null;La.create=function(){var t,r;switch(arguments.length){case 1:t=La.DEFAULT,r=arguments[0];break;case 2:t=arguments[0],r=arguments[1];break;default:throw new Cc("Wrong number of arguments for Schema.create function")}if(t=G0.toArray(t),r=G0.toArray(r),!t.every(function(n){return n instanceof La}))throw new Cc("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!r.every(function(n){return n instanceof iy}))throw new Cc("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new La({include:t,explicit:r})};W0.exports=La});var J0=St((w6,Y0)=>{"use strict";var ay=Gr();Y0.exports=new ay("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}})});var Z0=St((b6,X0)=>{"use strict";var uy=Gr();X0.exports=new uy("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}})});var e1=St((A6,Q0)=>{"use strict";var oy=Gr();Q0.exports=new oy("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}})});var Pc=St((E6,t1)=>{"use strict";var cy=Ks();t1.exports=new cy({explicit:[J0(),Z0(),e1()]})});var n1=St((S6,r1)=>{"use strict";var ly=Gr();function fy(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function hy(){return null}function py(e){return e===null}r1.exports=new ly("tag:yaml.org,2002:null",{kind:"scalar",resolve:fy,construct:hy,predicate:py,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})});var s1=St((_6,i1)=>{"use strict";var dy=Gr();function gy(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function vy(e){return e==="true"||e==="True"||e==="TRUE"}function my(e){return Object.prototype.toString.call(e)==="[object Boolean]"}i1.exports=new dy("tag:yaml.org,2002:bool",{kind:"scalar",resolve:gy,construct:vy,predicate:my,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})});var u1=St((y6,a1)=>{"use strict";var wy=Vs(),by=Gr();function Ay(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Ey(e){return 48<=e&&e<=55}function Sy(e){return 48<=e&&e<=57}function _y(e){if(e===null)return!1;var t=e.length,r=0,n=!1,u;if(!t)return!1;if(u=e[r],(u==="-"||u==="+")&&(u=e[++r]),u==="0"){if(r+1===t)return!0;if(u=e[++r],u==="b"){for(r++;r<t;r++)if(u=e[r],u!=="_"){if(u!=="0"&&u!=="1")return!1;n=!0}return n&&u!=="_"}if(u==="x"){for(r++;r<t;r++)if(u=e[r],u!=="_"){if(!Ay(e.charCodeAt(r)))return!1;n=!0}return n&&u!=="_"}for(;r<t;r++)if(u=e[r],u!=="_"){if(!Ey(e.charCodeAt(r)))return!1;n=!0}return n&&u!=="_"}if(u==="_")return!1;for(;r<t;r++)if(u=e[r],u!=="_"){if(u===":")break;if(!Sy(e.charCodeAt(r)))return!1;n=!0}return!n||u==="_"?!1:u!==":"?!0:/^(:[0-5]?[0-9])+$/.test(e.slice(r))}function yy(e){var t=e,r=1,n,u,a=[];return t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0"?0:n==="0"?t[1]==="b"?r*parseInt(t.slice(2),2):t[1]==="x"?r*parseInt(t,16):r*parseInt(t,8):t.indexOf(":")!==-1?(t.split(":").forEach(function(i){a.unshift(parseInt(i,10))}),t=0,u=1,a.forEach(function(i){t+=i*u,u*=60}),r*t):r*parseInt(t,10)}function Dy(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!wy.isNegativeZero(e)}a1.exports=new by("tag:yaml.org,2002:int",{kind:"scalar",resolve:_y,construct:yy,predicate:Dy,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0"+e.toString(8):"-0"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})});var l1=St((D6,c1)=>{"use strict";var o1=Vs(),Fy=Gr(),Cy=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Py(e){return!(e===null||!Cy.test(e)||e[e.length-1]==="_")}function Iy(e){var t,r,n,u;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,u=[],"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:t.indexOf(":")>=0?(t.split(":").forEach(function(a){u.unshift(parseFloat(a,10))}),t=0,n=1,u.forEach(function(a){t+=a*n,n*=60}),r*t):r*parseFloat(t,10)}var $y=/^[-+]?[0-9]+e/;function ky(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(o1.isNegativeZero(e))return"-0.0";return r=e.toString(10),$y.test(r)?r.replace("e",".e"):r}function Ry(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||o1.isNegativeZero(e))}c1.exports=new Fy("tag:yaml.org,2002:float",{kind:"scalar",resolve:Py,construct:Iy,predicate:Ry,represent:ky,defaultStyle:"lowercase"})});var kh=St((F6,f1)=>{"use strict";var By=Ks();f1.exports=new By({include:[Pc()],implicit:[n1(),s1(),u1(),l1()]})});var Rh=St((C6,h1)=>{"use strict";var xy=Ks();h1.exports=new xy({include:[kh()]})});var v1=St((P6,g1)=>{"use strict";var Ty=Gr(),p1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),d1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Oy(e){return e===null?!1:p1.exec(e)!==null||d1.exec(e)!==null}function Ny(e){var t,r,n,u,a,i,c,h=0,m=null,S,E,v;if(t=p1.exec(e),t===null&&(t=d1.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,u=+t[3],!t[4])return new Date(Date.UTC(r,n,u));if(a=+t[4],i=+t[5],c=+t[6],t[7]){for(h=t[7].slice(0,3);h.length<3;)h+="0";h=+h}return t[9]&&(S=+t[10],E=+(t[11]||0),m=(S*60+E)*6e4,t[9]==="-"&&(m=-m)),v=new Date(Date.UTC(r,n,u,a,i,c,h)),m&&v.setTime(v.getTime()-m),v}function Hy(e){return e.toISOString()}g1.exports=new Ty("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Oy,construct:Ny,instanceOf:Date,represent:Hy})});var w1=St((I6,m1)=>{"use strict";var Ly=Gr();function jy(e){return e==="<<"||e===null}m1.exports=new Ly("tag:yaml.org,2002:merge",{kind:"scalar",resolve:jy})});var E1=St(($6,A1)=>{"use strict";var zs;try{b1=rc,zs=b1("buffer").Buffer}catch{}var b1,My=Gr(),Bh=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function qy(e){if(e===null)return!1;var t,r,n=0,u=e.length,a=Bh;for(r=0;r<u;r++)if(t=a.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function Uy(e){var t,r,n=e.replace(/[\r\n=]/g,""),u=n.length,a=Bh,i=0,c=[];for(t=0;t<u;t++)t%4===0&&t&&(c.push(i>>16&255),c.push(i>>8&255),c.push(i&255)),i=i<<6|a.indexOf(n.charAt(t));return r=u%4*6,r===0?(c.push(i>>16&255),c.push(i>>8&255),c.push(i&255)):r===18?(c.push(i>>10&255),c.push(i>>2&255)):r===12&&c.push(i>>4&255),zs?zs.from?zs.from(c):new zs(c):c}function Vy(e){var t="",r=0,n,u,a=e.length,i=Bh;for(n=0;n<a;n++)n%3===0&&n&&(t+=i[r>>18&63],t+=i[r>>12&63],t+=i[r>>6&63],t+=i[r&63]),r=(r<<8)+e[n];return u=a%3,u===0?(t+=i[r>>18&63],t+=i[r>>12&63],t+=i[r>>6&63],t+=i[r&63]):u===2?(t+=i[r>>10&63],t+=i[r>>4&63],t+=i[r<<2&63],t+=i[64]):u===1&&(t+=i[r>>2&63],t+=i[r<<4&63],t+=i[64],t+=i[64]),t}function Ky(e){return zs&&zs.isBuffer(e)}A1.exports=new My("tag:yaml.org,2002:binary",{kind:"scalar",resolve:qy,construct:Uy,predicate:Ky,represent:Vy})});var _1=St((R6,S1)=>{"use strict";var zy=Gr(),Gy=Object.prototype.hasOwnProperty,Wy=Object.prototype.toString;function Yy(e){if(e===null)return!0;var t=[],r,n,u,a,i,c=e;for(r=0,n=c.length;r<n;r+=1){if(u=c[r],i=!1,Wy.call(u)!=="[object Object]")return!1;for(a in u)if(Gy.call(u,a))if(!i)i=!0;else return!1;if(!i)return!1;if(t.indexOf(a)===-1)t.push(a);else return!1}return!0}function Jy(e){return e!==null?e:[]}S1.exports=new zy("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Yy,construct:Jy})});var D1=St((B6,y1)=>{"use strict";var Xy=Gr(),Zy=Object.prototype.toString;function Qy(e){if(e===null)return!0;var t,r,n,u,a,i=e;for(a=new Array(i.length),t=0,r=i.length;t<r;t+=1){if(n=i[t],Zy.call(n)!=="[object Object]"||(u=Object.keys(n),u.length!==1))return!1;a[t]=[u[0],n[u[0]]]}return!0}function eD(e){if(e===null)return[];var t,r,n,u,a,i=e;for(a=new Array(i.length),t=0,r=i.length;t<r;t+=1)n=i[t],u=Object.keys(n),a[t]=[u[0],n[u[0]]];return a}y1.exports=new Xy("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Qy,construct:eD})});var C1=St((x6,F1)=>{"use strict";var tD=Gr(),rD=Object.prototype.hasOwnProperty;function nD(e){if(e===null)return!0;var t,r=e;for(t in r)if(rD.call(r,t)&&r[t]!==null)return!1;return!0}function iD(e){return e!==null?e:{}}F1.exports=new tD("tag:yaml.org,2002:set",{kind:"mapping",resolve:nD,construct:iD})});var ja=St((T6,P1)=>{"use strict";var sD=Ks();P1.exports=new sD({include:[Rh()],implicit:[v1(),w1()],explicit:[E1(),_1(),D1(),C1()]})});var $1=St((O6,I1)=>{"use strict";var aD=Gr();function uD(){return!0}function oD(){}function cD(){return""}function lD(e){return typeof e>"u"}I1.exports=new aD("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:uD,construct:oD,predicate:lD,represent:cD})});var R1=St((N6,k1)=>{"use strict";var fD=Gr();function hD(e){if(e===null||e.length===0)return!1;var t=e,r=/\/([gim]*)$/.exec(e),n="";return!(t[0]==="/"&&(r&&(n=r[1]),n.length>3||t[t.length-n.length-1]!=="/"))}function pD(e){var t=e,r=/\/([gim]*)$/.exec(e),n="";return t[0]==="/"&&(r&&(n=r[1]),t=t.slice(1,t.length-n.length-1)),new RegExp(t,n)}function dD(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}function gD(e){return Object.prototype.toString.call(e)==="[object RegExp]"}k1.exports=new fD("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:hD,construct:pD,predicate:gD,represent:dD})});var T1=St((H6,x1)=>{"use strict";var Ic;try{B1=rc,Ic=B1("esprima")}catch{typeof window<"u"&&(Ic=window.esprima)}var B1,vD=Gr();function mD(e){if(e===null)return!1;try{var t="("+e+")",r=Ic.parse(t,{range:!0});return!(r.type!=="Program"||r.body.length!==1||r.body[0].type!=="ExpressionStatement"||r.body[0].expression.type!=="ArrowFunctionExpression"&&r.body[0].expression.type!=="FunctionExpression")}catch{return!1}}function wD(e){var t="("+e+")",r=Ic.parse(t,{range:!0}),n=[],u;if(r.type!=="Program"||r.body.length!==1||r.body[0].type!=="ExpressionStatement"||r.body[0].expression.type!=="ArrowFunctionExpression"&&r.body[0].expression.type!=="FunctionExpression")throw new Error("Failed to resolve function");return r.body[0].expression.params.forEach(function(a){n.push(a.name)}),u=r.body[0].expression.body.range,r.body[0].expression.body.type==="BlockStatement"?new Function(n,t.slice(u[0]+1,u[1]-1)):new Function(n,"return "+t.slice(u[0],u[1]))}function bD(e){return e.toString()}function AD(e){return Object.prototype.toString.call(e)==="[object Function]"}x1.exports=new vD("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:mD,construct:wD,predicate:AD,represent:bD})});var Ou=St((j6,N1)=>{"use strict";var O1=Ks();N1.exports=O1.DEFAULT=new O1({include:[ja()],explicit:[$1(),R1(),T1()]})});var rg=St((M6,Nu)=>{"use strict";var Zi=Vs(),V1=Ha(),ED=V0(),K1=ja(),SD=Ou(),Ds=Object.prototype.hasOwnProperty,$c=1,z1=2,G1=3,kc=4,xh=1,_D=2,H1=3,yD=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,DD=/[\x85\u2028\u2029]/,FD=/[,\[\]\{\}]/,W1=/^(?:!|!!|![a-z\-]+!)$/i,Y1=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function L1(e){return Object.prototype.toString.call(e)}function ki(e){return e===10||e===13}function Ws(e){return e===9||e===32}function kn(e){return e===9||e===32||e===10||e===13}function Ma(e){return e===44||e===91||e===93||e===123||e===125}function CD(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function PD(e){return e===120?2:e===117?4:e===85?8:0}function ID(e){return 48<=e&&e<=57?e-48:-1}function j1(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function $D(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var J1=new Array(256),X1=new Array(256);for(Gs=0;Gs<256;Gs++)J1[Gs]=j1(Gs)?1:0,X1[Gs]=j1(Gs);var Gs;function kD(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||SD,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function Z1(e,t){return new V1(t,new ED(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function dt(e,t){throw Z1(e,t)}function Rc(e,t){e.onWarning&&e.onWarning.call(null,Z1(e,t))}var M1={YAML:function(t,r,n){var u,a,i;t.version!==null&&dt(t,"duplication of %YAML directive"),n.length!==1&&dt(t,"YAML directive accepts exactly one argument"),u=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),u===null&&dt(t,"ill-formed argument of the YAML directive"),a=parseInt(u[1],10),i=parseInt(u[2],10),a!==1&&dt(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=i<2,i!==1&&i!==2&&Rc(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var u,a;n.length!==2&&dt(t,"TAG directive accepts exactly two arguments"),u=n[0],a=n[1],W1.test(u)||dt(t,"ill-formed tag handle (first argument) of the TAG directive"),Ds.call(t.tagMap,u)&&dt(t,'there is a previously declared suffix for "'+u+'" tag handle'),Y1.test(a)||dt(t,"ill-formed tag prefix (second argument) of the TAG directive"),t.tagMap[u]=a}};function ys(e,t,r,n){var u,a,i,c;if(t<r){if(c=e.input.slice(t,r),n)for(u=0,a=c.length;u<a;u+=1)i=c.charCodeAt(u),i===9||32<=i&&i<=1114111||dt(e,"expected valid JSON character");else yD.test(c)&&dt(e,"the stream contains non-printable characters");e.result+=c}}function q1(e,t,r,n){var u,a,i,c;for(Zi.isObject(r)||dt(e,"cannot merge mappings; the provided source object is unacceptable"),u=Object.keys(r),i=0,c=u.length;i<c;i+=1)a=u[i],Ds.call(t,a)||(t[a]=r[a],n[a]=!0)}function qa(e,t,r,n,u,a,i,c){var h,m;if(Array.isArray(u))for(u=Array.prototype.slice.call(u),h=0,m=u.length;h<m;h+=1)Array.isArray(u[h])&&dt(e,"nested arrays are not supported inside keys"),typeof u=="object"&&L1(u[h])==="[object Object]"&&(u[h]="[object Object]");if(typeof u=="object"&&L1(u)==="[object Object]"&&(u="[object Object]"),u=String(u),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(a))for(h=0,m=a.length;h<m;h+=1)q1(e,t,a[h],r);else q1(e,t,a,r);else!e.json&&!Ds.call(r,u)&&Ds.call(t,u)&&(e.line=i||e.line,e.position=c||e.position,dt(e,"duplicated mapping key")),t[u]=a,delete r[u];return t}function Th(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):dt(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function jr(e,t,r){for(var n=0,u=e.input.charCodeAt(e.position);u!==0;){for(;Ws(u);)u=e.input.charCodeAt(++e.position);if(t&&u===35)do u=e.input.charCodeAt(++e.position);while(u!==10&&u!==13&&u!==0);if(ki(u))for(Th(e),u=e.input.charCodeAt(e.position),n++,e.lineIndent=0;u===32;)e.lineIndent++,u=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&Rc(e,"deficient indentation"),n}function Bc(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||kn(r)))}function Oh(e,t){t===1?e.result+=" ":t>1&&(e.result+=Zi.repeat(`
`,t-1))}function RD(e,t,r){var n,u,a,i,c,h,m,S,E=e.kind,v=e.result,g;if(g=e.input.charCodeAt(e.position),kn(g)||Ma(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(u=e.input.charCodeAt(e.position+1),kn(u)||r&&Ma(u)))return!1;for(e.kind="scalar",e.result="",a=i=e.position,c=!1;g!==0;){if(g===58){if(u=e.input.charCodeAt(e.position+1),kn(u)||r&&Ma(u))break}else if(g===35){if(n=e.input.charCodeAt(e.position-1),kn(n))break}else{if(e.position===e.lineStart&&Bc(e)||r&&Ma(g))break;if(ki(g))if(h=e.line,m=e.lineStart,S=e.lineIndent,jr(e,!1,-1),e.lineIndent>=t){c=!0,g=e.input.charCodeAt(e.position);continue}else{e.position=i,e.line=h,e.lineStart=m,e.lineIndent=S;break}}c&&(ys(e,a,i,!1),Oh(e,e.line-h),a=i=e.position,c=!1),Ws(g)||(i=e.position+1),g=e.input.charCodeAt(++e.position)}return ys(e,a,i,!1),e.result?!0:(e.kind=E,e.result=v,!1)}function BD(e,t){var r,n,u;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=u=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(ys(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,u=e.position;else return!0;else ki(r)?(ys(e,n,u,!0),Oh(e,jr(e,!1,t)),n=u=e.position):e.position===e.lineStart&&Bc(e)?dt(e,"unexpected end of the document within a single quoted scalar"):(e.position++,u=e.position);dt(e,"unexpected end of the stream within a single quoted scalar")}function xD(e,t){var r,n,u,a,i,c;if(c=e.input.charCodeAt(e.position),c!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(c=e.input.charCodeAt(e.position))!==0;){if(c===34)return ys(e,r,e.position,!0),e.position++,!0;if(c===92){if(ys(e,r,e.position,!0),c=e.input.charCodeAt(++e.position),ki(c))jr(e,!1,t);else if(c<256&&J1[c])e.result+=X1[c],e.position++;else if((i=PD(c))>0){for(u=i,a=0;u>0;u--)c=e.input.charCodeAt(++e.position),(i=CD(c))>=0?a=(a<<4)+i:dt(e,"expected hexadecimal character");e.result+=$D(a),e.position++}else dt(e,"unknown escape sequence");r=n=e.position}else ki(c)?(ys(e,r,n,!0),Oh(e,jr(e,!1,t)),r=n=e.position):e.position===e.lineStart&&Bc(e)?dt(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}dt(e,"unexpected end of the stream within a double quoted scalar")}function TD(e,t){var r=!0,n,u=e.tag,a,i=e.anchor,c,h,m,S,E,v={},g,b,w,_;if(_=e.input.charCodeAt(e.position),_===91)h=93,E=!1,a=[];else if(_===123)h=125,E=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),_=e.input.charCodeAt(++e.position);_!==0;){if(jr(e,!0,t),_=e.input.charCodeAt(e.position),_===h)return e.position++,e.tag=u,e.anchor=i,e.kind=E?"mapping":"sequence",e.result=a,!0;r||dt(e,"missed comma between flow collection entries"),b=g=w=null,m=S=!1,_===63&&(c=e.input.charCodeAt(e.position+1),kn(c)&&(m=S=!0,e.position++,jr(e,!0,t))),n=e.line,Ua(e,t,$c,!1,!0),b=e.tag,g=e.result,jr(e,!0,t),_=e.input.charCodeAt(e.position),(S||e.line===n)&&_===58&&(m=!0,_=e.input.charCodeAt(++e.position),jr(e,!0,t),Ua(e,t,$c,!1,!0),w=e.result),E?qa(e,a,v,b,g,w):m?a.push(qa(e,null,v,b,g,w)):a.push(g),jr(e,!0,t),_=e.input.charCodeAt(e.position),_===44?(r=!0,_=e.input.charCodeAt(++e.position)):r=!1}dt(e,"unexpected end of the stream within a flow collection")}function OD(e,t){var r,n,u=xh,a=!1,i=!1,c=t,h=0,m=!1,S,E;if(E=e.input.charCodeAt(e.position),E===124)n=!1;else if(E===62)n=!0;else return!1;for(e.kind="scalar",e.result="";E!==0;)if(E=e.input.charCodeAt(++e.position),E===43||E===45)xh===u?u=E===43?H1:_D:dt(e,"repeat of a chomping mode identifier");else if((S=ID(E))>=0)S===0?dt(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):i?dt(e,"repeat of an indentation width identifier"):(c=t+S-1,i=!0);else break;if(Ws(E)){do E=e.input.charCodeAt(++e.position);while(Ws(E));if(E===35)do E=e.input.charCodeAt(++e.position);while(!ki(E)&&E!==0)}for(;E!==0;){for(Th(e),e.lineIndent=0,E=e.input.charCodeAt(e.position);(!i||e.lineIndent<c)&&E===32;)e.lineIndent++,E=e.input.charCodeAt(++e.position);if(!i&&e.lineIndent>c&&(c=e.lineIndent),ki(E)){h++;continue}if(e.lineIndent<c){u===H1?e.result+=Zi.repeat(`
`,a?1+h:h):u===xh&&a&&(e.result+=`
`);break}for(n?Ws(E)?(m=!0,e.result+=Zi.repeat(`
`,a?1+h:h)):m?(m=!1,e.result+=Zi.repeat(`
`,h+1)):h===0?a&&(e.result+=" "):e.result+=Zi.repeat(`
`,h):e.result+=Zi.repeat(`
`,a?1+h:h),a=!0,i=!0,h=0,r=e.position;!ki(E)&&E!==0;)E=e.input.charCodeAt(++e.position);ys(e,r,e.position,!1)}return!0}function U1(e,t){var r,n=e.tag,u=e.anchor,a=[],i,c=!1,h;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),h=e.input.charCodeAt(e.position);h!==0&&!(h!==45||(i=e.input.charCodeAt(e.position+1),!kn(i)));){if(c=!0,e.position++,jr(e,!0,-1)&&e.lineIndent<=t){a.push(null),h=e.input.charCodeAt(e.position);continue}if(r=e.line,Ua(e,t,G1,!1,!0),a.push(e.result),jr(e,!0,-1),h=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&h!==0)dt(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return c?(e.tag=n,e.anchor=u,e.kind="sequence",e.result=a,!0):!1}function ND(e,t,r){var n,u,a,i,c=e.tag,h=e.anchor,m={},S={},E=null,v=null,g=null,b=!1,w=!1,_;for(e.anchor!==null&&(e.anchorMap[e.anchor]=m),_=e.input.charCodeAt(e.position);_!==0;){if(n=e.input.charCodeAt(e.position+1),a=e.line,i=e.position,(_===63||_===58)&&kn(n))_===63?(b&&(qa(e,m,S,E,v,null),E=v=g=null),w=!0,b=!0,u=!0):b?(b=!1,u=!0):dt(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,_=n;else if(Ua(e,r,z1,!1,!0))if(e.line===a){for(_=e.input.charCodeAt(e.position);Ws(_);)_=e.input.charCodeAt(++e.position);if(_===58)_=e.input.charCodeAt(++e.position),kn(_)||dt(e,"a whitespace character is expected after the key-value separator within a block mapping"),b&&(qa(e,m,S,E,v,null),E=v=g=null),w=!0,b=!1,u=!1,E=e.tag,v=e.result;else if(w)dt(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=h,!0}else if(w)dt(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=h,!0;else break;if((e.line===a||e.lineIndent>t)&&(Ua(e,t,kc,!0,u)&&(b?v=e.result:g=e.result),b||(qa(e,m,S,E,v,g,a,i),E=v=g=null),jr(e,!0,-1),_=e.input.charCodeAt(e.position)),e.lineIndent>t&&_!==0)dt(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return b&&qa(e,m,S,E,v,null),w&&(e.tag=c,e.anchor=h,e.kind="mapping",e.result=m),w}function HD(e){var t,r=!1,n=!1,u,a,i;if(i=e.input.charCodeAt(e.position),i!==33)return!1;if(e.tag!==null&&dt(e,"duplication of a tag property"),i=e.input.charCodeAt(++e.position),i===60?(r=!0,i=e.input.charCodeAt(++e.position)):i===33?(n=!0,u="!!",i=e.input.charCodeAt(++e.position)):u="!",t=e.position,r){do i=e.input.charCodeAt(++e.position);while(i!==0&&i!==62);e.position<e.length?(a=e.input.slice(t,e.position),i=e.input.charCodeAt(++e.position)):dt(e,"unexpected end of the stream within a verbatim tag")}else{for(;i!==0&&!kn(i);)i===33&&(n?dt(e,"tag suffix cannot contain exclamation marks"):(u=e.input.slice(t-1,e.position+1),W1.test(u)||dt(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),i=e.input.charCodeAt(++e.position);a=e.input.slice(t,e.position),FD.test(a)&&dt(e,"tag suffix cannot contain flow indicator characters")}return a&&!Y1.test(a)&&dt(e,"tag name cannot contain such characters: "+a),r?e.tag=a:Ds.call(e.tagMap,u)?e.tag=e.tagMap[u]+a:u==="!"?e.tag="!"+a:u==="!!"?e.tag="tag:yaml.org,2002:"+a:dt(e,'undeclared tag handle "'+u+'"'),!0}function LD(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&dt(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!kn(r)&&!Ma(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&dt(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function jD(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!kn(n)&&!Ma(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&dt(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),Ds.call(e.anchorMap,r)||dt(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],jr(e,!0,-1),!0}function Ua(e,t,r,n,u){var a,i,c,h=1,m=!1,S=!1,E,v,g,b,w;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,a=i=c=kc===r||G1===r,n&&jr(e,!0,-1)&&(m=!0,e.lineIndent>t?h=1:e.lineIndent===t?h=0:e.lineIndent<t&&(h=-1)),h===1)for(;HD(e)||LD(e);)jr(e,!0,-1)?(m=!0,c=a,e.lineIndent>t?h=1:e.lineIndent===t?h=0:e.lineIndent<t&&(h=-1)):c=!1;if(c&&(c=m||u),(h===1||kc===r)&&($c===r||z1===r?b=t:b=t+1,w=e.position-e.lineStart,h===1?c&&(U1(e,w)||ND(e,w,b))||TD(e,b)?S=!0:(i&&OD(e,b)||BD(e,b)||xD(e,b)?S=!0:jD(e)?(S=!0,(e.tag!==null||e.anchor!==null)&&dt(e,"alias node should not have any properties")):RD(e,b,$c===r)&&(S=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):h===0&&(S=c&&U1(e,w))),e.tag!==null&&e.tag!=="!")if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&dt(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),E=0,v=e.implicitTypes.length;E<v;E+=1)if(g=e.implicitTypes[E],g.resolve(e.result)){e.result=g.construct(e.result),e.tag=g.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else Ds.call(e.typeMap[e.kind||"fallback"],e.tag)?(g=e.typeMap[e.kind||"fallback"][e.tag],e.result!==null&&g.kind!==e.kind&&dt(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+g.kind+'", not "'+e.kind+'"'),g.resolve(e.result)?(e.result=g.construct(e.result),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):dt(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):dt(e,"unknown tag !<"+e.tag+">");return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||S}function MD(e){var t=e.position,r,n,u,a=!1,i;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};(i=e.input.charCodeAt(e.position))!==0&&(jr(e,!0,-1),i=e.input.charCodeAt(e.position),!(e.lineIndent>0||i!==37));){for(a=!0,i=e.input.charCodeAt(++e.position),r=e.position;i!==0&&!kn(i);)i=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),u=[],n.length<1&&dt(e,"directive name must not be less than one character in length");i!==0;){for(;Ws(i);)i=e.input.charCodeAt(++e.position);if(i===35){do i=e.input.charCodeAt(++e.position);while(i!==0&&!ki(i));break}if(ki(i))break;for(r=e.position;i!==0&&!kn(i);)i=e.input.charCodeAt(++e.position);u.push(e.input.slice(r,e.position))}i!==0&&Th(e),Ds.call(M1,n)?M1[n](e,n,u):Rc(e,'unknown document directive "'+n+'"')}if(jr(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,jr(e,!0,-1)):a&&dt(e,"directives end mark is expected"),Ua(e,e.lineIndent-1,kc,!1,!0),jr(e,!0,-1),e.checkLineBreaks&&DD.test(e.input.slice(t,e.position))&&Rc(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Bc(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,jr(e,!0,-1));return}if(e.position<e.length-1)dt(e,"end of the stream or a document separator is expected");else return}function Q1(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new kD(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,dt(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)MD(r);return r.documents}function eg(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=Q1(e,r);if(typeof t!="function")return n;for(var u=0,a=n.length;u<a;u+=1)t(n[u])}function tg(e,t){var r=Q1(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new V1("expected a single document in the stream, but found more")}}function qD(e,t,r){return typeof t=="object"&&t!==null&&typeof r>"u"&&(r=t,t=null),eg(e,t,Zi.extend({schema:K1},r))}function UD(e,t){return tg(e,Zi.extend({schema:K1},t))}Nu.exports.loadAll=eg;Nu.exports.load=tg;Nu.exports.safeLoadAll=qD;Nu.exports.safeLoad=UD});var Dg=St((q6,jh)=>{"use strict";var Lu=Vs(),ju=Ha(),VD=Ou(),KD=ja(),lg=Object.prototype.toString,fg=Object.prototype.hasOwnProperty,zD=9,Hu=10,GD=13,WD=32,YD=33,JD=34,hg=35,XD=37,ZD=38,QD=39,e5=42,pg=44,t5=45,dg=58,r5=61,n5=62,i5=63,s5=64,gg=91,vg=93,a5=96,mg=123,u5=124,wg=125,cn={};cn[0]="\\0";cn[7]="\\a";cn[8]="\\b";cn[9]="\\t";cn[10]="\\n";cn[11]="\\v";cn[12]="\\f";cn[13]="\\r";cn[27]="\\e";cn[34]='\\"';cn[92]="\\\\";cn[133]="\\N";cn[160]="\\_";cn[8232]="\\L";cn[8233]="\\P";var o5=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function c5(e,t){var r,n,u,a,i,c,h;if(t===null)return{};for(r={},n=Object.keys(t),u=0,a=n.length;u<a;u+=1)i=n[u],c=String(t[i]),i.slice(0,2)==="!!"&&(i="tag:yaml.org,2002:"+i.slice(2)),h=e.compiledTypeMap.fallback[i],h&&fg.call(h.styleAliases,c)&&(c=h.styleAliases[c]),r[i]=c;return r}function ng(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new ju("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Lu.repeat("0",n-t.length)+t}function l5(e){this.schema=e.schema||VD,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Lu.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=c5(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ig(e,t){for(var r=Lu.repeat(" ",t),n=0,u=-1,a="",i,c=e.length;n<c;)u=e.indexOf(`
`,n),u===-1?(i=e.slice(n),n=c):(i=e.slice(n,u+1),n=u+1),i.length&&i!==`
`&&(a+=r),a+=i;return a}function Nh(e,t){return`
`+Lu.repeat(" ",e.indent*t)}function f5(e,t){var r,n,u;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(u=e.implicitTypes[r],u.resolve(t))return!0;return!1}function Lh(e){return e===WD||e===zD}function Va(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==65279||65536<=e&&e<=1114111}function h5(e){return Va(e)&&!Lh(e)&&e!==65279&&e!==GD&&e!==Hu}function sg(e,t){return Va(e)&&e!==65279&&e!==pg&&e!==gg&&e!==vg&&e!==mg&&e!==wg&&e!==dg&&(e!==hg||t&&h5(t))}function p5(e){return Va(e)&&e!==65279&&!Lh(e)&&e!==t5&&e!==i5&&e!==dg&&e!==pg&&e!==gg&&e!==vg&&e!==mg&&e!==wg&&e!==hg&&e!==ZD&&e!==e5&&e!==YD&&e!==u5&&e!==r5&&e!==n5&&e!==QD&&e!==JD&&e!==XD&&e!==s5&&e!==a5}function bg(e){var t=/^\n* /;return t.test(e)}var Ag=1,Eg=2,Sg=3,_g=4,xc=5;function d5(e,t,r,n,u){var a,i,c,h=!1,m=!1,S=n!==-1,E=-1,v=p5(e.charCodeAt(0))&&!Lh(e.charCodeAt(e.length-1));if(t)for(a=0;a<e.length;a++){if(i=e.charCodeAt(a),!Va(i))return xc;c=a>0?e.charCodeAt(a-1):null,v=v&&sg(i,c)}else{for(a=0;a<e.length;a++){if(i=e.charCodeAt(a),i===Hu)h=!0,S&&(m=m||a-E-1>n&&e[E+1]!==" ",E=a);else if(!Va(i))return xc;c=a>0?e.charCodeAt(a-1):null,v=v&&sg(i,c)}m=m||S&&a-E-1>n&&e[E+1]!==" "}return!h&&!m?v&&!u(e)?Ag:Eg:r>9&&bg(e)?xc:m?_g:Sg}function g5(e,t,r,n){e.dump=(function(){if(t.length===0)return"''";if(!e.noCompatMode&&o5.indexOf(t)!==-1)return"'"+t+"'";var u=e.indent*Math.max(1,r),a=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-u),i=n||e.flowLevel>-1&&r>=e.flowLevel;function c(h){return f5(e,h)}switch(d5(t,i,e.indent,a,c)){case Ag:return t;case Eg:return"'"+t.replace(/'/g,"''")+"'";case Sg:return"|"+ag(t,e.indent)+ug(ig(t,u));case _g:return">"+ag(t,e.indent)+ug(ig(v5(t,a),u));case xc:return'"'+m5(t,a)+'"';default:throw new ju("impossible error: invalid scalar style")}})()}function ag(e,t){var r=bg(e)?String(t):"",n=e[e.length-1]===`
`,u=n&&(e[e.length-2]===`
`||e===`
`),a=u?"+":n?"":"-";return r+a+`
`}function ug(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function v5(e,t){for(var r=/(\n+)([^\n]*)/g,n=(function(){var m=e.indexOf(`
`);return m=m!==-1?m:e.length,r.lastIndex=m,og(e.slice(0,m),t)})(),u=e[0]===`
`||e[0]===" ",a,i;i=r.exec(e);){var c=i[1],h=i[2];a=h[0]===" ",n+=c+(!u&&!a&&h!==""?`
`:"")+og(h,t),u=a}return n}function og(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,u=0,a,i=0,c=0,h="";n=r.exec(e);)c=n.index,c-u>t&&(a=i>u?i:c,h+=`
`+e.slice(u,a),u=a+1),i=c;return h+=`
`,e.length-u>t&&i>u?h+=e.slice(u,i)+`
`+e.slice(i+1):h+=e.slice(u),h.slice(1)}function m5(e){for(var t="",r,n,u,a=0;a<e.length;a++){if(r=e.charCodeAt(a),r>=55296&&r<=56319&&(n=e.charCodeAt(a+1),n>=56320&&n<=57343)){t+=ng((r-55296)*1024+n-56320+65536),a++;continue}u=cn[r],t+=!u&&Va(r)?e[a]:u||ng(r)}return t}function w5(e,t,r){var n="",u=e.tag,a,i;for(a=0,i=r.length;a<i;a+=1)Ys(e,t,r[a],!1,!1)&&(a!==0&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=u,e.dump="["+n+"]"}function b5(e,t,r,n){var u="",a=e.tag,i,c;for(i=0,c=r.length;i<c;i+=1)Ys(e,t+1,r[i],!0,!0)&&((!n||i!==0)&&(u+=Nh(e,t)),e.dump&&Hu===e.dump.charCodeAt(0)?u+="-":u+="- ",u+=e.dump);e.tag=a,e.dump=u||"[]"}function A5(e,t,r){var n="",u=e.tag,a=Object.keys(r),i,c,h,m,S;for(i=0,c=a.length;i<c;i+=1)S="",i!==0&&(S+=", "),e.condenseFlow&&(S+='"'),h=a[i],m=r[h],Ys(e,t,h,!1,!1)&&(e.dump.length>1024&&(S+="? "),S+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Ys(e,t,m,!1,!1)&&(S+=e.dump,n+=S));e.tag=u,e.dump="{"+n+"}"}function E5(e,t,r,n){var u="",a=e.tag,i=Object.keys(r),c,h,m,S,E,v;if(e.sortKeys===!0)i.sort();else if(typeof e.sortKeys=="function")i.sort(e.sortKeys);else if(e.sortKeys)throw new ju("sortKeys must be a boolean or a function");for(c=0,h=i.length;c<h;c+=1)v="",(!n||c!==0)&&(v+=Nh(e,t)),m=i[c],S=r[m],Ys(e,t+1,m,!0,!0,!0)&&(E=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,E&&(e.dump&&Hu===e.dump.charCodeAt(0)?v+="?":v+="? "),v+=e.dump,E&&(v+=Nh(e,t)),Ys(e,t+1,S,!0,E)&&(e.dump&&Hu===e.dump.charCodeAt(0)?v+=":":v+=": ",v+=e.dump,u+=v));e.tag=a,e.dump=u||"{}"}function cg(e,t,r){var n,u,a,i,c,h;for(u=r?e.explicitTypes:e.implicitTypes,a=0,i=u.length;a<i;a+=1)if(c=u[a],(c.instanceOf||c.predicate)&&(!c.instanceOf||typeof t=="object"&&t instanceof c.instanceOf)&&(!c.predicate||c.predicate(t))){if(e.tag=r?c.tag:"?",c.represent){if(h=e.styleMap[c.tag]||c.defaultStyle,lg.call(c.represent)==="[object Function]")n=c.represent(t,h);else if(fg.call(c.represent,h))n=c.represent[h](t,h);else throw new ju("!<"+c.tag+'> tag resolver accepts not "'+h+'" style');e.dump=n}return!0}return!1}function Ys(e,t,r,n,u,a){e.tag=null,e.dump=r,cg(e,r,!1)||cg(e,r,!0);var i=lg.call(e.dump);n&&(n=e.flowLevel<0||e.flowLevel>t);var c=i==="[object Object]"||i==="[object Array]",h,m;if(c&&(h=e.duplicates.indexOf(r),m=h!==-1),(e.tag!==null&&e.tag!=="?"||m||e.indent!==2&&t>0)&&(u=!1),m&&e.usedDuplicates[h])e.dump="*ref_"+h;else{if(c&&m&&!e.usedDuplicates[h]&&(e.usedDuplicates[h]=!0),i==="[object Object]")n&&Object.keys(e.dump).length!==0?(E5(e,t,e.dump,u),m&&(e.dump="&ref_"+h+e.dump)):(A5(e,t,e.dump),m&&(e.dump="&ref_"+h+" "+e.dump));else if(i==="[object Array]"){var S=e.noArrayIndent&&t>0?t-1:t;n&&e.dump.length!==0?(b5(e,S,e.dump,u),m&&(e.dump="&ref_"+h+e.dump)):(w5(e,S,e.dump),m&&(e.dump="&ref_"+h+" "+e.dump))}else if(i==="[object String]")e.tag!=="?"&&g5(e,e.dump,t,a);else{if(e.skipInvalid)return!1;throw new ju("unacceptable kind of an object to dump "+i)}e.tag!==null&&e.tag!=="?"&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function S5(e,t){var r=[],n=[],u,a;for(Hh(e,r,n),u=0,a=n.length;u<a;u+=1)t.duplicates.push(r[n[u]]);t.usedDuplicates=new Array(a)}function Hh(e,t,r){var n,u,a;if(e!==null&&typeof e=="object")if(u=t.indexOf(e),u!==-1)r.indexOf(u)===-1&&r.push(u);else if(t.push(e),Array.isArray(e))for(u=0,a=e.length;u<a;u+=1)Hh(e[u],t,r);else for(n=Object.keys(e),u=0,a=n.length;u<a;u+=1)Hh(e[n[u]],t,r)}function yg(e,t){t=t||{};var r=new l5(t);return r.noRefs||S5(e,r),Ys(r,0,e,!0,!0)?r.dump+`
`:""}function _5(e,t){return yg(e,Lu.extend({schema:KD},t))}jh.exports.dump=yg;jh.exports.safeDump=_5});var Cg=St((U6,$r)=>{"use strict";var Tc=rg(),Fg=Dg();function Oc(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}$r.exports.Type=Gr();$r.exports.Schema=Ks();$r.exports.FAILSAFE_SCHEMA=Pc();$r.exports.JSON_SCHEMA=kh();$r.exports.CORE_SCHEMA=Rh();$r.exports.DEFAULT_SAFE_SCHEMA=ja();$r.exports.DEFAULT_FULL_SCHEMA=Ou();$r.exports.load=Tc.load;$r.exports.loadAll=Tc.loadAll;$r.exports.safeLoad=Tc.safeLoad;$r.exports.safeLoadAll=Tc.safeLoadAll;$r.exports.dump=Fg.dump;$r.exports.safeDump=Fg.safeDump;$r.exports.YAMLException=Ha();$r.exports.MINIMAL_SCHEMA=Pc();$r.exports.SAFE_SCHEMA=ja();$r.exports.DEFAULT_SCHEMA=Ou();$r.exports.scan=Oc("scan");$r.exports.parse=Oc("parse");$r.exports.compose=Oc("compose");$r.exports.addConstructor=Oc("addConstructor")});var Ig=St((V6,Pg)=>{"use strict";var y5=Cg();Pg.exports=y5});var kg=St((K6,$g)=>{"use strict";var Nc=Ig();$g.exports={safeLoad:Nc.safeLoad,load:Nc.load,safeDump:Nc.safeDump,dump:Nc.dump}});var Og=St((Ka,qu)=>{(function(){var e,t="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",a="Invalid `variable` option passed into `_.template`",i="__lodash_hash_undefined__",c=500,h="__lodash_placeholder__",m=1,S=2,E=4,v=1,g=2,b=1,w=2,_=4,A=8,C=16,x=32,N=64,H=128,ne=256,pe=512,P=30,$="...",j=800,R=16,q=1,Q=2,V=3,z=1/0,te=9007199254740991,me=17976931348623157e292,st=NaN,it=4294967295,ot=it-1,Ct=it>>>1,yt=[["ary",H],["bind",b],["bindKey",w],["curry",A],["curryRight",C],["flip",pe],["partial",x],["partialRight",N],["rearg",ne]],Ht="[object Arguments]",Lt="[object Array]",ln="[object AsyncFunction]",Ar="[object Boolean]",cr="[object Date]",Or="[object DOMException]",_r="[object Error]",Bt="[object Function]",lr="[object GeneratorFunction]",At="[object Map]",Be="[object Number]",$e="[object Null]",ve="[object Object]",Se="[object Promise]",Y="[object Proxy]",de="[object RegExp]",W="[object Set]",I="[object String]",M="[object Symbol]",l="[object Undefined]",U="[object WeakMap]",G="[object WeakSet]",X="[object ArrayBuffer]",re="[object DataView]",_e="[object Float32Array]",ue="[object Float64Array]",Ae="[object Int8Array]",Oe="[object Int16Array]",Ee="[object Int32Array]",Z="[object Uint8Array]",Ce="[object Uint8ClampedArray]",Pe="[object Uint16Array]",Le="[object Uint32Array]",oe=/\b__p \+= '';/g,xe=/\b(__p \+=) '' \+/g,Ve=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Je=/&(?:amp|lt|gt|quot|#39);/g,Ge=/[&<>"']/g,kt=RegExp(Je.source),at=RegExp(Ge.source),ar=/<%-([\s\S]+?)%>/g,wr=/<%([\s\S]+?)%>/g,Xr=/<%=([\s\S]+?)%>/g,dr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wr=/^\w*$/,xt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,se=/[\\^$.*+?()[\]{}|]/g,ke=RegExp(se.source),Ye=/^\s+/,K=/\s/,fe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ue=/\{\n\/\* \[wrapped with (.+)\] \*/,Ke=/,? & /,ye=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Xe=/[()=,{}\[\]\/\s]/,Ze=/\\(\\)?/g,Mt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Me=/\w*$/,ft=/^[-+]0x[0-9a-f]+$/i,qe=/^0b[01]+$/i,qt=/^\[object .+?Constructor\]$/,Vt=/^0o[0-7]+$/i,et=/^(?:0|[1-9]\d*)$/,Nr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ne=/($^)/,Ti=/['\n\r\u2028\u2029\\]/g,wt="\\ud800-\\udfff",kr="\\u0300-\\u036f",_t="\\ufe20-\\ufe2f",gr="\\u20d0-\\u20ff",lt=kr+_t+gr,er="\\u2700-\\u27bf",Hr="a-z\\xdf-\\xf6\\xf8-\\xff",Er="\\xac\\xb1\\xd7\\xf7",Jt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Xt="\\u2000-\\u206f",nr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fr="A-Z\\xc0-\\xd6\\xd8-\\xde",Sr="\\ufe0e\\ufe0f",Mr=Er+Jt+Xt+nr,bn="['\u2019]",ir="["+wt+"]",Wn="["+Mr+"]",Rr="["+lt+"]",ai="\\d+",Wa="["+er+"]",Ya="["+Hr+"]",Cs="[^"+wt+Mr+ai+er+Hr+fr+"]",ts="\\ud83c[\\udffb-\\udfff]",Yc="(?:"+Rr+"|"+ts+")",Ja="[^"+wt+"]",Yn="(?:\\ud83c[\\udde6-\\uddff]){2}",Jn="[\\ud800-\\udbff][\\udc00-\\udfff]",rs="["+fr+"]",Qs="\\u200d",Xa="(?:"+Ya+"|"+Cs+")",Jc="(?:"+rs+"|"+Cs+")",Ju="(?:"+bn+"(?:d|ll|m|re|s|t|ve))?",Xu="(?:"+bn+"(?:D|LL|M|RE|S|T|VE))?",Zu=Yc+"?",Za="["+Sr+"]?",Xc="(?:"+Qs+"(?:"+[Ja,Yn,Jn].join("|")+")"+Za+Zu+")*",Zc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Qc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Qa=Za+Zu+Xc,el="(?:"+[Wa,Yn,Jn].join("|")+")"+Qa,tl="(?:"+[Ja+Rr+"?",Rr,Yn,Jn,ir].join("|")+")",rl=RegExp(bn,"g"),nl=RegExp(Rr,"g"),eu=RegExp(ts+"(?="+ts+")|"+tl+Qa,"g"),il=RegExp([rs+"?"+Ya+"+"+Ju+"(?="+[Wn,rs,"$"].join("|")+")",Jc+"+"+Xu+"(?="+[Wn,rs+Xa,"$"].join("|")+")",rs+"?"+Xa+"+"+Ju,rs+"+"+Xu,Qc,Zc,ai,el].join("|"),"g"),sl=RegExp("["+Qs+wt+lt+Sr+"]"),al=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ul=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ol=-1,hr={};hr[_e]=hr[ue]=hr[Ae]=hr[Oe]=hr[Ee]=hr[Z]=hr[Ce]=hr[Pe]=hr[Le]=!0,hr[Ht]=hr[Lt]=hr[X]=hr[Ar]=hr[re]=hr[cr]=hr[_r]=hr[Bt]=hr[At]=hr[Be]=hr[ve]=hr[de]=hr[W]=hr[I]=hr[U]=!1;var ur={};ur[Ht]=ur[Lt]=ur[X]=ur[re]=ur[Ar]=ur[cr]=ur[_e]=ur[ue]=ur[Ae]=ur[Oe]=ur[Ee]=ur[At]=ur[Be]=ur[ve]=ur[de]=ur[W]=ur[I]=ur[M]=ur[Z]=ur[Ce]=ur[Pe]=ur[Le]=!0,ur[_r]=ur[Bt]=ur[U]=!1;var cl={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Qu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ns={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ll={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},fl=parseFloat,hl=parseInt,Oi=typeof global=="object"&&global&&global.Object===Object&&global,pl=typeof self=="object"&&self&&self.Object===Object&&self,Lr=Oi||pl||Function("return this")(),ea=typeof Ka=="object"&&Ka&&!Ka.nodeType&&Ka,Ni=ea&&typeof qu=="object"&&qu&&!qu.nodeType&&qu,tu=Ni&&Ni.exports===ea,ta=tu&&Oi.process,An=(function(){try{var le=Ni&&Ni.require&&Ni.require("util").types;return le||ta&&ta.binding&&ta.binding("util")}catch{}})(),eo=An&&An.isArrayBuffer,to=An&&An.isDate,ro=An&&An.isMap,no=An&&An.isRegExp,io=An&&An.isSet,so=An&&An.isTypedArray;function fn(le,De,be){switch(be.length){case 0:return le.call(De);case 1:return le.call(De,be[0]);case 2:return le.call(De,be[0],be[1]);case 3:return le.call(De,be[0],be[1],be[2])}return le.apply(De,be)}function dl(le,De,be,rt){for(var Et=-1,Yt=le==null?0:le.length;++Et<Yt;){var Br=le[Et];De(rt,Br,be(Br),le)}return rt}function Qr(le,De){for(var be=-1,rt=le==null?0:le.length;++be<rt&&De(le[be],be,le)!==!1;);return le}function gl(le,De){for(var be=le==null?0:le.length;be--&&De(le[be],be,le)!==!1;);return le}function ao(le,De){for(var be=-1,rt=le==null?0:le.length;++be<rt;)if(!De(le[be],be,le))return!1;return!0}function wi(le,De){for(var be=-1,rt=le==null?0:le.length,Et=0,Yt=[];++be<rt;){var Br=le[be];De(Br,be,le)&&(Yt[Et++]=Br)}return Yt}function ra(le,De){var be=le==null?0:le.length;return!!be&&ui(le,De,0)>-1}function ru(le,De,be){for(var rt=-1,Et=le==null?0:le.length;++rt<Et;)if(be(De,le[rt]))return!0;return!1}function vr(le,De){for(var be=-1,rt=le==null?0:le.length,Et=Array(rt);++be<rt;)Et[be]=De(le[be],be,le);return Et}function bi(le,De){for(var be=-1,rt=De.length,Et=le.length;++be<rt;)le[Et+be]=De[be];return le}function nu(le,De,be,rt){var Et=-1,Yt=le==null?0:le.length;for(rt&&Yt&&(be=le[++Et]);++Et<Yt;)be=De(be,le[Et],Et,le);return be}function vl(le,De,be,rt){var Et=le==null?0:le.length;for(rt&&Et&&(be=le[--Et]);Et--;)be=De(be,le[Et],Et,le);return be}function iu(le,De){for(var be=-1,rt=le==null?0:le.length;++be<rt;)if(De(le[be],be,le))return!0;return!1}var ml=su("length");function wl(le){return le.split("")}function bl(le){return le.match(ye)||[]}function uo(le,De,be){var rt;return be(le,function(Et,Yt,Br){if(De(Et,Yt,Br))return rt=Yt,!1}),rt}function na(le,De,be,rt){for(var Et=le.length,Yt=be+(rt?1:-1);rt?Yt--:++Yt<Et;)if(De(le[Yt],Yt,le))return Yt;return-1}function ui(le,De,be){return De===De?kl(le,De,be):na(le,oo,be)}function Al(le,De,be,rt){for(var Et=be-1,Yt=le.length;++Et<Yt;)if(rt(le[Et],De))return Et;return-1}function oo(le){return le!==le}function co(le,De){var be=le==null?0:le.length;return be?uu(le,De)/be:st}function su(le){return function(De){return De==null?e:De[le]}}function au(le){return function(De){return le==null?e:le[De]}}function lo(le,De,be,rt,Et){return Et(le,function(Yt,Br,sr){be=rt?(rt=!1,Yt):De(be,Yt,Br,sr)}),be}function El(le,De){var be=le.length;for(le.sort(De);be--;)le[be]=le[be].value;return le}function uu(le,De){for(var be,rt=-1,Et=le.length;++rt<Et;){var Yt=De(le[rt]);Yt!==e&&(be=be===e?Yt:be+Yt)}return be}function ou(le,De){for(var be=-1,rt=Array(le);++be<le;)rt[be]=De(be);return rt}function Sl(le,De){return vr(De,function(be){return[be,le[be]]})}function fo(le){return le&&le.slice(0,vo(le)+1).replace(Ye,"")}function hn(le){return function(De){return le(De)}}function cu(le,De){return vr(De,function(be){return le[be]})}function Ps(le,De){return le.has(De)}function ho(le,De){for(var be=-1,rt=le.length;++be<rt&&ui(De,le[be],0)>-1;);return be}function po(le,De){for(var be=le.length;be--&&ui(De,le[be],0)>-1;);return be}function _l(le,De){for(var be=le.length,rt=0;be--;)le[be]===De&&++rt;return rt}var yl=au(cl),Dl=au(Qu);function Fl(le){return"\\"+ll[le]}function Cl(le,De){return le==null?e:le[De]}function is(le){return sl.test(le)}function Pl(le){return al.test(le)}function Il(le){for(var De,be=[];!(De=le.next()).done;)be.push(De.value);return be}function lu(le){var De=-1,be=Array(le.size);return le.forEach(function(rt,Et){be[++De]=[Et,rt]}),be}function go(le,De){return function(be){return le(De(be))}}function Ai(le,De){for(var be=-1,rt=le.length,Et=0,Yt=[];++be<rt;){var Br=le[be];(Br===De||Br===h)&&(le[be]=h,Yt[Et++]=be)}return Yt}function ia(le){var De=-1,be=Array(le.size);return le.forEach(function(rt){be[++De]=rt}),be}function $l(le){var De=-1,be=Array(le.size);return le.forEach(function(rt){be[++De]=[rt,rt]}),be}function kl(le,De,be){for(var rt=be-1,Et=le.length;++rt<Et;)if(le[rt]===De)return rt;return-1}function Rl(le,De,be){for(var rt=be+1;rt--;)if(le[rt]===De)return rt;return rt}function ss(le){return is(le)?xl(le):ml(le)}function xn(le){return is(le)?Tl(le):wl(le)}function vo(le){for(var De=le.length;De--&&K.test(le.charAt(De)););return De}var Bl=au(ns);function xl(le){for(var De=eu.lastIndex=0;eu.test(le);)++De;return De}function Tl(le){return le.match(eu)||[]}function Ol(le){return le.match(il)||[]}var Nl=(function le(De){De=De==null?Lr:Ei.defaults(Lr.Object(),De,Ei.pick(Lr,ul));var be=De.Array,rt=De.Date,Et=De.Error,Yt=De.Function,Br=De.Math,sr=De.Object,fu=De.RegExp,Hl=De.String,En=De.TypeError,sa=be.prototype,Ll=Yt.prototype,as=sr.prototype,aa=De["__core-js_shared__"],ua=Ll.toString,Qt=as.hasOwnProperty,jl=0,mo=(function(){var s=/[^.]+$/.exec(aa&&aa.keys&&aa.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""})(),oa=as.toString,Ml=ua.call(sr),ql=Lr._,y=fu("^"+ua.call(Qt).replace(se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=tu?De.Buffer:e,pn=De.Symbol,en=De.Uint8Array,Is=tt?tt.allocUnsafe:e,ge=go(sr.getPrototypeOf,sr),us=sr.create,wo=as.propertyIsEnumerable,hu=sa.splice,Ul=pn?pn.isConcatSpreadable:e,It=pn?pn.iterator:e,os=pn?pn.toStringTag:e,Xn=(function(){try{var s=Ts(sr,"defineProperty");return s({},"",{}),s}catch{}})(),ca=De.clearTimeout!==Lr.clearTimeout&&De.clearTimeout,Dt=rt&&rt.now!==Lr.Date.now&&rt.now,yr=De.setTimeout!==Lr.setTimeout&&De.setTimeout,la=Br.ceil,fa=Br.floor,Tn=sr.getOwnPropertySymbols,bo=tt?tt.isBuffer:e,cs=De.isFinite,Ie=sa.join,Vl=go(sr.keys,sr),Cr=Br.max,qr=Br.min,Kl=rt.now,zl=De.parseInt,Ao=Br.random,Eo=sa.reverse,ha=Ts(De,"DataView"),$s=Ts(De,"Map"),pu=Ts(De,"Promise"),Hi=Ts(De,"Set"),ls=Ts(De,"WeakMap"),ks=Ts(sr,"create"),pa=ls&&new ls,Li={},So=Os(ha),da=Os($s),Gl=Os(pu),Wl=Os(Hi),Yl=Os(ls),ga=pn?pn.prototype:e,fs=ga?ga.valueOf:e,va=ga?ga.toString:e;function O(s){if(Pr(s)&&!Ft(s)&&!(s instanceof Tt)){if(s instanceof Sn)return s;if(Qt.call(s,"__wrapped__"))return Xp(s)}return new Sn(s)}var hs=(function(){function s(){}return function(o){if(!Dr(o))return{};if(us)return us(o);s.prototype=o;var d=new s;return s.prototype=e,d}})();function ps(){}function Sn(s,o){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!o,this.__index__=0,this.__values__=e}O.templateSettings={escape:ar,evaluate:wr,interpolate:Xr,variable:"",imports:{_:O}},O.prototype=ps.prototype,O.prototype.constructor=O,Sn.prototype=hs(ps.prototype),Sn.prototype.constructor=Sn;function Tt(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=it,this.__views__=[]}function du(){var s=new Tt(this.__wrapped__);return s.__actions__=_n(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=_n(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=_n(this.__views__),s}function Jl(){if(this.__filtered__){var s=new Tt(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function _o(){var s=this.__wrapped__.value(),o=this.__dir__,d=Ft(s),D=o<0,k=d?s.length:0,L=Nv(0,k,this.__views__),J=L.start,ee=L.end,he=ee-J,Re=D?ee:J-1,Te=this.__iteratees__,He=Te.length,Qe=0,ct=qr(he,this.__takeCount__);if(!d||!D&&k==he&&ct==he)return Ap(s,this.__actions__);var gt=[];e:for(;he--&&Qe<ct;){Re+=o;for(var Rt=-1,vt=s[Re];++Rt<He;){var jt=Te[Rt],Kt=jt.iteratee,jn=jt.type,vn=Kt(vt);if(jn==Q)vt=vn;else if(!vn){if(jn==q)continue e;break e}}gt[Qe++]=vt}return gt}Tt.prototype=hs(ps.prototype),Tt.prototype.constructor=Tt;function ji(s){var o=-1,d=s==null?0:s.length;for(this.clear();++o<d;){var D=s[o];this.set(D[0],D[1])}}function Xl(){this.__data__=ks?ks(null):{},this.size=0}function Zl(s){var o=this.has(s)&&delete this.__data__[s];return this.size-=o?1:0,o}function gu(s){var o=this.__data__;if(ks){var d=o[s];return d===i?e:d}return Qt.call(o,s)?o[s]:e}function vu(s){var o=this.__data__;return ks?o[s]!==e:Qt.call(o,s)}function Ql(s,o){var d=this.__data__;return this.size+=this.has(s)?0:1,d[s]=ks&&o===e?i:o,this}ji.prototype.clear=Xl,ji.prototype.delete=Zl,ji.prototype.get=gu,ji.prototype.has=vu,ji.prototype.set=Ql;function oi(s){var o=-1,d=s==null?0:s.length;for(this.clear();++o<d;){var D=s[o];this.set(D[0],D[1])}}function ef(){this.__data__=[],this.size=0}function tn(s){var o=this.__data__,d=ds(o,s);if(d<0)return!1;var D=o.length-1;return d==D?o.pop():hu.call(o,d,1),--this.size,!0}function tf(s){var o=this.__data__,d=ds(o,s);return d<0?e:o[d][1]}function rf(s){return ds(this.__data__,s)>-1}function ma(s,o){var d=this.__data__,D=ds(d,s);return D<0?(++this.size,d.push([s,o])):d[D][1]=o,this}oi.prototype.clear=ef,oi.prototype.delete=tn,oi.prototype.get=tf,oi.prototype.has=rf,oi.prototype.set=ma;function dn(s){var o=-1,d=s==null?0:s.length;for(this.clear();++o<d;){var D=s[o];this.set(D[0],D[1])}}function wa(){this.size=0,this.__data__={hash:new ji,map:new($s||oi),string:new ji}}function yo(s){var o=zo(this,s).delete(s);return this.size-=o?1:0,o}function nf(s){return zo(this,s).get(s)}function Do(s){return zo(this,s).has(s)}function Fo(s,o){var d=zo(this,s),D=d.size;return d.set(s,o),this.size+=d.size==D?0:1,this}dn.prototype.clear=wa,dn.prototype.delete=yo,dn.prototype.get=nf,dn.prototype.has=Do,dn.prototype.set=Fo;function rn(s){var o=-1,d=s==null?0:s.length;for(this.__data__=new dn;++o<d;)this.add(s[o])}function sf(s){return this.__data__.set(s,i),this}function Co(s){return this.__data__.has(s)}rn.prototype.add=rn.prototype.push=sf,rn.prototype.has=Co;function On(s){var o=this.__data__=new oi(s);this.size=o.size}function Rs(){this.__data__=new oi,this.size=0}function Po(s){var o=this.__data__,d=o.delete(s);return this.size=o.size,d}function Io(s){return this.__data__.get(s)}function af(s){return this.__data__.has(s)}function $o(s,o){var d=this.__data__;if(d instanceof oi){var D=d.__data__;if(!$s||D.length<r-1)return D.push([s,o]),this.size=++d.size,this;d=this.__data__=new dn(D)}return d.set(s,o),this.size=d.size,this}On.prototype.clear=Rs,On.prototype.delete=Po,On.prototype.get=Io,On.prototype.has=af,On.prototype.set=$o;function ko(s,o){var d=Ft(s),D=!d&&Ns(s),k=!d&&!D&&Es(s),L=!d&&!D&&!k&&ya(s),J=d||D||k||L,ee=J?ou(s.length,Hl):[],he=ee.length;for(var Re in s)(o||Qt.call(s,Re))&&!(J&&(Re=="length"||k&&(Re=="offset"||Re=="parent")||L&&(Re=="buffer"||Re=="byteLength"||Re=="byteOffset")||Vi(Re,he)))&&ee.push(Re);return ee}function Ro(s){var o=s.length;return o?s[mf(0,o-1)]:e}function uf(s,o){return Go(_n(s),ci(o,0,s.length))}function of(s){return Go(_n(s))}function mu(s,o,d){(d!==e&&!li(s[o],d)||d===e&&!(o in s))&&Zn(s,o,d)}function Si(s,o,d){var D=s[o];(!(Qt.call(s,o)&&li(D,d))||d===e&&!(o in s))&&Zn(s,o,d)}function ds(s,o){for(var d=s.length;d--;)if(li(s[d][0],o))return d;return-1}function cf(s,o,d,D){return _i(s,function(k,L,J){o(D,k,d(k),J)}),D}function Bo(s,o){return s&&yi(o,Yr(o),s)}function xo(s,o){return s&&yi(o,Dn(o),s)}function Zn(s,o,d){o=="__proto__"&&Xn?Xn(s,o,{configurable:!0,enumerable:!0,value:d,writable:!0}):s[o]=d}function gs(s,o){for(var d=-1,D=o.length,k=be(D),L=s==null;++d<D;)k[d]=L?e:qf(s,o[d]);return k}function ci(s,o,d){return s===s&&(d!==e&&(s=s<=d?s:d),o!==e&&(s=s>=o?s:o)),s}function nn(s,o,d,D,k,L){var J,ee=o&m,he=o&S,Re=o&E;if(d&&(J=k?d(s,D,k,L):d(s)),J!==e)return J;if(!Dr(s))return s;var Te=Ft(s);if(Te){if(J=Lv(s),!ee)return _n(s,J)}else{var He=an(s),Qe=He==Bt||He==lr;if(Es(s))return _p(s,ee);if(He==ve||He==Ht||Qe&&!k){if(J=he||Qe?{}:qp(s),!ee)return he?Pv(s,xo(J,s)):Cv(s,Bo(J,s))}else{if(!ur[He])return k?s:{};J=jv(s,He,ee)}}L||(L=new On);var ct=L.get(s);if(ct)return ct;L.set(s,J),md(s)?s.forEach(function(vt){J.add(nn(vt,o,d,vt,s,L))}):gd(s)&&s.forEach(function(vt,jt){J.set(jt,nn(vt,o,d,jt,s,L))});var gt=Re?he?Pf:Cf:he?Dn:Yr,Rt=Te?e:gt(s);return Qr(Rt||s,function(vt,jt){Rt&&(jt=vt,vt=s[jt]),Si(J,jt,nn(vt,o,d,jt,s,L))}),J}function lf(s){var o=Yr(s);return function(d){return wu(d,s,o)}}function wu(s,o,d){var D=d.length;if(s==null)return!D;for(s=sr(s);D--;){var k=d[D],L=o[k],J=s[k];if(J===e&&!(k in s)||!L(J))return!1}return!0}function To(s,o,d){if(typeof s!="function")throw new En(u);return Fu(function(){s.apply(e,d)},o)}function Bs(s,o,d,D){var k=-1,L=ra,J=!0,ee=s.length,he=[],Re=o.length;if(!ee)return he;d&&(o=vr(o,hn(d))),D?(L=ru,J=!1):o.length>=r&&(L=Ps,J=!1,o=new rn(o));e:for(;++k<ee;){var Te=s[k],He=d==null?Te:d(Te);if(Te=D||Te!==0?Te:0,J&&He===He){for(var Qe=Re;Qe--;)if(o[Qe]===He)continue e;he.push(Te)}else L(o,He,D)||he.push(Te)}return he}var _i=Pp(ut),bu=Pp(Au,!0);function ba(s,o){var d=!0;return _i(s,function(D,k,L){return d=!!o(D,k,L),d}),d}function Nn(s,o,d){for(var D=-1,k=s.length;++D<k;){var L=s[D],J=o(L);if(J!=null&&(ee===e?J===J&&!Ln(J):d(J,ee)))var ee=J,he=L}return he}function ff(s,o,d,D){var k=s.length;for(d=$t(d),d<0&&(d=-d>k?0:k+d),D=D===e||D>k?k:$t(D),D<0&&(D+=k),D=d>D?0:bd(D);d<D;)s[d++]=o;return s}function vs(s,o){var d=[];return _i(s,function(D,k,L){o(D,k,L)&&d.push(D)}),d}function Ur(s,o,d,D,k){var L=-1,J=s.length;for(d||(d=qv),k||(k=[]);++L<J;){var ee=s[L];o>0&&d(ee)?o>1?Ur(ee,o-1,d,D,k):bi(k,ee):D||(k[k.length]=ee)}return k}var xs=Ip(),Oo=Ip(!0);function ut(s,o){return s&&xs(s,o,Yr)}function Au(s,o){return s&&Oo(s,o,Yr)}function ms(s,o){return wi(o,function(d){return Ki(s[d])})}function Mi(s,o){o=bs(o,s);for(var d=0,D=o.length;s!=null&&d<D;)s=s[Di(o[d++])];return d&&d==D?s:e}function Eu(s,o,d){var D=o(s);return Ft(s)?D:bi(D,d(s))}function Vr(s){return s==null?s===e?l:$e:os&&os in sr(s)?Ov(s):Yv(s)}function Aa(s,o){return s>o}function f(s,o){return s!=null&&Qt.call(s,o)}function F(s,o){return s!=null&&o in sr(s)}function T(s,o,d){return s>=qr(o,d)&&s<Cr(o,d)}function B(s,o,d){for(var D=d?ru:ra,k=s[0].length,L=s.length,J=L,ee=be(L),he=1/0,Re=[];J--;){var Te=s[J];J&&o&&(Te=vr(Te,hn(o))),he=qr(Te.length,he),ee[J]=!d&&(o||k>=120&&Te.length>=120)?new rn(J&&Te):e}Te=s[0];var He=-1,Qe=ee[0];e:for(;++He<k&&Re.length<he;){var ct=Te[He],gt=o?o(ct):ct;if(ct=d||ct!==0?ct:0,!(Qe?Ps(Qe,gt):D(Re,gt,d))){for(J=L;--J;){var Rt=ee[J];if(!(Rt?Ps(Rt,gt):D(s[J],gt,d)))continue e}Qe&&Qe.push(gt),Re.push(ct)}}return Re}function ie(s,o,d,D){return ut(s,function(k,L,J){o(D,d(k),L,J)}),D}function ce(s,o,d){o=bs(o,s),s=zp(s,o);var D=s==null?s:s[Di(ti(o))];return D==null?e:fn(D,s,d)}function nt(s){return Pr(s)&&Vr(s)==Ht}function mt(s){return Pr(s)&&Vr(s)==X}function sn(s){return Pr(s)&&Vr(s)==cr}function Qn(s,o,d,D,k){return s===o?!0:s==null||o==null||!Pr(s)&&!Pr(o)?s!==s&&o!==o:Su(s,o,d,D,Qn,k)}function Su(s,o,d,D,k,L){var J=Ft(s),ee=Ft(o),he=J?Lt:an(s),Re=ee?Lt:an(o);he=he==Ht?ve:he,Re=Re==Ht?ve:Re;var Te=he==ve,He=Re==ve,Qe=he==Re;if(Qe&&Es(s)){if(!Es(o))return!1;J=!0,Te=!1}if(Qe&&!Te)return L||(L=new On),J||ya(s)?Lp(s,o,d,D,k,L):xv(s,o,he,d,D,k,L);if(!(d&v)){var ct=Te&&Qt.call(s,"__wrapped__"),gt=He&&Qt.call(o,"__wrapped__");if(ct||gt){var Rt=ct?s.value():s,vt=gt?o.value():o;return L||(L=new On),k(Rt,vt,d,D,L)}}return Qe?(L||(L=new On),Tv(s,o,d,D,k,L)):!1}function hf(s){return Pr(s)&&an(s)==At}function pf(s,o,d,D){var k=d.length,L=k,J=!D;if(s==null)return!L;for(s=sr(s);k--;){var ee=d[k];if(J&&ee[2]?ee[1]!==s[ee[0]]:!(ee[0]in s))return!1}for(;++k<L;){ee=d[k];var he=ee[0],Re=s[he],Te=ee[1];if(J&&ee[2]){if(Re===e&&!(he in s))return!1}else{var He=new On;if(D)var Qe=D(Re,Te,he,s,o,He);if(!(Qe===e?Qn(Te,Re,v|g,D,He):Qe))return!1}}return!0}function up(s){if(!Dr(s)||Vv(s))return!1;var o=Ki(s)?y:qt;return o.test(Os(s))}function cv(s){return Pr(s)&&Vr(s)==de}function lv(s){return Pr(s)&&an(s)==W}function fv(s){return Pr(s)&&Qo(s.length)&&!!hr[Vr(s)]}function op(s){return typeof s=="function"?s:s==null?Fn:typeof s=="object"?Ft(s)?fp(s[0],s[1]):lp(s):$d(s)}function df(s){if(!Du(s))return Vl(s);var o=[];for(var d in sr(s))Qt.call(s,d)&&d!="constructor"&&o.push(d);return o}function hv(s){if(!Dr(s))return Wv(s);var o=Du(s),d=[];for(var D in s)D=="constructor"&&(o||!Qt.call(s,D))||d.push(D);return d}function gf(s,o){return s<o}function cp(s,o){var d=-1,D=yn(s)?be(s.length):[];return _i(s,function(k,L,J){D[++d]=o(k,L,J)}),D}function lp(s){var o=$f(s);return o.length==1&&o[0][2]?Vp(o[0][0],o[0][1]):function(d){return d===s||pf(d,s,o)}}function fp(s,o){return Rf(s)&&Up(o)?Vp(Di(s),o):function(d){var D=qf(d,s);return D===e&&D===o?Uf(d,s):Qn(o,D,v|g)}}function No(s,o,d,D,k){s!==o&&xs(o,function(L,J){if(k||(k=new On),Dr(L))pv(s,o,J,d,No,D,k);else{var ee=D?D(xf(s,J),L,J+"",s,o,k):e;ee===e&&(ee=L),mu(s,J,ee)}},Dn)}function pv(s,o,d,D,k,L,J){var ee=xf(s,d),he=xf(o,d),Re=J.get(he);if(Re){mu(s,d,Re);return}var Te=L?L(ee,he,d+"",s,o,J):e,He=Te===e;if(He){var Qe=Ft(he),ct=!Qe&&Es(he),gt=!Qe&&!ct&&ya(he);Te=he,Qe||ct||gt?Ft(ee)?Te=ee:xr(ee)?Te=_n(ee):ct?(He=!1,Te=_p(he,!0)):gt?(He=!1,Te=yp(he,!0)):Te=[]:Cu(he)||Ns(he)?(Te=ee,Ns(ee)?Te=Ad(ee):(!Dr(ee)||Ki(ee))&&(Te=qp(he))):He=!1}He&&(J.set(he,Te),k(Te,he,D,L,J),J.delete(he)),mu(s,d,Te)}function hp(s,o){var d=s.length;if(d)return o+=o<0?d:0,Vi(o,d)?s[o]:e}function pp(s,o,d){o.length?o=vr(o,function(L){return Ft(L)?function(J){return Mi(J,L.length===1?L[0]:L)}:L}):o=[Fn];var D=-1;o=vr(o,hn(pt()));var k=cp(s,function(L,J,ee){var he=vr(o,function(Re){return Re(L)});return{criteria:he,index:++D,value:L}});return El(k,function(L,J){return Fv(L,J,d)})}function dv(s,o){return dp(s,o,function(d,D){return Uf(s,D)})}function dp(s,o,d){for(var D=-1,k=o.length,L={};++D<k;){var J=o[D],ee=Mi(s,J);d(ee,J)&&_u(L,bs(J,s),ee)}return L}function gv(s){return function(o){return Mi(o,s)}}function vf(s,o,d,D){var k=D?Al:ui,L=-1,J=o.length,ee=s;for(s===o&&(o=_n(o)),d&&(ee=vr(s,hn(d)));++L<J;)for(var he=0,Re=o[L],Te=d?d(Re):Re;(he=k(ee,Te,he,D))>-1;)ee!==s&&hu.call(ee,he,1),hu.call(s,he,1);return s}function gp(s,o){for(var d=s?o.length:0,D=d-1;d--;){var k=o[d];if(d==D||k!==L){var L=k;Vi(k)?hu.call(s,k,1):Af(s,k)}}return s}function mf(s,o){return s+fa(Ao()*(o-s+1))}function vv(s,o,d,D){for(var k=-1,L=Cr(la((o-s)/(d||1)),0),J=be(L);L--;)J[D?L:++k]=s,s+=d;return J}function wf(s,o){var d="";if(!s||o<1||o>te)return d;do o%2&&(d+=s),o=fa(o/2),o&&(s+=s);while(o);return d}function Ot(s,o){return Tf(Kp(s,o,Fn),s+"")}function mv(s){return Ro(Da(s))}function wv(s,o){var d=Da(s);return Go(d,ci(o,0,d.length))}function _u(s,o,d,D){if(!Dr(s))return s;o=bs(o,s);for(var k=-1,L=o.length,J=L-1,ee=s;ee!=null&&++k<L;){var he=Di(o[k]),Re=d;if(he==="__proto__"||he==="constructor"||he==="prototype")return s;if(k!=J){var Te=ee[he];Re=D?D(Te,he,ee):e,Re===e&&(Re=Dr(Te)?Te:Vi(o[k+1])?[]:{})}Si(ee,he,Re),ee=ee[he]}return s}var vp=pa?function(s,o){return pa.set(s,o),s}:Fn,bv=Xn?function(s,o){return Xn(s,"toString",{configurable:!0,enumerable:!1,value:Kf(o),writable:!0})}:Fn;function Av(s){return Go(Da(s))}function ei(s,o,d){var D=-1,k=s.length;o<0&&(o=-o>k?0:k+o),d=d>k?k:d,d<0&&(d+=k),k=o>d?0:d-o>>>0,o>>>=0;for(var L=be(k);++D<k;)L[D]=s[D+o];return L}function Ev(s,o){var d;return _i(s,function(D,k,L){return d=o(D,k,L),!d}),!!d}function Ho(s,o,d){var D=0,k=s==null?D:s.length;if(typeof o=="number"&&o===o&&k<=Ct){for(;D<k;){var L=D+k>>>1,J=s[L];J!==null&&!Ln(J)&&(d?J<=o:J<o)?D=L+1:k=L}return k}return bf(s,o,Fn,d)}function bf(s,o,d,D){var k=0,L=s==null?0:s.length;if(L===0)return 0;o=d(o);for(var J=o!==o,ee=o===null,he=Ln(o),Re=o===e;k<L;){var Te=fa((k+L)/2),He=d(s[Te]),Qe=He!==e,ct=He===null,gt=He===He,Rt=Ln(He);if(J)var vt=D||gt;else Re?vt=gt&&(D||Qe):ee?vt=gt&&Qe&&(D||!ct):he?vt=gt&&Qe&&!ct&&(D||!Rt):ct||Rt?vt=!1:vt=D?He<=o:He<o;vt?k=Te+1:L=Te}return qr(L,ot)}function mp(s,o){for(var d=-1,D=s.length,k=0,L=[];++d<D;){var J=s[d],ee=o?o(J):J;if(!d||!li(ee,he)){var he=ee;L[k++]=J===0?0:J}}return L}function wp(s){return typeof s=="number"?s:Ln(s)?st:+s}function Hn(s){if(typeof s=="string")return s;if(Ft(s))return vr(s,Hn)+"";if(Ln(s))return va?va.call(s):"";var o=s+"";return o=="0"&&1/s==-z?"-0":o}function ws(s,o,d){var D=-1,k=ra,L=s.length,J=!0,ee=[],he=ee;if(d)J=!1,k=ru;else if(L>=r){var Re=o?null:Rv(s);if(Re)return ia(Re);J=!1,k=Ps,he=new rn}else he=o?[]:ee;e:for(;++D<L;){var Te=s[D],He=o?o(Te):Te;if(Te=d||Te!==0?Te:0,J&&He===He){for(var Qe=he.length;Qe--;)if(he[Qe]===He)continue e;o&&he.push(He),ee.push(Te)}else k(he,He,d)||(he!==ee&&he.push(He),ee.push(Te))}return ee}function Af(s,o){return o=bs(o,s),s=zp(s,o),s==null||delete s[Di(ti(o))]}function bp(s,o,d,D){return _u(s,o,d(Mi(s,o)),D)}function Lo(s,o,d,D){for(var k=s.length,L=D?k:-1;(D?L--:++L<k)&&o(s[L],L,s););return d?ei(s,D?0:L,D?L+1:k):ei(s,D?L+1:0,D?k:L)}function Ap(s,o){var d=s;return d instanceof Tt&&(d=d.value()),nu(o,function(D,k){return k.func.apply(k.thisArg,bi([D],k.args))},d)}function Ef(s,o,d){var D=s.length;if(D<2)return D?ws(s[0]):[];for(var k=-1,L=be(D);++k<D;)for(var J=s[k],ee=-1;++ee<D;)ee!=k&&(L[k]=Bs(L[k]||J,s[ee],o,d));return ws(Ur(L,1),o,d)}function Ep(s,o,d){for(var D=-1,k=s.length,L=o.length,J={};++D<k;){var ee=D<L?o[D]:e;d(J,s[D],ee)}return J}function Sf(s){return xr(s)?s:[]}function _f(s){return typeof s=="function"?s:Fn}function bs(s,o){return Ft(s)?s:Rf(s,o)?[s]:Jp(tr(s))}var Sv=Ot;function As(s,o,d){var D=s.length;return d=d===e?D:d,!o&&d>=D?s:ei(s,o,d)}var Sp=ca||function(s){return Lr.clearTimeout(s)};function _p(s,o){if(o)return s.slice();var d=s.length,D=Is?Is(d):new s.constructor(d);return s.copy(D),D}function yf(s){var o=new s.constructor(s.byteLength);return new en(o).set(new en(s)),o}function _v(s,o){var d=o?yf(s.buffer):s.buffer;return new s.constructor(d,s.byteOffset,s.byteLength)}function yv(s){var o=new s.constructor(s.source,Me.exec(s));return o.lastIndex=s.lastIndex,o}function Dv(s){return fs?sr(fs.call(s)):{}}function yp(s,o){var d=o?yf(s.buffer):s.buffer;return new s.constructor(d,s.byteOffset,s.length)}function Dp(s,o){if(s!==o){var d=s!==e,D=s===null,k=s===s,L=Ln(s),J=o!==e,ee=o===null,he=o===o,Re=Ln(o);if(!ee&&!Re&&!L&&s>o||L&&J&&he&&!ee&&!Re||D&&J&&he||!d&&he||!k)return 1;if(!D&&!L&&!Re&&s<o||Re&&d&&k&&!D&&!L||ee&&d&&k||!J&&k||!he)return-1}return 0}function Fv(s,o,d){for(var D=-1,k=s.criteria,L=o.criteria,J=k.length,ee=d.length;++D<J;){var he=Dp(k[D],L[D]);if(he){if(D>=ee)return he;var Re=d[D];return he*(Re=="desc"?-1:1)}}return s.index-o.index}function Fp(s,o,d,D){for(var k=-1,L=s.length,J=d.length,ee=-1,he=o.length,Re=Cr(L-J,0),Te=be(he+Re),He=!D;++ee<he;)Te[ee]=o[ee];for(;++k<J;)(He||k<L)&&(Te[d[k]]=s[k]);for(;Re--;)Te[ee++]=s[k++];return Te}function Cp(s,o,d,D){for(var k=-1,L=s.length,J=-1,ee=d.length,he=-1,Re=o.length,Te=Cr(L-ee,0),He=be(Te+Re),Qe=!D;++k<Te;)He[k]=s[k];for(var ct=k;++he<Re;)He[ct+he]=o[he];for(;++J<ee;)(Qe||k<L)&&(He[ct+d[J]]=s[k++]);return He}function _n(s,o){var d=-1,D=s.length;for(o||(o=be(D));++d<D;)o[d]=s[d];return o}function yi(s,o,d,D){var k=!d;d||(d={});for(var L=-1,J=o.length;++L<J;){var ee=o[L],he=D?D(d[ee],s[ee],ee,d,s):e;he===e&&(he=s[ee]),k?Zn(d,ee,he):Si(d,ee,he)}return d}function Cv(s,o){return yi(s,kf(s),o)}function Pv(s,o){return yi(s,jp(s),o)}function jo(s,o){return function(d,D){var k=Ft(d)?dl:cf,L=o?o():{};return k(d,s,pt(D,2),L)}}function Ea(s){return Ot(function(o,d){var D=-1,k=d.length,L=k>1?d[k-1]:e,J=k>2?d[2]:e;for(L=s.length>3&&typeof L=="function"?(k--,L):e,J&&gn(d[0],d[1],J)&&(L=k<3?e:L,k=1),o=sr(o);++D<k;){var ee=d[D];ee&&s(o,ee,D,L)}return o})}function Pp(s,o){return function(d,D){if(d==null)return d;if(!yn(d))return s(d,D);for(var k=d.length,L=o?k:-1,J=sr(d);(o?L--:++L<k)&&D(J[L],L,J)!==!1;);return d}}function Ip(s){return function(o,d,D){for(var k=-1,L=sr(o),J=D(o),ee=J.length;ee--;){var he=J[s?ee:++k];if(d(L[he],he,L)===!1)break}return o}}function Iv(s,o,d){var D=o&b,k=yu(s);function L(){var J=this&&this!==Lr&&this instanceof L?k:s;return J.apply(D?d:this,arguments)}return L}function $p(s){return function(o){o=tr(o);var d=is(o)?xn(o):e,D=d?d[0]:o.charAt(0),k=d?As(d,1).join(""):o.slice(1);return D[s]()+k}}function Sa(s){return function(o){return nu(Pd(Cd(o).replace(rl,"")),s,"")}}function yu(s){return function(){var o=arguments;switch(o.length){case 0:return new s;case 1:return new s(o[0]);case 2:return new s(o[0],o[1]);case 3:return new s(o[0],o[1],o[2]);case 4:return new s(o[0],o[1],o[2],o[3]);case 5:return new s(o[0],o[1],o[2],o[3],o[4]);case 6:return new s(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return new s(o[0],o[1],o[2],o[3],o[4],o[5],o[6])}var d=hs(s.prototype),D=s.apply(d,o);return Dr(D)?D:d}}function $v(s,o,d){var D=yu(s);function k(){for(var L=arguments.length,J=be(L),ee=L,he=_a(k);ee--;)J[ee]=arguments[ee];var Re=L<3&&J[0]!==he&&J[L-1]!==he?[]:Ai(J,he);if(L-=Re.length,L<d)return Tp(s,o,Mo,k.placeholder,e,J,Re,e,e,d-L);var Te=this&&this!==Lr&&this instanceof k?D:s;return fn(Te,this,J)}return k}function kp(s){return function(o,d,D){var k=sr(o);if(!yn(o)){var L=pt(d,3);o=Yr(o),d=function(ee){return L(k[ee],ee,k)}}var J=s(o,d,D);return J>-1?k[L?o[J]:J]:e}}function Rp(s){return Ui(function(o){var d=o.length,D=d,k=Sn.prototype.thru;for(s&&o.reverse();D--;){var L=o[D];if(typeof L!="function")throw new En(u);if(k&&!J&&Ko(L)=="wrapper")var J=new Sn([],!0)}for(D=J?D:d;++D<d;){L=o[D];var ee=Ko(L),he=ee=="wrapper"?If(L):e;he&&Bf(he[0])&&he[1]==(H|A|x|ne)&&!he[4].length&&he[9]==1?J=J[Ko(he[0])].apply(J,he[3]):J=L.length==1&&Bf(L)?J[ee]():J.thru(L)}return function(){var Re=arguments,Te=Re[0];if(J&&Re.length==1&&Ft(Te))return J.plant(Te).value();for(var He=0,Qe=d?o[He].apply(this,Re):Te;++He<d;)Qe=o[He].call(this,Qe);return Qe}})}function Mo(s,o,d,D,k,L,J,ee,he,Re){var Te=o&H,He=o&b,Qe=o&w,ct=o&(A|C),gt=o&pe,Rt=Qe?e:yu(s);function vt(){for(var jt=arguments.length,Kt=be(jt),jn=jt;jn--;)Kt[jn]=arguments[jn];if(ct)var vn=_a(vt),Mn=_l(Kt,vn);if(D&&(Kt=Fp(Kt,D,k,ct)),L&&(Kt=Cp(Kt,L,J,ct)),jt-=Mn,ct&&jt<Re){var Tr=Ai(Kt,vn);return Tp(s,o,Mo,vt.placeholder,d,Kt,Tr,ee,he,Re-jt)}var fi=He?d:this,Gi=Qe?fi[s]:s;return jt=Kt.length,ee?Kt=Jv(Kt,ee):gt&&jt>1&&Kt.reverse(),Te&&he<jt&&(Kt.length=he),this&&this!==Lr&&this instanceof vt&&(Gi=Rt||yu(Gi)),Gi.apply(fi,Kt)}return vt}function Bp(s,o){return function(d,D){return ie(d,s,o(D),{})}}function qo(s,o){return function(d,D){var k;if(d===e&&D===e)return o;if(d!==e&&(k=d),D!==e){if(k===e)return D;typeof d=="string"||typeof D=="string"?(d=Hn(d),D=Hn(D)):(d=wp(d),D=wp(D)),k=s(d,D)}return k}}function Df(s){return Ui(function(o){return o=vr(o,hn(pt())),Ot(function(d){var D=this;return s(o,function(k){return fn(k,D,d)})})})}function Uo(s,o){o=o===e?" ":Hn(o);var d=o.length;if(d<2)return d?wf(o,s):o;var D=wf(o,la(s/ss(o)));return is(o)?As(xn(D),0,s).join(""):D.slice(0,s)}function kv(s,o,d,D){var k=o&b,L=yu(s);function J(){for(var ee=-1,he=arguments.length,Re=-1,Te=D.length,He=be(Te+he),Qe=this&&this!==Lr&&this instanceof J?L:s;++Re<Te;)He[Re]=D[Re];for(;he--;)He[Re++]=arguments[++ee];return fn(Qe,k?d:this,He)}return J}function xp(s){return function(o,d,D){return D&&typeof D!="number"&&gn(o,d,D)&&(d=D=e),o=zi(o),d===e?(d=o,o=0):d=zi(d),D=D===e?o<d?1:-1:zi(D),vv(o,d,D,s)}}function Vo(s){return function(o,d){return typeof o=="string"&&typeof d=="string"||(o=ri(o),d=ri(d)),s(o,d)}}function Tp(s,o,d,D,k,L,J,ee,he,Re){var Te=o&A,He=Te?J:e,Qe=Te?e:J,ct=Te?L:e,gt=Te?e:L;o|=Te?x:N,o&=~(Te?N:x),o&_||(o&=~(b|w));var Rt=[s,o,k,ct,He,gt,Qe,ee,he,Re],vt=d.apply(e,Rt);return Bf(s)&&Gp(vt,Rt),vt.placeholder=D,Wp(vt,s,o)}function Ff(s){var o=Br[s];return function(d,D){if(d=ri(d),D=D==null?0:qr($t(D),292),D&&cs(d)){var k=(tr(d)+"e").split("e"),L=o(k[0]+"e"+(+k[1]+D));return k=(tr(L)+"e").split("e"),+(k[0]+"e"+(+k[1]-D))}return o(d)}}var Rv=Hi&&1/ia(new Hi([,-0]))[1]==z?function(s){return new Hi(s)}:Wf;function Op(s){return function(o){var d=an(o);return d==At?lu(o):d==W?$l(o):Sl(o,s(o))}}function qi(s,o,d,D,k,L,J,ee){var he=o&w;if(!he&&typeof s!="function")throw new En(u);var Re=D?D.length:0;if(Re||(o&=~(x|N),D=k=e),J=J===e?J:Cr($t(J),0),ee=ee===e?ee:$t(ee),Re-=k?k.length:0,o&N){var Te=D,He=k;D=k=e}var Qe=he?e:If(s),ct=[s,o,d,D,k,Te,He,L,J,ee];if(Qe&&Gv(ct,Qe),s=ct[0],o=ct[1],d=ct[2],D=ct[3],k=ct[4],ee=ct[9]=ct[9]===e?he?0:s.length:Cr(ct[9]-Re,0),!ee&&o&(A|C)&&(o&=~(A|C)),!o||o==b)var gt=Iv(s,o,d);else o==A||o==C?gt=$v(s,o,ee):(o==x||o==(b|x))&&!k.length?gt=kv(s,o,d,D):gt=Mo.apply(e,ct);var Rt=Qe?vp:Gp;return Wp(Rt(gt,ct),s,o)}function Np(s,o,d,D){return s===e||li(s,as[d])&&!Qt.call(D,d)?o:s}function Hp(s,o,d,D,k,L){return Dr(s)&&Dr(o)&&(L.set(o,s),No(s,o,e,Hp,L),L.delete(o)),s}function Bv(s){return Cu(s)?e:s}function Lp(s,o,d,D,k,L){var J=d&v,ee=s.length,he=o.length;if(ee!=he&&!(J&&he>ee))return!1;var Re=L.get(s),Te=L.get(o);if(Re&&Te)return Re==o&&Te==s;var He=-1,Qe=!0,ct=d&g?new rn:e;for(L.set(s,o),L.set(o,s);++He<ee;){var gt=s[He],Rt=o[He];if(D)var vt=J?D(Rt,gt,He,o,s,L):D(gt,Rt,He,s,o,L);if(vt!==e){if(vt)continue;Qe=!1;break}if(ct){if(!iu(o,function(jt,Kt){if(!Ps(ct,Kt)&&(gt===jt||k(gt,jt,d,D,L)))return ct.push(Kt)})){Qe=!1;break}}else if(!(gt===Rt||k(gt,Rt,d,D,L))){Qe=!1;break}}return L.delete(s),L.delete(o),Qe}function xv(s,o,d,D,k,L,J){switch(d){case re:if(s.byteLength!=o.byteLength||s.byteOffset!=o.byteOffset)return!1;s=s.buffer,o=o.buffer;case X:return!(s.byteLength!=o.byteLength||!L(new en(s),new en(o)));case Ar:case cr:case Be:return li(+s,+o);case _r:return s.name==o.name&&s.message==o.message;case de:case I:return s==o+"";case At:var ee=lu;case W:var he=D&v;if(ee||(ee=ia),s.size!=o.size&&!he)return!1;var Re=J.get(s);if(Re)return Re==o;D|=g,J.set(s,o);var Te=Lp(ee(s),ee(o),D,k,L,J);return J.delete(s),Te;case M:if(fs)return fs.call(s)==fs.call(o)}return!1}function Tv(s,o,d,D,k,L){var J=d&v,ee=Cf(s),he=ee.length,Re=Cf(o),Te=Re.length;if(he!=Te&&!J)return!1;for(var He=he;He--;){var Qe=ee[He];if(!(J?Qe in o:Qt.call(o,Qe)))return!1}var ct=L.get(s),gt=L.get(o);if(ct&&gt)return ct==o&&gt==s;var Rt=!0;L.set(s,o),L.set(o,s);for(var vt=J;++He<he;){Qe=ee[He];var jt=s[Qe],Kt=o[Qe];if(D)var jn=J?D(Kt,jt,Qe,o,s,L):D(jt,Kt,Qe,s,o,L);if(!(jn===e?jt===Kt||k(jt,Kt,d,D,L):jn)){Rt=!1;break}vt||(vt=Qe=="constructor")}if(Rt&&!vt){var vn=s.constructor,Mn=o.constructor;vn!=Mn&&"constructor"in s&&"constructor"in o&&!(typeof vn=="function"&&vn instanceof vn&&typeof Mn=="function"&&Mn instanceof Mn)&&(Rt=!1)}return L.delete(s),L.delete(o),Rt}function Ui(s){return Tf(Kp(s,e,ed),s+"")}function Cf(s){return Eu(s,Yr,kf)}function Pf(s){return Eu(s,Dn,jp)}var If=pa?function(s){return pa.get(s)}:Wf;function Ko(s){for(var o=s.name+"",d=Li[o],D=Qt.call(Li,o)?d.length:0;D--;){var k=d[D],L=k.func;if(L==null||L==s)return k.name}return o}function _a(s){var o=Qt.call(O,"placeholder")?O:s;return o.placeholder}function pt(){var s=O.iteratee||zf;return s=s===zf?op:s,arguments.length?s(arguments[0],arguments[1]):s}function zo(s,o){var d=s.__data__;return Uv(o)?d[typeof o=="string"?"string":"hash"]:d.map}function $f(s){for(var o=Yr(s),d=o.length;d--;){var D=o[d],k=s[D];o[d]=[D,k,Up(k)]}return o}function Ts(s,o){var d=Cl(s,o);return up(d)?d:e}function Ov(s){var o=Qt.call(s,os),d=s[os];try{s[os]=e;var D=!0}catch{}var k=oa.call(s);return D&&(o?s[os]=d:delete s[os]),k}var kf=Tn?function(s){return s==null?[]:(s=sr(s),wi(Tn(s),function(o){return wo.call(s,o)}))}:Yf,jp=Tn?function(s){for(var o=[];s;)bi(o,kf(s)),s=ge(s);return o}:Yf,an=Vr;(ha&&an(new ha(new ArrayBuffer(1)))!=re||$s&&an(new $s)!=At||pu&&an(pu.resolve())!=Se||Hi&&an(new Hi)!=W||ls&&an(new ls)!=U)&&(an=function(s){var o=Vr(s),d=o==ve?s.constructor:e,D=d?Os(d):"";if(D)switch(D){case So:return re;case da:return At;case Gl:return Se;case Wl:return W;case Yl:return U}return o});function Nv(s,o,d){for(var D=-1,k=d.length;++D<k;){var L=d[D],J=L.size;switch(L.type){case"drop":s+=J;break;case"dropRight":o-=J;break;case"take":o=qr(o,s+J);break;case"takeRight":s=Cr(s,o-J);break}}return{start:s,end:o}}function Hv(s){var o=s.match(Ue);return o?o[1].split(Ke):[]}function Mp(s,o,d){o=bs(o,s);for(var D=-1,k=o.length,L=!1;++D<k;){var J=Di(o[D]);if(!(L=s!=null&&d(s,J)))break;s=s[J]}return L||++D!=k?L:(k=s==null?0:s.length,!!k&&Qo(k)&&Vi(J,k)&&(Ft(s)||Ns(s)))}function Lv(s){var o=s.length,d=new s.constructor(o);return o&&typeof s[0]=="string"&&Qt.call(s,"index")&&(d.index=s.index,d.input=s.input),d}function qp(s){return typeof s.constructor=="function"&&!Du(s)?hs(ge(s)):{}}function jv(s,o,d){var D=s.constructor;switch(o){case X:return yf(s);case Ar:case cr:return new D(+s);case re:return _v(s,d);case _e:case ue:case Ae:case Oe:case Ee:case Z:case Ce:case Pe:case Le:return yp(s,d);case At:return new D;case Be:case I:return new D(s);case de:return yv(s);case W:return new D;case M:return Dv(s)}}function Mv(s,o){var d=o.length;if(!d)return s;var D=d-1;return o[D]=(d>1?"& ":"")+o[D],o=o.join(d>2?", ":" "),s.replace(fe,`{
/* [wrapped with `+o+`] */
`)}function qv(s){return Ft(s)||Ns(s)||!!(Ul&&s&&s[Ul])}function Vi(s,o){var d=typeof s;return o=o??te,!!o&&(d=="number"||d!="symbol"&&et.test(s))&&s>-1&&s%1==0&&s<o}function gn(s,o,d){if(!Dr(d))return!1;var D=typeof o;return(D=="number"?yn(d)&&Vi(o,d.length):D=="string"&&o in d)?li(d[o],s):!1}function Rf(s,o){if(Ft(s))return!1;var d=typeof s;return d=="number"||d=="symbol"||d=="boolean"||s==null||Ln(s)?!0:Wr.test(s)||!dr.test(s)||o!=null&&s in sr(o)}function Uv(s){var o=typeof s;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?s!=="__proto__":s===null}function Bf(s){var o=Ko(s),d=O[o];if(typeof d!="function"||!(o in Tt.prototype))return!1;if(s===d)return!0;var D=If(d);return!!D&&s===D[0]}function Vv(s){return!!mo&&mo in s}var Kv=aa?Ki:Jf;function Du(s){var o=s&&s.constructor,d=typeof o=="function"&&o.prototype||as;return s===d}function Up(s){return s===s&&!Dr(s)}function Vp(s,o){return function(d){return d==null?!1:d[s]===o&&(o!==e||s in sr(d))}}function zv(s){var o=Xo(s,function(D){return d.size===c&&d.clear(),D}),d=o.cache;return o}function Gv(s,o){var d=s[1],D=o[1],k=d|D,L=k<(b|w|H),J=D==H&&d==A||D==H&&d==ne&&s[7].length<=o[8]||D==(H|ne)&&o[7].length<=o[8]&&d==A;if(!(L||J))return s;D&b&&(s[2]=o[2],k|=d&b?0:_);var ee=o[3];if(ee){var he=s[3];s[3]=he?Fp(he,ee,o[4]):ee,s[4]=he?Ai(s[3],h):o[4]}return ee=o[5],ee&&(he=s[5],s[5]=he?Cp(he,ee,o[6]):ee,s[6]=he?Ai(s[5],h):o[6]),ee=o[7],ee&&(s[7]=ee),D&H&&(s[8]=s[8]==null?o[8]:qr(s[8],o[8])),s[9]==null&&(s[9]=o[9]),s[0]=o[0],s[1]=k,s}function Wv(s){var o=[];if(s!=null)for(var d in sr(s))o.push(d);return o}function Yv(s){return oa.call(s)}function Kp(s,o,d){return o=Cr(o===e?s.length-1:o,0),function(){for(var D=arguments,k=-1,L=Cr(D.length-o,0),J=be(L);++k<L;)J[k]=D[o+k];k=-1;for(var ee=be(o+1);++k<o;)ee[k]=D[k];return ee[o]=d(J),fn(s,this,ee)}}function zp(s,o){return o.length<2?s:Mi(s,ei(o,0,-1))}function Jv(s,o){for(var d=s.length,D=qr(o.length,d),k=_n(s);D--;){var L=o[D];s[D]=Vi(L,d)?k[L]:e}return s}function xf(s,o){if(!(o==="constructor"&&typeof s[o]=="function")&&o!="__proto__")return s[o]}var Gp=Yp(vp),Fu=yr||function(s,o){return Lr.setTimeout(s,o)},Tf=Yp(bv);function Wp(s,o,d){var D=o+"";return Tf(s,Mv(D,Xv(Hv(D),d)))}function Yp(s){var o=0,d=0;return function(){var D=Kl(),k=R-(D-d);if(d=D,k>0){if(++o>=j)return arguments[0]}else o=0;return s.apply(e,arguments)}}function Go(s,o){var d=-1,D=s.length,k=D-1;for(o=o===e?D:o;++d<o;){var L=mf(d,k),J=s[L];s[L]=s[d],s[d]=J}return s.length=o,s}var Jp=zv(function(s){var o=[];return s.charCodeAt(0)===46&&o.push(""),s.replace(xt,function(d,D,k,L){o.push(k?L.replace(Ze,"$1"):D||d)}),o});function Di(s){if(typeof s=="string"||Ln(s))return s;var o=s+"";return o=="0"&&1/s==-z?"-0":o}function Os(s){if(s!=null){try{return ua.call(s)}catch{}try{return s+""}catch{}}return""}function Xv(s,o){return Qr(yt,function(d){var D="_."+d[0];o&d[1]&&!ra(s,D)&&s.push(D)}),s.sort()}function Xp(s){if(s instanceof Tt)return s.clone();var o=new Sn(s.__wrapped__,s.__chain__);return o.__actions__=_n(s.__actions__),o.__index__=s.__index__,o.__values__=s.__values__,o}function Zv(s,o,d){(d?gn(s,o,d):o===e)?o=1:o=Cr($t(o),0);var D=s==null?0:s.length;if(!D||o<1)return[];for(var k=0,L=0,J=be(la(D/o));k<D;)J[L++]=ei(s,k,k+=o);return J}function Qv(s){for(var o=-1,d=s==null?0:s.length,D=0,k=[];++o<d;){var L=s[o];L&&(k[D++]=L)}return k}function em(){var s=arguments.length;if(!s)return[];for(var o=be(s-1),d=arguments[0],D=s;D--;)o[D-1]=arguments[D];return bi(Ft(d)?_n(d):[d],Ur(o,1))}var tm=Ot(function(s,o){return xr(s)?Bs(s,Ur(o,1,xr,!0)):[]}),rm=Ot(function(s,o){var d=ti(o);return xr(d)&&(d=e),xr(s)?Bs(s,Ur(o,1,xr,!0),pt(d,2)):[]}),nm=Ot(function(s,o){var d=ti(o);return xr(d)&&(d=e),xr(s)?Bs(s,Ur(o,1,xr,!0),e,d):[]});function im(s,o,d){var D=s==null?0:s.length;return D?(o=d||o===e?1:$t(o),ei(s,o<0?0:o,D)):[]}function sm(s,o,d){var D=s==null?0:s.length;return D?(o=d||o===e?1:$t(o),o=D-o,ei(s,0,o<0?0:o)):[]}function am(s,o){return s&&s.length?Lo(s,pt(o,3),!0,!0):[]}function um(s,o){return s&&s.length?Lo(s,pt(o,3),!0):[]}function om(s,o,d,D){var k=s==null?0:s.length;return k?(d&&typeof d!="number"&&gn(s,o,d)&&(d=0,D=k),ff(s,o,d,D)):[]}function Zp(s,o,d){var D=s==null?0:s.length;if(!D)return-1;var k=d==null?0:$t(d);return k<0&&(k=Cr(D+k,0)),na(s,pt(o,3),k)}function Qp(s,o,d){var D=s==null?0:s.length;if(!D)return-1;var k=D-1;return d!==e&&(k=$t(d),k=d<0?Cr(D+k,0):qr(k,D-1)),na(s,pt(o,3),k,!0)}function ed(s){var o=s==null?0:s.length;return o?Ur(s,1):[]}function cm(s){var o=s==null?0:s.length;return o?Ur(s,z):[]}function lm(s,o){var d=s==null?0:s.length;return d?(o=o===e?1:$t(o),Ur(s,o)):[]}function fm(s){for(var o=-1,d=s==null?0:s.length,D={};++o<d;){var k=s[o];D[k[0]]=k[1]}return D}function td(s){return s&&s.length?s[0]:e}function hm(s,o,d){var D=s==null?0:s.length;if(!D)return-1;var k=d==null?0:$t(d);return k<0&&(k=Cr(D+k,0)),ui(s,o,k)}function pm(s){var o=s==null?0:s.length;return o?ei(s,0,-1):[]}var dm=Ot(function(s){var o=vr(s,Sf);return o.length&&o[0]===s[0]?B(o):[]}),gm=Ot(function(s){var o=ti(s),d=vr(s,Sf);return o===ti(d)?o=e:d.pop(),d.length&&d[0]===s[0]?B(d,pt(o,2)):[]}),vm=Ot(function(s){var o=ti(s),d=vr(s,Sf);return o=typeof o=="function"?o:e,o&&d.pop(),d.length&&d[0]===s[0]?B(d,e,o):[]});function mm(s,o){return s==null?"":Ie.call(s,o)}function ti(s){var o=s==null?0:s.length;return o?s[o-1]:e}function wm(s,o,d){var D=s==null?0:s.length;if(!D)return-1;var k=D;return d!==e&&(k=$t(d),k=k<0?Cr(D+k,0):qr(k,D-1)),o===o?Rl(s,o,k):na(s,oo,k,!0)}function bm(s,o){return s&&s.length?hp(s,$t(o)):e}var Am=Ot(rd);function rd(s,o){return s&&s.length&&o&&o.length?vf(s,o):s}function Em(s,o,d){return s&&s.length&&o&&o.length?vf(s,o,pt(d,2)):s}function Sm(s,o,d){return s&&s.length&&o&&o.length?vf(s,o,e,d):s}var _m=Ui(function(s,o){var d=s==null?0:s.length,D=gs(s,o);return gp(s,vr(o,function(k){return Vi(k,d)?+k:k}).sort(Dp)),D});function ym(s,o){var d=[];if(!(s&&s.length))return d;var D=-1,k=[],L=s.length;for(o=pt(o,3);++D<L;){var J=s[D];o(J,D,s)&&(d.push(J),k.push(D))}return gp(s,k),d}function Of(s){return s==null?s:Eo.call(s)}function Dm(s,o,d){var D=s==null?0:s.length;return D?(d&&typeof d!="number"&&gn(s,o,d)?(o=0,d=D):(o=o==null?0:$t(o),d=d===e?D:$t(d)),ei(s,o,d)):[]}function Fm(s,o){return Ho(s,o)}function Cm(s,o,d){return bf(s,o,pt(d,2))}function Pm(s,o){var d=s==null?0:s.length;if(d){var D=Ho(s,o);if(D<d&&li(s[D],o))return D}return-1}function Im(s,o){return Ho(s,o,!0)}function $m(s,o,d){return bf(s,o,pt(d,2),!0)}function km(s,o){var d=s==null?0:s.length;if(d){var D=Ho(s,o,!0)-1;if(li(s[D],o))return D}return-1}function Rm(s){return s&&s.length?mp(s):[]}function Bm(s,o){return s&&s.length?mp(s,pt(o,2)):[]}function xm(s){var o=s==null?0:s.length;return o?ei(s,1,o):[]}function Tm(s,o,d){return s&&s.length?(o=d||o===e?1:$t(o),ei(s,0,o<0?0:o)):[]}function Om(s,o,d){var D=s==null?0:s.length;return D?(o=d||o===e?1:$t(o),o=D-o,ei(s,o<0?0:o,D)):[]}function Nm(s,o){return s&&s.length?Lo(s,pt(o,3),!1,!0):[]}function Hm(s,o){return s&&s.length?Lo(s,pt(o,3)):[]}var Lm=Ot(function(s){return ws(Ur(s,1,xr,!0))}),jm=Ot(function(s){var o=ti(s);return xr(o)&&(o=e),ws(Ur(s,1,xr,!0),pt(o,2))}),Mm=Ot(function(s){var o=ti(s);return o=typeof o=="function"?o:e,ws(Ur(s,1,xr,!0),e,o)});function qm(s){return s&&s.length?ws(s):[]}function Um(s,o){return s&&s.length?ws(s,pt(o,2)):[]}function Vm(s,o){return o=typeof o=="function"?o:e,s&&s.length?ws(s,e,o):[]}function Nf(s){if(!(s&&s.length))return[];var o=0;return s=wi(s,function(d){if(xr(d))return o=Cr(d.length,o),!0}),ou(o,function(d){return vr(s,su(d))})}function nd(s,o){if(!(s&&s.length))return[];var d=Nf(s);return o==null?d:vr(d,function(D){return fn(o,e,D)})}var Km=Ot(function(s,o){return xr(s)?Bs(s,o):[]}),zm=Ot(function(s){return Ef(wi(s,xr))}),Gm=Ot(function(s){var o=ti(s);return xr(o)&&(o=e),Ef(wi(s,xr),pt(o,2))}),Wm=Ot(function(s){var o=ti(s);return o=typeof o=="function"?o:e,Ef(wi(s,xr),e,o)}),Ym=Ot(Nf);function Jm(s,o){return Ep(s||[],o||[],Si)}function Xm(s,o){return Ep(s||[],o||[],_u)}var Zm=Ot(function(s){var o=s.length,d=o>1?s[o-1]:e;return d=typeof d=="function"?(s.pop(),d):e,nd(s,d)});function id(s){var o=O(s);return o.__chain__=!0,o}function Qm(s,o){return o(s),s}function Wo(s,o){return o(s)}var e2=Ui(function(s){var o=s.length,d=o?s[0]:0,D=this.__wrapped__,k=function(L){return gs(L,s)};return o>1||this.__actions__.length||!(D instanceof Tt)||!Vi(d)?this.thru(k):(D=D.slice(d,+d+(o?1:0)),D.__actions__.push({func:Wo,args:[k],thisArg:e}),new Sn(D,this.__chain__).thru(function(L){return o&&!L.length&&L.push(e),L}))});function t2(){return id(this)}function r2(){return new Sn(this.value(),this.__chain__)}function n2(){this.__values__===e&&(this.__values__=wd(this.value()));var s=this.__index__>=this.__values__.length,o=s?e:this.__values__[this.__index__++];return{done:s,value:o}}function i2(){return this}function s2(s){for(var o,d=this;d instanceof ps;){var D=Xp(d);D.__index__=0,D.__values__=e,o?k.__wrapped__=D:o=D;var k=D;d=d.__wrapped__}return k.__wrapped__=s,o}function a2(){var s=this.__wrapped__;if(s instanceof Tt){var o=s;return this.__actions__.length&&(o=new Tt(this)),o=o.reverse(),o.__actions__.push({func:Wo,args:[Of],thisArg:e}),new Sn(o,this.__chain__)}return this.thru(Of)}function u2(){return Ap(this.__wrapped__,this.__actions__)}var o2=jo(function(s,o,d){Qt.call(s,d)?++s[d]:Zn(s,d,1)});function c2(s,o,d){var D=Ft(s)?ao:ba;return d&&gn(s,o,d)&&(o=e),D(s,pt(o,3))}function l2(s,o){var d=Ft(s)?wi:vs;return d(s,pt(o,3))}var f2=kp(Zp),h2=kp(Qp);function p2(s,o){return Ur(Yo(s,o),1)}function d2(s,o){return Ur(Yo(s,o),z)}function g2(s,o,d){return d=d===e?1:$t(d),Ur(Yo(s,o),d)}function sd(s,o){var d=Ft(s)?Qr:_i;return d(s,pt(o,3))}function ad(s,o){var d=Ft(s)?gl:bu;return d(s,pt(o,3))}var v2=jo(function(s,o,d){Qt.call(s,d)?s[d].push(o):Zn(s,d,[o])});function m2(s,o,d,D){s=yn(s)?s:Da(s),d=d&&!D?$t(d):0;var k=s.length;return d<0&&(d=Cr(k+d,0)),ec(s)?d<=k&&s.indexOf(o,d)>-1:!!k&&ui(s,o,d)>-1}var w2=Ot(function(s,o,d){var D=-1,k=typeof o=="function",L=yn(s)?be(s.length):[];return _i(s,function(J){L[++D]=k?fn(o,J,d):ce(J,o,d)}),L}),b2=jo(function(s,o,d){Zn(s,d,o)});function Yo(s,o){var d=Ft(s)?vr:cp;return d(s,pt(o,3))}function A2(s,o,d,D){return s==null?[]:(Ft(o)||(o=o==null?[]:[o]),d=D?e:d,Ft(d)||(d=d==null?[]:[d]),pp(s,o,d))}var E2=jo(function(s,o,d){s[d?0:1].push(o)},function(){return[[],[]]});function S2(s,o,d){var D=Ft(s)?nu:lo,k=arguments.length<3;return D(s,pt(o,4),d,k,_i)}function _2(s,o,d){var D=Ft(s)?vl:lo,k=arguments.length<3;return D(s,pt(o,4),d,k,bu)}function y2(s,o){var d=Ft(s)?wi:vs;return d(s,Zo(pt(o,3)))}function D2(s){var o=Ft(s)?Ro:mv;return o(s)}function F2(s,o,d){(d?gn(s,o,d):o===e)?o=1:o=$t(o);var D=Ft(s)?uf:wv;return D(s,o)}function C2(s){var o=Ft(s)?of:Av;return o(s)}function P2(s){if(s==null)return 0;if(yn(s))return ec(s)?ss(s):s.length;var o=an(s);return o==At||o==W?s.size:df(s).length}function I2(s,o,d){var D=Ft(s)?iu:Ev;return d&&gn(s,o,d)&&(o=e),D(s,pt(o,3))}var $2=Ot(function(s,o){if(s==null)return[];var d=o.length;return d>1&&gn(s,o[0],o[1])?o=[]:d>2&&gn(o[0],o[1],o[2])&&(o=[o[0]]),pp(s,Ur(o,1),[])}),Jo=Dt||function(){return Lr.Date.now()};function k2(s,o){if(typeof o!="function")throw new En(u);return s=$t(s),function(){if(--s<1)return o.apply(this,arguments)}}function ud(s,o,d){return o=d?e:o,o=s&&o==null?s.length:o,qi(s,H,e,e,e,e,o)}function od(s,o){var d;if(typeof o!="function")throw new En(u);return s=$t(s),function(){return--s>0&&(d=o.apply(this,arguments)),s<=1&&(o=e),d}}var Hf=Ot(function(s,o,d){var D=b;if(d.length){var k=Ai(d,_a(Hf));D|=x}return qi(s,D,o,d,k)}),cd=Ot(function(s,o,d){var D=b|w;if(d.length){var k=Ai(d,_a(cd));D|=x}return qi(o,D,s,d,k)});function ld(s,o,d){o=d?e:o;var D=qi(s,A,e,e,e,e,e,o);return D.placeholder=ld.placeholder,D}function fd(s,o,d){o=d?e:o;var D=qi(s,C,e,e,e,e,e,o);return D.placeholder=fd.placeholder,D}function hd(s,o,d){var D,k,L,J,ee,he,Re=0,Te=!1,He=!1,Qe=!0;if(typeof s!="function")throw new En(u);o=ri(o)||0,Dr(d)&&(Te=!!d.leading,He="maxWait"in d,L=He?Cr(ri(d.maxWait)||0,o):L,Qe="trailing"in d?!!d.trailing:Qe);function ct(Tr){var fi=D,Gi=k;return D=k=e,Re=Tr,J=s.apply(Gi,fi),J}function gt(Tr){return Re=Tr,ee=Fu(jt,o),Te?ct(Tr):J}function Rt(Tr){var fi=Tr-he,Gi=Tr-Re,kd=o-fi;return He?qr(kd,L-Gi):kd}function vt(Tr){var fi=Tr-he,Gi=Tr-Re;return he===e||fi>=o||fi<0||He&&Gi>=L}function jt(){var Tr=Jo();if(vt(Tr))return Kt(Tr);ee=Fu(jt,Rt(Tr))}function Kt(Tr){return ee=e,Qe&&D?ct(Tr):(D=k=e,J)}function jn(){ee!==e&&Sp(ee),Re=0,D=he=k=ee=e}function vn(){return ee===e?J:Kt(Jo())}function Mn(){var Tr=Jo(),fi=vt(Tr);if(D=arguments,k=this,he=Tr,fi){if(ee===e)return gt(he);if(He)return Sp(ee),ee=Fu(jt,o),ct(he)}return ee===e&&(ee=Fu(jt,o)),J}return Mn.cancel=jn,Mn.flush=vn,Mn}var R2=Ot(function(s,o){return To(s,1,o)}),B2=Ot(function(s,o,d){return To(s,ri(o)||0,d)});function x2(s){return qi(s,pe)}function Xo(s,o){if(typeof s!="function"||o!=null&&typeof o!="function")throw new En(u);var d=function(){var D=arguments,k=o?o.apply(this,D):D[0],L=d.cache;if(L.has(k))return L.get(k);var J=s.apply(this,D);return d.cache=L.set(k,J)||L,J};return d.cache=new(Xo.Cache||dn),d}Xo.Cache=dn;function Zo(s){if(typeof s!="function")throw new En(u);return function(){var o=arguments;switch(o.length){case 0:return!s.call(this);case 1:return!s.call(this,o[0]);case 2:return!s.call(this,o[0],o[1]);case 3:return!s.call(this,o[0],o[1],o[2])}return!s.apply(this,o)}}function T2(s){return od(2,s)}var O2=Sv(function(s,o){o=o.length==1&&Ft(o[0])?vr(o[0],hn(pt())):vr(Ur(o,1),hn(pt()));var d=o.length;return Ot(function(D){for(var k=-1,L=qr(D.length,d);++k<L;)D[k]=o[k].call(this,D[k]);return fn(s,this,D)})}),Lf=Ot(function(s,o){var d=Ai(o,_a(Lf));return qi(s,x,e,o,d)}),pd=Ot(function(s,o){var d=Ai(o,_a(pd));return qi(s,N,e,o,d)}),N2=Ui(function(s,o){return qi(s,ne,e,e,e,o)});function H2(s,o){if(typeof s!="function")throw new En(u);return o=o===e?o:$t(o),Ot(s,o)}function L2(s,o){if(typeof s!="function")throw new En(u);return o=o==null?0:Cr($t(o),0),Ot(function(d){var D=d[o],k=As(d,0,o);return D&&bi(k,D),fn(s,this,k)})}function j2(s,o,d){var D=!0,k=!0;if(typeof s!="function")throw new En(u);return Dr(d)&&(D="leading"in d?!!d.leading:D,k="trailing"in d?!!d.trailing:k),hd(s,o,{leading:D,maxWait:o,trailing:k})}function M2(s){return ud(s,1)}function q2(s,o){return Lf(_f(o),s)}function U2(){if(!arguments.length)return[];var s=arguments[0];return Ft(s)?s:[s]}function V2(s){return nn(s,E)}function K2(s,o){return o=typeof o=="function"?o:e,nn(s,E,o)}function z2(s){return nn(s,m|E)}function G2(s,o){return o=typeof o=="function"?o:e,nn(s,m|E,o)}function W2(s,o){return o==null||wu(s,o,Yr(o))}function li(s,o){return s===o||s!==s&&o!==o}var Y2=Vo(Aa),J2=Vo(function(s,o){return s>=o}),Ns=nt((function(){return arguments})())?nt:function(s){return Pr(s)&&Qt.call(s,"callee")&&!wo.call(s,"callee")},Ft=be.isArray,X2=eo?hn(eo):mt;function yn(s){return s!=null&&Qo(s.length)&&!Ki(s)}function xr(s){return Pr(s)&&yn(s)}function Z2(s){return s===!0||s===!1||Pr(s)&&Vr(s)==Ar}var Es=bo||Jf,Q2=to?hn(to):sn;function ew(s){return Pr(s)&&s.nodeType===1&&!Cu(s)}function tw(s){if(s==null)return!0;if(yn(s)&&(Ft(s)||typeof s=="string"||typeof s.splice=="function"||Es(s)||ya(s)||Ns(s)))return!s.length;var o=an(s);if(o==At||o==W)return!s.size;if(Du(s))return!df(s).length;for(var d in s)if(Qt.call(s,d))return!1;return!0}function rw(s,o){return Qn(s,o)}function nw(s,o,d){d=typeof d=="function"?d:e;var D=d?d(s,o):e;return D===e?Qn(s,o,e,d):!!D}function jf(s){if(!Pr(s))return!1;var o=Vr(s);return o==_r||o==Or||typeof s.message=="string"&&typeof s.name=="string"&&!Cu(s)}function iw(s){return typeof s=="number"&&cs(s)}function Ki(s){if(!Dr(s))return!1;var o=Vr(s);return o==Bt||o==lr||o==ln||o==Y}function dd(s){return typeof s=="number"&&s==$t(s)}function Qo(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=te}function Dr(s){var o=typeof s;return s!=null&&(o=="object"||o=="function")}function Pr(s){return s!=null&&typeof s=="object"}var gd=ro?hn(ro):hf;function sw(s,o){return s===o||pf(s,o,$f(o))}function aw(s,o,d){return d=typeof d=="function"?d:e,pf(s,o,$f(o),d)}function uw(s){return vd(s)&&s!=+s}function ow(s){if(Kv(s))throw new Et(n);return up(s)}function cw(s){return s===null}function lw(s){return s==null}function vd(s){return typeof s=="number"||Pr(s)&&Vr(s)==Be}function Cu(s){if(!Pr(s)||Vr(s)!=ve)return!1;var o=ge(s);if(o===null)return!0;var d=Qt.call(o,"constructor")&&o.constructor;return typeof d=="function"&&d instanceof d&&ua.call(d)==Ml}var Mf=no?hn(no):cv;function fw(s){return dd(s)&&s>=-te&&s<=te}var md=io?hn(io):lv;function ec(s){return typeof s=="string"||!Ft(s)&&Pr(s)&&Vr(s)==I}function Ln(s){return typeof s=="symbol"||Pr(s)&&Vr(s)==M}var ya=so?hn(so):fv;function hw(s){return s===e}function pw(s){return Pr(s)&&an(s)==U}function dw(s){return Pr(s)&&Vr(s)==G}var gw=Vo(gf),vw=Vo(function(s,o){return s<=o});function wd(s){if(!s)return[];if(yn(s))return ec(s)?xn(s):_n(s);if(It&&s[It])return Il(s[It]());var o=an(s),d=o==At?lu:o==W?ia:Da;return d(s)}function zi(s){if(!s)return s===0?s:0;if(s=ri(s),s===z||s===-z){var o=s<0?-1:1;return o*me}return s===s?s:0}function $t(s){var o=zi(s),d=o%1;return o===o?d?o-d:o:0}function bd(s){return s?ci($t(s),0,it):0}function ri(s){if(typeof s=="number")return s;if(Ln(s))return st;if(Dr(s)){var o=typeof s.valueOf=="function"?s.valueOf():s;s=Dr(o)?o+"":o}if(typeof s!="string")return s===0?s:+s;s=fo(s);var d=qe.test(s);return d||Vt.test(s)?hl(s.slice(2),d?2:8):ft.test(s)?st:+s}function Ad(s){return yi(s,Dn(s))}function mw(s){return s?ci($t(s),-te,te):s===0?s:0}function tr(s){return s==null?"":Hn(s)}var ww=Ea(function(s,o){if(Du(o)||yn(o)){yi(o,Yr(o),s);return}for(var d in o)Qt.call(o,d)&&Si(s,d,o[d])}),Ed=Ea(function(s,o){yi(o,Dn(o),s)}),tc=Ea(function(s,o,d,D){yi(o,Dn(o),s,D)}),bw=Ea(function(s,o,d,D){yi(o,Yr(o),s,D)}),Aw=Ui(gs);function Ew(s,o){var d=hs(s);return o==null?d:Bo(d,o)}var Sw=Ot(function(s,o){s=sr(s);var d=-1,D=o.length,k=D>2?o[2]:e;for(k&&gn(o[0],o[1],k)&&(D=1);++d<D;)for(var L=o[d],J=Dn(L),ee=-1,he=J.length;++ee<he;){var Re=J[ee],Te=s[Re];(Te===e||li(Te,as[Re])&&!Qt.call(s,Re))&&(s[Re]=L[Re])}return s}),_w=Ot(function(s){return s.push(e,Hp),fn(Sd,e,s)});function yw(s,o){return uo(s,pt(o,3),ut)}function Dw(s,o){return uo(s,pt(o,3),Au)}function Fw(s,o){return s==null?s:xs(s,pt(o,3),Dn)}function Cw(s,o){return s==null?s:Oo(s,pt(o,3),Dn)}function Pw(s,o){return s&&ut(s,pt(o,3))}function Iw(s,o){return s&&Au(s,pt(o,3))}function $w(s){return s==null?[]:ms(s,Yr(s))}function kw(s){return s==null?[]:ms(s,Dn(s))}function qf(s,o,d){var D=s==null?e:Mi(s,o);return D===e?d:D}function Rw(s,o){return s!=null&&Mp(s,o,f)}function Uf(s,o){return s!=null&&Mp(s,o,F)}var Bw=Bp(function(s,o,d){o!=null&&typeof o.toString!="function"&&(o=oa.call(o)),s[o]=d},Kf(Fn)),xw=Bp(function(s,o,d){o!=null&&typeof o.toString!="function"&&(o=oa.call(o)),Qt.call(s,o)?s[o].push(d):s[o]=[d]},pt),Tw=Ot(ce);function Yr(s){return yn(s)?ko(s):df(s)}function Dn(s){return yn(s)?ko(s,!0):hv(s)}function Ow(s,o){var d={};return o=pt(o,3),ut(s,function(D,k,L){Zn(d,o(D,k,L),D)}),d}function Nw(s,o){var d={};return o=pt(o,3),ut(s,function(D,k,L){Zn(d,k,o(D,k,L))}),d}var Hw=Ea(function(s,o,d){No(s,o,d)}),Sd=Ea(function(s,o,d,D){No(s,o,d,D)}),Lw=Ui(function(s,o){var d={};if(s==null)return d;var D=!1;o=vr(o,function(L){return L=bs(L,s),D||(D=L.length>1),L}),yi(s,Pf(s),d),D&&(d=nn(d,m|S|E,Bv));for(var k=o.length;k--;)Af(d,o[k]);return d});function jw(s,o){return _d(s,Zo(pt(o)))}var Mw=Ui(function(s,o){return s==null?{}:dv(s,o)});function _d(s,o){if(s==null)return{};var d=vr(Pf(s),function(D){return[D]});return o=pt(o),dp(s,d,function(D,k){return o(D,k[0])})}function qw(s,o,d){o=bs(o,s);var D=-1,k=o.length;for(k||(k=1,s=e);++D<k;){var L=s==null?e:s[Di(o[D])];L===e&&(D=k,L=d),s=Ki(L)?L.call(s):L}return s}function Uw(s,o,d){return s==null?s:_u(s,o,d)}function Vw(s,o,d,D){return D=typeof D=="function"?D:e,s==null?s:_u(s,o,d,D)}var yd=Op(Yr),Dd=Op(Dn);function Kw(s,o,d){var D=Ft(s),k=D||Es(s)||ya(s);if(o=pt(o,4),d==null){var L=s&&s.constructor;k?d=D?new L:[]:Dr(s)?d=Ki(L)?hs(ge(s)):{}:d={}}return(k?Qr:ut)(s,function(J,ee,he){return o(d,J,ee,he)}),d}function zw(s,o){return s==null?!0:Af(s,o)}function Gw(s,o,d){return s==null?s:bp(s,o,_f(d))}function Ww(s,o,d,D){return D=typeof D=="function"?D:e,s==null?s:bp(s,o,_f(d),D)}function Da(s){return s==null?[]:cu(s,Yr(s))}function Yw(s){return s==null?[]:cu(s,Dn(s))}function Jw(s,o,d){return d===e&&(d=o,o=e),d!==e&&(d=ri(d),d=d===d?d:0),o!==e&&(o=ri(o),o=o===o?o:0),ci(ri(s),o,d)}function Xw(s,o,d){return o=zi(o),d===e?(d=o,o=0):d=zi(d),s=ri(s),T(s,o,d)}function Zw(s,o,d){if(d&&typeof d!="boolean"&&gn(s,o,d)&&(o=d=e),d===e&&(typeof o=="boolean"?(d=o,o=e):typeof s=="boolean"&&(d=s,s=e)),s===e&&o===e?(s=0,o=1):(s=zi(s),o===e?(o=s,s=0):o=zi(o)),s>o){var D=s;s=o,o=D}if(d||s%1||o%1){var k=Ao();return qr(s+k*(o-s+fl("1e-"+((k+"").length-1))),o)}return mf(s,o)}var Qw=Sa(function(s,o,d){return o=o.toLowerCase(),s+(d?Fd(o):o)});function Fd(s){return Vf(tr(s).toLowerCase())}function Cd(s){return s=tr(s),s&&s.replace(Nr,yl).replace(nl,"")}function eb(s,o,d){s=tr(s),o=Hn(o);var D=s.length;d=d===e?D:ci($t(d),0,D);var k=d;return d-=o.length,d>=0&&s.slice(d,k)==o}function tb(s){return s=tr(s),s&&at.test(s)?s.replace(Ge,Dl):s}function rb(s){return s=tr(s),s&&ke.test(s)?s.replace(se,"\\$&"):s}var nb=Sa(function(s,o,d){return s+(d?"-":"")+o.toLowerCase()}),ib=Sa(function(s,o,d){return s+(d?" ":"")+o.toLowerCase()}),sb=$p("toLowerCase");function ab(s,o,d){s=tr(s),o=$t(o);var D=o?ss(s):0;if(!o||D>=o)return s;var k=(o-D)/2;return Uo(fa(k),d)+s+Uo(la(k),d)}function ub(s,o,d){s=tr(s),o=$t(o);var D=o?ss(s):0;return o&&D<o?s+Uo(o-D,d):s}function ob(s,o,d){s=tr(s),o=$t(o);var D=o?ss(s):0;return o&&D<o?Uo(o-D,d)+s:s}function cb(s,o,d){return d||o==null?o=0:o&&(o=+o),zl(tr(s).replace(Ye,""),o||0)}function lb(s,o,d){return(d?gn(s,o,d):o===e)?o=1:o=$t(o),wf(tr(s),o)}function fb(){var s=arguments,o=tr(s[0]);return s.length<3?o:o.replace(s[1],s[2])}var hb=Sa(function(s,o,d){return s+(d?"_":"")+o.toLowerCase()});function pb(s,o,d){return d&&typeof d!="number"&&gn(s,o,d)&&(o=d=e),d=d===e?it:d>>>0,d?(s=tr(s),s&&(typeof o=="string"||o!=null&&!Mf(o))&&(o=Hn(o),!o&&is(s))?As(xn(s),0,d):s.split(o,d)):[]}var db=Sa(function(s,o,d){return s+(d?" ":"")+Vf(o)});function gb(s,o,d){return s=tr(s),d=d==null?0:ci($t(d),0,s.length),o=Hn(o),s.slice(d,d+o.length)==o}function vb(s,o,d){var D=O.templateSettings;d&&gn(s,o,d)&&(o=e),s=tr(s),o=tc({},o,D,Np);var k=tc({},o.imports,D.imports,Np),L=Yr(k),J=cu(k,L),ee,he,Re=0,Te=o.interpolate||Ne,He="__p += '",Qe=fu((o.escape||Ne).source+"|"+Te.source+"|"+(Te===Xr?Mt:Ne).source+"|"+(o.evaluate||Ne).source+"|$","g"),ct="//# sourceURL="+(Qt.call(o,"sourceURL")?(o.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ol+"]")+`
`;s.replace(Qe,function(vt,jt,Kt,jn,vn,Mn){return Kt||(Kt=jn),He+=s.slice(Re,Mn).replace(Ti,Fl),jt&&(ee=!0,He+=`' +
__e(`+jt+`) +
'`),vn&&(he=!0,He+=`';
`+vn+`;
__p += '`),Kt&&(He+=`' +
((__t = (`+Kt+`)) == null ? '' : __t) +
'`),Re=Mn+vt.length,vt}),He+=`';
`;var gt=Qt.call(o,"variable")&&o.variable;if(!gt)He=`with (obj) {
`+He+`
}
`;else if(Xe.test(gt))throw new Et(a);He=(he?He.replace(oe,""):He).replace(xe,"$1").replace(Ve,"$1;"),He="function("+(gt||"obj")+`) {
`+(gt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ee?", __e = _.escape":"")+(he?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+He+`return __p
}`;var Rt=Id(function(){return Yt(L,ct+"return "+He).apply(e,J)});if(Rt.source=He,jf(Rt))throw Rt;return Rt}function mb(s){return tr(s).toLowerCase()}function wb(s){return tr(s).toUpperCase()}function bb(s,o,d){if(s=tr(s),s&&(d||o===e))return fo(s);if(!s||!(o=Hn(o)))return s;var D=xn(s),k=xn(o),L=ho(D,k),J=po(D,k)+1;return As(D,L,J).join("")}function Ab(s,o,d){if(s=tr(s),s&&(d||o===e))return s.slice(0,vo(s)+1);if(!s||!(o=Hn(o)))return s;var D=xn(s),k=po(D,xn(o))+1;return As(D,0,k).join("")}function Eb(s,o,d){if(s=tr(s),s&&(d||o===e))return s.replace(Ye,"");if(!s||!(o=Hn(o)))return s;var D=xn(s),k=ho(D,xn(o));return As(D,k).join("")}function Sb(s,o){var d=P,D=$;if(Dr(o)){var k="separator"in o?o.separator:k;d="length"in o?$t(o.length):d,D="omission"in o?Hn(o.omission):D}s=tr(s);var L=s.length;if(is(s)){var J=xn(s);L=J.length}if(d>=L)return s;var ee=d-ss(D);if(ee<1)return D;var he=J?As(J,0,ee).join(""):s.slice(0,ee);if(k===e)return he+D;if(J&&(ee+=he.length-ee),Mf(k)){if(s.slice(ee).search(k)){var Re,Te=he;for(k.global||(k=fu(k.source,tr(Me.exec(k))+"g")),k.lastIndex=0;Re=k.exec(Te);)var He=Re.index;he=he.slice(0,He===e?ee:He)}}else if(s.indexOf(Hn(k),ee)!=ee){var Qe=he.lastIndexOf(k);Qe>-1&&(he=he.slice(0,Qe))}return he+D}function _b(s){return s=tr(s),s&&kt.test(s)?s.replace(Je,Bl):s}var yb=Sa(function(s,o,d){return s+(d?" ":"")+o.toUpperCase()}),Vf=$p("toUpperCase");function Pd(s,o,d){return s=tr(s),o=d?e:o,o===e?Pl(s)?Ol(s):bl(s):s.match(o)||[]}var Id=Ot(function(s,o){try{return fn(s,e,o)}catch(d){return jf(d)?d:new Et(d)}}),Db=Ui(function(s,o){return Qr(o,function(d){d=Di(d),Zn(s,d,Hf(s[d],s))}),s});function Fb(s){var o=s==null?0:s.length,d=pt();return s=o?vr(s,function(D){if(typeof D[1]!="function")throw new En(u);return[d(D[0]),D[1]]}):[],Ot(function(D){for(var k=-1;++k<o;){var L=s[k];if(fn(L[0],this,D))return fn(L[1],this,D)}})}function Cb(s){return lf(nn(s,m))}function Kf(s){return function(){return s}}function Pb(s,o){return s==null||s!==s?o:s}var Ib=Rp(),$b=Rp(!0);function Fn(s){return s}function zf(s){return op(typeof s=="function"?s:nn(s,m))}function kb(s){return lp(nn(s,m))}function Rb(s,o){return fp(s,nn(o,m))}var Bb=Ot(function(s,o){return function(d){return ce(d,s,o)}}),xb=Ot(function(s,o){return function(d){return ce(s,d,o)}});function Gf(s,o,d){var D=Yr(o),k=ms(o,D);d==null&&!(Dr(o)&&(k.length||!D.length))&&(d=o,o=s,s=this,k=ms(o,Yr(o)));var L=!(Dr(d)&&"chain"in d)||!!d.chain,J=Ki(s);return Qr(k,function(ee){var he=o[ee];s[ee]=he,J&&(s.prototype[ee]=function(){var Re=this.__chain__;if(L||Re){var Te=s(this.__wrapped__),He=Te.__actions__=_n(this.__actions__);return He.push({func:he,args:arguments,thisArg:s}),Te.__chain__=Re,Te}return he.apply(s,bi([this.value()],arguments))})}),s}function Tb(){return Lr._===this&&(Lr._=ql),this}function Wf(){}function Ob(s){return s=$t(s),Ot(function(o){return hp(o,s)})}var Nb=Df(vr),Hb=Df(ao),Lb=Df(iu);function $d(s){return Rf(s)?su(Di(s)):gv(s)}function jb(s){return function(o){return s==null?e:Mi(s,o)}}var Mb=xp(),qb=xp(!0);function Yf(){return[]}function Jf(){return!1}function Ub(){return{}}function Vb(){return""}function Kb(){return!0}function zb(s,o){if(s=$t(s),s<1||s>te)return[];var d=it,D=qr(s,it);o=pt(o),s-=it;for(var k=ou(D,o);++d<s;)o(d);return k}function Gb(s){return Ft(s)?vr(s,Di):Ln(s)?[s]:_n(Jp(tr(s)))}function Wb(s){var o=++jl;return tr(s)+o}var Yb=qo(function(s,o){return s+o},0),Jb=Ff("ceil"),Xb=qo(function(s,o){return s/o},1),Zb=Ff("floor");function Qb(s){return s&&s.length?Nn(s,Fn,Aa):e}function eA(s,o){return s&&s.length?Nn(s,pt(o,2),Aa):e}function tA(s){return co(s,Fn)}function rA(s,o){return co(s,pt(o,2))}function nA(s){return s&&s.length?Nn(s,Fn,gf):e}function iA(s,o){return s&&s.length?Nn(s,pt(o,2),gf):e}var sA=qo(function(s,o){return s*o},1),aA=Ff("round"),uA=qo(function(s,o){return s-o},0);function oA(s){return s&&s.length?uu(s,Fn):0}function cA(s,o){return s&&s.length?uu(s,pt(o,2)):0}return O.after=k2,O.ary=ud,O.assign=ww,O.assignIn=Ed,O.assignInWith=tc,O.assignWith=bw,O.at=Aw,O.before=od,O.bind=Hf,O.bindAll=Db,O.bindKey=cd,O.castArray=U2,O.chain=id,O.chunk=Zv,O.compact=Qv,O.concat=em,O.cond=Fb,O.conforms=Cb,O.constant=Kf,O.countBy=o2,O.create=Ew,O.curry=ld,O.curryRight=fd,O.debounce=hd,O.defaults=Sw,O.defaultsDeep=_w,O.defer=R2,O.delay=B2,O.difference=tm,O.differenceBy=rm,O.differenceWith=nm,O.drop=im,O.dropRight=sm,O.dropRightWhile=am,O.dropWhile=um,O.fill=om,O.filter=l2,O.flatMap=p2,O.flatMapDeep=d2,O.flatMapDepth=g2,O.flatten=ed,O.flattenDeep=cm,O.flattenDepth=lm,O.flip=x2,O.flow=Ib,O.flowRight=$b,O.fromPairs=fm,O.functions=$w,O.functionsIn=kw,O.groupBy=v2,O.initial=pm,O.intersection=dm,O.intersectionBy=gm,O.intersectionWith=vm,O.invert=Bw,O.invertBy=xw,O.invokeMap=w2,O.iteratee=zf,O.keyBy=b2,O.keys=Yr,O.keysIn=Dn,O.map=Yo,O.mapKeys=Ow,O.mapValues=Nw,O.matches=kb,O.matchesProperty=Rb,O.memoize=Xo,O.merge=Hw,O.mergeWith=Sd,O.method=Bb,O.methodOf=xb,O.mixin=Gf,O.negate=Zo,O.nthArg=Ob,O.omit=Lw,O.omitBy=jw,O.once=T2,O.orderBy=A2,O.over=Nb,O.overArgs=O2,O.overEvery=Hb,O.overSome=Lb,O.partial=Lf,O.partialRight=pd,O.partition=E2,O.pick=Mw,O.pickBy=_d,O.property=$d,O.propertyOf=jb,O.pull=Am,O.pullAll=rd,O.pullAllBy=Em,O.pullAllWith=Sm,O.pullAt=_m,O.range=Mb,O.rangeRight=qb,O.rearg=N2,O.reject=y2,O.remove=ym,O.rest=H2,O.reverse=Of,O.sampleSize=F2,O.set=Uw,O.setWith=Vw,O.shuffle=C2,O.slice=Dm,O.sortBy=$2,O.sortedUniq=Rm,O.sortedUniqBy=Bm,O.split=pb,O.spread=L2,O.tail=xm,O.take=Tm,O.takeRight=Om,O.takeRightWhile=Nm,O.takeWhile=Hm,O.tap=Qm,O.throttle=j2,O.thru=Wo,O.toArray=wd,O.toPairs=yd,O.toPairsIn=Dd,O.toPath=Gb,O.toPlainObject=Ad,O.transform=Kw,O.unary=M2,O.union=Lm,O.unionBy=jm,O.unionWith=Mm,O.uniq=qm,O.uniqBy=Um,O.uniqWith=Vm,O.unset=zw,O.unzip=Nf,O.unzipWith=nd,O.update=Gw,O.updateWith=Ww,O.values=Da,O.valuesIn=Yw,O.without=Km,O.words=Pd,O.wrap=q2,O.xor=zm,O.xorBy=Gm,O.xorWith=Wm,O.zip=Ym,O.zipObject=Jm,O.zipObjectDeep=Xm,O.zipWith=Zm,O.entries=yd,O.entriesIn=Dd,O.extend=Ed,O.extendWith=tc,Gf(O,O),O.add=Yb,O.attempt=Id,O.camelCase=Qw,O.capitalize=Fd,O.ceil=Jb,O.clamp=Jw,O.clone=V2,O.cloneDeep=z2,O.cloneDeepWith=G2,O.cloneWith=K2,O.conformsTo=W2,O.deburr=Cd,O.defaultTo=Pb,O.divide=Xb,O.endsWith=eb,O.eq=li,O.escape=tb,O.escapeRegExp=rb,O.every=c2,O.find=f2,O.findIndex=Zp,O.findKey=yw,O.findLast=h2,O.findLastIndex=Qp,O.findLastKey=Dw,O.floor=Zb,O.forEach=sd,O.forEachRight=ad,O.forIn=Fw,O.forInRight=Cw,O.forOwn=Pw,O.forOwnRight=Iw,O.get=qf,O.gt=Y2,O.gte=J2,O.has=Rw,O.hasIn=Uf,O.head=td,O.identity=Fn,O.includes=m2,O.indexOf=hm,O.inRange=Xw,O.invoke=Tw,O.isArguments=Ns,O.isArray=Ft,O.isArrayBuffer=X2,O.isArrayLike=yn,O.isArrayLikeObject=xr,O.isBoolean=Z2,O.isBuffer=Es,O.isDate=Q2,O.isElement=ew,O.isEmpty=tw,O.isEqual=rw,O.isEqualWith=nw,O.isError=jf,O.isFinite=iw,O.isFunction=Ki,O.isInteger=dd,O.isLength=Qo,O.isMap=gd,O.isMatch=sw,O.isMatchWith=aw,O.isNaN=uw,O.isNative=ow,O.isNil=lw,O.isNull=cw,O.isNumber=vd,O.isObject=Dr,O.isObjectLike=Pr,O.isPlainObject=Cu,O.isRegExp=Mf,O.isSafeInteger=fw,O.isSet=md,O.isString=ec,O.isSymbol=Ln,O.isTypedArray=ya,O.isUndefined=hw,O.isWeakMap=pw,O.isWeakSet=dw,O.join=mm,O.kebabCase=nb,O.last=ti,O.lastIndexOf=wm,O.lowerCase=ib,O.lowerFirst=sb,O.lt=gw,O.lte=vw,O.max=Qb,O.maxBy=eA,O.mean=tA,O.meanBy=rA,O.min=nA,O.minBy=iA,O.stubArray=Yf,O.stubFalse=Jf,O.stubObject=Ub,O.stubString=Vb,O.stubTrue=Kb,O.multiply=sA,O.nth=bm,O.noConflict=Tb,O.noop=Wf,O.now=Jo,O.pad=ab,O.padEnd=ub,O.padStart=ob,O.parseInt=cb,O.random=Zw,O.reduce=S2,O.reduceRight=_2,O.repeat=lb,O.replace=fb,O.result=qw,O.round=aA,O.runInContext=le,O.sample=D2,O.size=P2,O.snakeCase=hb,O.some=I2,O.sortedIndex=Fm,O.sortedIndexBy=Cm,O.sortedIndexOf=Pm,O.sortedLastIndex=Im,O.sortedLastIndexBy=$m,O.sortedLastIndexOf=km,O.startCase=db,O.startsWith=gb,O.subtract=uA,O.sum=oA,O.sumBy=cA,O.template=vb,O.times=zb,O.toFinite=zi,O.toInteger=$t,O.toLength=bd,O.toLower=mb,O.toNumber=ri,O.toSafeInteger=mw,O.toString=tr,O.toUpper=wb,O.trim=bb,O.trimEnd=Ab,O.trimStart=Eb,O.truncate=Sb,O.unescape=_b,O.uniqueId=Wb,O.upperCase=yb,O.upperFirst=Vf,O.each=sd,O.eachRight=ad,O.first=td,Gf(O,(function(){var s={};return ut(O,function(o,d){Qt.call(O.prototype,d)||(s[d]=o)}),s})(),{chain:!1}),O.VERSION=t,Qr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){O[s].placeholder=O}),Qr(["drop","take"],function(s,o){Tt.prototype[s]=function(d){d=d===e?1:Cr($t(d),0);var D=this.__filtered__&&!o?new Tt(this):this.clone();return D.__filtered__?D.__takeCount__=qr(d,D.__takeCount__):D.__views__.push({size:qr(d,it),type:s+(D.__dir__<0?"Right":"")}),D},Tt.prototype[s+"Right"]=function(d){return this.reverse()[s](d).reverse()}}),Qr(["filter","map","takeWhile"],function(s,o){var d=o+1,D=d==q||d==V;Tt.prototype[s]=function(k){var L=this.clone();return L.__iteratees__.push({iteratee:pt(k,3),type:d}),L.__filtered__=L.__filtered__||D,L}}),Qr(["head","last"],function(s,o){var d="take"+(o?"Right":"");Tt.prototype[s]=function(){return this[d](1).value()[0]}}),Qr(["initial","tail"],function(s,o){var d="drop"+(o?"":"Right");Tt.prototype[s]=function(){return this.__filtered__?new Tt(this):this[d](1)}}),Tt.prototype.compact=function(){return this.filter(Fn)},Tt.prototype.find=function(s){return this.filter(s).head()},Tt.prototype.findLast=function(s){return this.reverse().find(s)},Tt.prototype.invokeMap=Ot(function(s,o){return typeof s=="function"?new Tt(this):this.map(function(d){return ce(d,s,o)})}),Tt.prototype.reject=function(s){return this.filter(Zo(pt(s)))},Tt.prototype.slice=function(s,o){s=$t(s);var d=this;return d.__filtered__&&(s>0||o<0)?new Tt(d):(s<0?d=d.takeRight(-s):s&&(d=d.drop(s)),o!==e&&(o=$t(o),d=o<0?d.dropRight(-o):d.take(o-s)),d)},Tt.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Tt.prototype.toArray=function(){return this.take(it)},ut(Tt.prototype,function(s,o){var d=/^(?:filter|find|map|reject)|While$/.test(o),D=/^(?:head|last)$/.test(o),k=O[D?"take"+(o=="last"?"Right":""):o],L=D||/^find/.test(o);k&&(O.prototype[o]=function(){var J=this.__wrapped__,ee=D?[1]:arguments,he=J instanceof Tt,Re=ee[0],Te=he||Ft(J),He=function(jt){var Kt=k.apply(O,bi([jt],ee));return D&&Qe?Kt[0]:Kt};Te&&d&&typeof Re=="function"&&Re.length!=1&&(he=Te=!1);var Qe=this.__chain__,ct=!!this.__actions__.length,gt=L&&!Qe,Rt=he&&!ct;if(!L&&Te){J=Rt?J:new Tt(this);var vt=s.apply(J,ee);return vt.__actions__.push({func:Wo,args:[He],thisArg:e}),new Sn(vt,Qe)}return gt&&Rt?s.apply(this,ee):(vt=this.thru(He),gt?D?vt.value()[0]:vt.value():vt)})}),Qr(["pop","push","shift","sort","splice","unshift"],function(s){var o=sa[s],d=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",D=/^(?:pop|shift)$/.test(s);O.prototype[s]=function(){var k=arguments;if(D&&!this.__chain__){var L=this.value();return o.apply(Ft(L)?L:[],k)}return this[d](function(J){return o.apply(Ft(J)?J:[],k)})}}),ut(Tt.prototype,function(s,o){var d=O[o];if(d){var D=d.name+"";Qt.call(Li,D)||(Li[D]=[]),Li[D].push({name:o,func:d})}}),Li[Mo(e,w).name]=[{name:"wrapper",func:e}],Tt.prototype.clone=du,Tt.prototype.reverse=Jl,Tt.prototype.value=_o,O.prototype.at=e2,O.prototype.chain=t2,O.prototype.commit=r2,O.prototype.next=n2,O.prototype.plant=s2,O.prototype.reverse=a2,O.prototype.toJSON=O.prototype.valueOf=O.prototype.value=u2,O.prototype.first=O.prototype.head,It&&(O.prototype[It]=i2),O}),Ei=Nl();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Lr._=Ei,define(function(){return Ei})):Ni?((Ni.exports=Ei)._=Ei,ea._=Ei):Lr._=Ei}).call(Ka)});var Wu=St((Kc,zc)=>{function Gh(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function N4(e){if(Array.isArray(e))return e}function H4(e){if(Array.isArray(e))return Gh(e)}function L4(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zg(e,t,r){return t=Zs(t),W4(e,Wh()?Reflect.construct(t,r||[],Zs(e).constructor):t.apply(e,r))}function gi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zu(e,t,r){return Wh()?zu=Reflect.construct:zu=function(n,u,a){var i=[null];i.push.apply(i,u);var c=Function.bind.apply(n,i),h=new c;return a&&Gu(h,a.prototype),h},zu.apply(null,arguments)}function Gg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vi(e,t,r){return t&&Gg(e.prototype,t),r&&Gg(e,r),e}function j4(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vc(e,t,r){return typeof Reflect<"u"&&Reflect.get?Vc=Reflect.get:Vc=function(n,u,a){var i=Y4(n,u);if(i){var c=Object.getOwnPropertyDescriptor(i,u);return c.get?c.get.call(a||n):c.value}},Vc(e,t,r||e)}function Zs(e){return Zs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Zs(e)}function Wg(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gu(e,t)}function Uc(e,t){return t!=null&&typeof Symbol<"u"&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function M4(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function q4(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function U4(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],u=!0,a=!1,i,c;try{for(r=r.call(e);!(u=(i=r.next()).done)&&(n.push(i.value),!(t&&n.length===t));u=!0);}catch(h){a=!0,c=h}finally{try{!u&&r.return!=null&&r.return()}finally{if(a)throw c}}return n}}function V4(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function K4(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Yg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),n.forEach(function(u){j4(e,u,r[u])})}return e}function z4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function G4(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):z4(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function W4(e,t){return t&&(mi(t)==="object"||typeof t=="function")?t:L4(e)}function Gu(e,t){return Gu=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},Gu(e,t)}function Xs(e,t){return N4(e)||U4(e,t)||Jg(e,t)||V4()}function Y4(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Zs(e),e!==null););return e}function Ut(e){return H4(e)||q4(e)||Jg(e)||K4()}function mi(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}function Jg(e,t){if(e){if(typeof e=="string")return Gh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gh(e,t)}}function Gc(e){var t=typeof Map=="function"?new Map:void 0;return Gc=function(r){if(r===null||!M4(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(r))return t.get(r);t.set(r,n)}function n(){return zu(r,arguments,Zs(this).constructor)}return n.prototype=Object.create(r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Gu(n,r)},Gc(e)}function Wh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wh=function(){return!!e})()}(function(e,t){(typeof Kc>"u"?"undefined":mi(Kc))=="object"&&(typeof zc>"u"?"undefined":mi(zc))<"u"?zc.exports=t():typeof define=="function"&&define.amd?define("peggy",t):e.peggy=t()})((typeof globalThis>"u"?"undefined":mi(globalThis))<"u"?globalThis:(typeof self>"u"?"undefined":mi(self))<"u"?self:Kc,function(){var e={},t=e,r={exports:e},n=function(Be,$e){return function(){return $e||Be(($e={exports:{}}).exports,$e),$e.exports}},u=n(function(Be,$e){"use strict";var ve=(function(){function Se(Y,de){gi(this,Se),this.source=Y,this.start=de}return vi(Se,[{key:"toString",value:function(){return String(this.source)}},{key:"offset",value:function(Y){return{line:Y.line+this.start.line-1,column:Y.line===1?Y.column+this.start.column-1:Y.column,offset:Y.offset+this.start.offset}}}],[{key:"offsetStart",value:function(Y){return Y.source&&typeof Y.source.offset=="function"?Y.source.offset(Y.start):Y.start}},{key:"offsetEnd",value:function(Y){return Y.source&&typeof Y.source.offset=="function"?Y.source.offset(Y.end):Y.end}}]),Se})();$e.exports=ve}),a=n(function(Be,$e){"use strict";var ve=u(),Se=(function(Y){Wg(de,Y);function de(W,I,M){gi(this,de);var l;return l=zg(this,de,[W]),l.name="GrammarError",l.location=I,M===void 0&&(M=[]),l.diagnostics=M,l.stage=null,l.problems=[["error",W,I,M]],l}return vi(de,[{key:"toString",value:function(){var I=Vc(Zs(de.prototype),"toString",this).call(this);this.location&&(I+=`
 at `,this.location.source!==void 0&&this.location.source!==null&&(I+="".concat(this.location.source,":")),I+="".concat(this.location.start.line,":").concat(this.location.start.column));var M=!0,l=!1,U=void 0;try{for(var G=this.diagnostics[Symbol.iterator](),X;!(M=(X=G.next()).done);M=!0){var re=X.value;I+=`
 from `,re.location.source!==void 0&&re.location.source!==null&&(I+="".concat(re.location.source,":")),I+="".concat(re.location.start.line,":").concat(re.location.start.column,": ").concat(re.message)}}catch(_e){l=!0,U=_e}finally{try{!M&&G.return!=null&&G.return()}finally{if(l)throw U}}return I}},{key:"format",value:function(W){var I=W.map(function(U){var G=U.source,X=U.text;return{source:G,text:X!=null?String(X).split(/\r\n|\n|\r/g):[]}});function M(U,G){var X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",re="",_e=I.find(function(Ce){var Pe=Ce.source;return Pe===U.source}),ue=U.start,Ae=ve.offsetStart(U);if(_e){var Oe=U.end,Ee=_e.text[ue.line-1],Z=(ue.line===Oe.line?Oe.column:Ee.length+1)-ue.column||1;X&&(re+=`
note: `.concat(X)),re+=`
 --> `.concat(U.source,":").concat(Ae.line,":").concat(Ae.column,`
`).concat("".padEnd(G),` |
`).concat(Ae.line.toString().padStart(G)," | ").concat(Ee,`
`).concat("".padEnd(G)," | ").concat("".padEnd(ue.column-1)).concat("".padEnd(Z,"^"))}else re+=`
 at `.concat(U.source,":").concat(Ae.line,":").concat(Ae.column),X&&(re+=": ".concat(X));return re}function l(U,G,X){var re=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],_e=-1/0;X?_e=re.reduce(function(Le,oe){var xe=oe.location;return Math.max(Le,ve.offsetStart(xe).line)},X.start.line):_e=Math.max.apply(null,re.map(function(Le){return Le.location.start.line})),_e=_e.toString().length;var ue="".concat(U,": ").concat(G);X&&(ue+=M(X,_e));var Ae=!0,Oe=!1,Ee=void 0;try{for(var Z=re[Symbol.iterator](),Ce;!(Ae=(Ce=Z.next()).done);Ae=!0){var Pe=Ce.value;ue+=M(Pe.location,_e,Pe.message)}}catch(Le){Oe=!0,Ee=Le}finally{try{!Ae&&Z.return!=null&&Z.return()}finally{if(Oe)throw Ee}}return ue}return this.problems.filter(function(U){return U[0]!=="info"}).map(function(U){return l.apply(void 0,Ut(U))}).join(`

`)}}]),de})(Gc(SyntaxError));$e.exports=Se}),i=n(function(Be,$e){"use strict";var ve={build:function(Se){function Y(l){for(var U=arguments.length,G=new Array(U>1?U-1:0),X=1;X<U;X++)G[X-1]=arguments[X];var re;return(re=Se)[l.type].apply(re,[l].concat(Ut(G)))}function de(){}function W(l){for(var U=arguments.length,G=new Array(U>1?U-1:0),X=1;X<U;X++)G[X-1]=arguments[X];return Y.apply(void 0,[l.expression].concat(Ut(G)))}function I(l){return function(U){for(var G=arguments.length,X=new Array(G>1?G-1:0),re=1;re<G;re++)X[re-1]=arguments[re];U[l].forEach(function(_e){return Y.apply(void 0,[_e].concat(Ut(X)))})}}var M={grammar:function(l){for(var U=arguments.length,G=new Array(U>1?U-1:0),X=1;X<U;X++)G[X-1]=arguments[X];var re=!0,_e=!1,ue=void 0;try{for(var Ae=l.imports[Symbol.iterator](),Oe;!(re=(Oe=Ae.next()).done);re=!0){var Ee=Oe.value;Y.apply(void 0,[Ee].concat(Ut(G)))}}catch(wr){_e=!0,ue=wr}finally{try{!re&&Ae.return!=null&&Ae.return()}finally{if(_e)throw ue}}var Z=!0,Ce=!1,Pe=void 0;if(l.topLevelInitializer)if(Array.isArray(l.topLevelInitializer))try{for(var Le=l.topLevelInitializer[Symbol.iterator](),oe;!(Z=(oe=Le.next()).done);Z=!0){var xe=oe.value;Y.apply(void 0,[xe].concat(Ut(G)))}}catch(wr){Ce=!0,Pe=wr}finally{try{!Z&&Le.return!=null&&Le.return()}finally{if(Ce)throw Pe}}else Y.apply(void 0,[l.topLevelInitializer].concat(Ut(G)));var Ve=!0,Je=!1,Ge=void 0;if(l.initializer)if(Array.isArray(l.initializer))try{for(var kt=l.initializer[Symbol.iterator](),at;!(Ve=(at=kt.next()).done);Ve=!0){var ar=at.value;Y.apply(void 0,[ar].concat(Ut(G)))}}catch(wr){Je=!0,Ge=wr}finally{try{!Ve&&kt.return!=null&&kt.return()}finally{if(Je)throw Ge}}else Y.apply(void 0,[l.initializer].concat(Ut(G)));l.rules.forEach(function(wr){return Y.apply(void 0,[wr].concat(Ut(G)))})},grammar_import:de,top_level_initializer:de,initializer:de,rule:W,named:W,choice:I("alternatives"),action:W,sequence:I("elements"),labeled:W,text:W,simple_and:W,simple_not:W,optional:W,zero_or_more:W,one_or_more:W,repeated:function(l){for(var U=arguments.length,G=new Array(U>1?U-1:0),X=1;X<U;X++)G[X-1]=arguments[X];return l.delimiter&&Y.apply(void 0,[l.delimiter].concat(Ut(G))),Y.apply(void 0,[l.expression].concat(Ut(G)))},group:W,semantic_and:de,semantic_not:de,rule_ref:de,library_ref:de,literal:de,class:de,any:de};return Object.keys(M).forEach(function(l){Object.prototype.hasOwnProperty.call(Se,l)||(Se[l]=M[l])}),Y}};$e.exports=ve}),c=n(function(Be,$e){"use strict";var ve=function(de,W){if(!(de&&W))return de||W;var I=Array.isArray(de)?de:[de];return I.push(W),I},Se=i(),Y={findRule:function(de,W){for(var I=0;I<de.rules.length;I++)if(de.rules[I].name===W)return de.rules[I]},indexOfRule:function(de,W){for(var I=0;I<de.rules.length;I++)if(de.rules[I].name===W)return I;return-1},alwaysConsumesOnSuccess:function(de,W){function I(){return!0}function M(){return!1}var l=Se.build({choice:function(U){return U.alternatives.every(l)},sequence:function(U){return U.elements.some(l)},simple_and:M,simple_not:M,optional:M,zero_or_more:M,repeated:function(U){var G=U.min?U.min:U.max;return G.type!=="constant"||G.value===0?!1:!!(l(U.expression)||G.value>1&&U.delimiter&&l(U.delimiter))},semantic_and:M,semantic_not:M,rule_ref:function(U){var G=Y.findRule(de,U.name);return G?l(G):void 0},library_ref:M,literal:function(U){return U.value!==""},class:I,any:I});return l(W)},combine:function(de){return de.reduce(function(W,I){return W.topLevelInitializer=ve(W.topLevelInitializer,I.topLevelInitializer),W.initializer=ve(W.initializer,I.initializer),W.rules=W.rules.concat(I.rules),W})}};$e.exports=Y}),h=n(function(Be,$e){"use strict";var ve=function(Se){var Y=0,de=!0,W=!1,I=void 0;try{for(var M=Se.imports[Symbol.iterator](),l;!(de=(l=M.next()).done);de=!0){var U=l.value,G=!0,X=!1,re=void 0;try{for(var _e=U.what[Symbol.iterator](),ue;!(G=(ue=_e.next()).done);G=!0){var Ae=ue.value,Oe=void 0;switch(Ae.type){case"import_binding_all":continue;case"import_binding_default":break;case"import_binding":Oe=Ae.binding;break;case"import_binding_rename":Oe=Ae.rename;break;default:throw new TypeError("Unknown binding type")}Se.rules.push({type:"rule",name:Ae.binding,nameLocation:Ae.location,expression:{type:"library_ref",name:Oe,library:U.from.module,libraryNumber:Y,location:Ae.location},location:U.from.location})}}catch(Ee){X=!0,re=Ee}finally{try{!G&&_e.return!=null&&_e.return()}finally{if(X)throw re}}Y++}}catch(Ee){W=!0,I=Ee}finally{try{!de&&M.return!=null&&M.return()}finally{if(W)throw I}}};$e.exports=ve}),m=n(function(Be,$e){"use strict";var ve=function(de,W){var I=0,M=!0,l=!1,U=void 0;try{for(var G=de.imports[Symbol.iterator](),X;!(M=(X=G.next()).done);M=!0){var re=X.value,_e=!0,ue=!1,Ae=void 0;try{for(var Oe=re.what[Symbol.iterator](),Ee;!(_e=(Ee=Oe.next()).done);_e=!0){var Z=Ee.value;if(Z.type==="import_binding_all"&&Z.binding===W)return I}}catch(Ce){ue=!0,Ae=Ce}finally{try{!_e&&Oe.return!=null&&Oe.return()}finally{if(ue)throw Ae}}I++}}catch(Ce){l=!0,U=Ce}finally{try{!M&&G.return!=null&&G.return()}finally{if(l)throw U}}return-1},Se=function(de,W,I){Y.build({library_ref:function(M){M.libraryNumber===-1&&(M.libraryNumber=ve(de,M.library),M.libraryNumber===-1&&I.error('Unknown module "'.concat(M.library,'"'),M.location))}})(de)},Y=i();$e.exports=Se}),S=n(function(Be,$e){"use strict";var ve={PUSH:0,PUSH_EMPTY_STRING:35,PUSH_UNDEFINED:1,PUSH_NULL:2,PUSH_FAILED:3,PUSH_EMPTY_ARRAY:4,PUSH_CURR_POS:5,POP:6,POP_CURR_POS:7,POP_N:8,NIP:9,APPEND:10,WRAP:11,TEXT:12,PLUCK:36,IF:13,IF_ERROR:14,IF_NOT_ERROR:15,IF_LT:30,IF_GE:31,IF_LT_DYNAMIC:32,IF_GE_DYNAMIC:33,WHILE_NOT_ERROR:16,MATCH_ANY:17,MATCH_STRING:18,MATCH_STRING_IC:19,MATCH_CHAR_CLASS:20,MATCH_UNICODE_CLASS:42,MATCH_REGEXP:20,ACCEPT_N:21,ACCEPT_STRING:22,FAIL:23,LOAD_SAVED_POS:24,UPDATE_SAVED_POS:25,CALL:26,RULE:27,LIBRARY_RULE:41,SILENT_FAILS_ON:28,SILENT_FAILS_OFF:29,SOURCE_MAP_PUSH:37,SOURCE_MAP_POP:38,SOURCE_MAP_LABEL_PUSH:39,SOURCE_MAP_LABEL_POP:40};$e.exports=ve}),E=n(function(Be,$e){"use strict";var ve=(function(){function Se(Y){gi(this,Se),this.options=Yg({stringify:String,convert:function(de){return de}},Y),this.items=[],this.offsets=Object.create(null)}return vi(Se,[{key:"add",value:function(Y){var de=this.options.convert(Y);if(!de)return-1;var W=this.options.stringify(de),I=this.offsets[W];return I===void 0&&(I=this.items.push(de)-1,this.offsets[W]=I),I}},{key:"get",value:function(Y){return this.items[Y]}},{key:"map",value:function(Y){return this.items.map(Y)}}]),Se})();$e.exports=ve}),v=n(function(Be,$e){"use strict";var ve=function(l){function U(ue){return ue.match=I}function G(ue){return _e(ue.expression),ue.match=W}function X(ue){return ue.match=_e(ue.expression)}function re(ue,Ae){for(var Oe=ue.length,Ee=0,Z=0,Ce=0;Ce<Oe;++Ce){var Pe=_e(ue[Ce]);Pe===W&&++Ee,Pe===M&&++Z}return Ee===Oe?W:Ae?Z===Oe?M:I:Z>0?M:I}var _e=Se.build({rule:function(ue){var Ae,Oe=0;if(mi(ue.match)>"u"){ue.match=I;do if(Ae=ue.match,ue.match=_e(ue.expression),++Oe>6)throw new de("Infinity cycle detected when trying to evaluate node match result",ue.location);while(Ae!==ue.match)}return ue.match},named:X,choice:function(ue){return ue.match=re(ue.alternatives,!0)},action:X,sequence:function(ue){return ue.match=re(ue.elements,!1)},labeled:X,text:X,simple_and:X,simple_not:function(ue){return ue.match=-_e(ue.expression)},optional:G,zero_or_more:G,one_or_more:X,repeated:function(ue){var Ae=_e(ue.expression),Oe=ue.delimiter?_e(ue.delimiter):M,Ee=ue.min?ue.min:ue.max;return Ee.type!=="constant"||ue.max.type!=="constant"?ue.match=I:ue.max.value===0||ue.max.value!==null&&Ee.value>ue.max.value?ue.match=M:Ae===M?ue.match=Ee.value===0?W:M:Ae===W?ue.delimiter&&Ee.value>=2?ue.match=Oe:ue.match=W:ue.delimiter&&Ee.value>=2?ue.match=Oe===M?M:I:ue.match=Ee.value===0?W:I},group:X,semantic_and:U,semantic_not:U,rule_ref:function(ue){var Ae=Y.findRule(l,ue.name);return Ae?ue.match=_e(Ae):I},library_ref:function(){return 0},literal:function(ue){var Ae=ue.value.length===0?W:I;return ue.match=Ae},class:function(ue){var Ae=ue.parts.length===0?M:I;return ue.match=Ae},any:U});_e(l)},Se=i(),Y=c(),de=a(),W=1,I=0,M=-1;ve.ALWAYS_MATCH=W,ve.SOMETIMES_MATCH=I,ve.NEVER_MATCH=M,$e.exports=ve}),g=n(function(Be,$e){"use strict";var ve=function(G,X){var re=new W,_e=new W({stringify:JSON.stringify,convert:function(se){return{value:se.parts,inverted:se.inverted,ignoreCase:se.ignoreCase,unicode:se.unicode}}}),ue=new W({stringify:JSON.stringify}),Ae=new W,Oe=[],Ee=[];function Z(se,ke,Ye){var K={predicate:se,params:ke,body:Ye.code,location:Ye.codeLocation},fe=JSON.stringify(K),Ue=Oe.findIndex(function(Ke){return JSON.stringify(Ke)===fe});return Ue===-1?Oe.push(K)-1:Ue}function Ce(se){return Ee.push(se)-1}function Pe(se){var ke={};return Object.keys(se).forEach(function(Ye){ke[Ye]=se[Ye]}),ke}function Le(se){for(var ke=arguments.length,Ye=new Array(ke>1?ke-1:0),K=1;K<ke;K++)Ye[K-1]=arguments[K];var fe;return(fe=se).concat.apply(fe,Ut(Ye))}function oe(se,ke,Ye,K){return se===M?Ye:se===U?K:ke.concat([Ye.length,K.length],Ye,K)}function xe(se,ke){return se.concat([ke.length],ke)}function Ve(se,ke,Ye,K){var fe=Object.keys(Ye).map(function(Ue){return K-Ye[Ue]});return[Y.CALL,se,ke,fe.length].concat(fe)}function Je(se,ke,Ye){var K=se.match||0;return Le([Y.PUSH_CURR_POS],[Y.SILENT_FAILS_ON],xt(se,{sp:Ye.sp+1,env:Pe(Ye.env),action:null}),[Y.SILENT_FAILS_OFF],oe(ke?-K:K,[ke?Y.IF_ERROR:Y.IF_NOT_ERROR],Le([Y.POP],[ke?Y.POP:Y.POP_CURR_POS],[Y.PUSH_UNDEFINED]),Le([Y.POP],[ke?Y.POP_CURR_POS:Y.POP],[Y.PUSH_FAILED])))}function Ge(se,ke,Ye){var K=Z(!0,Object.keys(Ye.env),se);return Le([Y.UPDATE_SAVED_POS],Ve(K,0,Ye.env,Ye.sp),oe(se.match||0,[Y.IF],Le([Y.POP],ke?[Y.PUSH_FAILED]:[Y.PUSH_UNDEFINED]),Le([Y.POP],ke?[Y.PUSH_UNDEFINED]:[Y.PUSH_FAILED])))}function kt(se){return xe([Y.WHILE_NOT_ERROR],Le([Y.APPEND],se))}function at(se){var ke=se;return new Error('Unknown boundary type "'.concat(ke.type,'" for the "repeated" node'))}function ar(se,ke,Ye,K){switch(se.type){case"constant":return{pre:[],post:[],sp:Ye};case"variable":return se.sp=K+Ye-ke[se.value],{pre:[],post:[],sp:Ye};case"function":{se.sp=K;var fe=Z(!0,Object.keys(ke),{code:se.value,codeLocation:se.codeLocation});return{pre:Ve(fe,0,ke,Ye),post:[Y.NIP],sp:Ye+1}}default:throw at(se)}}function wr(se,ke){if(ke.value!==null){var Ye=ke.type==="constant"?[Y.IF_GE,ke.value]:[Y.IF_GE_DYNAMIC,ke.sp||0];return oe(l,Ye,[Y.PUSH_FAILED],se)}return se}function Xr(se,ke){var Ye=ke.type==="constant"?[Y.IF_LT,ke.value]:[Y.IF_LT_DYNAMIC,ke.sp||0];return Le(se,oe(l,Ye,[Y.POP,Y.POP_CURR_POS,Y.PUSH_FAILED],[Y.NIP]))}function dr(se,ke,Ye,K,fe){return se?Le([Y.PUSH_CURR_POS],xt(se,{sp:K.sp+fe+1,env:Pe(K.env),action:null}),oe(se.match||0,[Y.IF_NOT_ERROR],Le([Y.POP],Ye,oe(-ke,[Y.IF_ERROR],[Y.POP,Y.POP_CURR_POS,Y.PUSH_FAILED],[Y.NIP])),[Y.NIP])):Ye}function Wr(se){return X&&X.output==="source-and-map"&&Object.keys(se).forEach(function(ke){var Ye=se[ke];se[ke]=function(K){for(var fe=arguments.length,Ue=new Array(fe>1?fe-1:0),Ke=1;Ke<fe;Ke++)Ue[Ke-1]=arguments[Ke];var ye=Ye.apply(void 0,[K].concat(Ut(Ue)));return ye===void 0||!K.location?ye:Le([Y.SOURCE_MAP_PUSH,Ce(K.location)],ye,[Y.SOURCE_MAP_POP])}}),de.build(se)}var xt=Wr({grammar:function(se){se.rules.forEach(xt),se.literals=re.items,se.classes=_e.items,se.expectations=ue.items,se.importedNames=Ae.items,se.functions=Oe,se.locations=Ee},rule:function(se){se.bytecode=xt(se.expression,{sp:-1,env:{},pluck:[],action:null})},named:function(se,ke){var Ye=se.match||0,K=Ye===M?-1:ue.add({type:"rule",value:se.name});return Le([Y.SILENT_FAILS_ON],xt(se.expression,ke),[Y.SILENT_FAILS_OFF],oe(-Ye,[Y.IF_ERROR],[Y.FAIL,K],[]))},choice:function(se,ke){function Ye(K,fe){var Ue=K[0].match||0,Ke=xt(K[0],{sp:fe.sp,env:Pe(fe.env),action:null});return Ue===M?Ke:Le(Ke,K.length>1?oe(l,[Y.IF_ERROR],Le([Y.POP],Ye(K.slice(1),fe)),[]):[])}return Ye(se.alternatives,ke)},action:function(se,ke){var Ye=Pe(ke.env),K=se.expression.type!=="sequence"||se.expression.elements.length===0,fe=xt(se.expression,{sp:ke.sp+(K?1:0),env:Ye,action:se}),Ue=se.expression.match||0,Ke=K&&Ue!==U?Z(!1,Object.keys(Ye),se):-1;return K?Le([Y.PUSH_CURR_POS],fe,oe(Ue,[Y.IF_NOT_ERROR],Le([Y.LOAD_SAVED_POS,1],Ve(Ke,1,Ye,ke.sp+2)),[]),[Y.NIP]):fe},sequence:function(se,ke){function Ye(K,fe){if(K.length>0){var Ue=se.elements.length-K.length+1;return Le(xt(K[0],{sp:fe.sp,env:fe.env,pluck:fe.pluck,action:null}),oe(K[0].match||0,[Y.IF_NOT_ERROR],Ye(K.slice(1),{sp:fe.sp+1,env:fe.env,pluck:fe.pluck,action:fe.action}),Le(Ue>1?[Y.POP_N,Ue]:[Y.POP],[Y.POP_CURR_POS],[Y.PUSH_FAILED])))}else{if(fe.pluck&&fe.pluck.length>0)return Le([Y.PLUCK,se.elements.length+1,fe.pluck.length],fe.pluck.map(function(ye){return fe.sp-ye}));if(fe.action){var Ke=Z(!1,Object.keys(fe.env),fe.action);return Le([Y.LOAD_SAVED_POS,se.elements.length],Ve(Ke,se.elements.length+1,fe.env,fe.sp))}else return Le([Y.WRAP,se.elements.length],[Y.NIP])}}return Le([Y.PUSH_CURR_POS],Ye(se.elements,{sp:ke.sp+1,env:ke.env,pluck:[],action:ke.action}))},labeled:function(se,ke){var Ye=ke.env,K=se.label,fe=ke.sp+1;K&&(Ye=Pe(ke.env),ke.env[K]=fe),se.pick&&ke.pluck.push(fe);var Ue=xt(se.expression,{sp:ke.sp,env:Ye,action:null});return K&&se.labelLocation&&X&&X.output==="source-and-map"?Le([Y.SOURCE_MAP_LABEL_PUSH,fe,re.add(K),Ce(se.labelLocation)],Ue,[Y.SOURCE_MAP_LABEL_POP,fe]):Ue},text:function(se,ke){return Le([Y.PUSH_CURR_POS],xt(se.expression,{sp:ke.sp+1,env:Pe(ke.env),action:null}),oe(se.match||0,[Y.IF_NOT_ERROR],Le([Y.POP],[Y.TEXT]),[Y.NIP]))},simple_and:function(se,ke){return Je(se.expression,!1,ke)},simple_not:function(se,ke){return Je(se.expression,!0,ke)},optional:function(se,ke){return Le(xt(se.expression,{sp:ke.sp,env:Pe(ke.env),action:null}),oe(-(se.expression.match||0),[Y.IF_ERROR],Le([Y.POP],[Y.PUSH_NULL]),[]))},zero_or_more:function(se,ke){var Ye=xt(se.expression,{sp:ke.sp+1,env:Pe(ke.env),action:null});return Le([Y.PUSH_EMPTY_ARRAY],Ye,kt(Ye),[Y.POP])},one_or_more:function(se,ke){var Ye=xt(se.expression,{sp:ke.sp+1,env:Pe(ke.env),action:null});return Le([Y.PUSH_EMPTY_ARRAY],Ye,oe(se.expression.match||0,[Y.IF_NOT_ERROR],Le(kt(Ye),[Y.POP]),Le([Y.POP],[Y.POP],[Y.PUSH_FAILED])))},repeated:function(se,ke){var Ye=se.min?se.min:se.max,K=Ye.type!=="constant"||Ye.value>0,fe=se.max.type!=="constant"&&se.max.value!==null,Ue=K?2:1,Ke=se.min?ar(se.min,ke.env,ke.sp,2+(se.max.type==="function"?1:0)):{pre:[],post:[],sp:ke.sp},ye=ar(se.max,ke.env,Ke.sp,Ue),Xe=xt(se.expression,{sp:ye.sp+Ue,env:Pe(ke.env),action:null}),Ze=se.delimiter!==null?xt(se.expression,{sp:ye.sp+Ue+1,env:Pe(ke.env),action:null}):Xe,Mt=dr(se.delimiter,se.expression.match||0,Ze,ke,Ue),Me=wr(Mt,se.max),ft=fe?wr(Xe,se.max):Xe,qe=Le(K?[Y.PUSH_CURR_POS]:[],[Y.PUSH_EMPTY_ARRAY],ft,kt(Me),[Y.POP]);return Le(Ke.pre,ye.pre,K?Xr(qe,Ye):qe,ye.post,Ke.post)},group:function(se,ke){return xt(se.expression,{sp:ke.sp,env:Pe(ke.env),action:null})},semantic_and:function(se,ke){return Ge(se,!1,ke)},semantic_not:function(se,ke){return Ge(se,!0,ke)},rule_ref:function(se){return[Y.RULE,Se.indexOfRule(G,se.name)]},library_ref:function(se){return[Y.LIBRARY_RULE,se.libraryNumber,Ae.add(se.name)]},literal:function(se){if(se.value.length>0){var ke=se.match||0,Ye=ke===l||ke===M&&!se.ignoreCase?re.add(se.ignoreCase?se.value.toLowerCase():se.value):-1,K=ke!==M?ue.add({type:"literal",value:se.value,ignoreCase:se.ignoreCase}):-1;return oe(ke,se.ignoreCase?[Y.MATCH_STRING_IC,Ye]:[Y.MATCH_STRING,Ye],se.ignoreCase?[Y.ACCEPT_N,se.value.length]:[Y.ACCEPT_STRING,Ye],[Y.FAIL,K])}return[Y.PUSH_EMPTY_STRING]},class:function(se){var ke=se.match||0,Ye=ke===l?_e.add(se):-1,K=ke!==M?ue.add({type:"class",value:se.parts,inverted:se.inverted,ignoreCase:se.ignoreCase,unicode:se.unicode}):-1;return oe(ke,[se.unicode?Y.MATCH_UNICODE_CLASS:Y.MATCH_CHAR_CLASS,Ye],[Y.ACCEPT_N,se.unicode?-1:1],[Y.FAIL,K])},any:function(se){var ke=se.match||0,Ye=ke!==M?ue.add({type:"any"}):-1;return oe(ke,[Y.MATCH_ANY],[Y.ACCEPT_N,1],[Y.FAIL,Ye])}});xt(G)},Se=c(),Y=S(),de=i(),W=E(),I=v(),M=I.ALWAYS_MATCH,l=I.SOMETIMES_MATCH,U=I.NEVER_MATCH;$e.exports=ve}),b=n(function(Be){var $e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");Be.encode=function(ve){if(0<=ve&&ve<$e.length)return $e[ve];throw new TypeError("Must be between 0 and 63: "+ve)}}),w=n(function(Be){var $e=function(I){return I<0?(-I<<1)+1:(I<<1)+0},ve=b(),Se=5,Y=1<<Se,de=Y-1,W=Y;Be.encode=function(I){var M="",l,U=$e(I);do l=U&de,U>>>=Se,U>0&&(l|=W),M+=ve.encode(l);while(U>0);return M}}),_=n(function(Be){var $e=function(oe,xe,Ve){if(xe in oe)return oe[xe];if(arguments.length===3)return Ve;throw new Error('"'+xe+'" is a required argument.')},ve=function(oe){return oe},Se=function(oe){return de(oe)?"$"+oe:oe},Y=function(oe){return de(oe)?oe.slice(1):oe},de=function(oe){if(!oe)return!1;var xe=oe.length;if(xe<9||oe.charCodeAt(xe-1)!==95||oe.charCodeAt(xe-2)!==95||oe.charCodeAt(xe-3)!==111||oe.charCodeAt(xe-4)!==116||oe.charCodeAt(xe-5)!==111||oe.charCodeAt(xe-6)!==114||oe.charCodeAt(xe-7)!==112||oe.charCodeAt(xe-8)!==95||oe.charCodeAt(xe-9)!==95)return!1;for(var Ve=xe-10;Ve>=0;Ve--)if(oe.charCodeAt(Ve)!==36)return!1;return!0},W=function(oe,xe){return oe===xe?0:oe===null?1:xe===null?-1:oe>xe?1:-1},I=function(oe,xe){var Ve=oe.generatedLine-xe.generatedLine;return Ve!==0||(Ve=oe.generatedColumn-xe.generatedColumn,Ve!==0)||(Ve=W(oe.source,xe.source),Ve!==0)||(Ve=oe.originalLine-xe.originalLine,Ve!==0)||(Ve=oe.originalColumn-xe.originalColumn,Ve!==0)?Ve:W(oe.name,xe.name)},M=function(oe){return function(xe){var Ve=X(xe),Je=G(xe),Ge=new URL(xe,Je);oe(Ge);var kt=Ge.toString();return Ve==="absolute"?kt:Ve==="scheme-relative"?kt.slice(Ee.length):Ve==="path-absolute"?kt.slice(Z.length):re(Je,kt)}},l=function(oe,xe){return new URL(oe,xe).toString()},U=function(oe,xe){var Ve=0;do{var Je=oe+Ve++;if(xe.indexOf(Je)===-1)return Je}while(!0)},G=function(oe){for(var xe=oe.split("..").length-1,Ve=U("p",oe),Je="".concat(Z,"/"),Ge=0;Ge<xe;Ge++)Je+="".concat(Ve,"/");return Je},X=function(oe){return oe[0]==="/"?oe[1]==="/"?"scheme-relative":"path-absolute":Ce.test(oe)?"absolute":"path-relative"},re=function(oe,xe){typeof oe=="string"&&(oe=new URL(oe)),typeof xe=="string"&&(xe=new URL(xe));var Ve=xe.pathname.split("/"),Je=oe.pathname.split("/");for(Je.length>0&&!Je[Je.length-1]&&Je.pop();Ve.length>0&&Je.length>0&&Ve[0]===Je[0];)Ve.shift(),Je.shift();return Je.map(function(){return".."}).concat(Ve).join("/")+xe.search+xe.hash},_e=function(oe,xe){var Ve=X(xe),Je=X(oe);if(oe=Pe(oe),Ve==="absolute")return l(xe,void 0);if(Je==="absolute")return l(xe,oe);if(Ve==="scheme-relative")return Le(xe);if(Je==="scheme-relative")return l(xe,l(oe,Z)).slice(Ee.length);if(Ve==="path-absolute")return Le(xe);if(Je==="path-absolute")return l(xe,l(oe,Z)).slice(Z.length);var Ge=G(xe+oe),kt=l(xe,l(oe,Ge));return re(Ge,kt)},ue=function(oe,xe){var Ve=Ae(oe,xe);return typeof Ve=="string"?Ve:Le(xe)},Ae=function(oe,xe){if(X(oe)!==X(xe))return null;var Ve=G(oe+xe),Je=new URL(oe,Ve),Ge=new URL(xe,Ve);try{new URL("",Ge.toString())}catch{return null}return Ge.protocol!==Je.protocol||Ge.user!==Je.user||Ge.password!==Je.password||Ge.hostname!==Je.hostname||Ge.port!==Je.port?null:re(Je,Ge)};Be.getArg=$e;var Oe=(function(){return!("__proto__"in Object.create(null))})();Be.toSetString=Oe?ve:Se,Be.fromSetString=Oe?ve:Y,Be.compareByGeneratedPositionsInflated=I;var Ee="http:",Z="".concat(Ee,"//host"),Ce=/^[A-Za-z0-9\+\-\.]+:/,Pe=M(function(oe){oe.pathname=oe.pathname.replace(/\/?$/,"/")}),Le=M(function(oe){});Be.normalize=Le,Be.join=_e,Be.relative=ue}),A=n(function(Be){var $e=(function(){"use strict";function ve(){gi(this,ve),this._array=[],this._set=new Map}return vi(ve,[{key:"size",value:function(){return this._set.size}},{key:"add",value:function(Se,Y){var de=this.has(Se),W=this._array.length;(!de||Y)&&this._array.push(Se),de||this._set.set(Se,W)}},{key:"has",value:function(Se){return this._set.has(Se)}},{key:"indexOf",value:function(Se){var Y=this._set.get(Se);if(Y>=0)return Y;throw new Error('"'+Se+'" is not in the set.')}},{key:"at",value:function(Se){if(Se>=0&&Se<this._array.length)return this._array[Se];throw new Error("No element indexed by "+Se)}},{key:"toArray",value:function(){return this._array.slice()}}],[{key:"fromArray",value:function(Se,Y){for(var de=new ve,W=0,I=Se.length;W<I;W++)de.add(Se[W],Y);return de}}]),ve})();Be.ArraySet=$e}),C=n(function(Be){var $e=function(Y,de){var W=Y.generatedLine,I=de.generatedLine,M=Y.generatedColumn,l=de.generatedColumn;return I>W||I==W&&l>=M||ve.compareByGeneratedPositionsInflated(Y,de)<=0},ve=_(),Se=(function(){"use strict";function Y(){gi(this,Y),this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return vi(Y,[{key:"unsortedForEach",value:function(de,W){this._array.forEach(de,W)}},{key:"add",value:function(de){$e(this._last,de)?(this._last=de,this._array.push(de)):(this._sorted=!1,this._array.push(de))}},{key:"toArray",value:function(){return this._sorted||(this._array.sort(ve.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}}]),Y})();Be.MappingList=Se}),x=n(function(Be){var $e=w(),ve=_(),Se=A().ArraySet,Y=C().MappingList,de=(function(){"use strict";function W(I){gi(this,W),I||(I={}),this._file=ve.getArg(I,"file",null),this._sourceRoot=ve.getArg(I,"sourceRoot",null),this._skipValidation=ve.getArg(I,"skipValidation",!1),this._sources=new Se,this._names=new Se,this._mappings=new Y,this._sourcesContents=null}return vi(W,[{key:"addMapping",value:function(I){var M=ve.getArg(I,"generated"),l=ve.getArg(I,"original",null),U=ve.getArg(I,"source",null),G=ve.getArg(I,"name",null);this._skipValidation||this._validateMapping(M,l,U,G),U!=null&&(U=String(U),this._sources.has(U)||this._sources.add(U)),G!=null&&(G=String(G),this._names.has(G)||this._names.add(G)),this._mappings.add({generatedLine:M.line,generatedColumn:M.column,originalLine:l&&l.line,originalColumn:l&&l.column,source:U,name:G})}},{key:"setSourceContent",value:function(I,M){var l=I;this._sourceRoot!=null&&(l=ve.relative(this._sourceRoot,l)),M!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[ve.toSetString(l)]=M):this._sourcesContents&&(delete this._sourcesContents[ve.toSetString(l)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))}},{key:"applySourceMap",value:function(I,M,l){var U=M;if(M==null){if(I.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);U=I.file}var G=this._sourceRoot;G!=null&&(U=ve.relative(G,U));var X=this._mappings.toArray().length>0?new Se:this._sources,re=new Se;this._mappings.unsortedForEach(function(_e){if(_e.source===U&&_e.originalLine!=null){var ue=I.originalPositionFor({line:_e.originalLine,column:_e.originalColumn});ue.source!=null&&(_e.source=ue.source,l!=null&&(_e.source=ve.join(l,_e.source)),G!=null&&(_e.source=ve.relative(G,_e.source)),_e.originalLine=ue.line,_e.originalColumn=ue.column,ue.name!=null&&(_e.name=ue.name))}var Ae=_e.source;Ae!=null&&!X.has(Ae)&&X.add(Ae);var Oe=_e.name;Oe!=null&&!re.has(Oe)&&re.add(Oe)},this),this._sources=X,this._names=re,I.sources.forEach(function(_e){var ue=I.sourceContentFor(_e);ue!=null&&(l!=null&&(_e=ve.join(l,_e)),G!=null&&(_e=ve.relative(G,_e)),this.setSourceContent(_e,ue))},this)}},{key:"_validateMapping",value:function(I,M,l,U){if(M&&typeof M.line!="number"&&typeof M.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(I&&"line"in I&&"column"in I&&I.line>0&&I.column>=0&&!M&&!l&&!U)&&!(I&&"line"in I&&"column"in I&&M&&"line"in M&&"column"in M&&I.line>0&&I.column>=0&&M.line>0&&M.column>=0&&l))throw new Error("Invalid mapping: "+JSON.stringify({generated:I,source:l,original:M,name:U}))}},{key:"_serializeMappings",value:function(){for(var M=0,l=1,U=0,G=0,X=0,re=0,_e="",ue,Ae,Oe,Ee,Z=this._mappings.toArray(),Ce=0,Pe=Z.length;Ce<Pe;Ce++){if(Ae=Z[Ce],ue="",Ae.generatedLine!==l)for(M=0;Ae.generatedLine!==l;)ue+=";",l++;else if(Ce>0){if(!ve.compareByGeneratedPositionsInflated(Ae,Z[Ce-1]))continue;ue+=","}ue+=$e.encode(Ae.generatedColumn-M),M=Ae.generatedColumn,Ae.source!=null&&(Ee=this._sources.indexOf(Ae.source),ue+=$e.encode(Ee-re),re=Ee,ue+=$e.encode(Ae.originalLine-1-G),G=Ae.originalLine-1,ue+=$e.encode(Ae.originalColumn-U),U=Ae.originalColumn,Ae.name!=null&&(Oe=this._names.indexOf(Ae.name),ue+=$e.encode(Oe-X),X=Oe)),_e+=ue}return _e}},{key:"_generateSourcesContent",value:function(I,M){return I.map(function(l){if(!this._sourcesContents)return null;M!=null&&(l=ve.relative(M,l));var U=ve.toSetString(l);return Object.prototype.hasOwnProperty.call(this._sourcesContents,U)?this._sourcesContents[U]:null},this)}},{key:"toJSON",value:function(){var M={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(M.file=this._file),this._sourceRoot!=null&&(M.sourceRoot=this._sourceRoot),this._sourcesContents&&(M.sourcesContent=this._generateSourcesContent(M.sources,M.sourceRoot)),M}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}],[{key:"fromSourceMap",value:function(I){var M=I.sourceRoot,l=new W({file:I.file,sourceRoot:M});return I.eachMapping(function(U){var G={generated:{line:U.generatedLine,column:U.generatedColumn}};U.source!=null&&(G.source=U.source,M!=null&&(G.source=ve.relative(M,G.source)),G.original={line:U.originalLine,column:U.originalColumn},U.name!=null&&(G.name=U.name)),l.addMapping(G)}),I.sources.forEach(function(U){var G=U;M!=null&&(G=ve.relative(M,U)),l._sources.has(G)||l._sources.add(G);var X=I.sourceContentFor(U);X!=null&&l.setSourceContent(U,X)}),l}}]),W})();de.prototype._version=3,Be.SourceMapGenerator=de}),N=n(function(Be){var $e=x().SourceMapGenerator,ve=_(),Se=/(\r?\n)/,Y=10,de="$$$isSourceNode$$$",W=(function(){"use strict";function I(M,l,U,G,X){gi(this,I),this.children=[],this.sourceContents={},this.line=M??null,this.column=l??null,this.source=U??null,this.name=X??null,this[de]=!0,G!=null&&this.add(G)}return vi(I,[{key:"add",value:function(M){if(Array.isArray(M))M.forEach(function(l){this.add(l)},this);else if(M[de]||typeof M=="string")M&&this.children.push(M);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+M);return this}},{key:"prepend",value:function(M){if(Array.isArray(M))for(var l=M.length-1;l>=0;l--)this.prepend(M[l]);else if(M[de]||typeof M=="string")this.children.unshift(M);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+M);return this}},{key:"walk",value:function(M){for(var l,U=0,G=this.children.length;U<G;U++)l=this.children[U],l[de]?l.walk(M):l!==""&&M(l,{source:this.source,line:this.line,column:this.column,name:this.name})}},{key:"join",value:function(M){var l,U,G=this.children.length;if(G>0){for(l=[],U=0;U<G-1;U++)l.push(this.children[U]),l.push(M);l.push(this.children[U]),this.children=l}return this}},{key:"replaceRight",value:function(M,l){var U=this.children[this.children.length-1];return U[de]?U.replaceRight(M,l):typeof U=="string"?this.children[this.children.length-1]=U.replace(M,l):this.children.push("".replace(M,l)),this}},{key:"setSourceContent",value:function(M,l){this.sourceContents[ve.toSetString(M)]=l}},{key:"walkSourceContents",value:function(M){for(var l=0,U=this.children.length;l<U;l++)this.children[l][de]&&this.children[l].walkSourceContents(M);for(var G=Object.keys(this.sourceContents),X=0,re=G.length;X<re;X++)M(ve.fromSetString(G[X]),this.sourceContents[G[X]])}},{key:"toString",value:function(){var l="";return this.walk(function(U){l+=U}),l}},{key:"toStringWithSourceMap",value:function(M){var l={code:"",line:1,column:0},U=new $e(M),G=!1,X=null,re=null,_e=null,ue=null;return this.walk(function(Ae,Oe){l.code+=Ae,Oe.source!==null&&Oe.line!==null&&Oe.column!==null?((X!==Oe.source||re!==Oe.line||_e!==Oe.column||ue!==Oe.name)&&U.addMapping({source:Oe.source,original:{line:Oe.line,column:Oe.column},generated:{line:l.line,column:l.column},name:Oe.name}),X=Oe.source,re=Oe.line,_e=Oe.column,ue=Oe.name,G=!0):G&&(U.addMapping({generated:{line:l.line,column:l.column}}),X=null,G=!1);for(var Ee=0,Z=Ae.length;Ee<Z;Ee++)Ae.charCodeAt(Ee)===Y?(l.line++,l.column=0,Ee+1===Z?(X=null,G=!1):G&&U.addMapping({source:Oe.source,original:{line:Oe.line,column:Oe.column},generated:{line:l.line,column:l.column},name:Oe.name})):l.column++}),this.walkSourceContents(function(Ae,Oe){U.setSourceContent(Ae,Oe)}),{code:l.code,map:U}}}],[{key:"fromStringWithSourceMap",value:function(M,l,U){var G=new I,X=M.split(Se),re=0,_e=function(){var Pe=oe(),Le=oe()||"";return Pe+Le;function oe(){return re<X.length?X[re++]:void 0}},ue=1,Ae=0,Oe=null,Ee;return l.eachMapping(function(Ce){if(Oe!==null)if(ue<Ce.generatedLine)Z(Oe,_e()),ue++,Ae=0;else{Ee=X[re]||"";var Pe=Ee.substr(0,Ce.generatedColumn-Ae);X[re]=Ee.substr(Ce.generatedColumn-Ae),Ae=Ce.generatedColumn,Z(Oe,Pe),Oe=Ce;return}for(;ue<Ce.generatedLine;)G.add(_e()),ue++;Ae<Ce.generatedColumn&&(Ee=X[re]||"",G.add(Ee.substr(0,Ce.generatedColumn)),X[re]=Ee.substr(Ce.generatedColumn),Ae=Ce.generatedColumn),Oe=Ce},this),re<X.length&&(Oe&&Z(Oe,_e()),G.add(X.splice(re).join(""))),l.sources.forEach(function(Ce){var Pe=l.sourceContentFor(Ce);Pe!=null&&(U!=null&&(Ce=ve.join(U,Ce)),G.setSourceContent(Ce,Pe))}),G;function Z(Ce,Pe){if(Ce===null||Ce.source===void 0)G.add(Pe);else{var Le=U?ve.join(U,Ce.source):Ce.source;G.add(new I(Ce.originalLine,Ce.originalColumn,Le,Pe,Ce.name))}}}}]),I})();Be.SourceNode=W}),H=n(function(Be){Be.SourceMapGenerator=x().SourceMapGenerator,Be.SourceNode=N().SourceNode}),ne=n(function(Be,$e){"use strict";var ve=H(),Se=ve.SourceNode,Y=u(),de=(function(){function W(I,M,l,U){gi(this,W),this.sp=-1,this.maxSp=-1,this.varName=M,this.ruleName=I,this.type=l,this.bytecode=U,this.labels={},this.sourceMapStack=[]}return vi(W,[{key:"name",value:function(I){if(I<0)throw new RangeError("Rule '".concat(this.ruleName,"': The variable stack underflow: attempt to use a variable '").concat(this.varName,"<x>' at an index ").concat(I,`.
Bytecode: `).concat(this.bytecode));return this.varName+I}},{key:"push",value:function(I){++this.sp>this.maxSp&&(this.maxSp=this.sp);var M=this.labels[this.sp],l=[this.name(this.sp)," = ",I,";"];if(M)if(this.sourceMapStack.length){var U=W.sourceNode(M.location,l.splice(0,2),M.label),G=this.sourceMapPopInternal(),X=G.parts,re=G.location,_e=re.start.offset<M.location.end.offset?{start:M.location.end,end:re.end,source:re.source}:re,ue=W.sourceNode(_e,l.concat(`
`));return this.sourceMapStack.push([X,X.length+1,re]),new Se(null,null,M.location.source,[U,ue])}else return W.sourceNode(M.location,l.concat(`
`));return l.join("")}},{key:"pop",value:function(I){var M=this;return I!==void 0?(this.sp-=I,Array.from({length:I},function(l,U){return M.name(M.sp+1+U)})):this.name(this.sp--)}},{key:"top",value:function(){return this.name(this.sp)}},{key:"index",value:function(I){if(I<0)throw new RangeError("Rule '".concat(this.ruleName,"': The variable stack overflow: attempt to get a variable at a negative index ").concat(I,`.
Bytecode: `).concat(this.bytecode));return this.name(this.sp-I)}},{key:"result",value:function(){if(this.maxSp<0)throw new RangeError("Rule '".concat(this.ruleName,`': The variable stack is empty, can't get the result.
Bytecode: `).concat(this.bytecode));return this.name(0)}},{key:"defines",value:function(){var M=this;return this.maxSp<0?"":this.type+" "+Array.from({length:this.maxSp+1},function(l,U){return M.name(U)}).join(", ")+";"}},{key:"checkedIf",value:function(I,M,l){var U=this.sp,G=M();if(!l)return[G];var X=this.sp;this.sp=U;var re=l();if(X!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+I+": Branches of a condition can't move the stack pointer differently (before: "+U+", after then: "+X+", after else: "+this.sp+"). Bytecode: "+this.bytecode);return[G,re]}},{key:"checkedLoop",value:function(I,M){var l=this.sp,U=M();if(l!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+I+": Body of a loop can't move the stack pointer (before: "+l+", after: "+this.sp+"). Bytecode: "+this.bytecode);return U}},{key:"sourceMapPush",value:function(I,M){if(this.sourceMapStack.length){var l=this.sourceMapStack[this.sourceMapStack.length-1];l[2].start.offset===M.start.offset&&l[2].end.offset>M.end.offset&&(l[2]={start:M.end,end:l[2].end,source:l[2].source})}this.sourceMapStack.push([I,I.length,M])}},{key:"sourceMapPopInternal",value:function(){var M=this.sourceMapStack.pop();if(!M)throw new RangeError("Rule '".concat(this.ruleName,`': Attempting to pop an empty source map stack.
Bytecode: `).concat(this.bytecode));var l=Xs(M,3),U=l[0],G=l[1],X=l[2],re=U.splice(G).map(function(ue){return Uc(ue,Se)?ue:ue+`
`});if(re.length){var _e=Y.offsetStart(X);U.push(new Se(_e.line,_e.column-1,String(X.source),re))}return{parts:U,location:X}}},{key:"sourceMapPop",value:function(I){var M=this.sourceMapPopInternal(),l=M.location;if(this.sourceMapStack.length&&l.end.offset<this.sourceMapStack[this.sourceMapStack.length-1][2].end.offset){var U=this.sourceMapPopInternal(),G=U.parts,X=U.location,re=X.start.offset<l.end.offset?{start:l.end,end:X.end,source:X.source}:X;this.sourceMapStack.push([G,G.length+(I||0),re])}}}],[{key:"sourceNode",value:function(I,M,l){var U=Y.offsetStart(I);return new Se(U.line,U.column?U.column-1:null,String(I.source),M,l)}}]),W})();$e.exports=de}),pe=n(function(Be){"use strict";Be.version="5.0.6"}),P=n(function(Be){"use strict";var $e=function(W){return W.codePointAt(0).toString(16).toUpperCase()},ve=function(W){return(typeof W>"u"?"undefined":mi(W))=="object"?"\\\\".concat(W.value):W.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(RegExp("[\\u{10000}-\\u{10FFFF}]","gu"),function(I){return"\\u{".concat($e(I),"}")}).replace(/[\x00-\x0F]/g,function(I){return"\\x0"+$e(I)}).replace(/[\x10-\x1F\x7F-\xFF]/g,function(I){return"\\x"+$e(I)}).replace(/[\u0100-\u0FFF]/g,function(I){return"\\u0"+$e(I)}).replace(/[\u1000-\uFFFF]/g,function(I){return"\\u"+$e(I)})},Se=function(W){return(typeof W>"u"?"undefined":mi(W))=="object"?"\\".concat(W.value):W.replace(/\\/g,"\\\\").replace(/\//g,"\\/").replace(/]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(I){return"\\x0"+$e(I)}).replace(/[\x10-\x1F\x7F-\xFF]/g,function(I){return"\\x"+$e(I)}).replace(RegExp("[\\u{10000}-\\u{10FFFF}]","gu"),function(I){return"\\u{"+$e(I)+"}"}).replace(/[\u0100-\u0FFF]/g,function(I){return"\\u0"+$e(I)}).replace(/[\u1000-\uFFFF]/g,function(I){return"\\u"+$e(I)})},Y=function(W){for(var I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M=W.length%3,l=W.length-M,U="",G=0;G<l;G+=3)U+=I[W[G]>>2],U+=I[(W[G]&3)<<4|W[G+1]>>4],U+=I[(W[G+1]&15)<<2|W[G+2]>>6],U+=I[W[G+2]&63];return M===1?(U+=I[W[l]>>2],U+=I[(W[l]&3)<<4],U+="=="):M===2&&(U+=I[W[l]>>2],U+=I[(W[l]&3)<<4|W[l+1]>>4],U+=I[(W[l+1]&15)<<2],U+="="),U},de=function(W){var I=W[Symbol.iterator](),M=I.next();return M.done||!I.next().done?-1:M.value.codePointAt(0)};Be.hex=$e,Be.stringEscape=ve,Be.regexpClassEscape=Se,Be.base64=Y,Be.codePointLen1=de}),$=n(function(Be,$e){"use strict";var ve=function(I,M){M=M!==void 0?M:{};var l={},U=M.grammarSource,G={Grammar:qr,ImportsAndSource:Kl},X=qr,re="import",_e=";",ue=",",Ae="*",Oe="as",Ee="{",Z="}",Ce="from",Pe="=",Le="/",oe="@",xe=":",Ve="|",Je="..",Ge="(",kt=")",at=".",ar=`
`,wr=`\r
`,Xr="/*",dr="*/",Wr="//",xt="\\",se="i",ke='"',Ye="'",K="[",fe="^",Ue="]",Ke="p",ye="_",Xe="u",Ze="-",Mt="0",Me="b",ft="f",qe="n",qt="r",Vt="t",et="v",Nr="x",Ne=/^[!$&]/,Ti=/^[*-+?]/,wt=/^[!&]/,kr=/^[\0-\uD7FF\uE000-\uFFFF]/,_t=/^[\uD800-\uDBFF]/,gr=/^[\uDC00-\uDFFF]/,lt=/^[\uD800-\uDFFF]/,er=RegExp("^[\\t\\v-\\f \\p{Zs}\\xA0\\uFEFF]","u"),Hr=/^[\n\r\u2028\u2029]/,Er=/^[\r\u2028-\u2029]/,Jt=RegExp("^[\\p{ID_Start}_]","u"),Xt=RegExp("^[$\\p{ID_Continue}]","u"),nr=/^[\n\r"\\\u2028-\u2029]/,fr=/^[\n\r'\\\u2028-\u2029]/,Sr=/^[a-z]/i,Mr=/^[\n\r\\-\]\u2028-\u2029]/,bn=/^["'\\]/,ir=/^[0-9pux]/,Wn=/^[0-9]/,Rr=/^[0-9a-f]/i,ai=/^[{}]/,Wa=la(),Ya=Dt("import",!1),Cs=Dt(";",!1),ts=Dt(",",!1),Yc=Dt("*",!1),Ja=Dt("as",!1),Yn=Dt("{",!1),Jn=Dt("}",!1),rs=Dt("from",!1),Qs=Dt("=",!1),Xa=Dt("/",!1),Jc=Dt("@",!1),Ju=Dt(":",!1),Xu=yr(["!","$","&"],!1,!1,!1),Zu=yr([["*","+"],"?"],!1,!1,!1),Za=Dt("|",!1),Xc=Dt("..",!1),Zc=Dt("(",!1),Qc=Dt(")",!1),Qa=Dt(".",!1),el=yr(["!","&"],!1,!1,!1),tl=yr([["\0","\uD7FF"],["\uE000","\uFFFF"]],!1,!1,!1),rl=yr([["\uD800","\uDBFF"]],!1,!1,!1),nl=yr([["\uDC00","\uDFFF"]],!1,!1,!1),eu=yr([["\uD800","\uDFFF"]],!1,!1,!1),il=Tn("whitespace"),sl=yr(["	",["\v","\f"]," ","\\p{Zs}","\xA0","\uFEFF"],!1,!1,!0),al=yr([`
`,"\r","\u2028","\u2029"],!1,!1,!1),ul=Tn("end of line"),ol=Dt(`
`,!1),hr=Dt(`\r
`,!1),ur=yr(["\r",["\u2028","\u2029"]],!1,!1,!1),cl=Tn("comment"),Qu=Dt("/*",!1),ns=Dt("*/",!1),ll=Dt("//",!1),fl=Tn("identifier"),hl=yr(["\\p{ID_Start}","_"],!1,!1,!0),Oi=Dt("\\",!1),pl=yr(["$","\\p{ID_Continue}"],!1,!1,!0),Lr=Tn("literal"),ea=Dt("i",!1),Ni=Tn("string"),tu=Dt('"',!1),ta=Dt("'",!1),An=yr([`
`,"\r",'"',"\\",["\u2028","\u2029"]],!1,!1,!1),eo=yr([`
`,"\r","'","\\",["\u2028","\u2029"]],!1,!1,!1),to=Tn("character class"),ro=Dt("[",!1),no=Dt("^",!1),io=Dt("]",!1),so=Dt("p",!0),fn=Dt("_",!1),dl=yr([["a","z"]],!1,!0,!1),Qr=Dt("u",!1),gl=Dt("-",!1),ao=yr([`
`,"\r",["\\","]"],["\u2028","\u2029"]],!1,!1,!1),wi=Dt("0",!1),ra=yr(['"',"'","\\"],!1,!1,!1),ru=Dt("b",!1),vr=Dt("f",!1),bi=Dt("n",!1),nu=Dt("r",!1),vl=Dt("t",!1),iu=Dt("v",!1),ml=yr([["0","9"],"p","u","x"],!1,!1,!1),wl=Dt("x",!1),bl=yr([["0","9"]],!1,!1,!1),uo=yr([["0","9"],["a","f"]],!1,!0,!1),na=Tn("code block"),ui=yr(["{","}"],!1,!1,!1);function Al(f,F,T,B){return{type:"grammar",imports:f,topLevelInitializer:F,initializer:T,rules:B,location:It()}}function oo(f,F){return[f,F]}function co(f){return{type:"top_level_initializer",code:f,codeLocation:It()}}function su(f){return{type:"top_level_initializer",code:f,codeLocation:It()}}function au(f,F){return{type:"grammar_import",what:f,from:F,location:It()}}function lo(f){return{type:"grammar_import",what:[],from:f,location:It()}}function El(f,F){return F?(F.unshift(f),F):[f]}function uu(f){return{type:"import_binding_default",binding:f[0],location:f[1]}}function ou(f){return[{type:"import_binding_all",binding:f[0],location:f[1]}]}function Sl(){return[]}function fo(f,F){return{type:"import_binding_rename",rename:f[0],renameLocation:f[1],binding:F[0],location:F[1]}}function hn(f){return{type:"import_binding",binding:f[0],location:f[1]}}function cu(f){return{type:"import_module_specifier",module:f,location:It()}}function Ps(f){return[f,It()]}function ho(f){return[f,It()]}function po(f){return Eu.has(f[0])&&Xn(`Binding identifier can't be a reserved word "`.concat(f[0],'"'),f[1]),f[0]}function _l(f){return{type:"top_level_initializer",code:f[0],codeLocation:f[1],location:It()}}function yl(f){return{type:"initializer",code:f[0],codeLocation:f[1],location:It()}}function Dl(f,F,T){return{type:"rule",name:f[0],nameLocation:f[1],expression:F!==null?{type:"named",name:F,expression:T,location:It()}:T,location:It()}}function Fl(f,F){return F.length>0?{type:"choice",alternatives:[f].concat(F),location:It()}:f}function Cl(f,F){return F!==null?{type:"action",expression:f,code:F[0],codeLocation:F[1],location:It()}:f}function is(f,F){return F.length>0||f.type==="labeled"&&f.pick?{type:"sequence",elements:[f].concat(F),location:It()}:f}function Pl(f,F,T){return T.type.startsWith("semantic_")&&Xn('"@" cannot be used on a semantic predicate',f),{type:"labeled",label:F!==null?F[0]:null,labelLocation:F!==null?F[1]:f,pick:!0,expression:T,location:It()}}function Il(f,F){return{type:"labeled",label:f[0],labelLocation:f[1],expression:F,location:It()}}function lu(){return It()}function go(f){return Eu.has(f[0])&&Xn(`Label can't be a reserved word "`.concat(f[0],'"'),f[1]),f}function Ai(f,F){return{type:Se[f],expression:F,location:It()}}function ia(f,F){return{type:Y[F],expression:f,location:It()}}function $l(f,F,T){var B=F[0],ie=F[1];return ie.type==="constant"&&ie.value===0&&Xn("The maximum count of repetitions of the rule must be > 0",ie.location),{type:"repeated",min:B,max:ie,expression:f,delimiter:T,location:It()}}function kl(f,F){return[f!==null?f:{type:"constant",value:0},F!==null?F:{type:"constant",value:null}]}function Rl(f){return[null,f]}function ss(f){return{type:"constant",value:f,location:It()}}function xn(f){return{type:"variable",value:f[0],location:It()}}function vo(f){return{type:"function",value:f[0],codeLocation:f[1],location:It()}}function Bl(f){return f.type==="labeled"||f.type==="sequence"?{type:"group",expression:f,location:It()}:f}function xl(f,F){return{type:"library_ref",name:F[0],library:f[0],libraryNumber:-1,location:It()}}function Tl(f){return{type:"rule_ref",name:f[0],location:It()}}function Ol(f,F){return{type:de[f],code:F[0],codeLocation:F[1],location:It()}}function Nl(f,F){return[f+F.join(""),It()]}function Ei(f,F){return{type:"literal",value:f,ignoreCase:F!==null,location:It()}}function le(f){return f.join("")}function De(f){return f.join("")}function be(f,F,T){if(f&&F.length===0)if(T.unicode)F=[["\uD800","\uDFFF"]];else return{type:"any",location:It()};return{type:"class",parts:F.filter(function(B){return B!==""}),inverted:!!f,ignoreCase:!!T.ignoreCase,location:It(),unicode:!!T.unicode||F.flat().some(function(B){return(typeof B>"u"?"undefined":mi(B))=="object"&&B.unicode||B.codePointAt(0)>65535})}}function rt(f){try{new RegExp("[\\".concat(f,"]"),"u")}catch{Xn("Invalid Unicode property escape")}return{type:"classEscape",value:f,unicode:!0,location:It()}}function Et(f){var F=Object.fromEntries(f);return Object.keys(F).length!==f.length&&Xn("Invalid flags"),F}function Yt(){return["ignoreCase",!0]}function Br(){return["unicode",!0]}function sr(f,F){return f.codePointAt(0)>F.codePointAt(0)&&Xn("Invalid character range: "+wo()+"."),[f,F]}function fu(){return""}function Hl(){return"\0"}function En(){return"\b"}function sa(){return"\f"}function Ll(){return`
`}function as(){return"\r"}function aa(){return"	"}function ua(){return"\v"}function Qt(f){return String.fromCharCode(parseInt(f,16))}function jl(f){return String.fromCharCode(parseInt(f,16))}function mo(f){return String.fromCodePoint(parseInt(f,16))}function oa(){return{type:"any",location:It()}}function Ml(f){return[f,It()]}function ql(f){return parseInt(f,10)}var y=M.peg$currPos|0,tt=y,pn=[{line:1,column:1}],en=y,Is=M.peg$maxFailExpected||[],ge=M.peg$silentFails|0,us;if(M.startRule){if(!(M.startRule in G))throw new Error(`Can't start parsing from rule "`+M.startRule+'".');X=G[M.startRule]}function wo(){return I.substring(tt,y)}function hu(){return tt}function Ul(){return{source:U,start:tt,end:y}}function It(){return cs(tt,y)}function os(f,F){throw F=F!==void 0?F:cs(tt,y),Cr([Tn(f)],I.substring(tt,y),F)}function Xn(f,F){throw F=F!==void 0?F:cs(tt,y),Vl(f,F)}function ca(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y,F=I.codePointAt(f);return F===void 0?"":String.fromCodePoint(F)}function Dt(f,F){return{type:"literal",text:f,ignoreCase:F}}function yr(f,F,T,B){return{type:"class",parts:f,inverted:F,ignoreCase:T,unicode:B}}function la(){return{type:"any"}}function fa(){return{type:"end"}}function Tn(f){return{type:"other",description:f}}function bo(f){var F=pn[f],T;if(F)return F;if(f>=pn.length)T=pn.length-1;else for(T=f;!pn[--T];);for(F=pn[T],F={line:F.line,column:F.column};T<f;)I.charCodeAt(T)===10?(F.line++,F.column=1):F.column++,T++;return pn[f]=F,F}function cs(f,F,T){var B=bo(f),ie=bo(F),ce={source:U,start:{offset:f,line:B.line,column:B.column},end:{offset:F,line:ie.line,column:ie.column}};return T&&U&&typeof U.offset=="function"&&(ce.start=U.offset(ce.start),ce.end=U.offset(ce.end)),ce}function Ie(f){y<en||(y>en&&(en=y,Is=[]),Is.push(f))}function Vl(f,F){return new W(f,null,null,F)}function Cr(f,F,T){return new W(W.buildMessage(f,F),f,F,T)}function qr(){var f,F,T,B,ie,ce,nt,mt,sn;if(f=y,F=Eo(),T=y,B=ut(),ie=Yl(),ie!==l?T=ie:(y=T,T=l),T===l&&(T=null),B=y,ie=ut(),ce=ga(),ce!==l?B=ce:(y=B,B=l),B===l&&(B=null),ie=ut(),ce=[],nt=y,mt=fs(),mt!==l?(sn=ut(),nt=mt):(y=nt,nt=l),nt!==l)for(;nt!==l;)ce.push(nt),nt=y,mt=fs(),mt!==l?(sn=ut(),nt=mt):(y=nt,nt=l);else ce=l;return ce!==l?(tt=f,f=Al(F,T,B,ce)):(y=f,f=l),f}function Kl(){var f,F,T;return f=y,F=Ao(),T=zl(),tt=f,f=oo(F,T),f}function zl(){var f,F,T,B;for(f=y,F=y,T=[],I.length>y?(B=I.charAt(y),y++):(B=l,ge===0&&Ie(Wa));B!==l;)T.push(B),I.length>y?(B=I.charAt(y),y++):(B=l,ge===0&&Ie(Wa));return F=I.substring(F,y),tt=f,F=co(F),f=F,f}function Ao(){var f,F,T;return f=y,F=y,T=Eo(),F=I.substring(F,y),tt=f,F=su(F),f=F,f}function Eo(){var f,F;for(f=[],F=ha();F!==l;)f.push(F),F=ha();return f}function ha(){var f,F,T,B,ie,ce,nt,mt,sn,Qn;return f=y,F=ut(),I.substr(y,6)===re?(T=re,y+=6):(T=l,ge===0&&Ie(Ya)),T!==l?(B=ut(),ie=$s(),ie!==l?(ce=ut(),nt=ks(),nt!==l?(mt=y,sn=ut(),I.charCodeAt(y)===59?(Qn=_e,y++):(Qn=l,ge===0&&Ie(Cs)),Qn!==l?(sn=[sn,Qn],mt=sn):(y=mt,mt=l),mt===l&&(mt=null),tt=f,f=au(ie,nt)):(y=f,f=l)):(y=f,f=l)):(y=f,f=l),f===l&&(f=y,F=ut(),I.substr(y,6)===re?(T=re,y+=6):(T=l,ge===0&&Ie(Ya)),T!==l?(B=ut(),ie=So(),ie!==l?(ce=y,nt=ut(),I.charCodeAt(y)===59?(mt=_e,y++):(mt=l,ge===0&&Ie(Cs)),mt!==l?(nt=[nt,mt],ce=nt):(y=ce,ce=l),ce===l&&(ce=null),tt=f,f=lo(ie)):(y=f,f=l)):(y=f,f=l)),f}function $s(){var f,F,T,B,ie,ce,nt;return f=Hi(),f===l&&(f=ls(),f===l&&(f=y,F=pu(),F!==l?(T=y,B=ut(),I.charCodeAt(y)===44?(ie=ue,y++):(ie=l,ge===0&&Ie(ts)),ie!==l?(ce=ut(),nt=Hi(),nt===l&&(nt=ls()),nt!==l?T=nt:(y=T,T=l)):(y=T,T=l),T===l&&(T=null),tt=f,f=El(F,T)):(y=f,f=l))),f}function pu(){var f,F;return f=y,F=da(),F!==l&&(tt=f,F=uu(F)),f=F,f}function Hi(){var f,F,T,B,ie,ce;return f=y,I.charCodeAt(y)===42?(F=Ae,y++):(F=l,ge===0&&Ie(Yc)),F!==l?(T=ut(),I.substr(y,2)===Oe?(B=Oe,y+=2):(B=l,ge===0&&Ie(Ja)),B!==l?(ie=ut(),ce=da(),ce!==l?(tt=f,f=ou(ce)):(y=f,f=l)):(y=f,f=l)):(y=f,f=l),f}function ls(){var f,F,T,B,ie,ce,nt,mt;return f=y,I.charCodeAt(y)===123?(F=Ee,y++):(F=l,ge===0&&Ie(Yn)),F!==l?(T=ut(),I.charCodeAt(y)===125?(B=Z,y++):(B=l,ge===0&&Ie(Jn)),B!==l?(tt=f,f=Sl()):(y=f,f=l)):(y=f,f=l),f===l&&(f=y,I.charCodeAt(y)===123?(F=Ee,y++):(F=l,ge===0&&Ie(Yn)),F!==l?(T=ut(),B=pa(),B!==l?(ie=ut(),ce=y,I.charCodeAt(y)===44?(nt=ue,y++):(nt=l,ge===0&&Ie(ts)),nt!==l?(mt=ut(),nt=[nt,mt],ce=nt):(y=ce,ce=l),ce===l&&(ce=null),I.charCodeAt(y)===125?(nt=Z,y++):(nt=l,ge===0&&Ie(Jn)),nt!==l?f=B:(y=f,f=l)):(y=f,f=l)):(y=f,f=l)),f}function ks(){var f,F,T,B;return f=y,I.substr(y,4)===Ce?(F=Ce,y+=4):(F=l,ge===0&&Ie(rs)),F!==l?(T=ut(),B=So(),B!==l?f=B:(y=f,f=l)):(y=f,f=l),f}function pa(){var f,F,T,B,ie,ce,nt;for(f=y,F=[],T=Li();T!==l;)F.push(T),T=y,B=y,ie=ut(),I.charCodeAt(y)===44?(ce=ue,y++):(ce=l,ge===0&&Ie(ts)),ce!==l?(nt=ut(),ie=[ie,ce,nt],B=ie):(y=B,B=l),B!==l?(B=Li(),B===l?(y=T,T=l):T=B):T=B;return F.length<1?(y=f,f=l):f=F,f}function Li(){var f,F,T,B,ie,ce;return f=y,F=Gl(),F!==l?(T=ut(),I.substr(y,2)===Oe?(B=Oe,y+=2):(B=l,ge===0&&Ie(Ja)),B!==l?(ie=ut(),ce=da(),ce!==l?(tt=f,f=fo(F,ce)):(y=f,f=l)):(y=f,f=l)):(y=f,f=l),f===l&&(f=y,F=da(),F!==l&&(tt=f,F=hn(F)),f=F),f}function So(){var f,F;return f=y,F=Rs(),F!==l&&(tt=f,F=cu(F)),f=F,f}function da(){var f,F;return f=y,F=Wl(),F!==l&&(tt=f,F=Ps(F)),f=F,f}function Gl(){var f,F;return f=rn(),f===l&&(f=y,F=Rs(),F!==l&&(tt=f,F=ho(F)),f=F),f}function Wl(){var f,F;return f=y,F=rn(),F!==l&&(tt=f,F=po(F)),f=F,f}function Yl(){var f,F,T,B,ie;return f=y,I.charCodeAt(y)===123?(F=Ee,y++):(F=l,ge===0&&Ie(Yn)),F!==l?(T=vs(),T!==l?(I.charCodeAt(y)===125?(B=Z,y++):(B=l,ge===0&&Ie(Jn)),B!==l?(ie=ms(),ie!==l?(tt=f,f=_l(T)):(y=f,f=l)):(y=f,f=l)):(y=f,f=l)):(y=f,f=l),f}function ga(){var f,F,T;return f=y,F=vs(),F!==l?(T=ms(),T!==l?(tt=f,f=yl(F)):(y=f,f=l)):(y=f,f=l),f}function fs(){var f,F,T,B,ie,ce,nt,mt;return f=y,F=rn(),F!==l?(T=ut(),B=y,ie=Rs(),ie!==l?(ce=ut(),B=ie):(y=B,B=l),B===l&&(B=null),I.charCodeAt(y)===61?(ie=Pe,y++):(ie=l,ge===0&&Ie(Qs)),ie!==l?(ce=ut(),nt=va(),nt!==l?(mt=ms(),mt!==l?(tt=f,f=Dl(F,B,nt)):(y=f,f=l)):(y=f,f=l)):(y=f,f=l)):(y=f,f=l),f}function va(){var f,F,T,B,ie,ce,nt,mt;if(f=y,F=O(),F!==l){for(T=[],B=y,ie=ut(),I.charCodeAt(y)===47?(ce=Le,y++):(ce=l,ge===0&&Ie(Xa)),ce!==l?(nt=ut(),mt=O(),mt!==l?B=mt:(y=B,B=l)):(y=B,B=l);B!==l;)T.push(B),B=y,ie=ut(),I.charCodeAt(y)===47?(ce=Le,y++):(ce=l,ge===0&&Ie(Xa)),ce!==l?(nt=ut(),mt=O(),mt!==l?B=mt:(y=B,B=l)):(y=B,B=l);tt=f,f=Fl(F,T)}else y=f,f=l;return f}function O(){var f,F,T,B,ie;return f=y,F=hs(),F!==l?(T=y,B=ut(),ie=vs(),ie!==l?T=ie:(y=T,T=l),T===l&&(T=null),tt=f,f=Cl(F,T)):(y=f,f=l),f}function hs(){var f,F,T,B,ie,ce;if(f=y,F=ps(),F!==l){for(T=[],B=y,ie=ut(),ce=ps(),ce!==l?B=ce:(y=B,B=l);B!==l;)T.push(B),B=y,ie=ut(),ce=ps(),ce!==l?B=ce:(y=B,B=l);tt=f,f=is(F,T)}else y=f,f=l;return f}function ps(){var f,F,T,B;return f=y,F=Sn(),F!==l?(T=Tt(),T===l&&(T=null),B=du(),B!==l?(tt=f,f=Pl(F,T,B)):(y=f,f=l)):(y=f,f=l),f===l&&(f=y,F=Tt(),F!==l?(T=du(),T!==l?(tt=f,f=Il(F,T)):(y=f,f=l)):(y=f,f=l),f===l&&(f=du())),f}function Sn(){var f,F;return f=y,I.charCodeAt(y)===64?(F=oe,y++):(F=l,ge===0&&Ie(Jc)),F!==l&&(tt=f,F=lu()),f=F,f}function Tt(){var f,F,T,B,ie;return f=y,F=rn(),F!==l?(T=ut(),I.charCodeAt(y)===58?(B=xe,y++):(B=l,ge===0&&Ie(Ju)),B!==l?(ie=ut(),tt=f,f=go(F)):(y=f,f=l)):(y=f,f=l),f}function du(){var f,F,T,B;return f=y,F=Jl(),F!==l?(T=ut(),B=_o(),B!==l?(tt=f,f=Ai(F,B)):(y=f,f=l)):(y=f,f=l),f===l&&(f=_o()),f}function Jl(){var f;return f=I.charAt(y),Ne.test(f)?y++:(f=l,ge===0&&Ie(Xu)),f}function _o(){var f,F,T,B;return f=y,F=vu(),F!==l?(T=ut(),B=ji(),B!==l?(tt=f,f=ia(F,B)):(y=f,f=l)):(y=f,f=l),f===l&&(f=Xl(),f===l&&(f=vu())),f}function ji(){var f;return f=I.charAt(y),Ti.test(f)?y++:(f=l,ge===0&&Ie(Zu)),f}function Xl(){var f,F,T,B,ie,ce,nt,mt,sn,Qn,Su,hf;return f=y,F=vu(),F!==l?(T=ut(),I.charCodeAt(y)===124?(B=Ve,y++):(B=l,ge===0&&Ie(Za)),B!==l?(ie=ut(),ce=Zl(),ce!==l?(nt=ut(),mt=y,I.charCodeAt(y)===44?(sn=ue,y++):(sn=l,ge===0&&Ie(ts)),sn!==l?(Qn=ut(),Su=va(),Su!==l?(hf=ut(),mt=Su):(y=mt,mt=l)):(y=mt,mt=l),mt===l&&(mt=null),I.charCodeAt(y)===124?(sn=Ve,y++):(sn=l,ge===0&&Ie(Za)),sn!==l?(tt=f,f=$l(F,ce,mt)):(y=f,f=l)):(y=f,f=l)):(y=f,f=l)):(y=f,f=l),f}function Zl(){var f,F,T,B,ie,ce;return f=y,F=gu(),F===l&&(F=null),T=ut(),I.substr(y,2)===Je?(B=Je,y+=2):(B=l,ge===0&&Ie(Xc)),B!==l?(ie=ut(),ce=gu(),ce===l&&(ce=null),tt=f,f=kl(F,ce)):(y=f,f=l),f===l&&(f=y,F=gu(),F!==l&&(tt=f,F=Rl(F)),f=F),f}function gu(){var f,F;return f=y,F=Oo(),F!==l&&(tt=f,F=ss(F)),f=F,f===l&&(f=y,F=rn(),F!==l&&(tt=f,F=xn(F)),f=F,f===l&&(f=y,F=vs(),F!==l&&(tt=f,F=vo(F)),f=F)),f}function vu(){var f,F,T,B,ie,ce;return f=On(),f===l&&(f=af(),f===l&&(f=ff(),f===l&&(f=Ql(),f===l&&(f=oi(),f===l&&(f=y,I.charCodeAt(y)===40?(F=Ge,y++):(F=l,ge===0&&Ie(Zc)),F!==l?(T=ut(),B=va(),B!==l?(ie=ut(),I.charCodeAt(y)===41?(ce=kt,y++):(ce=l,ge===0&&Ie(Qc)),ce!==l?(tt=f,f=Bl(B)):(y=f,f=l)):(y=f,f=l)):(y=f,f=l)))))),f}function Ql(){var f,F,T,B,ie,ce,nt,mt;return f=y,F=rn(),F!==l?(I.charCodeAt(y)===46?(T=at,y++):(T=l,ge===0&&Ie(Qa)),T!==l?(B=rn(),B!==l?(tt=f,f=xl(F,B)):(y=f,f=l)):(y=f,f=l)):(y=f,f=l),f===l&&(f=y,F=rn(),F!==l?(T=y,ge++,B=y,ie=ut(),ce=y,nt=Rs(),nt!==l?(mt=ut(),nt=[nt,mt],ce=nt):(y=ce,ce=l),ce===l&&(ce=null),I.charCodeAt(y)===61?(nt=Pe,y++):(nt=l,ge===0&&Ie(Qs)),nt!==l?(ie=[ie,ce,nt],B=ie):(y=B,B=l),ge--,B===l?T=void 0:(y=T,T=l),T!==l?(tt=f,f=Tl(F)):(y=f,f=l)):(y=f,f=l)),f}function oi(){var f,F,T,B;return f=y,F=ef(),F!==l?(T=ut(),B=vs(),B!==l?(tt=f,f=Ol(F,B)):(y=f,f=l)):(y=f,f=l),f}function ef(){var f;return f=I.charAt(y),wt.test(f)?y++:(f=l,ge===0&&Ie(el)),f}function tn(){var f;return f=tf(),f===l&&(f=rf()),f}function tf(){var f;return f=I.charAt(y),kr.test(f)?y++:(f=l,ge===0&&Ie(tl)),f}function rf(){var f,F,T,B;return f=y,F=y,T=I.charAt(y),_t.test(T)?y++:(T=l,ge===0&&Ie(rl)),T!==l?(B=I.charAt(y),gr.test(B)?y++:(B=l,ge===0&&Ie(nl)),B!==l?(T=[T,B],F=T):(y=F,F=l)):(y=F,F=l),F!==l?f=I.substring(f,y):f=F,f===l&&(f=I.charAt(y),lt.test(f)?y++:(f=l,ge===0&&Ie(eu))),f}function ma(){var f,F;return ge++,f=ca(),er.test(f)?y+=f.length:(f=l,ge===0&&Ie(sl)),ge--,f===l&&(F=l,ge===0&&Ie(il)),f}function dn(){var f;return f=I.charAt(y),Hr.test(f)?y++:(f=l,ge===0&&Ie(al)),f}function wa(){var f,F;return ge++,I.charCodeAt(y)===10?(f=ar,y++):(f=l,ge===0&&Ie(ol)),f===l&&(I.substr(y,2)===wr?(f=wr,y+=2):(f=l,ge===0&&Ie(hr)),f===l&&(f=I.charAt(y),Er.test(f)?y++:(f=l,ge===0&&Ie(ur)))),ge--,f===l&&(F=l,ge===0&&Ie(ul)),f}function yo(){var f,F;return ge++,f=nf(),f===l&&(f=Fo()),ge--,f===l&&(F=l,ge===0&&Ie(cl)),f}function nf(){var f,F,T,B,ie,ce;if(f=y,I.substr(y,2)===Xr?(F=Xr,y+=2):(F=l,ge===0&&Ie(Qu)),F!==l){for(T=[],B=y,ie=y,ge++,I.substr(y,2)===dr?(ce=dr,y+=2):(ce=l,ge===0&&Ie(ns)),ge--,ce===l?ie=void 0:(y=ie,ie=l),ie!==l?(ce=tn(),ce!==l?(ie=[ie,ce],B=ie):(y=B,B=l)):(y=B,B=l);B!==l;)T.push(B),B=y,ie=y,ge++,I.substr(y,2)===dr?(ce=dr,y+=2):(ce=l,ge===0&&Ie(ns)),ge--,ce===l?ie=void 0:(y=ie,ie=l),ie!==l?(ce=tn(),ce!==l?(ie=[ie,ce],B=ie):(y=B,B=l)):(y=B,B=l);I.substr(y,2)===dr?(B=dr,y+=2):(B=l,ge===0&&Ie(ns)),B!==l?(F=[F,T,B],f=F):(y=f,f=l)}else y=f,f=l;return f}function Do(){var f,F,T,B,ie,ce;if(f=y,I.substr(y,2)===Xr?(F=Xr,y+=2):(F=l,ge===0&&Ie(Qu)),F!==l){for(T=[],B=y,ie=y,ge++,I.substr(y,2)===dr?(ce=dr,y+=2):(ce=l,ge===0&&Ie(ns)),ce===l&&(ce=dn()),ge--,ce===l?ie=void 0:(y=ie,ie=l),ie!==l?(ce=tn(),ce!==l?(ie=[ie,ce],B=ie):(y=B,B=l)):(y=B,B=l);B!==l;)T.push(B),B=y,ie=y,ge++,I.substr(y,2)===dr?(ce=dr,y+=2):(ce=l,ge===0&&Ie(ns)),ce===l&&(ce=dn()),ge--,ce===l?ie=void 0:(y=ie,ie=l),ie!==l?(ce=tn(),ce!==l?(ie=[ie,ce],B=ie):(y=B,B=l)):(y=B,B=l);I.substr(y,2)===dr?(B=dr,y+=2):(B=l,ge===0&&Ie(ns)),B!==l?(F=[F,T,B],f=F):(y=f,f=l)}else y=f,f=l;return f}function Fo(){var f,F,T,B,ie,ce;if(f=y,I.substr(y,2)===Wr?(F=Wr,y+=2):(F=l,ge===0&&Ie(ll)),F!==l){for(T=[],B=y,ie=y,ge++,ce=dn(),ge--,ce===l?ie=void 0:(y=ie,ie=l),ie!==l?(ce=tn(),ce!==l?(ie=[ie,ce],B=ie):(y=B,B=l)):(y=B,B=l);B!==l;)T.push(B),B=y,ie=y,ge++,ce=dn(),ge--,ce===l?ie=void 0:(y=ie,ie=l),ie!==l?(ce=tn(),ce!==l?(ie=[ie,ce],B=ie):(y=B,B=l)):(y=B,B=l);F=[F,T],f=F}else y=f,f=l;return f}function rn(){var f,F,T,B;if(ge++,f=y,F=sf(),F!==l){for(T=[],B=Co();B!==l;)T.push(B),B=Co();tt=f,f=Nl(F,T)}else y=f,f=l;return ge--,f===l&&(F=l,ge===0&&Ie(fl)),f}function sf(){var f,F,T;return f=ca(),Jt.test(f)?y+=f.length:(f=l,ge===0&&Ie(hl)),f===l&&(f=y,I.charCodeAt(y)===92?(F=xt,y++):(F=l,ge===0&&Ie(Oi)),F!==l?(T=bu(),T!==l?f=T:(y=f,f=l)):(y=f,f=l)),f}function Co(){var f;return f=ca(),Xt.test(f)?y+=f.length:(f=l,ge===0&&Ie(pl)),f}function On(){var f,F,T;return ge++,f=y,F=Rs(),F!==l?(I.charCodeAt(y)===105?(T=se,y++):(T=l,ge===0&&Ie(ea)),T===l&&(T=null),tt=f,f=Ei(F,T)):(y=f,f=l),ge--,f===l&&(F=l,ge===0&&Ie(Lr)),f}function Rs(){var f,F,T,B;if(ge++,f=y,I.charCodeAt(y)===34?(F=ke,y++):(F=l,ge===0&&Ie(tu)),F!==l){for(T=[],B=Po();B!==l;)T.push(B),B=Po();I.charCodeAt(y)===34?(B=ke,y++):(B=l,ge===0&&Ie(tu)),B!==l?(tt=f,f=le(T)):(y=f,f=l)}else y=f,f=l;if(f===l)if(f=y,I.charCodeAt(y)===39?(F=Ye,y++):(F=l,ge===0&&Ie(ta)),F!==l){for(T=[],B=Io();B!==l;)T.push(B),B=Io();I.charCodeAt(y)===39?(B=Ye,y++):(B=l,ge===0&&Ie(ta)),B!==l?(tt=f,f=De(T)):(y=f,f=l)}else y=f,f=l;return ge--,f===l&&(F=l,ge===0&&Ie(Ni)),f}function Po(){var f,F,T,B;return f=y,F=y,T=y,ge++,B=I.charAt(y),nr.test(B)?y++:(B=l,ge===0&&Ie(An)),ge--,B===l?T=void 0:(y=T,T=l),T!==l?(B=tn(),B!==l?(T=[T,B],F=T):(y=F,F=l)):(y=F,F=l),F!==l?f=I.substring(f,y):f=F,f===l&&(f=y,I.charCodeAt(y)===92?(F=xt,y++):(F=l,ge===0&&Ie(Oi)),F!==l?(T=nn(),T!==l?f=T:(y=f,f=l)):(y=f,f=l),f===l&&(f=ci())),f}function Io(){var f,F,T,B;return f=y,F=y,T=y,ge++,B=I.charAt(y),fr.test(B)?y++:(B=l,ge===0&&Ie(eo)),ge--,B===l?T=void 0:(y=T,T=l),T!==l?(B=tn(),B!==l?(T=[T,B],F=T):(y=F,F=l)):(y=F,F=l),F!==l?f=I.substring(f,y):f=F,f===l&&(f=y,I.charCodeAt(y)===92?(F=xt,y++):(F=l,ge===0&&Ie(Oi)),F!==l?(T=nn(),T!==l?f=T:(y=f,f=l)):(y=f,f=l),f===l&&(f=ci())),f}function af(){var f,F,T,B,ie,ce;if(ge++,f=y,I.charCodeAt(y)===91?(F=K,y++):(F=l,ge===0&&Ie(ro)),F!==l){for(I.charCodeAt(y)===94?(T=fe,y++):(T=l,ge===0&&Ie(no)),T===l&&(T=null),B=[],ie=$o(),ie===l&&(ie=Zn(),ie===l&&(ie=gs()));ie!==l;)B.push(ie),ie=$o(),ie===l&&(ie=Zn(),ie===l&&(ie=gs()));I.charCodeAt(y)===93?(ie=Ue,y++):(ie=l,ge===0&&Ie(io)),ie!==l?(ce=Bo(),tt=f,f=be(T,B,ce)):(y=f,f=l)}else y=f,f=l;return ge--,f===l&&(F=l,ge===0&&Ie(to)),f}function $o(){var f,F,T;return f=y,I.charCodeAt(y)===92?(F=xt,y++):(F=l,ge===0&&Ie(Oi)),F!==l?(T=ko(),T!==l?f=T:(y=f,f=l)):(y=f,f=l),f}function ko(){var f,F,T,B,ie,ce,nt;return f=y,F=y,T=y,B=I.charAt(y),B.toLowerCase()===Ke?y++:(B=l,ge===0&&Ie(so)),B!==l?(I.charCodeAt(y)===123?(ie=Ee,y++):(ie=l,ge===0&&Ie(Yn)),ie!==l?(ce=Ro(),ce!==l?(I.charCodeAt(y)===125?(nt=Z,y++):(nt=l,ge===0&&Ie(Jn)),nt!==l?(B=[B,ie,ce,nt],T=B):(y=T,T=l)):(y=T,T=l)):(y=T,T=l)):(y=T,T=l),T!==l?F=I.substring(F,y):F=T,F!==l&&(tt=f,F=rt(F)),f=F,f}function Ro(){var f,F,T,B;return f=y,F=uf(),F!==l?(I.charCodeAt(y)===61?(T=Pe,y++):(T=l,ge===0&&Ie(Qs)),T!==l?(B=of(),B!==l?(F=[F,T,B],f=F):(y=f,f=l)):(y=f,f=l)):(y=f,f=l),f===l&&(f=mu()),f}function uf(){var f,F,T;if(f=y,F=[],T=ds(),T!==l)for(;T!==l;)F.push(T),T=ds();else F=l;return F!==l?f=I.substring(f,y):f=F,f}function of(){var f,F,T;if(f=y,F=[],T=Si(),T!==l)for(;T!==l;)F.push(T),T=Si();else F=l;return F!==l?f=I.substring(f,y):f=F,f}function mu(){var f,F,T;if(f=y,F=[],T=Si(),T!==l)for(;T!==l;)F.push(T),T=Si();else F=l;return F!==l?f=I.substring(f,y):f=F,f}function Si(){var f;return f=ds(),f===l&&(f=ba()),f}function ds(){var f;return f=cf(),f===l&&(I.charCodeAt(y)===95?(f=ye,y++):(f=l,ge===0&&Ie(fn))),f}function cf(){var f;return f=I.charAt(y),Sr.test(f)?y++:(f=l,ge===0&&Ie(dl)),f}function Bo(){var f,F,T;for(f=y,F=[],T=xo();T!==l;)F.push(T),T=xo();return tt=f,F=Et(F),f=F,f}function xo(){var f,F;return f=y,I.charCodeAt(y)===105?(F=se,y++):(F=l,ge===0&&Ie(ea)),F!==l&&(tt=f,F=Yt()),f=F,f===l&&(f=y,I.charCodeAt(y)===117?(F=Xe,y++):(F=l,ge===0&&Ie(Qr)),F!==l&&(tt=f,F=Br()),f=F),f}function Zn(){var f,F,T,B;return f=y,F=gs(),F!==l?(I.charCodeAt(y)===45?(T=Ze,y++):(T=l,ge===0&&Ie(gl)),T!==l?(B=gs(),B!==l?(tt=f,f=sr(F,B)):(y=f,f=l)):(y=f,f=l)):(y=f,f=l),f}function gs(){var f,F,T,B;return f=y,F=y,T=y,ge++,B=I.charAt(y),Mr.test(B)?y++:(B=l,ge===0&&Ie(ao)),ge--,B===l?T=void 0:(y=T,T=l),T!==l?(B=tn(),B!==l?(T=[T,B],F=T):(y=F,F=l)):(y=F,F=l),F!==l?f=I.substring(f,y):f=F,f===l&&(f=y,I.charCodeAt(y)===92?(F=xt,y++):(F=l,ge===0&&Ie(Oi)),F!==l?(T=nn(),T!==l?f=T:(y=f,f=l)):(y=f,f=l),f===l&&(f=ci())),f}function ci(){var f,F,T;return f=y,I.charCodeAt(y)===92?(F=xt,y++):(F=l,ge===0&&Ie(Oi)),F!==l?(T=wa(),T!==l?(tt=f,f=fu()):(y=f,f=l)):(y=f,f=l),f}function nn(){var f,F,T,B;return f=lf(),f===l&&(f=y,I.charCodeAt(y)===48?(F=Mt,y++):(F=l,ge===0&&Ie(wi)),F!==l?(T=y,ge++,B=ba(),ge--,B===l?T=void 0:(y=T,T=l),T!==l?(tt=f,f=Hl()):(y=f,f=l)):(y=f,f=l),f===l&&(f=_i(),f===l&&(f=bu()))),f}function lf(){var f;return f=wu(),f===l&&(f=To()),f}function wu(){var f,F;return f=I.charAt(y),bn.test(f)?y++:(f=l,ge===0&&Ie(ra)),f===l&&(f=y,I.charCodeAt(y)===98?(F=Me,y++):(F=l,ge===0&&Ie(ru)),F!==l&&(tt=f,F=En()),f=F,f===l&&(f=y,I.charCodeAt(y)===102?(F=ft,y++):(F=l,ge===0&&Ie(vr)),F!==l&&(tt=f,F=sa()),f=F,f===l&&(f=y,I.charCodeAt(y)===110?(F=qe,y++):(F=l,ge===0&&Ie(bi)),F!==l&&(tt=f,F=Ll()),f=F,f===l&&(f=y,I.charCodeAt(y)===114?(F=qt,y++):(F=l,ge===0&&Ie(nu)),F!==l&&(tt=f,F=as()),f=F,f===l&&(f=y,I.charCodeAt(y)===116?(F=Vt,y++):(F=l,ge===0&&Ie(vl)),F!==l&&(tt=f,F=aa()),f=F,f===l&&(f=y,I.charCodeAt(y)===118?(F=et,y++):(F=l,ge===0&&Ie(iu)),F!==l&&(tt=f,F=ua()),f=F)))))),f}function To(){var f,F,T,B;return f=y,F=y,T=y,ge++,B=Bs(),B===l&&(B=dn()),ge--,B===l?T=void 0:(y=T,T=l),T!==l?(B=tn(),B!==l?(T=[T,B],F=T):(y=F,F=l)):(y=F,F=l),F!==l?f=I.substring(f,y):f=F,f}function Bs(){var f;return f=wu(),f===l&&(f=I.charAt(y),ir.test(f)?y++:(f=l,ge===0&&Ie(ml))),f}function _i(){var f,F,T,B,ie,ce;return f=y,I.charCodeAt(y)===120?(F=Nr,y++):(F=l,ge===0&&Ie(wl)),F!==l?(T=y,B=y,ie=Nn(),ie!==l?(ce=Nn(),ce!==l?(ie=[ie,ce],B=ie):(y=B,B=l)):(y=B,B=l),B!==l?T=I.substring(T,y):T=B,T!==l?(tt=f,f=Qt(T)):(y=f,f=l)):(y=f,f=l),f}function bu(){var f,F,T,B,ie,ce,nt,mt;if(f=y,I.charCodeAt(y)===117?(F=Xe,y++):(F=l,ge===0&&Ie(Qr)),F!==l?(T=y,B=y,ie=Nn(),ie!==l?(ce=Nn(),ce!==l?(nt=Nn(),nt!==l?(mt=Nn(),mt!==l?(ie=[ie,ce,nt,mt],B=ie):(y=B,B=l)):(y=B,B=l)):(y=B,B=l)):(y=B,B=l),B!==l?T=I.substring(T,y):T=B,T!==l?(tt=f,f=jl(T)):(y=f,f=l)):(y=f,f=l),f===l)if(f=y,I.charCodeAt(y)===117?(F=Xe,y++):(F=l,ge===0&&Ie(Qr)),F!==l)if(I.charCodeAt(y)===123?(T=Ee,y++):(T=l,ge===0&&Ie(Yn)),T!==l){if(B=y,ie=[],ce=Nn(),ce!==l)for(;ce!==l;)ie.push(ce),ce=Nn();else ie=l;ie!==l?B=I.substring(B,y):B=ie,B!==l?(I.charCodeAt(y)===125?(ie=Z,y++):(ie=l,ge===0&&Ie(Jn)),ie!==l?(tt=f,f=mo(B)):(y=f,f=l)):(y=f,f=l)}else y=f,f=l;else y=f,f=l;return f}function ba(){var f;return f=I.charAt(y),Wn.test(f)?y++:(f=l,ge===0&&Ie(bl)),f}function Nn(){var f;return f=I.charAt(y),Rr.test(f)?y++:(f=l,ge===0&&Ie(uo)),f}function ff(){var f,F;return f=y,I.charCodeAt(y)===46?(F=at,y++):(F=l,ge===0&&Ie(Qa)),F!==l&&(tt=f,F=oa()),f=F,f}function vs(){var f,F,T,B;return ge++,f=y,I.charCodeAt(y)===123?(F=Ee,y++):(F=l,ge===0&&Ie(Yn)),F!==l?(T=Ur(),I.charCodeAt(y)===125?(B=Z,y++):(B=l,ge===0&&Ie(Jn)),B!==l?f=T:(y=f,f=l)):(y=f,f=l),ge--,f===l&&(F=l,ge===0&&Ie(na)),f}function Ur(){var f,F;return f=y,F=xs(),tt=f,F=Ml(F),f=F,f}function xs(){var f,F,T,B,ie,ce;if(f=y,F=[],T=[],B=y,ie=y,ge++,ce=I.charAt(y),ai.test(ce)?y++:(ce=l,ge===0&&Ie(ui)),ge--,ce===l?ie=void 0:(y=ie,ie=l),ie!==l?(ce=tn(),ce!==l?(ie=[ie,ce],B=ie):(y=B,B=l)):(y=B,B=l),B!==l)for(;B!==l;)T.push(B),B=y,ie=y,ge++,ce=I.charAt(y),ai.test(ce)?y++:(ce=l,ge===0&&Ie(ui)),ge--,ce===l?ie=void 0:(y=ie,ie=l),ie!==l?(ce=tn(),ce!==l?(ie=[ie,ce],B=ie):(y=B,B=l)):(y=B,B=l);else T=l;for(T===l&&(T=y,I.charCodeAt(y)===123?(B=Ee,y++):(B=l,ge===0&&Ie(Yn)),B!==l?(ie=xs(),I.charCodeAt(y)===125?(ce=Z,y++):(ce=l,ge===0&&Ie(Jn)),ce!==l?(B=[B,ie,ce],T=B):(y=T,T=l)):(y=T,T=l));T!==l;){if(F.push(T),T=[],B=y,ie=y,ge++,ce=I.charAt(y),ai.test(ce)?y++:(ce=l,ge===0&&Ie(ui)),ge--,ce===l?ie=void 0:(y=ie,ie=l),ie!==l?(ce=tn(),ce!==l?(ie=[ie,ce],B=ie):(y=B,B=l)):(y=B,B=l),B!==l)for(;B!==l;)T.push(B),B=y,ie=y,ge++,ce=I.charAt(y),ai.test(ce)?y++:(ce=l,ge===0&&Ie(ui)),ge--,ce===l?ie=void 0:(y=ie,ie=l),ie!==l?(ce=tn(),ce!==l?(ie=[ie,ce],B=ie):(y=B,B=l)):(y=B,B=l);else T=l;T===l&&(T=y,I.charCodeAt(y)===123?(B=Ee,y++):(B=l,ge===0&&Ie(Yn)),B!==l?(ie=xs(),I.charCodeAt(y)===125?(ce=Z,y++):(ce=l,ge===0&&Ie(Jn)),ce!==l?(B=[B,ie,ce],T=B):(y=T,T=l)):(y=T,T=l))}return f=I.substring(f,y),f}function Oo(){var f,F,T,B;if(f=y,F=y,T=[],B=ba(),B!==l)for(;B!==l;)T.push(B),B=ba();else T=l;return T!==l?F=I.substring(F,y):F=T,F!==l&&(tt=f,F=ql(F)),f=F,f}function ut(){var f,F;for(f=[],F=ma(),F===l&&(F=wa(),F===l&&(F=yo()));F!==l;)f.push(F),F=ma(),F===l&&(F=wa(),F===l&&(F=yo()));return f}function Au(){var f,F;for(f=[],F=ma(),F===l&&(F=Do());F!==l;)f.push(F),F=ma(),F===l&&(F=Do());return f}function ms(){var f,F,T,B;if(f=[],F=y,T=ut(),I.charCodeAt(y)===59?(B=_e,y++):(B=l,ge===0&&Ie(Cs)),B!==l?(T=[T,B],F=T):(y=F,F=l),F!==l)for(;F!==l;)f.push(F),F=y,T=ut(),I.charCodeAt(y)===59?(B=_e,y++):(B=l,ge===0&&Ie(Cs)),B!==l?(T=[T,B],F=T):(y=F,F=l);else f=l;return f===l&&(f=y,F=Au(),T=Fo(),T===l&&(T=null),B=wa(),B!==l?(F=[F,T,B],f=F):(y=f,f=l),f===l&&(f=y,F=ut(),T=Mi(),T!==l?(F=[F,T],f=F):(y=f,f=l))),f}function Mi(){var f,F;return f=y,ge++,I.length>y?(F=I.charAt(y),y++):(F=l,ge===0&&Ie(Wa)),ge--,F===l?f=void 0:(y=f,f=l),f}var Eu=new Set(M.reservedWords);us=X();var Vr=us!==l&&y===I.length;function Aa(){throw us!==l&&y<I.length&&Ie(fa()),Cr(Is,en<I.length?ca(en):null,en<I.length?cs(en,en+1):cs(en,en))}if(M.peg$library)return{peg$result:us,peg$currPos:y,peg$FAILED:l,peg$maxFailExpected:Is,peg$maxFailPos:en,peg$success:Vr,peg$throw:Vr?void 0:Aa};if(Vr)return us;Aa()},Se={$:"text","&":"simple_and","!":"simple_not"},Y={"?":"optional","*":"zero_or_more","+":"one_or_more"},de={"&":"semantic_and","!":"semantic_not"},W=(function(I){Wg(M,I);function M(l,U,G,X){gi(this,M);var re;return re=zg(this,M,[l]),re.expected=U,re.found=G,re.location=X,re.name="SyntaxError",re}return vi(M,[{key:"format",value:function(l){var U=this,G="Error: "+this.message;if(this.location){var X=null,re=l.find(function(Pe){return Pe.source===U.location.source});re&&(X=re.text.split(/\r\n|\n|\r/g));var _e=this.location.start,ue=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(_e):_e,Ae=this.location.source+":"+ue.line+":"+ue.column;if(X){var Oe=this.location.end,Ee="".padEnd(ue.line.toString().length," "),Z=X[_e.line-1],Ce=(_e.line===Oe.line?Oe.column:Z.length+1)-_e.column||1;G+=`
 --> `+Ae+`
`+Ee+` |
`+ue.line+" | "+Z+`
`+Ee+" | "+"".padEnd(_e.column-1," ")+"".padEnd(Ce,"^")}else G+=`
 at `+Ae}return G}}],[{key:"buildMessage",value:function(l,U){function G(Ce){return Ce.codePointAt(0).toString(16).toUpperCase()}var X=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function re(Ce){return X?Ce.replace(X,function(Pe){return"\\u{"+G(Pe)+"}"}):Ce}function _e(Ce){return re(Ce.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(Pe){return"\\x0"+G(Pe)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(Pe){return"\\x"+G(Pe)}))}function ue(Ce){return re(Ce.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(Pe){return"\\x0"+G(Pe)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(Pe){return"\\x"+G(Pe)}))}var Ae={literal:function(Ce){return'"'+_e(Ce.text)+'"'},class:function(Ce){var Pe=Ce.parts.map(function(Le){return Array.isArray(Le)?ue(Le[0])+"-"+ue(Le[1]):ue(Le)});return"["+(Ce.inverted?"^":"")+Pe.join("")+"]"+(Ce.unicode?"u":"")},any:function(){return"any character"},end:function(){return"end of input"},other:function(Ce){return Ce.description}};function Oe(Ce){return Ae[Ce.type](Ce)}function Ee(Ce){var Pe=Ce.map(Oe);if(Pe.sort(),Pe.length>0){for(var Le=1,oe=1;oe<Pe.length;oe++)Pe[oe-1]!==Pe[oe]&&(Pe[Le]=Pe[oe],Le++);Pe.length=Le}switch(Pe.length){case 1:return Pe[0];case 2:return Pe[0]+" or "+Pe[1];default:return Pe.slice(0,-1).join(", ")+", or "+Pe[Pe.length-1]}}function Z(Ce){return Ce?'"'+_e(Ce)+'"':"end of input"}return"Expected "+Ee(l)+" but "+Z(U)+" found."}}]),M})(Gc(SyntaxError));$e.exports={StartRules:["Grammar","ImportsAndSource"],SyntaxError:W,parse:ve}}),j=n(function(Be,$e){"use strict";var ve=function(Ee,Z,Ce){var Pe=ue.offsetStart(Z),Le=Pe.line,oe=Pe.column-1,xe=Ee.split(`
`);return xe.length===1?new _e(Le,oe,String(Z.source),Ee,Ce):new _e(null,null,String(Z.source),xe.map(function(Ve,Je){return new _e(Le+Je,Je===0?oe:0,String(Z.source),Je===xe.length-1?Ve:[Ve,`
`],Ce)}))},Se=function(Ee,Z,Ce,Pe,Le){if(Ce){var oe=ue.offsetEnd(Ce);return new _e(null,null,String(Ce.source),[Ee,ve(Z,Ce,Le),new _e(oe.line,oe.column-1,String(Ce.source),Pe)])}return new _e(null,null,null,[Ee,Z,Pe])},Y=function(Ee,Z){if(!Ee.literals||!Ee.locations||!Ee.classes||!Ee.expectations||!Ee.functions||!Ee.importedNames)throw new Error("generateJS: generate bytecode was not called.");var Ce=Ee.literals,Pe=Ee.locations,Le=Ee.classes,oe=Ee.expectations,xe=Ee.functions,Ve=Ee.importedNames;if(!Z.allowedStartRules)throw new Error("generateJS: options.allowedStartRules was not set.");var Je=Z.allowedStartRules,Ge=Z.dependencies||{};function kt(ye){var Xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",Ze=ye.match(/^\n*([ \t]+)/);return(Ze?ye.replace(new RegExp("^".concat(Ze[1]),"gm"),Xe):ye).replace(/[ \t]+$/,"")}function at(ye){var Xe=!0,Ze=0;function Mt(Me){return Array.isArray(Me)?Me.map(function(ft){return Mt(ft)}):Uc(Me,_e)?(Ze++,Me.children=Mt(Me.children),Ze--,Me):(Xe?Me=Me.replace(/^(.+)$/gm,"  $1"):Me=Me.replace(/\n(\s*\S)/g,`
  $1`),Xe=!Ze||Me.endsWith(`
`),Me)}return Mt(ye)}function ar(ye){return"peg$c"+ye}function wr(ye){return"peg$r"+ye}function Xr(ye){return"peg$e"+ye}function dr(ye){return"peg$f"+ye}function Wr(ye){return"peg$import"+ye}function xt(ye){return"peg$parse"+ye}function se(){function ye(Me){return'"'+G(Me)+'"'}function Xe(Me){return"/^["+(Me.inverted?"^":"")+Me.value.map(function(ft){return Array.isArray(ft)?X(ft[0])+"-"+X(ft[1]):X(ft)}).join("")+"]/"+(Me.ignoreCase?"i":"")+(Me.unicode?"u":"")}function Ze(Me){switch(Me.type){case"rule":return'peg$otherExpectation("'+G(Me.value)+'")';case"literal":return'peg$literalExpectation("'+G(Me.value)+'", '+Me.ignoreCase+")";case"class":return"peg$classExpectation(["+Me.value.map(function(ft){return Array.isArray(ft)?'["'+G(ft[0])+'", "'+G(ft[1])+'"]':'"'+G(ft)+'"'}).join(", ")+"], "+Me.inverted+", "+Me.ignoreCase+", "+Me.unicode+")";case"any":return"peg$anyExpectation()";default:throw new Error("Unknown expectation type ("+JSON.stringify(Me)+")")}}function Mt(Me,ft){return Se(`
  function `.concat(dr(ft),"(").concat(Me.params.join(", "),") {"),kt(Me.body,"    "),Me.location,"  }")}return new _e(null,null,Z.grammarSource,[Ce.map(function(Me,ft){return"  const "+ar(ft)+" = "+ye(Me)+";"}).concat("",Le.map(function(Me,ft){return"  const "+wr(ft)+" = "+Xe(Me)+";"})).concat("",oe.map(function(Me,ft){return"  const "+Xr(ft)+" = "+Ze(Me)+";"})).concat("").join(`
`)].concat(Ut(xe.map(Mt))))}function ke(ye,Xe){var Ze=[];return Ze.push(""),Z.trace&&Ze.push("peg$tracer.trace({",'  type: "rule.enter",',"  rule: "+ye+",","  location: peg$computeLocation(startPos, startPos, true)","});",""),Z.cache&&(Ze.push("const key = peg$currPos * "+Ee.rules.length+" + "+Xe+";","const cached = peg$resultsCache[key];","","if (cached) {","  peg$currPos = cached.nextPos;",""),Z.trace&&Ze.push("if (cached.result !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+ye+",","    result: cached.result,","    location: peg$computeLocation(startPos, peg$currPos, true)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+ye+",","    location: peg$computeLocation(startPos, startPos, true)","  });","}",""),Ze.push("  return cached.result;","}","")),Ze}function Ye(ye,Xe){var Ze=[];return Z.cache&&Ze.push("","peg$resultsCache[key] = { nextPos: peg$currPos, result: "+Xe+" };"),Z.trace&&Ze.push("","if ("+Xe+" !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+ye+",","    result: "+Xe+",","    location: peg$computeLocation(startPos, peg$currPos, true)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+ye+",","    location: peg$computeLocation(startPos, startPos, true)","  });","}"),Ze.push("","return "+Xe+";"),Ze}function K(ye){var Xe,Ze,Mt,Me=[],ft=ye.bytecode,qe=new I(ye.name,"s","let",ft);function qt(et){var Nr=function(){switch(et[Ne]){case W.PUSH_EMPTY_STRING:wt.push(qe.push("''")),Ne++;break;case W.PUSH_CURR_POS:wt.push(qe.push("peg$currPos")),Ne++;break;case W.PUSH_UNDEFINED:wt.push(qe.push("undefined")),Ne++;break;case W.PUSH_NULL:wt.push(qe.push("null")),Ne++;break;case W.PUSH_FAILED:wt.push(qe.push("peg$FAILED")),Ne++;break;case W.PUSH_EMPTY_ARRAY:wt.push(qe.push("[]")),Ne++;break;case W.POP:qe.pop(),Ne++;break;case W.POP_CURR_POS:wt.push("peg$currPos = "+qe.pop()+";"),Ne++;break;case W.POP_N:qe.pop(et[Ne+1]),Ne+=2;break;case W.NIP:kr=qe.pop(),qe.pop(),wt.push(qe.push(kr)),Ne++;break;case W.APPEND:kr=qe.pop(),wt.push(qe.top()+".push("+kr+");"),Ne++;break;case W.WRAP:wt.push(qe.push("["+qe.pop(et[Ne+1]).join(", ")+"]")),Ne+=2;break;case W.TEXT:wt.push(qe.push("input.substring("+qe.pop()+", peg$currPos)")),Ne++;break;case W.PLUCK:{var Jt=et[Ne+3-1],Xt=3+Jt;kr=et.slice(Ne+3,Ne+Xt),kr=Jt===1?qe.index(kr[0]):"[ ".concat(kr.map(function(Rr){return qe.index(Rr)}).join(", ")," ]"),qe.pop(et[Ne+1]),wt.push(qe.push(kr)),Ne+=Xt;break}case W.IF:_t(qe.top(),0);break;case W.IF_ERROR:_t(qe.top()+" === peg$FAILED",0);break;case W.IF_NOT_ERROR:_t(qe.top()+" !== peg$FAILED",0);break;case W.IF_LT:_t(qe.top()+".length < "+et[Ne+1],1);break;case W.IF_GE:_t(qe.top()+".length >= "+et[Ne+1],1);break;case W.IF_LT_DYNAMIC:_t(qe.top()+".length < ("+qe.index(et[Ne+1])+"|0)",1);break;case W.IF_GE_DYNAMIC:_t(qe.top()+".length >= ("+qe.index(et[Ne+1])+"|0)",1);break;case W.WHILE_NOT_ERROR:Hr(qe.top()+" !== peg$FAILED");break;case W.MATCH_ANY:_t("input.length > peg$currPos",0);break;case W.MATCH_STRING:{var nr=et[Ne+1],fr=Ce[nr];er(function(Rr,ai){return fr.length>1?"".concat(Rr," === ").concat(ar(nr)):(Rr=ai?"".concat(Rr,".charCodeAt(0)"):"input.charCodeAt(peg$currPos)","".concat(Rr," === ").concat(fr.charCodeAt(0)))},1,fr.length);break}case W.MATCH_STRING_IC:{var Sr=et[Ne+1];er(function(Rr){return"".concat(Rr,".toLowerCase() === ").concat(ar(Sr))},1,Ce[Sr].length);break}case W.MATCH_CHAR_CLASS:{var Mr=et[Ne+1];er(function(Rr){return"".concat(wr(Mr),".test(").concat(Rr,")")},1,1);break}case W.MATCH_UNICODE_CLASS:{var bn=et[Ne+1];er(function(Rr){return"".concat(wr(bn),".test(").concat(Rr,")")},1,-1);break}case W.ACCEPT_N:wt.push(qe.push(gr(et[Ne+1]))),wt.push(lt(et[Ne+1],qe.top())),Ne+=2;break;case W.ACCEPT_STRING:wt.push(qe.push(ar(et[Ne+1]))),wt.push(Ce[et[Ne+1]].length>1?"peg$currPos += "+Ce[et[Ne+1]].length+";":"peg$currPos++;"),Ne+=2;break;case W.FAIL:wt.push(qe.push("peg$FAILED")),wt.push("if (peg$silentFails === 0) { peg$fail("+Xr(et[Ne+1])+"); }"),Ne+=2;break;case W.LOAD_SAVED_POS:wt.push("peg$savedPos = "+qe.index(et[Ne+1])+";"),Ne+=2;break;case W.UPDATE_SAVED_POS:wt.push("peg$savedPos = peg$currPos;"),Ne++;break;case W.CALL:kr=Er(4),qe.pop(et[Ne+2]),wt.push(qe.push(kr)),Ne+=4+et[Ne+3];break;case W.RULE:wt.push(qe.push(xt(Ee.rules[et[Ne+1]].name)+"()")),Ne+=2;break;case W.LIBRARY_RULE:{var ir=et[Ne+2],Wn=ir===-1?"":', "'+Ve[ir]+'"';wt.push(qe.push("peg$callLibrary("+Wr(et[Ne+1])+Wn+")")),Ne+=3;break}case W.SILENT_FAILS_ON:wt.push("peg$silentFails++;"),Ne++;break;case W.SILENT_FAILS_OFF:wt.push("peg$silentFails--;"),Ne++;break;case W.SOURCE_MAP_PUSH:qe.sourceMapPush(wt,Pe[et[Ne+1]]),Ne+=2;break;case W.SOURCE_MAP_POP:{qe.sourceMapPop(),Ne++;break}case W.SOURCE_MAP_LABEL_PUSH:qe.labels[et[Ne+1]]={label:Ce[et[Ne+2]],location:Pe[et[Ne+3]]},Ne+=4;break;case W.SOURCE_MAP_LABEL_POP:delete qe.labels[et[Ne+1]],Ne+=2;break;default:throw new Error("Invalid opcode: "+et[Ne]+".")}},Ne=0,Ti=et.length,wt=[],kr;function _t(Jt,Xt,nr){var fr,Sr,Mr=Xt+3,bn=et[Ne+Mr-2],ir=et[Ne+Mr-1],Wn=Xs(qe.checkedIf(Ne,function(){return Ne+=Mr+bn,(nr||qt)(et.slice(Ne-bn,Ne))},ir>0?function(){return Ne+=ir,qt(et.slice(Ne-ir,Ne))}:null),2),Rr=Wn[0],ai=Wn[1];wt.push("if ("+Jt+") {"),(fr=wt).push.apply(fr,Ut(at(Rr))),ir>0&&(wt.push("} else {"),(Sr=wt).push.apply(Sr,Ut(at(ai)))),wt.push("}")}function gr(Jt){switch(Jt){case-1:return"peg$getUnicode()";case 1:return"input.charAt(peg$currPos)";default:return"input.substr(peg$currPos, ".concat(Jt,")")}}function lt(Jt,Xt){switch(Jt){case-1:return"peg$currPos += ".concat(Xt,".length;");case 1:return"peg$currPos++;";default:return"peg$currPos += ("+Jt+");"}}function er(Jt,Xt,nr){var fr=Xt+3,Sr=gr(nr),Mr=null;et[Ne+fr]===W.ACCEPT_N&&et[Ne+fr+1]===nr&&(wt.push(qe.push(Sr)),Sr=qe.pop(),Mr=function(bn){qe.sp++;var ir=qt(bn.slice(2));return ir.unshift(lt(nr,Sr)),ir}),_t(Jt(Sr,Mr!==null),Xt,Mr)}function Hr(Jt){var Xt,nr=et[Ne+2-1],fr=qe.checkedLoop(Ne,function(){return Ne+=2+nr,qt(et.slice(Ne-nr,Ne))});wt.push("while ("+Jt+") {"),(Xt=wt).push.apply(Xt,Ut(at(fr))),wt.push("}")}function Er(Jt){var Xt=et[Ne+Jt-1];return dr(et[Ne+1])+"("+et.slice(Ne+Jt,Ne+Jt+Xt).map(function(nr){return qe.index(nr)}).join(", ")+")"}for(;Ne<Ti;)Nr();return wt}var Vt=qt(ft);return Me.push(Se("function ",xt(ye.name),ye.nameLocation,`() {
`,ye.name)),Z.trace&&Me.push("  var startPos = peg$currPos;"),Me.push(at(qe.defines())),(Xe=Me).push.apply(Xe,Ut(at(ke('"'+G(ye.name)+'"',de.indexOfRule(Ee,ye.name))))),(Ze=Me).push.apply(Ze,Ut(at(Vt))),(Mt=Me).push.apply(Mt,Ut(at(Ye('"'+G(ye.name)+'"',qe.result())))),Me.push("}"),Me.push(""),Me}function fe(ye){return ye.codeLocation?ve(ye.code,ye.codeLocation,"$"+ye.type):ye.code}function Ue(){var ye=[],Xe=Ee.topLevelInitializer;if(Xe)if(Array.isArray(Xe)){if(Z.format==="es"){var Ze=[],Mt=[],Me=!0,ft=!1,qe=void 0;try{for(var qt=Xe[Symbol.iterator](),Vt;!(Me=(Vt=qt.next()).done);Me=!0){var et=Vt.value,Nr=Xs(Oe(et.code,{startRule:"ImportsAndSource",grammarSource:new ue(et.codeLocation.source,et.codeLocation.start)}),2),Ne=Nr[0],Ti=Nr[1];Ne.code?(Ze.push(Ne),Mt.push(Ti)):Mt.push(et)}}catch(ir){ft=!0,qe=ir}finally{try{!Me&&qt.return!=null&&qt.return()}finally{if(ft)throw qe}}Xe=Mt.concat(Ze)}var wt=Xe.slice(0).reverse(),kr=!0,_t=!1,gr=void 0;try{for(var lt=wt[Symbol.iterator](),er;!(kr=(er=lt.next()).done);kr=!0){var Hr=er.value;ye.push(fe(Hr)),ye.push("")}}catch(ir){_t=!0,gr=ir}finally{try{!kr&&lt.return!=null&&lt.return()}finally{if(_t)throw gr}}}else ye.push(fe(Xe)),ye.push("");ye.push("class peg$SyntaxError extends SyntaxError {","  constructor(message, expected, found, location) {","    super(message);","    this.expected = expected;","    this.found = found;","    this.location = location;",'    this.name = "SyntaxError";',"  }","","  format(sources) {",'    let str = "Error: " + this.message;',"    if (this.location) {","      let src = null;","      const st = sources.find(s => s.source === this.location.source);","      if (st) {","        src = st.text.split(/\\r\\n|\\n|\\r/g);","      }","      const s = this.location.start;",'      const offset_s = (this.location.source && (typeof this.location.source.offset === "function"))',"        ? this.location.source.offset(s)","        : s;",'      const loc = this.location.source + ":" + offset_s.line + ":" + offset_s.column;',"      if (src) {","        const e = this.location.end;",'        const filler = "".padEnd(offset_s.line.toString().length, " ");',"        const line = src[s.line - 1];","        const last = s.line === e.line ? e.column : line.length + 1;","        const hatLen = (last - s.column) || 1;",'        str += "\\n --> " + loc + "\\n"','            + filler + " |\\n"','            + offset_s.line + " | " + line + "\\n"','            + filler + " | " + "".padEnd(s.column - 1, " ")','            + "".padEnd(hatLen, "^");',"      } else {",'        str += "\\n at " + loc;',"      }","    }","    return str;","  }","","  static buildMessage(expected, found) {","    function hex(ch) {","      return ch.codePointAt(0).toString(16).toUpperCase();","    }","",'    const nonPrintable = Object.prototype.hasOwnProperty.call(RegExp.prototype, "unicode")','      ? new RegExp("[\\\\p{C}\\\\p{Mn}\\\\p{Mc}]", "gu")',"      : null;","    function unicodeEscape(s) {","      if (nonPrintable) {",'        return s.replace(nonPrintable,  ch => "\\\\u{" + hex(ch) + "}");',"      }","      return s;","    }","","    function literalEscape(s) {","      return unicodeEscape(s",'        .replace(/\\\\/g, "\\\\\\\\")','        .replace(/"/g,  "\\\\\\"")','        .replace(/\\0/g, "\\\\0")','        .replace(/\\t/g, "\\\\t")','        .replace(/\\n/g, "\\\\n")','        .replace(/\\r/g, "\\\\r")','        .replace(/[\\x00-\\x0F]/g,          ch => "\\\\x0" + hex(ch))','        .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, ch => "\\\\x"  + hex(ch)));',"    }","","    function classEscape(s) {","      return unicodeEscape(s",'        .replace(/\\\\/g, "\\\\\\\\")','        .replace(/\\]/g, "\\\\]")','        .replace(/\\^/g, "\\\\^")','        .replace(/-/g,  "\\\\-")','        .replace(/\\0/g, "\\\\0")','        .replace(/\\t/g, "\\\\t")','        .replace(/\\n/g, "\\\\n")','        .replace(/\\r/g, "\\\\r")','        .replace(/[\\x00-\\x0F]/g,          ch => "\\\\x0" + hex(ch))','        .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, ch => "\\\\x"  + hex(ch)));',"    }","","    const DESCRIBE_EXPECTATION_FNS = {","      literal(expectation) {",'        return "\\"" + literalEscape(expectation.text) + "\\"";',"      },","","      class(expectation) {","        const escapedParts = expectation.parts.map(","          part => (Array.isArray(part)",'            ? classEscape(part[0]) + "-" + classEscape(part[1])',"            : classEscape(part))","        );","",'        return "[" + (expectation.inverted ? "^" : "") + escapedParts.join("") + "]" + (expectation.unicode ? "u" : "");',"      },","","      any() {",'        return "any character";',"      },","","      end() {",'        return "end of input";',"      },","","      other(expectation) {","        return expectation.description;","      },","    };","","    function describeExpectation(expectation) {","      return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);","    }","","    function describeExpected(expected) {","      const descriptions = expected.map(describeExpectation);","      descriptions.sort();","","      if (descriptions.length > 0) {","        let j = 1;","        for (let i = 1; i < descriptions.length; i++) {","          if (descriptions[i - 1] !== descriptions[i]) {","            descriptions[j] = descriptions[i];","            j++;","          }","        }","        descriptions.length = j;","      }","","      switch (descriptions.length) {","        case 1:","          return descriptions[0];","","        case 2:",'          return descriptions[0] + " or " + descriptions[1];',"","        default:",'          return descriptions.slice(0, -1).join(", ")','            + ", or "',"            + descriptions[descriptions.length - 1];","      }","    }","","    function describeFound(found) {",'      return found ? "\\"" + literalEscape(found) + "\\"" : "end of input";',"    }","",'    return "Expected " + describeExpected(expected) + " but " + describeFound(found) + " found.";',"  }","}",""),Z.trace&&ye.push("class peg$DefaultTracer {","  constructor() {","    this.indentLevel = 0;","  }","","  trace(event) {","    const that = this;","","    function log(event) {","      console?.log?.(",'        event.location.start.line + ":" + event.location.start.column + "-"','          + event.location.end.line + ":" + event.location.end.column + " "','          + event.type.padEnd(10, " ")','          + "".padEnd((that.indentLevel * 2) + 1, " ") + event.rule',"       );","    }","","    switch (event.type) {",'      case "rule.enter":',"        log(event);","        this.indentLevel++;","        break;","",'      case "rule.match":',"        this.indentLevel--;","        log(event);","        break;","",'      case "rule.fail":',"        this.indentLevel--;","        log(event);","        break;","","      default:",'        throw new Error("Invalid event type: " + event.type + ".");',"    }","  }","}","");var Er=`{
`+Je.map(function(ir){return"    ".concat(ir,": ").concat(xt(ir),`,
`)}).join("")+"  }",Jt=xt(Je[0]),Xt=!0,nr=!1,fr=void 0;if(ye.push("function peg$parse(input, options) {","  options = options !== undefined ? options : {};","","  const peg$FAILED = {};","  const peg$source = options.grammarSource;","","  const peg$startRuleFunctions = "+Er+";","  let peg$startRuleFunction = "+Jt+";","",se(),"","  let peg$currPos = options.peg$currPos | 0;","  let peg$savedPos = peg$currPos;","  const peg$posDetailsCache = [{ line: 1, column: 1 }];","  let peg$maxFailPos = peg$currPos;","  let peg$maxFailExpected = options.peg$maxFailExpected || [];","  let peg$silentFails = options.peg$silentFails | 0;",""),Z.cache&&ye.push("  let peg$resultsCache = {};",""),Z.trace&&ye.push('  let peg$tracer = "tracer" in options ? options.tracer : new peg$DefaultTracer();',""),ye.push("  let peg$result;","","  if (options.startRule) {","    if (!(options.startRule in peg$startRuleFunctions)) {",`      throw new Error("Can't start parsing from rule \\"" + options.startRule + "\\".");`,"    }","","    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];","  }","","  function text() {","    return input.substring(peg$savedPos, peg$currPos);","  }","","  function offset() {","    return peg$savedPos;","  }","","  function range() {","    return {","      source: peg$source,","      start: peg$savedPos,","      end: peg$currPos,","    };","  }","","  function location() {","    return peg$computeLocation(peg$savedPos, peg$currPos);","  }","","  function expected(description, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildStructuredError(","      [peg$otherExpectation(description)],","      input.substring(peg$savedPos, peg$currPos),","      location","    );","  }","","  function error(message, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildSimpleError(message, location);","  }","","  function peg$getUnicode(pos = peg$currPos) {","    const cp = input.codePointAt(pos);","    if (cp === undefined) {",'      return "";',"    }","    return String.fromCodePoint(cp);","  }","","  function peg$literalExpectation(text, ignoreCase) {",'    return { type: "literal", text, ignoreCase };',"  }","","  function peg$classExpectation(parts, inverted, ignoreCase, unicode) {",'    return { type: "class", parts, inverted, ignoreCase, unicode };',"  }","","  function peg$anyExpectation() {",'    return { type: "any" };',"  }","","  function peg$endExpectation() {",'    return { type: "end" };',"  }","","  function peg$otherExpectation(description) {",'    return { type: "other", description };',"  }","","  function peg$computePosDetails(pos) {","    let details = peg$posDetailsCache[pos];","    let p;","","    if (details) {","      return details;","    } else {","      if (pos >= peg$posDetailsCache.length) {","        p = peg$posDetailsCache.length - 1;","      } else {","        p = pos;","        while (!peg$posDetailsCache[--p]) {}","      }","","      details = peg$posDetailsCache[p];","      details = {","        line: details.line,","        column: details.column,","      };","","      while (p < pos) {","        if (input.charCodeAt(p) === 10) {","          details.line++;","          details.column = 1;","        } else {","          details.column++;","        }","","        p++;","      }","","      peg$posDetailsCache[pos] = details;","","      return details;","    }","  }","","  function peg$computeLocation(startPos, endPos, offset) {","    const startPosDetails = peg$computePosDetails(startPos);","    const endPosDetails = peg$computePosDetails(endPos);","","    const res = {","      source: peg$source,","      start: {","        offset: startPos,","        line: startPosDetails.line,","        column: startPosDetails.column,","      },","      end: {","        offset: endPos,","        line: endPosDetails.line,","        column: endPosDetails.column,","      },","    };",'    if (offset && peg$source && (typeof peg$source.offset === "function")) {',"      res.start = peg$source.offset(res.start);","      res.end = peg$source.offset(res.end);","    }","    return res;","  }","","  function peg$fail(expected) {","    if (peg$currPos < peg$maxFailPos) { return; }","","    if (peg$currPos > peg$maxFailPos) {","      peg$maxFailPos = peg$currPos;","      peg$maxFailExpected = [];","    }","","    peg$maxFailExpected.push(expected);","  }","","  function peg$buildSimpleError(message, location) {","    return new peg$SyntaxError(message, null, null, location);","  }","","  function peg$buildStructuredError(expected, found, location) {","    return new peg$SyntaxError(","      peg$SyntaxError.buildMessage(expected, found),","      expected,","      found,","      location","    );","  }",""),Ee.imports.length>0&&ye.push("  function peg$callLibrary(lib, startRule) {","    const opts = Object.assign({}, options, {","      startRule: startRule,","      peg$currPos: peg$currPos,","      peg$silentFails: peg$silentFails,","      peg$library: true,","      peg$maxFailExpected: peg$maxFailExpected","    });","    const res = lib.parse(input, opts);","    peg$currPos = res.peg$currPos;","    peg$maxFailPos = res.peg$maxFailPos;","    peg$maxFailExpected = res.peg$maxFailExpected;","    return (res.peg$result === res.peg$FAILED) ? peg$FAILED : res.peg$result;","  }",""),Ee.rules.forEach(function(ir){var Wn;(Wn=ye).push.apply(Wn,Ut(at(K(ir))))}),Ee.initializer)if(Array.isArray(Ee.initializer))try{for(var Sr=Ee.initializer[Symbol.iterator](),Mr;!(Xt=(Mr=Sr.next()).done);Xt=!0){var bn=Mr.value;ye.push(fe(bn)),ye.push("")}}catch(ir){nr=!0,fr=ir}finally{try{!Xt&&Sr.return!=null&&Sr.return()}finally{if(nr)throw fr}}else ye.push(fe(Ee.initializer)),ye.push("");return ye.push("  peg$result = peg$startRuleFunction();","","  const peg$success = (peg$result !== peg$FAILED && peg$currPos === input.length);","  function peg$throw() {","    if (peg$result !== peg$FAILED && peg$currPos < input.length) {","      peg$fail(peg$endExpectation());","    }","","    throw peg$buildStructuredError(","      peg$maxFailExpected,","      peg$maxFailPos < input.length ? peg$getUnicode(peg$maxFailPos) : null,","      peg$maxFailPos < input.length","        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)","        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)","    );","  }","  if (options.peg$library) {","    return /** @type {any} */ ({","      peg$result,","      peg$currPos,","      peg$FAILED,","      peg$maxFailExpected,","      peg$maxFailPos,","      peg$success,","      peg$throw: peg$success ? undefined : peg$throw,","    });","  }","  if (peg$success) {","    return peg$result;","  } else {","    peg$throw();","  }","}"),new _e(null,null,Z.grammarSource,ye.map(function(ir){return Uc(ir,_e)?ir:ir+`
`}))}function Ke(ye){function Xe(){return["// @generated by Peggy ".concat(l,"."),"//","// https://peggyjs.org/"]}function Ze(){var Me=["{"];return Z.trace&&Me.push("  DefaultTracer: peg$DefaultTracer,"),Z.allowedStartRules&&Me.push("  StartRules: ["+Z.allowedStartRules.map(function(ft){return'"'+ft+'"'}).join(", ")+"],"),Me.push("  SyntaxError: peg$SyntaxError,","  parse: peg$parse,"),Me.push("}"),Me.join(`
`)}var Mt={bare:function(){if(Object.keys(Ge).length>0||Ee.imports.length>0)throw new Error("Dependencies not supported in format 'bare'.");return Ut(Xe()).concat(["(function() {",'  "use strict";',ye,at("return "+Ze()+";"),"})()"])},commonjs:function(){var ft=Object.keys(Ge),qe=Xe();qe.push("",'"use strict";'),ft.length>0&&(ft.forEach(function(et){qe.push("const "+et+' = require("'+G(Ge[et])+'");')}),qe.push(""));for(var qt=Ee.imports.length,Vt=0;Vt<qt;Vt++)qe.push("const "+Wr(Vt)+' = require("'+G(Ee.imports[Vt].from.module)+'");');return qe.push("",ye,"","module.exports = "+Ze()+";"),qe},es:function(){var ft=Object.keys(Ge),qe=Xe();qe.push(""),ft.length>0&&(ft.forEach(function(Vt){qe.push("import "+Vt+' from "'+G(Ge[Vt])+'";')}),qe.push(""));for(var qt=0;qt<Ee.imports.length;qt++)qe.push("import * as "+Wr(qt)+' from "'+G(Ee.imports[qt].from.module)+'";');return qe.push("",ye,""),qe.push("const peg$allowedStartRules = [","  "+(Z.allowedStartRules?Z.allowedStartRules.map(function(Vt){return'"'+Vt+'"'}).join(`,
  `):""),"];",""),qe.push("export {"),Z.trace&&qe.push("  peg$DefaultTracer as DefaultTracer,"),qe.push("  peg$allowedStartRules as StartRules,","  peg$SyntaxError as SyntaxError,","  peg$parse as parse","};"),qe},amd:function(){if(Ee.imports.length>0)throw new Error("Imports are not supported in format 'amd'.");var ft=Object.keys(Ge),qe="["+ft.map(function(Vt){return Ge[Vt]}).map(function(Vt){return'"'+G(Vt)+'"'}).join(", ")+"]",qt=ft.join(", ");return Ut(Xe()).concat(["define("+qe+", function("+qt+") {",'  "use strict";',ye,"",at("return "+Ze()+";"),"});"])},globals:function(){if(Object.keys(Ge).length>0||Ee.imports.length>0)throw new Error("Dependencies not supported in format 'globals'.");if(!Z.exportVar)throw new Error("No export variable defined for format 'globals'.");return Ut(Xe()).concat(["(function(root) {",'  "use strict";',ye,"",at("root."+Z.exportVar+" = "+Ze()+";"),"})(this);"])},umd:function(){if(Ee.imports.length>0)throw new Error("Imports are not supported in format 'umd'.");var ft=Object.keys(Ge),qe=ft.map(function(Ne){return Ge[Ne]}),qt="["+qe.map(function(Ne){return'"'+G(Ne)+'"'}).join(", ")+"]",Vt=qe.map(function(Ne){return'require("'+G(Ne)+'")'}).join(", "),et=ft.join(", "),Nr=Xe();return Nr.push("(function(root, factory) {",'  if (typeof define === "function" && define.amd) {',"    define("+qt+", factory);",'  } else if (typeof module === "object" && module.exports) {',"    module.exports = factory("+Vt+");"),Z.exportVar&&Nr.push("  } else {","    root."+Z.exportVar+" = factory();"),Nr.push("  }","})(this, function("+et+") {",'  "use strict";',ye,"",at("return "+Ze()+";"),"});"),Nr}}[Z.format||"bare"]();return new _e(null,null,Z.grammarSource,Mt.map(function(Me){return Uc(Me,_e)?Me:Me+`
`}))}Ee.code=Ke(Ue())},de=c(),W=S(),I=ne(),M=pe(),l=M.version,U=P(),G=U.stringEscape,X=U.regexpClassEscape,re=H(),_e=re.SourceNode,ue=u(),Ae=$(),Oe=Ae.parse;$e.exports=Y}),R=n(function(Be,$e){"use strict";var ve=function(de,W,I){function M(U){return U.type==="rule"&&U.expression.type==="rule_ref"}function l(U,G,X){Y.build({rule_ref:function(re){re.name===G&&(re.name=X,I.info('Proxy rule "'.concat(G,'" replaced by the rule "').concat(X,'"'),re.location,[{message:"This rule will be used",location:Se.findRule(U,X).nameLocation}]))}})(U)}de.rules.forEach(function(U){M(U)&&l(de,U.name,U.expression.name)})},Se=c(),Y=i();$e.exports=ve}),q=n(function(Be,$e){"use strict";var ve=function(ue,Ae){var Oe=ue,Ee=Ae;Object.keys(Oe).forEach(function(Z){return delete Oe[Z]}),Object.keys(Ee).forEach(function(Z){Oe[Z]=Ee[Z]})},Se=function(ue){ue.sort(function(oe,xe){var Ve=Xs(Array.isArray(oe)?oe:[oe,oe],2),Je=Ve[0],Ge=Ve[1],kt=Xs(Array.isArray(xe)?xe:[xe,xe],2),at=kt[0],ar=kt[1];return Je!==at?Je<at?-1:1:Ge!==ar?Ge>ar?-1:1:0});for(var Ae="",Oe="",Ee=0;Ee<ue.length;Ee++){var Z=ue[Ee],Ce=Xs(Array.isArray(Z)?Z:[Z,Z],2),Pe=Ce[0],Le=Ce[1];if(typeof Pe=="string"&&typeof Le=="string"&&typeof Ae=="string"&&typeof Oe=="string"){if(Le<=Oe){ue.splice(Ee--,1);continue}if(Oe.charCodeAt(0)+1>=Pe.charCodeAt(0)){ue.splice(Ee--,1),ue[Ee]=[Ae,Oe=Le];continue}}Ae=Pe,Oe=Le}return ue},Y=function(ue,Ae){M.build({class:function(Oe){var Ee;if(Oe.unicode){var Z=[],Ce=!0,Pe=!1,Le=void 0;try{for(var oe=Oe.parts[Symbol.iterator](),xe;!(Ce=(xe=oe.next()).done);Ce=!0){var Ve=xe.value;if(Array.isArray(Ve)){var Je=Xs(Ve.map(function(at){return at.codePointAt(0)}),2),Ge=Je[0],kt=Je[1];Ge<X&&kt>re&&(Ae.info("Removing surrogate range from [".concat(I(Ve[0]),"-").concat(I(Ve[1]),"]"),Oe.location),Z.push([_e,Ve[1]]),Ve[1]=G)}}}catch(at){Pe=!0,Le=at}finally{try{!Ce&&oe.return!=null&&oe.return()}finally{if(Pe)throw Le}}(Ee=Oe.parts).push.apply(Ee,Ut(Z))}}})(ue)},de=function(ue,Ae,Oe){var Ee=Object.create(null);ue.rules.forEach(function(oe){return Ee[oe.name]=oe.expression});var Z=new Set;Y(ue,Oe);var Ce=[function(oe){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;switch(oe.type){case"class":if(oe.inverted)break;return xe?G4(Yg({},oe),{parts:Ut(oe.parts)}):oe;case"literal":{var Ve=U(oe.value);if(Ve<0)break;return{type:"class",parts:[oe.value],inverted:!1,ignoreCase:oe.ignoreCase,location:oe.location,unicode:Ve>65535}}case"rule_ref":{var Je=Ee[oe.name];if(!Je)break;Z.has(oe.name)||(Z.add(oe.name),Le(Je));var Ge=Pe(Je,!0);return Ge&&(Ge.location=oe.location),Ge}}return null},M.build({choice:function(oe){var xe=null,Ve=!1;oe.alternatives.forEach(function(Je,Ge){var kt;Le(Je);var at=Pe(Je);if(!at){xe=null;return}xe&&xe.ignoreCase===at.ignoreCase?((kt=xe.parts).push.apply(kt,Ut(at.parts)),oe.alternatives[Ge-1]=xe,oe.alternatives[Ge]=xe,xe.unicode=xe.unicode||at.unicode,xe.location={source:xe.location.source,start:xe.location.start,end:at.location.end},Ve=!0):xe=at}),Ve&&(oe.alternatives=oe.alternatives.filter(function(Je,Ge,kt){return!Ge||Je!==kt[Ge-1]}),oe.alternatives.forEach(function(Je,Ge){Je.type==="class"&&(Je.parts=Se(Je.parts),Je.parts.length===1&&!Array.isArray(Je.parts[0])&&typeof Je.parts[0]=="string"&&!Je.inverted&&(oe.alternatives[Ge]={type:"literal",value:Je.parts[0],ignoreCase:Je.ignoreCase,location:Je.location}))}),oe.alternatives.length===1&&ve(oe,oe.alternatives[0]))},text:function(oe){if(Le(oe.expression),oe.expression.type==="class"||oe.expression.type==="literal"){var xe=oe.location;ve(oe,oe.expression),oe.location=xe}}})],Pe=Ce[0],Le=Ce[1];ue.rules.forEach(function(oe){Z.add(oe.name),Le(oe.expression)})},W=P(),I=W.stringEscape,M=i(),l=P(),U=l.codePointLen1,G=String.fromCodePoint(55295),X=55296,re=57343,_e=String.fromCodePoint(57344);$e.exports=de}),Q=n(function(Be,$e){"use strict";var ve=function(Y,de,W){var I=Object.create(null);Y.rules.forEach(function(X){I[X.name]=X});for(var M=Ut(de.allowedStartRules),l=new Set,U=Se.build({rule_ref:function(X){M.push(X.name)}});M.length;){var G=M.shift();l.has(G)||(l.add(G),U(I[G]))}Y.rules=Y.rules.filter(function(X){return l.has(X.name)?!0:(W.info('Removing unused rule: "'.concat(X.name,'"'),X.location),!1)})},Se=i();$e.exports=ve}),V=n(function(Be,$e){"use strict";var ve=function(Se,Y,de){var W={},I=!0,M=!1,l=void 0,U=!0,G=!1,X=void 0;try{for(var re=Se.imports[Symbol.iterator](),_e;!(U=(_e=re.next()).done);U=!0){var ue=_e.value;try{for(var Ae=ue.what[Symbol.iterator](),Oe;!(I=(Oe=Ae.next()).done);I=!0){var Ee=Oe.value;Ee.type==="import_binding_all"&&(Object.prototype.hasOwnProperty.call(W,Ee.binding)&&de.error('Module "'.concat(Ee.binding,'" is already imported'),Ee.location,[{message:"Original module location",location:W[Ee.binding]}]),W[Ee.binding]=Ee.location)}}catch(Z){M=!0,l=Z}finally{try{!I&&Ae.return!=null&&Ae.return()}finally{if(M)throw l}}}}catch(Z){G=!0,X=Z}finally{try{!U&&re.return!=null&&re.return()}finally{if(G)throw X}}};$e.exports=ve}),z=n(function(Be,$e){"use strict";var ve=function(Y,de,W){function I(U){var G={};return Object.keys(U).forEach(function(X){G[X]=U[X]}),G}function M(U,G){l(U.expression,I(G))}var l=Se.build({rule:function(U){l(U.expression,{})},choice:function(U,G){U.alternatives.forEach(function(X){l(X,I(G))})},action:M,labeled:function(U,G){var X=U.label;X&&Object.prototype.hasOwnProperty.call(G,X)&&W.error('Label "'.concat(U.label,'" is already defined'),U.labelLocation,[{message:"Original label location",location:G[X]}]),l(U.expression,G),G[U.label]=U.labelLocation},text:M,simple_and:M,simple_not:M,optional:M,zero_or_more:M,one_or_more:M,repeated:function(U,G){U.delimiter&&l(U.delimiter,I(G)),l(U.expression,I(G))},group:M});l(Y)},Se=i();$e.exports=ve}),te=n(function(Be,$e){"use strict";var ve=function(Y,de,W){var I={};Se.build({rule:function(M){if(Object.prototype.hasOwnProperty.call(I,M.name)){W.error('Rule "'.concat(M.name,'" is already defined'),M.nameLocation,[{message:"Original rule location",location:I[M.name]}]);return}I[M.name]=M.nameLocation}})(Y)},Se=i();$e.exports=ve}),me=n(function(Be,$e){"use strict";var ve=function(de,W,I){var M=[],l=[],U=new Set,G=Y.build({rule:function(X){I.errors>0||U.has(X.name)||(U.add(X.name),M.push(X.name),G(X.expression),M.pop())},sequence:function(X){I.errors>0||X.elements.every(function(re){return G(re),I.errors>0?!1:!Se.alwaysConsumesOnSuccess(de,re)})},repeated:function(X){I.errors>0||(G(X.expression),X.delimiter&&!Se.alwaysConsumesOnSuccess(de,X.expression)&&G(X.delimiter))},rule_ref:function(X){if(!(I.errors>0)){l.push(X);var re=Se.findRule(de,X.name);if(M.indexOf(X.name)!==-1){M.push(X.name),I.error("Possible infinite loop when parsing (left recursion: "+M.join(" -> ")+")",re.nameLocation,l.map(function(_e,ue,Ae){return{message:ue+1!==Ae.length?"Step ".concat(ue+1,': call of the rule "').concat(_e.name,'" without input consumption'):"Step ".concat(ue+1,": calls itself without input consumption - left recursion"),location:_e.location}}));return}re&&G(re),l.pop()}}});G(de)},Se=c(),Y=i();$e.exports=ve}),st=n(function(Be,$e){"use strict";var ve=function(de,W,I){var M=Y.build({zero_or_more:function(l){Se.alwaysConsumesOnSuccess(de,l.expression)||I.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",l.location)},one_or_more:function(l){Se.alwaysConsumesOnSuccess(de,l.expression)||I.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",l.location)},repeated:function(l){if(l.delimiter&&M(l.delimiter),!(Se.alwaysConsumesOnSuccess(de,l.expression)||l.delimiter&&Se.alwaysConsumesOnSuccess(de,l.delimiter)))if(l.max.value===null)I.error("Possible infinite loop when parsing (unbounded range repetition used with an expression that may not consume any input)",l.location);else{var U=l.min?l.min:l.max;I.warning(U.type==="constant"&&l.max.type==="constant"?"An expression may not consume any input and may always match ".concat(l.max.value," times"):"An expression may not consume any input and may always match with a maximum repetition count",l.location)}}});M(de)},Se=c(),Y=i();$e.exports=ve}),it=n(function(Be,$e){"use strict";var ve=function(de,W,I){Y.build({rule_ref:function(M){Se.findRule(de,M.name)||I.error('Rule "'.concat(M.name,'" is not defined'),M.location)}})(de)},Se=c(),Y=i();$e.exports=ve}),ot=n(function(Be,$e){"use strict";var ve=function(Y,de,W){var I=Se.build({action:function(M){I(M.expression,M)},labeled:function(M,l){M.pick&&l&&W.error('"@" cannot be used with an action block',M.labelLocation,[{message:"Action block location",location:l.codeLocation}]),I(M.expression)}});I(Y)},Se=i();$e.exports=ve}),Ct=n(function(Be,$e){"use strict";var ve=function(I,M,l){var U=Se.build({choice:function(G){G.alternatives.forEach(function(_e){return U(_e)});for(var X=0;X<G.alternatives.length-1;X++){var re=G.alternatives[X];re.match===de&&l.warning("Always matches.  Following alternatives may not be reachable.",re.location)}},simple_and:function(G){U(G.expression),G.expression.match===de?l.warning("Always matches, making the & predicate redundant.",G.expression.location):G.expression.match===W&&l.warning("Never matches, making the & predicate always fail.",G.expression.location)},simple_not:function(G){U(G.expression),G.expression.match===de?l.warning("Always matches, making the ! predicate always fail.",G.expression.location):G.expression.match===W&&l.warning("Never matches, making the ! predicate redundant.",G.expression.location)}});U(I)},Se=i(),Y=v(),de=Y.ALWAYS_MATCH,W=Y.NEVER_MATCH;$e.exports=ve}),yt=n(function(Be,$e){"use strict";var ve=a(),Se=(function(){function de(W){gi(this,de),W=(typeof W>"u"?"undefined":mi(W))<"u"?W:{},typeof W.error=="function"&&(this.error=W.error),typeof W.warning=="function"&&(this.warning=W.warning),typeof W.info=="function"&&(this.info=W.info)}return vi(de,[{key:"error",value:function(){}},{key:"warning",value:function(){}},{key:"info",value:function(){}}]),de})(),Y=(function(){function de(W){gi(this,de),this._callbacks=new Se(W),this._firstError=null,this.errors=0,this.problems=[],this.stage=null}return vi(de,[{key:"error",value:function(){for(var I=arguments.length,M=new Array(I),l=0;l<I;l++)M[l]=arguments[l];var U;++this.errors,this._firstError===null&&(this._firstError=zu(ve,Ut(M)),this._firstError.stage=this.stage,this._firstError.problems=this.problems),this.problems.push(["error"].concat(Ut(M))),(U=this._callbacks).error.apply(U,[this.stage].concat(Ut(M)))}},{key:"warning",value:function(){for(var I=arguments.length,M=new Array(I),l=0;l<I;l++)M[l]=arguments[l];var U;this.problems.push(["warning"].concat(Ut(M))),(U=this._callbacks).warning.apply(U,[this.stage].concat(Ut(M)))}},{key:"info",value:function(){for(var I=arguments.length,M=new Array(I),l=0;l<I;l++)M[l]=arguments[l];var U;this.problems.push(["info"].concat(Ut(M))),(U=this._callbacks).info.apply(U,[this.stage].concat(Ut(M)))}},{key:"checkErrors",value:function(){if(this.errors!==0)throw this._firstError}}]),de})();$e.exports=Y}),Ht=n(function(Be,$e){"use strict";var ve=function(xe,Ve){var Je={};return Object.keys(xe).forEach(function(Ge){Je[Ge]=xe[Ge]}),Object.keys(Ve).forEach(function(Ge){Object.prototype.hasOwnProperty.call(Je,Ge)||(Je[Ge]=Ve[Ge])}),Je},Se=function(xe){return typeof xe=="string"?xe.length>0:xe&&typeof xe.offset=="function"},Y=h(),de=m(),W=g(),I=j(),M=v(),l=R(),U=q(),G=Q(),X=V(),re=z(),_e=te(),ue=me(),Ae=st(),Oe=it(),Ee=ot(),Z=Ct(),Ce=yt(),Pe=i(),Le=P().base64,oe={visitor:Pe,passes:{prepare:[Y,ue],check:[Oe,_e,re,Ae,Ee,X],transform:[de,l,U,G,M],semantic:[Z],generate:[W,I]},compile:function(Ve,Je,Ge){Ge=Ge!==void 0?Ge:{};var kt=[Ve.rules[0].name];if(Ge=ve(Ge,{allowedStartRules:kt,cache:!1,dependencies:{},exportVar:null,format:"bare",output:"parser",trace:!1}),(Ge.allowedStartRules===null||Ge.allowedStartRules===void 0)&&(Ge.allowedStartRules=kt),!Array.isArray(Ge.allowedStartRules))throw new Error("allowedStartRules must be an array");Ge.allowedStartRules.length===0&&(Ge.allowedStartRules=kt);var at=Ve.rules.map(function(K){return K.name}),ar=!0,wr=!1,Xr=void 0;if(Ge.allowedStartRules.some(function(K){return K==="*"}))Ge.allowedStartRules=at;else try{for(var dr=Ge.allowedStartRules[Symbol.iterator](),Wr;!(ar=(Wr=dr.next()).done);ar=!0){var xt=Wr.value;if(at.indexOf(xt)===-1)throw new Error('Unknown start rule "'.concat(xt,'"'))}}catch(K){wr=!0,Xr=K}finally{try{!ar&&dr.return!=null&&dr.return()}finally{if(wr)throw Xr}}if((Ge.output==="source-and-map"||Ge.output==="source-with-inline-map")&&!Se(Ge.grammarSource))throw new Error("Must provide grammarSource (as a string or GrammarLocation) in order to generate source maps");var se=new Ce(Ge);switch(Object.keys(Je).forEach(function(K){se.stage=K,se.info("Process stage ".concat(K)),Je[K].forEach(function(fe){se.info("Process pass ".concat(K,".").concat(fe.name)),fe(Ve,Ge,se)}),se.checkErrors()}),Ge.output){case"parser":return new Function(Ve.code.toString()());case"source":return Ve.code.toString();case"source-and-map":return Ve.code;case"source-with-inline-map":{if((typeof TextEncoder>"u"?"undefined":mi(TextEncoder))>"u")throw new Error("TextEncoder is not supported by this platform");var xt=Ve.code.toStringWithSourceMap(),ke=new TextEncoder,Ye=Le(ke.encode(JSON.stringify(xt.map.toJSON())));return xt.code+"//# sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(Ye,`
`)}case"ast":return Ve;default:throw new Error("Invalid output format: "+Ge.output+".")}}};$e.exports=oe}),Lt=a(),ln=u(),Ar=c(),cr=Ht(),Or=$(),_r=pe(),Bt=_r.version,lr=["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","null","true","false","enum","implements","interface","let","package","private","protected","public","static","yield","await","arguments","eval"],At={VERSION:Bt,RESERVED_WORDS:lr,GrammarError:Lt,GrammarLocation:ln,parser:Or,compiler:cr,generate:function(Be,$e){$e=$e!==void 0?$e:{};function ve(W){var I={};return Object.keys(W).forEach(function(M){I[M]=W[M].slice()}),I}var Se="plugins"in $e?$e.plugins:[],Y={parser:At.parser,passes:ve(At.compiler.passes),reservedWords:At.RESERVED_WORDS.slice()};Se.forEach(function(W){W.use(Y,$e)}),Array.isArray(Be)||(Be=[{source:$e.grammarSource,text:Be}]);var de=Ar.combine(Be.map(function(W){var I=W.source,M=W.text;return Y.parser.parse(M,{grammarSource:I,reservedWords:Y.reservedWords})}));return At.compiler.compile(de,Y.passes,$e)}};return r.exports=At,t!=e&&(r.exports=e),r.exports})});var rp=St((ep,tp)=>{(function(e,t){typeof ep=="object"&&typeof tp<"u"?tp.exports=t():typeof define=="function"&&define.amd?define(t):e.JSON5=t()})(ep,(function(){"use strict";function e(K,fe){return fe={exports:{}},K(fe,fe.exports),fe.exports}var t=e(function(K){var fe=K.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=fe)}),r=e(function(K){var fe=K.exports={version:"2.6.5"};typeof __e=="number"&&(__e=fe)}),n=r.version,u=function(K){return typeof K=="object"?K!==null:typeof K=="function"},a=function(K){if(!u(K))throw TypeError(K+" is not an object!");return K},i=function(K){try{return!!K()}catch{return!0}},c=!i(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),h=t.document,m=u(h)&&u(h.createElement),S=function(K){return m?h.createElement(K):{}},E=!c&&!i(function(){return Object.defineProperty(S("div"),"a",{get:function(){return 7}}).a!=7}),v=function(K,fe){if(!u(K))return K;var Ue,Ke;if(fe&&typeof(Ue=K.toString)=="function"&&!u(Ke=Ue.call(K))||typeof(Ue=K.valueOf)=="function"&&!u(Ke=Ue.call(K))||!fe&&typeof(Ue=K.toString)=="function"&&!u(Ke=Ue.call(K)))return Ke;throw TypeError("Can't convert object to primitive value")},g=Object.defineProperty,b=c?Object.defineProperty:function(fe,Ue,Ke){if(a(fe),Ue=v(Ue,!0),a(Ke),E)try{return g(fe,Ue,Ke)}catch{}if("get"in Ke||"set"in Ke)throw TypeError("Accessors not supported!");return"value"in Ke&&(fe[Ue]=Ke.value),fe},w={f:b},_=function(K,fe){return{enumerable:!(K&1),configurable:!(K&2),writable:!(K&4),value:fe}},A=c?function(K,fe,Ue){return w.f(K,fe,_(1,Ue))}:function(K,fe,Ue){return K[fe]=Ue,K},C={}.hasOwnProperty,x=function(K,fe){return C.call(K,fe)},N=0,H=Math.random(),ne=function(K){return"Symbol(".concat(K===void 0?"":K,")_",(++N+H).toString(36))},pe=!1,P=e(function(K){var fe="__core-js_shared__",Ue=t[fe]||(t[fe]={});(K.exports=function(Ke,ye){return Ue[Ke]||(Ue[Ke]=ye!==void 0?ye:{})})("versions",[]).push({version:r.version,mode:pe?"pure":"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})}),$=P("native-function-to-string",Function.toString),j=e(function(K){var fe=ne("src"),Ue="toString",Ke=(""+$).split(Ue);r.inspectSource=function(ye){return $.call(ye)},(K.exports=function(ye,Xe,Ze,Mt){var Me=typeof Ze=="function";Me&&(x(Ze,"name")||A(Ze,"name",Xe)),ye[Xe]!==Ze&&(Me&&(x(Ze,fe)||A(Ze,fe,ye[Xe]?""+ye[Xe]:Ke.join(String(Xe)))),ye===t?ye[Xe]=Ze:Mt?ye[Xe]?ye[Xe]=Ze:A(ye,Xe,Ze):(delete ye[Xe],A(ye,Xe,Ze)))})(Function.prototype,Ue,function(){return typeof this=="function"&&this[fe]||$.call(this)})}),R=function(K){if(typeof K!="function")throw TypeError(K+" is not a function!");return K},q=function(K,fe,Ue){if(R(K),fe===void 0)return K;switch(Ue){case 1:return function(Ke){return K.call(fe,Ke)};case 2:return function(Ke,ye){return K.call(fe,Ke,ye)};case 3:return function(Ke,ye,Xe){return K.call(fe,Ke,ye,Xe)}}return function(){return K.apply(fe,arguments)}},Q="prototype",V=function(K,fe,Ue){var Ke=K&V.F,ye=K&V.G,Xe=K&V.S,Ze=K&V.P,Mt=K&V.B,Me=ye?t:Xe?t[fe]||(t[fe]={}):(t[fe]||{})[Q],ft=ye?r:r[fe]||(r[fe]={}),qe=ft[Q]||(ft[Q]={}),qt,Vt,et,Nr;ye&&(Ue=fe);for(qt in Ue)Vt=!Ke&&Me&&Me[qt]!==void 0,et=(Vt?Me:Ue)[qt],Nr=Mt&&Vt?q(et,t):Ze&&typeof et=="function"?q(Function.call,et):et,Me&&j(Me,qt,et,K&V.U),ft[qt]!=et&&A(ft,qt,Nr),Ze&&qe[qt]!=et&&(qe[qt]=et)};t.core=r,V.F=1,V.G=2,V.S=4,V.P=8,V.B=16,V.W=32,V.U=64,V.R=128;var z=V,te=Math.ceil,me=Math.floor,st=function(K){return isNaN(K=+K)?0:(K>0?me:te)(K)},it=function(K){if(K==null)throw TypeError("Can't call method on  "+K);return K},ot=function(K){return function(fe,Ue){var Ke=String(it(fe)),ye=st(Ue),Xe=Ke.length,Ze,Mt;return ye<0||ye>=Xe?K?"":void 0:(Ze=Ke.charCodeAt(ye),Ze<55296||Ze>56319||ye+1===Xe||(Mt=Ke.charCodeAt(ye+1))<56320||Mt>57343?K?Ke.charAt(ye):Ze:K?Ke.slice(ye,ye+2):(Ze-55296<<10)+(Mt-56320)+65536)}},Ct=ot(!1);z(z.P,"String",{codePointAt:function(fe){return Ct(this,fe)}});var yt=r.String.codePointAt,Ht=Math.max,Lt=Math.min,ln=function(K,fe){return K=st(K),K<0?Ht(K+fe,0):Lt(K,fe)},Ar=String.fromCharCode,cr=String.fromCodePoint;z(z.S+z.F*(!!cr&&cr.length!=1),"String",{fromCodePoint:function(fe){for(var Ue=arguments,Ke=[],ye=arguments.length,Xe=0,Ze;ye>Xe;){if(Ze=+Ue[Xe++],ln(Ze,1114111)!==Ze)throw RangeError(Ze+" is not a valid code point");Ke.push(Ze<65536?Ar(Ze):Ar(((Ze-=65536)>>10)+55296,Ze%1024+56320))}return Ke.join("")}});var Or=r.String.fromCodePoint,_r=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,Bt=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,lr=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,At={Space_Separator:_r,ID_Start:Bt,ID_Continue:lr},Be={isSpaceSeparator:function(fe){return typeof fe=="string"&&At.Space_Separator.test(fe)},isIdStartChar:function(fe){return typeof fe=="string"&&(fe>="a"&&fe<="z"||fe>="A"&&fe<="Z"||fe==="$"||fe==="_"||At.ID_Start.test(fe))},isIdContinueChar:function(fe){return typeof fe=="string"&&(fe>="a"&&fe<="z"||fe>="A"&&fe<="Z"||fe>="0"&&fe<="9"||fe==="$"||fe==="_"||fe==="\u200C"||fe==="\u200D"||At.ID_Continue.test(fe))},isDigit:function(fe){return typeof fe=="string"&&/[0-9]/.test(fe)},isHexDigit:function(fe){return typeof fe=="string"&&/[0-9A-Fa-f]/.test(fe)}},$e,ve,Se,Y,de,W,I,M,l,U=function(fe,Ue){$e=String(fe),ve="start",Se=[],Y=0,de=1,W=0,I=void 0,M=void 0,l=void 0;do I=Oe(),Je[ve]();while(I.type!=="eof");return typeof Ue=="function"?G({"":l},"",Ue):l};function G(K,fe,Ue){var Ke=K[fe];if(Ke!=null&&typeof Ke=="object")if(Array.isArray(Ke))for(var ye=0;ye<Ke.length;ye++){var Xe=String(ye),Ze=G(Ke,Xe,Ue);Ze===void 0?delete Ke[Xe]:Object.defineProperty(Ke,Xe,{value:Ze,writable:!0,enumerable:!0,configurable:!0})}else for(var Mt in Ke){var Me=G(Ke,Mt,Ue);Me===void 0?delete Ke[Mt]:Object.defineProperty(Ke,Mt,{value:Me,writable:!0,enumerable:!0,configurable:!0})}return Ue.call(K,fe,Ke)}var X,re,_e,ue,Ae;function Oe(){for(X="default",re="",_e=!1,ue=1;;){Ae=Ee();var K=Ce[X]();if(K)return K}}function Ee(){if($e[Y])return String.fromCodePoint($e.codePointAt(Y))}function Z(){var K=Ee();return K===`
`?(de++,W=0):K?W+=K.length:W++,K&&(Y+=K.length),K}var Ce={default:function(){switch(Ae){case"	":case"\v":case"\f":case" ":case"\xA0":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":Z();return;case"/":Z(),X="comment";return;case void 0:return Z(),Pe("eof")}if(Be.isSpaceSeparator(Ae)){Z();return}return Ce[ve]()},comment:function(){switch(Ae){case"*":Z(),X="multiLineComment";return;case"/":Z(),X="singleLineComment";return}throw at(Z())},multiLineComment:function(){switch(Ae){case"*":Z(),X="multiLineCommentAsterisk";return;case void 0:throw at(Z())}Z()},multiLineCommentAsterisk:function(){switch(Ae){case"*":Z();return;case"/":Z(),X="default";return;case void 0:throw at(Z())}Z(),X="multiLineComment"},singleLineComment:function(){switch(Ae){case`
`:case"\r":case"\u2028":case"\u2029":Z(),X="default";return;case void 0:return Z(),Pe("eof")}Z()},value:function(){switch(Ae){case"{":case"[":return Pe("punctuator",Z());case"n":return Z(),Le("ull"),Pe("null",null);case"t":return Z(),Le("rue"),Pe("boolean",!0);case"f":return Z(),Le("alse"),Pe("boolean",!1);case"-":case"+":Z()==="-"&&(ue=-1),X="sign";return;case".":re=Z(),X="decimalPointLeading";return;case"0":re=Z(),X="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":re=Z(),X="decimalInteger";return;case"I":return Z(),Le("nfinity"),Pe("numeric",1/0);case"N":return Z(),Le("aN"),Pe("numeric",NaN);case'"':case"'":_e=Z()==='"',re="",X="string";return}throw at(Z())},identifierNameStartEscape:function(){if(Ae!=="u")throw at(Z());Z();var fe=Ve();switch(fe){case"$":case"_":break;default:if(!Be.isIdStartChar(fe))throw wr();break}re+=fe,X="identifierName"},identifierName:function(){switch(Ae){case"$":case"_":case"\u200C":case"\u200D":re+=Z();return;case"\\":Z(),X="identifierNameEscape";return}if(Be.isIdContinueChar(Ae)){re+=Z();return}return Pe("identifier",re)},identifierNameEscape:function(){if(Ae!=="u")throw at(Z());Z();var fe=Ve();switch(fe){case"$":case"_":case"\u200C":case"\u200D":break;default:if(!Be.isIdContinueChar(fe))throw wr();break}re+=fe,X="identifierName"},sign:function(){switch(Ae){case".":re=Z(),X="decimalPointLeading";return;case"0":re=Z(),X="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":re=Z(),X="decimalInteger";return;case"I":return Z(),Le("nfinity"),Pe("numeric",ue*(1/0));case"N":return Z(),Le("aN"),Pe("numeric",NaN)}throw at(Z())},zero:function(){switch(Ae){case".":re+=Z(),X="decimalPoint";return;case"e":case"E":re+=Z(),X="decimalExponent";return;case"x":case"X":re+=Z(),X="hexadecimal";return}return Pe("numeric",ue*0)},decimalInteger:function(){switch(Ae){case".":re+=Z(),X="decimalPoint";return;case"e":case"E":re+=Z(),X="decimalExponent";return}if(Be.isDigit(Ae)){re+=Z();return}return Pe("numeric",ue*Number(re))},decimalPointLeading:function(){if(Be.isDigit(Ae)){re+=Z(),X="decimalFraction";return}throw at(Z())},decimalPoint:function(){switch(Ae){case"e":case"E":re+=Z(),X="decimalExponent";return}if(Be.isDigit(Ae)){re+=Z(),X="decimalFraction";return}return Pe("numeric",ue*Number(re))},decimalFraction:function(){switch(Ae){case"e":case"E":re+=Z(),X="decimalExponent";return}if(Be.isDigit(Ae)){re+=Z();return}return Pe("numeric",ue*Number(re))},decimalExponent:function(){switch(Ae){case"+":case"-":re+=Z(),X="decimalExponentSign";return}if(Be.isDigit(Ae)){re+=Z(),X="decimalExponentInteger";return}throw at(Z())},decimalExponentSign:function(){if(Be.isDigit(Ae)){re+=Z(),X="decimalExponentInteger";return}throw at(Z())},decimalExponentInteger:function(){if(Be.isDigit(Ae)){re+=Z();return}return Pe("numeric",ue*Number(re))},hexadecimal:function(){if(Be.isHexDigit(Ae)){re+=Z(),X="hexadecimalInteger";return}throw at(Z())},hexadecimalInteger:function(){if(Be.isHexDigit(Ae)){re+=Z();return}return Pe("numeric",ue*Number(re))},string:function(){switch(Ae){case"\\":Z(),re+=oe();return;case'"':if(_e)return Z(),Pe("string",re);re+=Z();return;case"'":if(!_e)return Z(),Pe("string",re);re+=Z();return;case`
`:case"\r":throw at(Z());case"\u2028":case"\u2029":Xr(Ae);break;case void 0:throw at(Z())}re+=Z()},start:function(){switch(Ae){case"{":case"[":return Pe("punctuator",Z())}X="value"},beforePropertyName:function(){switch(Ae){case"$":case"_":re=Z(),X="identifierName";return;case"\\":Z(),X="identifierNameStartEscape";return;case"}":return Pe("punctuator",Z());case'"':case"'":_e=Z()==='"',X="string";return}if(Be.isIdStartChar(Ae)){re+=Z(),X="identifierName";return}throw at(Z())},afterPropertyName:function(){if(Ae===":")return Pe("punctuator",Z());throw at(Z())},beforePropertyValue:function(){X="value"},afterPropertyValue:function(){switch(Ae){case",":case"}":return Pe("punctuator",Z())}throw at(Z())},beforeArrayValue:function(){if(Ae==="]")return Pe("punctuator",Z());X="value"},afterArrayValue:function(){switch(Ae){case",":case"]":return Pe("punctuator",Z())}throw at(Z())},end:function(){throw at(Z())}};function Pe(K,fe){return{type:K,value:fe,line:de,column:W}}function Le(K){for(var fe=0,Ue=K;fe<Ue.length;fe+=1){var Ke=Ue[fe],ye=Ee();if(ye!==Ke)throw at(Z());Z()}}function oe(){var K=Ee();switch(K){case"b":return Z(),"\b";case"f":return Z(),"\f";case"n":return Z(),`
`;case"r":return Z(),"\r";case"t":return Z(),"	";case"v":return Z(),"\v";case"0":if(Z(),Be.isDigit(Ee()))throw at(Z());return"\0";case"x":return Z(),xe();case"u":return Z(),Ve();case`
`:case"\u2028":case"\u2029":return Z(),"";case"\r":return Z(),Ee()===`
`&&Z(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw at(Z());case void 0:throw at(Z())}return Z()}function xe(){var K="",fe=Ee();if(!Be.isHexDigit(fe)||(K+=Z(),fe=Ee(),!Be.isHexDigit(fe)))throw at(Z());return K+=Z(),String.fromCodePoint(parseInt(K,16))}function Ve(){for(var K="",fe=4;fe-- >0;){var Ue=Ee();if(!Be.isHexDigit(Ue))throw at(Z());K+=Z()}return String.fromCodePoint(parseInt(K,16))}var Je={start:function(){if(I.type==="eof")throw ar();Ge()},beforePropertyName:function(){switch(I.type){case"identifier":case"string":M=I.value,ve="afterPropertyName";return;case"punctuator":kt();return;case"eof":throw ar()}},afterPropertyName:function(){if(I.type==="eof")throw ar();ve="beforePropertyValue"},beforePropertyValue:function(){if(I.type==="eof")throw ar();Ge()},beforeArrayValue:function(){if(I.type==="eof")throw ar();if(I.type==="punctuator"&&I.value==="]"){kt();return}Ge()},afterPropertyValue:function(){if(I.type==="eof")throw ar();switch(I.value){case",":ve="beforePropertyName";return;case"}":kt()}},afterArrayValue:function(){if(I.type==="eof")throw ar();switch(I.value){case",":ve="beforeArrayValue";return;case"]":kt()}},end:function(){}};function Ge(){var K;switch(I.type){case"punctuator":switch(I.value){case"{":K={};break;case"[":K=[];break}break;case"null":case"boolean":case"numeric":case"string":K=I.value;break}if(l===void 0)l=K;else{var fe=Se[Se.length-1];Array.isArray(fe)?fe.push(K):Object.defineProperty(fe,M,{value:K,writable:!0,enumerable:!0,configurable:!0})}if(K!==null&&typeof K=="object")Se.push(K),Array.isArray(K)?ve="beforeArrayValue":ve="beforePropertyName";else{var Ue=Se[Se.length-1];Ue==null?ve="end":Array.isArray(Ue)?ve="afterArrayValue":ve="afterPropertyValue"}}function kt(){Se.pop();var K=Se[Se.length-1];K==null?ve="end":Array.isArray(K)?ve="afterArrayValue":ve="afterPropertyValue"}function at(K){return Wr(K===void 0?"JSON5: invalid end of input at "+de+":"+W:"JSON5: invalid character '"+dr(K)+"' at "+de+":"+W)}function ar(){return Wr("JSON5: invalid end of input at "+de+":"+W)}function wr(){return W-=5,Wr("JSON5: invalid identifier character at "+de+":"+W)}function Xr(K){console.warn("JSON5: '"+dr(K)+"' in strings is not valid ECMAScript; consider escaping")}function dr(K){var fe={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(fe[K])return fe[K];if(K<" "){var Ue=K.charCodeAt(0).toString(16);return"\\x"+("00"+Ue).substring(Ue.length)}return K}function Wr(K){var fe=new SyntaxError(K);return fe.lineNumber=de,fe.columnNumber=W,fe}var xt=function(fe,Ue,Ke){var ye=[],Xe="",Ze,Mt,Me="",ft;if(Ue!=null&&typeof Ue=="object"&&!Array.isArray(Ue)&&(Ke=Ue.space,ft=Ue.quote,Ue=Ue.replacer),typeof Ue=="function")Mt=Ue;else if(Array.isArray(Ue)){Ze=[];for(var qe=0,qt=Ue;qe<qt.length;qe+=1){var Vt=qt[qe],et=void 0;typeof Vt=="string"?et=Vt:(typeof Vt=="number"||Vt instanceof String||Vt instanceof Number)&&(et=String(Vt)),et!==void 0&&Ze.indexOf(et)<0&&Ze.push(et)}}return Ke instanceof Number?Ke=Number(Ke):Ke instanceof String&&(Ke=String(Ke)),typeof Ke=="number"?Ke>0&&(Ke=Math.min(10,Math.floor(Ke)),Me="          ".substr(0,Ke)):typeof Ke=="string"&&(Me=Ke.substr(0,10)),Nr("",{"":fe});function Nr(_t,gr){var lt=gr[_t];switch(lt!=null&&(typeof lt.toJSON5=="function"?lt=lt.toJSON5(_t):typeof lt.toJSON=="function"&&(lt=lt.toJSON(_t))),Mt&&(lt=Mt.call(gr,_t,lt)),lt instanceof Number?lt=Number(lt):lt instanceof String?lt=String(lt):lt instanceof Boolean&&(lt=lt.valueOf()),lt){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof lt=="string")return Ne(lt,!1);if(typeof lt=="number")return String(lt);if(typeof lt=="object")return Array.isArray(lt)?kr(lt):Ti(lt)}function Ne(_t){for(var gr={"'":.1,'"':.2},lt={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},er="",Hr=0;Hr<_t.length;Hr++){var Er=_t[Hr];switch(Er){case"'":case'"':gr[Er]++,er+=Er;continue;case"\0":if(Be.isDigit(_t[Hr+1])){er+="\\x00";continue}}if(lt[Er]){er+=lt[Er];continue}if(Er<" "){var Jt=Er.charCodeAt(0).toString(16);er+="\\x"+("00"+Jt).substring(Jt.length);continue}er+=Er}var Xt=ft||Object.keys(gr).reduce(function(nr,fr){return gr[nr]<gr[fr]?nr:fr});return er=er.replace(new RegExp(Xt,"g"),lt[Xt]),Xt+er+Xt}function Ti(_t){if(ye.indexOf(_t)>=0)throw TypeError("Converting circular structure to JSON5");ye.push(_t);var gr=Xe;Xe=Xe+Me;for(var lt=Ze||Object.keys(_t),er=[],Hr=0,Er=lt;Hr<Er.length;Hr+=1){var Jt=Er[Hr],Xt=Nr(Jt,_t);if(Xt!==void 0){var nr=wt(Jt)+":";Me!==""&&(nr+=" "),nr+=Xt,er.push(nr)}}var fr;if(er.length===0)fr="{}";else{var Sr;if(Me==="")Sr=er.join(","),fr="{"+Sr+"}";else{var Mr=`,
`+Xe;Sr=er.join(Mr),fr=`{
`+Xe+Sr+`,
`+gr+"}"}}return ye.pop(),Xe=gr,fr}function wt(_t){if(_t.length===0)return Ne(_t,!0);var gr=String.fromCodePoint(_t.codePointAt(0));if(!Be.isIdStartChar(gr))return Ne(_t,!0);for(var lt=gr.length;lt<_t.length;lt++)if(!Be.isIdContinueChar(String.fromCodePoint(_t.codePointAt(lt))))return Ne(_t,!0);return _t}function kr(_t){if(ye.indexOf(_t)>=0)throw TypeError("Converting circular structure to JSON5");ye.push(_t);var gr=Xe;Xe=Xe+Me;for(var lt=[],er=0;er<_t.length;er++){var Hr=Nr(String(er),_t);lt.push(Hr!==void 0?Hr:"null")}var Er;if(lt.length===0)Er="[]";else if(Me===""){var Jt=lt.join(",");Er="["+Jt+"]"}else{var Xt=`,
`+Xe,nr=lt.join(Xt);Er=`[
`+Xe+nr+`,
`+gr+"]"}return ye.pop(),Xe=gr,Er}},se={parse:U,stringify:xt},ke=se,Ye=ke;return Ye}))});var Xf=e=>e.length%4==0&&/^[A-Za-z0-9+/]+[=]{0,3}$/.test(e);function Bd(e){let t=new TextEncoder("utf-8").encode(e),r=String.fromCharCode.apply(null,t);return btoa(r)}function xd(e){let t=atob(e),r=Uint8Array.from(t,n=>n.charCodeAt(0));return new TextDecoder("utf-8").decode(r)}var jd="3.7.8",vA=jd,Ca=typeof Buffer=="function",Td=typeof TextDecoder=="function"?new TextDecoder:void 0,Od=typeof TextEncoder=="function"?new TextEncoder:void 0,mA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Pu=Array.prototype.slice.call(mA),nc=(e=>{let t={};return e.forEach((r,n)=>t[r]=n),t})(Pu),wA=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Zr=String.fromCharCode.bind(String),Nd=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),Md=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),qd=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),Ud=e=>{let t,r,n,u,a="",i=e.length%3;for(let c=0;c<e.length;){if((r=e.charCodeAt(c++))>255||(n=e.charCodeAt(c++))>255||(u=e.charCodeAt(c++))>255)throw new TypeError("invalid character found");t=r<<16|n<<8|u,a+=Pu[t>>18&63]+Pu[t>>12&63]+Pu[t>>6&63]+Pu[t&63]}return i?a.slice(0,i-3)+"===".substring(i):a},eh=typeof btoa=="function"?e=>btoa(e):Ca?e=>Buffer.from(e,"binary").toString("base64"):Ud,Zf=Ca?e=>Buffer.from(e).toString("base64"):e=>{let r=[];for(let n=0,u=e.length;n<u;n+=4096)r.push(Zr.apply(null,e.subarray(n,n+4096)));return eh(r.join(""))},ic=(e,t=!1)=>t?Md(Zf(e)):Zf(e),bA=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?Zr(192|t>>>6)+Zr(128|t&63):Zr(224|t>>>12&15)+Zr(128|t>>>6&63)+Zr(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return Zr(240|t>>>18&7)+Zr(128|t>>>12&63)+Zr(128|t>>>6&63)+Zr(128|t&63)}},AA=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Vd=e=>e.replace(AA,bA),Hd=Ca?e=>Buffer.from(e,"utf8").toString("base64"):Od?e=>Zf(Od.encode(e)):e=>eh(Vd(e)),Fa=(e,t=!1)=>t?Md(Hd(e)):Hd(e),Ld=e=>Fa(e,!0),EA=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,SA=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),r=t-65536;return Zr((r>>>10)+55296)+Zr((r&1023)+56320);case 3:return Zr((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return Zr((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},Kd=e=>e.replace(EA,SA),zd=e=>{if(e=e.replace(/\s+/g,""),!wA.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,r,n,u=[];for(let a=0;a<e.length;)t=nc[e.charAt(a++)]<<18|nc[e.charAt(a++)]<<12|(r=nc[e.charAt(a++)])<<6|(n=nc[e.charAt(a++)]),r===64?u.push(Zr(t>>16&255)):n===64?u.push(Zr(t>>16&255,t>>8&255)):u.push(Zr(t>>16&255,t>>8&255,t&255));return u.join("")},th=typeof atob=="function"?e=>atob(qd(e)):Ca?e=>Buffer.from(e,"base64").toString("binary"):zd,Gd=Ca?e=>Nd(Buffer.from(e,"base64")):e=>Nd(th(e).split("").map(t=>t.charCodeAt(0))),Wd=e=>Gd(Yd(e)),_A=Ca?e=>Buffer.from(e,"base64").toString("utf8"):Td?e=>Td.decode(Gd(e)):e=>Kd(th(e)),Yd=e=>qd(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),Qf=e=>_A(Yd(e)),yA=e=>{if(typeof e!="string")return!1;let t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},Jd=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),Xd=function(){let e=(t,r)=>Object.defineProperty(String.prototype,t,Jd(r));e("fromBase64",function(){return Qf(this)}),e("toBase64",function(t){return Fa(this,t)}),e("toBase64URI",function(){return Fa(this,!0)}),e("toBase64URL",function(){return Fa(this,!0)}),e("toUint8Array",function(){return Wd(this)})},Zd=function(){let e=(t,r)=>Object.defineProperty(Uint8Array.prototype,t,Jd(r));e("toBase64",function(t){return ic(this,t)}),e("toBase64URI",function(){return ic(this,!0)}),e("toBase64URL",function(){return ic(this,!0)})},DA=()=>{Xd(),Zd()},Wt={version:jd,VERSION:vA,atob:th,atobPolyfill:zd,btoa:eh,btoaPolyfill:Ud,fromBase64:Qf,toBase64:Fa,encode:Fa,encodeURI:Ld,encodeURL:Ld,utob:Vd,btou:Kd,decode:Qf,isValid:yA,fromUint8Array:ic,toUint8Array:Wd,extendString:Xd,extendUint8Array:Zd,extendBuiltins:DA};var Wc=hi(e0());var bh=hi(y0());function w_(e){let t=bh.default.pemtohex(e);return bh.default.KJUR.crypto.Util.hashHex(t,"sha256").match(/.{2}/g).join(":").toUpperCase()}var D0={generateFingerprint:w_};var N0=hi(O0()),z_=/^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)(\.(?!$)|$)){4}$/,G_=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;function Un(e){return z_.test(e)}function wn(e){return G_.test(e)}function H0(e){return/^((6553[0-5])|(655[0-2][0-9])|(65[0-4][0-9]{2})|(6[0-4][0-9]{3})|([1-5][0-9]{4})|([0-5]{0,5})|([0-9]{1,4}))$/.test(e)}function $i(e){return typeof e=="string"&&e.trim().length>0}function pr(e,t){return $i(e)?e:t}function we(e){return typeof e<"u"&&e!==null}function Na(e,t){return we(e)?e:t}function W_(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function xu(e){let t=e.split(/,|\//),r=t[Math.floor(Math.random()*t.length)];if(r.includes("-")){let[n,u]=r.split("-").map(Number);return W_(n,u)}else return Number(r)}function L0(e){return Number.isSafeInteger(e)?String(e):BigInt(e).toString()}function Fc(e){return typeof e=="string"&&/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(e)}var Gt={log(...e){console.log(`[LOG]: ${e.join(" ")}`)},info(...e){console.log(`[INFO]: ${e.join(" ")}`)},error(...e){console.log(`[ERROR]: ${e.join(" ")}`)}};var Mu=hi(kg());function Bg(e,t,...r){try{return e(t,...r)}catch{return e(xg(e(t.replace(/!<str>\s*/g,"__SubStoreJSYAMLString__"),...r)).replace(/__SubStoreJSYAMLString__/g,""),...r)}}function Js(e,...t){return Bg(Mu.default.safeLoad,JSON.parse(JSON.stringify(e)),...t)}function D5(e,...t){return Bg(Mu.default.load,JSON.parse(JSON.stringify(e)),...t)}function Rg(e,...t){return Mu.default.safeDump(JSON.parse(JSON.stringify(e)),...t)}function xg(e,...t){return Mu.default.dump(JSON.parse(JSON.stringify(e)),...t)}var Mh={safeLoad:Js,load:D5,safeDump:Rg,dump:xg,parse:Js,stringify:Rg};function F5(){return{name:"HTML",test:n=>/^<!DOCTYPE html>/.test(n),parse:()=>""}}function C5(){let e="Base64 Pre-processor",t=["dm1lc3M","c3NyOi8v","c29ja3M6Ly","dHJvamFu","c3M6Ly","c3NkOi8v","c2hhZG93","aHR0c","dmxlc3M=","aHlzdGVyaWEy","aHkyOi8v","d2lyZWd1YXJkOi8v","d2c6Ly8=","dHVpYzovLw=="];return{name:e,test:function(u){return!/^\w+:\/\/\w+/im.test(u)&&t.some(a=>u.indexOf(a)!==-1)},parse:function(u){let a=Wt.decode(u);return/^\w+(:\/\/|\s*?=\s*?)\w+/m.test(a)?a:(Gt.error("Base64 Pre-processor error: decoded line does not start with protocol"),u)}}}function P5(){return{name:"Fallback Base64 Pre-processor",test:function(n){return!0},parse:function(n){let u=Wt.decode(n);return/^\w+(:\/\/|\s*?=\s*?)\w+/m.test(u)?u:(Gt.error("Fallback Base64 Pre-processor error: decoded line does not start with protocol"),n)}}}function I5(){return{name:"Clash Pre-processor",test:function(n){if(!/proxies/.test(n))return!1;let u=Js(n);return u.proxies&&Array.isArray(u.proxies)},parse:function(n,u){let a=n.replace(/short-id:([ \t]*[^#\n,}]*)/g,(h,m)=>{let S=m.trim();return!S||S===""?'short-id: ""':/^(['"]).*\1$/.test(S)?`short-id: ${S}`:["null"].includes(S)?`short-id: ${S}`:`short-id: "${S}"`}),{proxies:i,"global-client-fingerprint":c}=Js(a);return(u?`proxies:
`:"")+i.map(h=>(c&&!h["client-fingerprint"]&&(h["client-fingerprint"]=c),`${u?"  - ":""}${JSON.stringify(h)}
`)).join("")}}}function $5(){return{name:"SSD Pre-processor",test:function(n){return n.indexOf("ssd://")===0},parse:function(n){let u=[],a=JSON.parse(Wt.decode(n.split("ssd://")[1])),i=a.port,c=a.encryption,h=a.password,m=a.servers;for(let S=0;S<m.length;S++){let E=m[S];c=E.encryption?E.encryption:c,h=E.password?E.password:h;let v=Wt.encode(c+":"+h),g=E.server;i=E.port?E.port:i;let b=E.remarks?E.remarks:S,w=E.plugin_options?"/?plugin="+encodeURIComponent(E.plugin+";"+E.plugin_options):"";u[S]="ss://"+v+"@"+g+":"+i+w+"#"+b}return u.join(`
`)}}}function k5(){return{name:"Full Config Preprocessor",test:function(n){return/^(\[server_local\]|\[Proxy\])/gm.test(n)},parse:function(n){return n.match(/^\[server_local|Proxy\]([\s\S]+?)^\[.+?\](\r?\n|$)/im)?.[1]||n}}}var Tg=[F5(),I5(),C5(),$5(),k5(),P5()];var Ng=hi(Og()),Pt=class{constructor(t){this.proxy=t,this.output=[]}append(t){if(typeof t>"u")throw new Error("required field is missing");this.output.push(t)}appendIfPresent(t,r){R5(this.proxy,r)&&this.append(t)}toString(){return this.output.join("")}};function R5(e,t){let r=Ng.default.get(e,t);return typeof r<"u"&&r!==null}var B5="Surge",si={dual:"dual",ipv4:"v4-only",ipv6:"v6-only","ipv4-prefer":"prefer-v4","ipv6-prefer":"prefer-v6"};function za(){return{produce:(t,r,n={})=>{switch(t.name=t.name.replace(/=|,/g,""),t.ports&&(t.ports=String(t.ports)),t.type){case"ss":return x5(t,n["include-unsupported-proxy"]);case"trojan":return T5(t);case"vmess":return O5(t,n["include-unsupported-proxy"]);case"http":return H5(t);case"direct":return L5(t);case"socks5":return j5(t);case"snell":return M5(t);case"tuic":return q5(t);case"wireguard-surge":return V5(t);case"hysteria2":return K5(t);case"ssh":return N5(t)}if(n["include-unsupported-proxy"]&&t.type==="wireguard")return U5(t);throw new Error(`Platform ${B5} does not support proxy type: ${t.type}`)}}}function x5(e){let t=new Pt(e);if(t.append(`${e.name}=${e.type},${e.server},${e.port}`),e.cipher||(e.cipher="none"),!["aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","cast5-cfb","des-cfb","idea-cfb","rc2-cfb","seed-cfb","salsa20","chacha20","chacha20-ietf","none","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(e.cipher))throw new Error(`cipher ${e.cipher} is not supported`);t.append(`,encrypt-method=${e.cipher}`),t.appendIfPresent(`,password="${e.password}"`,"password");let r=si[e["ip-version"]]||e["ip-version"];if(t.appendIfPresent(`,ip-version=${r}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),we(e,"plugin")){if(e.plugin==="obfs")t.append(`,obfs=${e["plugin-opts"].mode}`),t.appendIfPresent(`,obfs-host=${e["plugin-opts"].host}`,"plugin-opts.host"),t.appendIfPresent(`,obfs-uri=${e["plugin-opts"].path}`,"plugin-opts.path");else if(!["shadow-tls"].includes(e.plugin))throw new Error(`plugin ${e.plugin} is not supported`)}if(t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),we(e,"shadow-tls-password"))t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni"),t.appendIfPresent(`,udp-port=${e["udp-port"]}`,"udp-port");else if(["shadow-tls"].includes(e.plugin)&&e["plugin-opts"]){let n=e["plugin-opts"].password,u=e["plugin-opts"].host,a=e["plugin-opts"].version;if(n){if(t.append(`,shadow-tls-password=${n}`),u&&t.append(`,shadow-tls-sni=${u}`),a){if(a<2)throw new Error(`shadow-tls version ${a} is not supported`);t.append(`,shadow-tls-version=${a}`)}t.appendIfPresent(`,udp-port=${e["udp-port"]}`,"udp-port")}}return t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.toString()}function T5(e){let t=new Pt(e);t.append(`${e.name}=${e.type},${e.server},${e.port}`),t.appendIfPresent(`,password="${e.password}"`,"password");let r=si[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${r}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),Hg(t,e),t.appendIfPresent(`,tls=${e.tls}`,"tls"),t.appendIfPresent(`,server-cert-fingerprint-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),we(e,"shadow-tls-password")&&(t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.toString()}function O5(e,t){let r=new Pt(e);r.append(`${e.name}=${e.type},${e.server},${e.port}`),r.appendIfPresent(`,username=${e.uuid}`,"uuid");let n=si[e["ip-version"]]||e["ip-version"];return r.appendIfPresent(`,ip-version=${n}`,"ip-version"),r.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),Hg(r,e,t),we(e,"aead")?r.append(`,vmess-aead=${e.aead}`):r.append(`,vmess-aead=${e.alterId===0}`),r.appendIfPresent(`,server-cert-fingerprint-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),r.appendIfPresent(`,tls=${e.tls}`,"tls"),r.appendIfPresent(`,sni=${e.sni}`,"sni"),r.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),r.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),r.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),r.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),r.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),r.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),r.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),r.appendIfPresent(`,tos=${e.tos}`,"tos"),r.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),r.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),we(e,"shadow-tls-password")&&(r.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),r.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),r.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),r.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),r.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),r.toString()}function N5(e){let t=new Pt(e);t.append(`${e.name}=ssh,${e.server},${e.port}`),t.appendIfPresent(`,username="${e.username}"`,"username"),t.appendIfPresent(`,password="${e.password}"`,"password"),t.appendIfPresent(`,private-key=${e["keystore-private-key"]}`,"keystore-private-key"),t.appendIfPresent(`,idle-timeout=${e["idle-timeout"]}`,"idle-timeout"),t.appendIfPresent(`,server-fingerprint="${e["server-fingerprint"]}"`,"server-fingerprint");let r=si[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${r}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.toString()}function H5(e){if(e.headers&&Object.keys(e.headers).length>0)throw new Error("headers is unsupported");let t=new Pt(e),r=e.tls?"https":"http";t.append(`${e.name}=${r},${e.server},${e.port}`),t.appendIfPresent(`,username="${e.username}"`,"username"),t.appendIfPresent(`,password="${e.password}"`,"password");let n=si[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${n}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),t.appendIfPresent(`,server-cert-fingerprint-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),we(e,"shadow-tls-password")&&(t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.toString()}function L5(e){let t=new Pt(e);t.append(`${e.name}=direct`);let n=si[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${n}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.toString()}function j5(e){let t=new Pt(e),r=e.tls?"socks5-tls":"socks5";t.append(`${e.name}=${r},${e.server},${e.port}`),t.appendIfPresent(`,username="${e.username}"`,"username"),t.appendIfPresent(`,password="${e.password}"`,"password");let n=si[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${n}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),t.appendIfPresent(`,server-cert-fingerprint-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),e.tfo&&Gt.info("Option tfo is not supported by Surge, thus omitted"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),we(e,"shadow-tls-password")&&(t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.toString()}function M5(e){let t=new Pt(e);t.append(`${e.name}=${e.type},${e.server},${e.port}`),t.appendIfPresent(`,version=${e.version}`,"version"),t.appendIfPresent(`,psk=${e.psk}`,"psk");let r=si[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${r}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),t.appendIfPresent(`,obfs=${e["obfs-opts"]?.mode}`,"obfs-opts.mode"),t.appendIfPresent(`,obfs-host=${e["obfs-opts"]?.host}`,"obfs-opts.host"),t.appendIfPresent(`,obfs-uri=${e["obfs-opts"]?.path}`,"obfs-opts.path"),t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),we(e,"shadow-tls-password")&&(t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.appendIfPresent(`,reuse=${e.reuse}`,"reuse"),t.toString()}function q5(e){let t=new Pt(e),r=e.type;(!e.token||e.token.length===0)&&(r="tuic-v5"),t.append(`${e.name}=${r},${e.server},${e.port}`),t.appendIfPresent(`,uuid=${e.uuid}`,"uuid"),t.appendIfPresent(`,password="${e.password}"`,"password"),t.appendIfPresent(`,token=${e.token}`,"token"),t.appendIfPresent(`,alpn=${Array.isArray(e.alpn)?e.alpn[0]:e.alpn}`,"alpn"),we(e,"ports")&&t.append(`,port-hopping="${e.ports.replace(/,/g,";")}"`),t.appendIfPresent(`,port-hopping-interval=${e["hop-interval"]}`,"hop-interval");let n=si[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${n}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,server-cert-fingerprint-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),we(e,"tfo")?t.append(`,tfo=${e.tfo}`):we(e,"fast-open")&&t.append(`,tfo=${e["fast-open"]}`),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),we(e,"shadow-tls-password")&&(t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.appendIfPresent(`,ecn=${e.ecn}`,"ecn"),t.toString()}function U5(e){Array.isArray(e.peers)&&e.peers.length>0&&(e.server=e.peers[0].server,e.port=e.peers[0].port,e.ip=e.peers[0].ip,e.ipv6=e.peers[0].ipv6,e["public-key"]=e.peers[0]["public-key"],e["preshared-key"]=e.peers[0]["pre-shared-key"],e["allowed-ips"]=e.peers[0]["allowed-ips"],e.reserved=e.peers[0].reserved);let t=new Pt(e);t.append(`# > WireGuard Proxy ${e.name}
# ${e.name}=wireguard`),e["section-name"]=pr(e["section-name"],e.name),t.appendIfPresent(`,section-name=${e["section-name"]}`,"section-name"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert");let r=si[e["ip-version"]]||e["ip-version"];t.appendIfPresent(`,ip-version=${r}`,"ip-version"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),we(e,"shadow-tls-password")&&(t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.append(`
# > WireGuard Section ${e.name}
[WireGuard ${e["section-name"]}]
private-key = ${e["private-key"]}`),t.appendIfPresent(`
self-ip = ${e.ip}`,"ip"),t.appendIfPresent(`
self-ip-v6 = ${e.ipv6}`,"ipv6"),e.dns&&(Array.isArray(e.dns)&&(e.dns=e.dns.join(", ")),t.append(`
dns-server = ${e.dns}`)),t.appendIfPresent(`
mtu = ${e.mtu}`,"mtu"),r==="prefer-v6"&&t.append(`
prefer-ipv6 = true`);let n=Array.isArray(e["allowed-ips"])?e["allowed-ips"].join(","):e["allowed-ips"],u=Array.isArray(e.reserved)?e.reserved.join("/"):e.reserved,a=e["preshared-key"]??e["pre-shared-key"];a&&(a=`,preshared-key="${a}"`);let i={"public-key":e["public-key"],"allowed-ips":n?`"${n}"`:void 0,endpoint:`${e.server}:${e.port}`,keepalive:e["persistent-keepalive"]||e.keepalive,"client-id":u,"preshared-key":a};return t.append(`
peer = (${Object.keys(i).filter(c=>i[c]!=null).map(c=>`${c} = ${i[c]}`).join(", ")})`),t.toString()}function V5(e){let t=new Pt(e);t.append(`${e.name}=wireguard`),t.appendIfPresent(`,section-name=${e["section-name"]}`,"section-name"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert");let r=si[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${r}`,"ip-version"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),we(e,"shadow-tls-password")&&(t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.toString()}function K5(e){if(e.obfs||e["obfs-password"])throw new Error("obfs is unsupported");let t=new Pt(e);t.append(`${e.name}=hysteria2,${e.server},${e.port}`),t.appendIfPresent(`,password="${e.password}"`,"password"),we(e,"ports")&&t.append(`,port-hopping="${e.ports.replace(/,/g,";")}"`),t.appendIfPresent(`,port-hopping-interval=${e["hop-interval"]}`,"hop-interval");let r=si[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${r}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,server-cert-fingerprint-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),we(e,"tfo")?t.append(`,tfo=${e.tfo}`):we(e,"fast-open")&&t.append(`,tfo=${e["fast-open"]}`),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),we(e,"shadow-tls-password")&&(t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.appendIfPresent(`,download-bandwidth=${`${e.down}`.match(/\d+/)?.[0]||0}`,"down"),t.appendIfPresent(`,ecn=${e.ecn}`,"ecn"),t.toString()}function Hg(e,t,r){if(we(t,"network"))if(t.network==="ws"){if(e.append(",ws=true"),we(t,"ws-opts")&&(e.appendIfPresent(`,ws-path=${t["ws-opts"].path}`,"ws-opts.path"),we(t,"ws-opts.headers"))){let n=t["ws-opts"].headers,u=Object.keys(n).map(a=>{let i=n[a];return i=`"${i}"`,`${a}:${i}`}).join("|");$i(u)&&e.append(`,ws-headers=${u}`)}}else if(r&&["http"].includes(t.network))Gt.info(`Include Unsupported Proxy: nework ${t.network} -> tcp`);else throw new Error(`network ${t.network} is unsupported`)}var z5={dual:"dual","v4-only":"ipv4","v6-only":"ipv6","prefer-v4":"ipv4-prefer","prefer-v6":"ipv6-prefer"};function Vn(){return{type:"ALL",produce:(r,n,u={})=>{let a=r.filter(i=>u["include-unsupported-proxy"]?!0:i.type==="snell"&&i.version>=4||["juicity"].includes(i.type)||["ss"].includes(i.type)&&!["aes-128-ctr","aes-192-ctr","aes-256-ctr","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-ccm","aes-192-ccm","aes-256-ccm","aes-128-gcm-siv","aes-256-gcm-siv","chacha20-ietf","chacha20","xchacha20","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","chacha8-ietf-poly1305","xchacha8-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm","2022-blake3-chacha20-poly1305","lea-128-gcm","lea-192-gcm","lea-256-gcm","rabbit128-poly1305","aegis-128l","aegis-256","aez-384","deoxys-ii-256-128","rc4-md5","none"].includes(i.cipher)?!1:!(["anytls"].includes(i.type)&&i.network&&(!["tcp"].includes(i.network)||["tcp"].includes(i.network)&&i["reality-opts"]))).map(i=>{if(i.type==="vmess"?(we(i,"aead")&&(i.aead&&(i.alterId=0),delete i.aead),we(i,"sni")&&(i.servername=i.sni,delete i.sni),we(i,"cipher")&&!["auto","none","zero","aes-128-gcm","chacha20-poly1305"].includes(i.cipher)&&(i.cipher="auto")):i.type==="tuic"?(we(i,"alpn")?i.alpn=Array.isArray(i.alpn)?i.alpn:[i.alpn]:i.alpn=["h3"],we(i,"tfo")&&!we(i,"fast-open")&&(i["fast-open"]=i.tfo),(!i.token||i.token.length===0)&&!we(i,"version")&&(i.version=5)):i.type==="hysteria"?(we(i,"auth_str")&&!we(i,"auth-str")&&(i["auth-str"]=i.auth_str),we(i,"alpn")&&(i.alpn=Array.isArray(i.alpn)?i.alpn:[i.alpn]),we(i,"tfo")&&!we(i,"fast-open")&&(i["fast-open"]=i.tfo)):i.type==="wireguard"?(i.keepalive=i.keepalive??i["persistent-keepalive"],i["persistent-keepalive"]=i.keepalive,i["preshared-key"]=i["preshared-key"]??i["pre-shared-key"],i["pre-shared-key"]=i["preshared-key"]):i.type==="snell"&&i.version<3?delete i.udp:i.type==="vless"?we(i,"sni")&&(i.servername=i.sni,delete i.sni):i.type==="ss"&&we(i,"shadow-tls-password")&&!we(i,"plugin")&&(i.plugin="shadow-tls",i["plugin-opts"]={host:i["shadow-tls-sni"],password:i["shadow-tls-password"],version:i["shadow-tls-version"]},delete i["shadow-tls-password"],delete i["shadow-tls-sni"],delete i["shadow-tls-version"]),["vmess","vless"].includes(i.type)&&i.network==="http"){let c=i["http-opts"]?.path;we(i,"http-opts.path")&&!Array.isArray(c)&&(i["http-opts"].path=[c]);let h=i["http-opts"]?.headers?.Host;we(i,"http-opts.headers.Host")&&!Array.isArray(h)&&(i["http-opts"].headers.Host=[h])}if(["vmess","vless"].includes(i.type)&&i.network==="h2"){let c=i["h2-opts"]?.path;we(i,"h2-opts.path")&&Array.isArray(c)&&(i["h2-opts"].path=c[0]);let h=i["h2-opts"]?.headers?.host;we(i,"h2-opts.headers.Host")&&!Array.isArray(h)&&(i["h2-opts"].headers.host=[h])}if(["ws"].includes(i.network)){let c=i[`${i.network}-opts`]?.path;if(c){let h=/^(.*?)(?:\?ed=(\d+))?$/,[m,S="",E=""]=h.exec(c);i[`${i.network}-opts`].path=S,E!==""&&(i["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",i["ws-opts"]["max-early-data"]=parseInt(E,10))}else i[`${i.network}-opts`]=i[`${i.network}-opts`]||{},i[`${i.network}-opts`].path="/"}if(i["plugin-opts"]?.tls&&we(i,"skip-cert-verify")&&(i["plugin-opts"]["skip-cert-verify"]=i["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(i.type)&&delete i.tls,i["tls-fingerprint"]&&(i.fingerprint=i["tls-fingerprint"]),delete i["tls-fingerprint"],i["underlying-proxy"]&&(i["dialer-proxy"]=i["underlying-proxy"]),delete i["underlying-proxy"],we(i,"tls")&&typeof i.tls!="boolean"&&delete i.tls,delete i.subName,delete i.collectionName,delete i.id,delete i.resolved,delete i["no-resolve"],n!=="internal"||u["delete-underscore-fields"])for(let c in i)(i[c]==null||/^_/i.test(c))&&delete i[c];return["grpc"].includes(i.network)&&i[`${i.network}-opts`]&&(delete i[`${i.network}-opts`]["_grpc-type"],delete i[`${i.network}-opts`]["_grpc-authority"]),i["ip-version"]&&(i["ip-version"]=z5[i["ip-version"]]||i["ip-version"]),i});return n==="internal"?a:`proxies:
`+a.map(i=>"  - "+JSON.stringify(i)+`
`).join("")}}}var Lg="SurgeMac",G5=za();function qh(){return{produce:(t,r,n={})=>{switch(t.type){case"external":return jg(t);default:try{return G5.produce(t,r,n)}catch{if(n.useMihomoExternal)return Gt.log(`${t.name} is not supported on ${Lg}, try to use Mihomo(SurgeMac - External Proxy Program) instead`),W5(t,r,n);throw new Error("Surge for macOS \u53EF\u624B\u52A8\u6307\u5B9A\u94FE\u63A5\u53C2\u6570 target=SurgeMac \u6216\u5728 \u540C\u6B65\u914D\u7F6E \u4E2D\u6307\u5B9A SurgeMac \u6765\u542F\u7528 mihomo \u652F\u63F4 Surge \u672C\u8EAB\u4E0D\u652F\u6301\u7684\u534F\u8BAE")}}}}}function jg(e){let t=new Pt(e);if(!e.exec||!e["local-port"])throw new Error(`${e.type}: exec and local-port are required`);return t.append(`${e.name}=external,exec="${e.exec}",local-port=${e["local-port"]}`),Array.isArray(e.args)&&e.args.map(r=>{t.append(`,args="${r}"`)}),Array.isArray(e.addresses)&&e.addresses.map(r=>{t.append(`,addresses=${r}`)}),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),we(e,"tfo")?t.append(`,tfo=${e.tfo}`):we(e,"fast-open")&&t.append(`,tfo=${e["fast-open"]}`),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.toString()}function W5(e,t,r){let n=Vn().produce([e],"internal")?.[0];if(n){let u=r?.localPort||e._localPort||65535,a=!["ipv4","v4-only"].includes(e["ip-version"]),i={name:e.name,type:"external",exec:e._exec||"/usr/local/bin/mihomo","local-port":u,args:["-config",Wt.encode(JSON.stringify({"mixed-port":u,ipv6:a,mode:"global",dns:{enable:!0,ipv6:a,"default-nameserver":r?.defaultNameserver||e._defaultNameserver||["180.76.76.76","52.80.52.52","119.28.28.28","223.6.6.6"],nameserver:r?.nameserver||e._nameserver||["https://doh.pub/dns-query","https://dns.alidns.com/dns-query","https://doh-pure.onedns.net/dns-query"]},proxies:[{...n,name:"proxy"}],"proxy-groups":[{name:"GLOBAL",type:"select",proxies:["proxy"]}]}))],addresses:[]};return Y5(e.server)?i.addresses.push(e.server):Gt.log(`Platform ${Lg}, proxy type ${e.type}: addresses should be an IP address, but got ${e.server}`),r.localPort=u-1,jg(i)}}function Y5(e){return Un(e)||wn(e)}function Uh(){return{type:"ALL",produce:(r,n,u={})=>{let a=r.filter(i=>u["include-unsupported-proxy"]?!0:!["ss","ssr","vmess","vless","socks5","http","snell","trojan","wireguard"].includes(i.type)||i.type==="ss"&&!["aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","rc4-md5","chacha20-ietf","xchacha20","chacha20-ietf-poly1305","xchacha20-ietf-poly1305"].includes(i.cipher)||i.type==="snell"&&i.version>=4||i.type==="vless"&&(typeof i.flow<"u"||i["reality-opts"])?!1:i["underlying-proxy"]||i["dialer-proxy"]?(Gt.error(`Clash \u4E0D\u652F\u6301\u524D\u7F6E\u4EE3\u7406\u5B57\u6BB5. \u5DF2\u8FC7\u6EE4\u8282\u70B9 ${i.name}`),!1):!0).map(i=>{if(i.type==="vmess"?(we(i,"aead")&&(i.aead&&(i.alterId=0),delete i.aead),we(i,"sni")&&(i.servername=i.sni,delete i.sni),we(i,"cipher")&&!["auto","aes-128-gcm","chacha20-poly1305","none"].includes(i.cipher)&&(i.cipher="auto")):i.type==="wireguard"?(i.keepalive=i.keepalive??i["persistent-keepalive"],i["persistent-keepalive"]=i.keepalive,i["preshared-key"]=i["preshared-key"]??i["pre-shared-key"],i["pre-shared-key"]=i["preshared-key"]):i.type==="snell"&&i.version<3?delete i.udp:i.type==="vless"&&we(i,"sni")&&(i.servername=i.sni,delete i.sni),["vmess","vless"].includes(i.type)&&i.network==="http"){let c=i["http-opts"]?.path;we(i,"http-opts.path")&&!Array.isArray(c)&&(i["http-opts"].path=[c]);let h=i["http-opts"]?.headers?.Host;we(i,"http-opts.headers.Host")&&!Array.isArray(h)&&(i["http-opts"].headers.Host=[h])}if(["vmess","vless"].includes(i.type)&&i.network==="h2"){let c=i["h2-opts"]?.path;we(i,"h2-opts.path")&&Array.isArray(c)&&(i["h2-opts"].path=c[0]);let h=i["h2-opts"]?.headers?.host;we(i,"h2-opts.headers.Host")&&!Array.isArray(h)&&(i["h2-opts"].headers.host=[h])}if(["ws"].includes(i.network)){let c=i[`${i.network}-opts`]?.path;if(c){let h=/^(.*?)(?:\?ed=(\d+))?$/,[m,S="",E=""]=h.exec(c);i[`${i.network}-opts`].path=S,E!==""&&(i["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",i["ws-opts"]["max-early-data"]=parseInt(E,10))}else i[`${i.network}-opts`]=i[`${i.network}-opts`]||{},i[`${i.network}-opts`].path="/"}if(i["plugin-opts"]?.tls&&we(i,"skip-cert-verify")&&(i["plugin-opts"]["skip-cert-verify"]=i["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(i.type)&&delete i.tls,i["tls-fingerprint"]&&(i.fingerprint=i["tls-fingerprint"]),delete i["tls-fingerprint"],we(i,"tls")&&typeof i.tls!="boolean"&&delete i.tls,delete i.subName,delete i.collectionName,delete i.id,delete i.resolved,delete i["no-resolve"],n!=="internal")for(let c in i)(i[c]==null||/^_/i.test(c))&&delete i[c];return["grpc"].includes(i.network)&&i[`${i.network}-opts`]&&(delete i[`${i.network}-opts`]["_grpc-type"],delete i[`${i.network}-opts`]["_grpc-authority"]),i});return n==="internal"?a:`proxies:
`+a.map(i=>"  - "+JSON.stringify(i)+`
`).join("")}}}function Hc(){return{type:"ALL",produce:(r,n,u={})=>{let a=r.filter(i=>!["ss","ssr","vmess","socks5","http","snell","trojan","tuic","vless","wireguard","hysteria","hysteria2","ssh","juicity"].includes(i.type)||i.type==="ss"&&!["aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","rc4-md5","chacha20-ietf","xchacha20","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(i.cipher)||i.type==="snell"&&i.version>=4||i.type==="vless"&&i["reality-opts"]&&!["xtls-rprx-vision"].includes(i.flow)?!1:i["underlying-proxy"]||i["dialer-proxy"]?(Gt.error(`Stash \u6682\u4E0D\u652F\u6301\u524D\u7F6E\u4EE3\u7406\u5B57\u6BB5. \u5DF2\u8FC7\u6EE4\u8282\u70B9 ${i.name}. \u8BF7\u4F7F\u7528 \u4EE3\u7406\u7684\u8F6C\u53D1\u94FE https://stash.wiki/proxy-protocols/proxy-groups#relay`),!1):!0).map(i=>{if(i.type==="vmess"?(we(i,"aead")&&(i.aead&&(i.alterId=0),delete i.aead),we(i,"sni")&&(i.servername=i.sni,delete i.sni),we(i,"cipher")&&!["auto","aes-128-gcm","chacha20-poly1305","none"].includes(i.cipher)&&(i.cipher="auto")):i.type==="tuic"?(we(i,"alpn")?i.alpn=Array.isArray(i.alpn)?i.alpn:[i.alpn]:i.alpn=["h3"],we(i,"tfo")&&!we(i,"fast-open")&&(i["fast-open"]=i.tfo,delete i.tfo),(!i.token||i.token.length===0)&&!we(i,"version")&&(i.version=5)):i.type==="hysteria"?(we(i,"auth_str")&&!we(i,"auth-str")&&(i["auth-str"]=i.auth_str),we(i,"alpn")&&(i.alpn=Array.isArray(i.alpn)?i.alpn:[i.alpn]),we(i,"tfo")&&!we(i,"fast-open")&&(i["fast-open"]=i.tfo,delete i.tfo),we(i,"down")&&!we(i,"down-speed")&&(i["down-speed"]=i.down,delete i.down),we(i,"up")&&!we(i,"up-speed")&&(i["up-speed"]=i.up,delete i.up),we(i,"down-speed")&&(i["down-speed"]=`${i["down-speed"]}`.match(/\d+/)?.[0]||0),we(i,"up-speed")&&(i["up-speed"]=`${i["up-speed"]}`.match(/\d+/)?.[0]||0)):i.type==="hysteria2"?(we(i,"password")&&!we(i,"auth")&&(i.auth=i.password,delete i.password),we(i,"tfo")&&!we(i,"fast-open")&&(i["fast-open"]=i.tfo,delete i.tfo),we(i,"down")&&!we(i,"down-speed")&&(i["down-speed"]=i.down,delete i.down),we(i,"up")&&!we(i,"up-speed")&&(i["up-speed"]=i.up,delete i.up),we(i,"down-speed")&&(i["down-speed"]=`${i["down-speed"]}`.match(/\d+/)?.[0]||0),we(i,"up-speed")&&(i["up-speed"]=`${i["up-speed"]}`.match(/\d+/)?.[0]||0)):i.type==="wireguard"?(i.keepalive=i.keepalive??i["persistent-keepalive"],i["persistent-keepalive"]=i.keepalive,i["preshared-key"]=i["preshared-key"]??i["pre-shared-key"],i["pre-shared-key"]=i["preshared-key"]):i.type==="snell"&&i.version<3?delete i.udp:i.type==="vless"&&we(i,"sni")&&(i.servername=i.sni,delete i.sni),["vmess","vless"].includes(i.type)&&i.network==="http"){let c=i["http-opts"]?.path;we(i,"http-opts.path")&&!Array.isArray(c)&&(i["http-opts"].path=[c]);let h=i["http-opts"]?.headers?.Host;we(i,"http-opts.headers.Host")&&!Array.isArray(h)&&(i["http-opts"].headers.Host=[h])}if(["vmess","vless"].includes(i.type)&&i.network==="h2"){let c=i["h2-opts"]?.path;we(i,"h2-opts.path")&&Array.isArray(c)&&(i["h2-opts"].path=c[0]);let h=i["h2-opts"]?.headers?.host;we(i,"h2-opts.headers.Host")&&!Array.isArray(h)&&(i["h2-opts"].headers.host=[h])}if(["ws"].includes(i.network)){let c=i[`${i.network}-opts`]?.path;if(c){let h=/^(.*?)(?:\?ed=(\d+))?$/,[m,S="",E=""]=h.exec(c);i[`${i.network}-opts`].path=S,E!==""&&(i["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",i["ws-opts"]["max-early-data"]=parseInt(E,10))}else i[`${i.network}-opts`]=i[`${i.network}-opts`]||{},i[`${i.network}-opts`].path="/"}if(i["plugin-opts"]?.tls&&we(i,"skip-cert-verify")&&(i["plugin-opts"]["skip-cert-verify"]=i["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(i.type)&&delete i.tls,i["tls-fingerprint"]&&(i["server-cert-fingerprint"]=i["tls-fingerprint"]),delete i["tls-fingerprint"],we(i,"tls")&&typeof i.tls!="boolean"&&delete i.tls,i["test-url"]&&(i["benchmark-url"]=i["test-url"],delete i["test-url"]),i["test-timeout"]&&(i["benchmark-timeout"]=i["test-timeout"],delete i["test-timeout"]),delete i.subName,delete i.collectionName,delete i.id,delete i.resolved,delete i["no-resolve"],n!=="internal")for(let c in i)(i[c]==null||/^_/i.test(c))&&delete i[c];return["grpc"].includes(i.network)&&i[`${i.network}-opts`]&&(delete i[`${i.network}-opts`]["_grpc-type"],delete i[`${i.network}-opts`]["_grpc-authority"]),i});return n==="internal"?a:`proxies:
`+a.map(i=>"  - "+JSON.stringify(i)+`
`).join("")}}}var J5="Loon",Qi={dual:"dual",ipv4:"v4-only",ipv6:"v6-only","ipv4-prefer":"prefer-v4","ipv6-prefer":"prefer-v6"};function Vh(){return{produce:(t,r,n={})=>{switch(t.type){case"ss":return X5(t);case"ssr":return Z5(t);case"trojan":return Q5(t);case"vmess":return e4(t,n["include-unsupported-proxy"]);case"vless":return t4(t,n["include-unsupported-proxy"]);case"http":return r4(t);case"socks5":return n4(t);case"wireguard":return i4(t);case"hysteria2":return s4(t)}throw new Error(`Platform ${J5} does not support proxy type: ${t.type}`)}}}function X5(e){let t=new Pt(e);if(!["rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","salsa20","chacha20","chacha20-ietf","aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(e.cipher))throw new Error(`cipher ${e.cipher} is not supported`);if(t.append(`${e.name}=shadowsocks,${e.server},${e.port},${e.cipher},"${e.password}"`),we(e,"plugin")){if(e.plugin==="obfs")t.append(`,obfs-name=${e["plugin-opts"].mode}`),t.appendIfPresent(`,obfs-host=${e["plugin-opts"].host}`,"plugin-opts.host"),t.appendIfPresent(`,obfs-uri=${e["plugin-opts"].path}`,"plugin-opts.path");else if(!["shadow-tls"].includes(e.plugin))throw new Error(`plugin ${e.plugin} is not supported`)}if(we(e,"shadow-tls-password"))t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni"),t.appendIfPresent(`,udp-port=${e["udp-port"]}`,"udp-port");else if(["shadow-tls"].includes(e.plugin)&&e["plugin-opts"]){let n=e["plugin-opts"].password,u=e["plugin-opts"].host,a=e["plugin-opts"].version;if(n){if(t.append(`,shadow-tls-password=${n}`),u&&t.append(`,shadow-tls-sni=${u}`),a){if(a<2)throw new Error(`shadow-tls version ${a} is not supported`);t.append(`,shadow-tls-version=${a}`)}t.appendIfPresent(`,udp-port=${e["udp-port"]}`,"udp-port")}}t.appendIfPresent(`,fast-open=${e.tfo}`,"tfo"),e["block-quic"]==="on"?t.append(",block-quic=true"):e["block-quic"]==="off"&&t.append(",block-quic=false"),e.udp&&t.append(",udp=true");let r=Qi[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-mode=${r}`,"ip-version"),t.toString()}function Z5(e){let t=new Pt(e);if(t.append(`${e.name}=shadowsocksr,${e.server},${e.port},${e.cipher},"${e.password}"`),t.append(`,protocol=${e.protocol}`),t.appendIfPresent(`,protocol-param=${e["protocol-param"]}`,"protocol-param"),t.appendIfPresent(`,obfs=${e.obfs}`,"obfs"),t.appendIfPresent(`,obfs-param=${e["obfs-param"]}`,"obfs-param"),we(e,"shadow-tls-password"))t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni"),t.appendIfPresent(`,udp-port=${e["udp-port"]}`,"udp-port");else if(["shadow-tls"].includes(e.plugin)&&e["plugin-opts"]){let n=e["plugin-opts"].password,u=e["plugin-opts"].host,a=e["plugin-opts"].version;if(n){if(t.append(`,shadow-tls-password=${n}`),u&&t.append(`,shadow-tls-sni=${u}`),a){if(a<2)throw new Error(`shadow-tls version ${a} is not supported`);t.append(`,shadow-tls-version=${a}`)}t.appendIfPresent(`,udp-port=${e["udp-port"]}`,"udp-port")}}t.appendIfPresent(`,fast-open=${e.tfo}`,"tfo"),e["block-quic"]==="on"?t.append(",block-quic=true"):e["block-quic"]==="off"&&t.append(",block-quic=false"),e.udp&&t.append(",udp=true");let r=Qi[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-mode=${r}`,"ip-version"),t.toString()}function Q5(e){let t=new Pt(e);if(t.append(`${e.name}=trojan,${e.server},${e.port},"${e.password}"`),e.network==="tcp"&&delete e.network,we(e,"network"))if(e.network==="ws")t.append(",transport=ws"),t.appendIfPresent(`,path=${e["ws-opts"]?.path}`,"ws-opts.path"),t.appendIfPresent(`,host=${e["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else throw new Error(`network ${e.network} is unsupported`);t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,tls-name=${e.sni}`,"sni"),t.appendIfPresent(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),t.appendIfPresent(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),t.appendIfPresent(`,fast-open=${e.tfo}`,"tfo"),e["block-quic"]==="on"?t.append(",block-quic=true"):e["block-quic"]==="off"&&t.append(",block-quic=false"),e.udp&&t.append(",udp=true");let r=Qi[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-mode=${r}`,"ip-version"),t.toString()}function e4(e){let t=!!e["reality-opts"],r=new Pt(e);if(r.append(`${e.name}=vmess,${e.server},${e.port},${e.cipher},"${e.uuid}"`),e.network==="tcp"&&delete e.network,we(e,"network"))if(e.network==="ws")r.append(",transport=ws"),r.appendIfPresent(`,path=${e["ws-opts"]?.path}`,"ws-opts.path"),r.appendIfPresent(`,host=${e["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else if(e.network==="http"){r.append(",transport=http");let u=e["http-opts"]?.path,a=e["http-opts"]?.headers?.Host;r.appendIfPresent(`,path=${Array.isArray(u)?u[0]:u}`,"http-opts.path"),r.appendIfPresent(`,host=${Array.isArray(a)?a[0]:a}`,"http-opts.headers.Host")}else throw new Error(`network ${e.network} is unsupported`);else r.append(",transport=tcp");r.appendIfPresent(`,over-tls=${e.tls}`,"tls"),r.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t?(r.appendIfPresent(`,sni=${e.sni}`,"sni"),r.appendIfPresent(`,public-key="${e["reality-opts"]["public-key"]}"`,"reality-opts.public-key"),r.appendIfPresent(`,short-id=${e["reality-opts"]["short-id"]}`,"reality-opts.short-id")):(r.appendIfPresent(`,tls-name=${e.sni}`,"sni"),r.appendIfPresent(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),r.appendIfPresent(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256")),we(e,"aead")?r.append(`,alterId=${e.aead?0:1}`):r.append(`,alterId=${e.alterId}`),r.appendIfPresent(`,fast-open=${e.tfo}`,"tfo"),e["block-quic"]==="on"?r.append(",block-quic=true"):e["block-quic"]==="off"&&r.append(",block-quic=false"),e.udp&&r.append(",udp=true");let n=Qi[e["ip-version"]]||e["ip-version"];return r.appendIfPresent(`,ip-mode=${n}`,"ip-version"),r.toString()}function t4(e){let t=!1,r=!!e["reality-opts"];if(typeof e.flow<"u")if(["xtls-rprx-vision"].includes(e.flow))t=!0;else throw new Error(`VLESS flow(${e.flow}) is not supported`);let n=new Pt(e);if(n.append(`${e.name}=vless,${e.server},${e.port},"${e.uuid}"`),e.network==="tcp"&&delete e.network,we(e,"network"))if(e.network==="ws")n.append(",transport=ws"),n.appendIfPresent(`,path=${e["ws-opts"]?.path}`,"ws-opts.path"),n.appendIfPresent(`,host=${e["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else if(e.network==="http"){n.append(",transport=http");let a=e["http-opts"]?.path,i=e["http-opts"]?.headers?.Host;n.appendIfPresent(`,path=${Array.isArray(a)?a[0]:a}`,"http-opts.path"),n.appendIfPresent(`,host=${Array.isArray(i)?i[0]:i}`,"http-opts.headers.Host")}else throw new Error(`network ${e.network} is unsupported`);else n.append(",transport=tcp");n.appendIfPresent(`,over-tls=${e.tls}`,"tls"),n.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t&&n.appendIfPresent(`,flow=${e.flow}`,"flow"),r?(n.appendIfPresent(`,sni=${e.sni}`,"sni"),n.appendIfPresent(`,public-key="${e["reality-opts"]["public-key"]}"`,"reality-opts.public-key"),n.appendIfPresent(`,short-id=${e["reality-opts"]["short-id"]}`,"reality-opts.short-id")):(n.appendIfPresent(`,tls-name=${e.sni}`,"sni"),n.appendIfPresent(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),n.appendIfPresent(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256")),n.appendIfPresent(`,fast-open=${e.tfo}`,"tfo"),e["block-quic"]==="on"?n.append(",block-quic=true"):e["block-quic"]==="off"&&n.append(",block-quic=false"),e.udp&&n.append(",udp=true");let u=Qi[e["ip-version"]]||e["ip-version"];return n.appendIfPresent(`,ip-mode=${u}`,"ip-version"),n.toString()}function r4(e){let t=new Pt(e),r=e.tls?"https":"http";t.append(`${e.name}=${r},${e.server},${e.port}`),t.appendIfPresent(`,${e.username}`,"username"),t.appendIfPresent(`,"${e.password}"`,"password"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),e["block-quic"]==="on"?t.append(",block-quic=true"):e["block-quic"]==="off"&&t.append(",block-quic=false");let n=Qi[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-mode=${n}`,"ip-version"),t.toString()}function n4(e){let t=new Pt(e);t.append(`${e.name}=socks5,${e.server},${e.port}`),t.appendIfPresent(`,${e.username}`,"username"),t.appendIfPresent(`,"${e.password}"`,"password"),t.appendIfPresent(`,over-tls=${e.tls}`,"tls"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),e["block-quic"]==="on"?t.append(",block-quic=true"):e["block-quic"]==="off"&&t.append(",block-quic=false"),e.udp&&t.append(",udp=true");let r=Qi[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-mode=${r}`,"ip-version"),t.toString()}function i4(e){Array.isArray(e.peers)&&e.peers.length>0&&(e.server=e.peers[0].server,e.port=e.peers[0].port,e.ip=e.peers[0].ip,e.ipv6=e.peers[0].ipv6,e["public-key"]=e.peers[0]["public-key"],e["preshared-key"]=e.peers[0]["pre-shared-key"],e["allowed-ips"]=e.peers[0]["allowed-ips"],e.reserved=e.peers[0].reserved);let t=new Pt(e);if(t.append(`${e.name}=wireguard`),t.appendIfPresent(`,interface-ip=${e.ip}`,"ip"),t.appendIfPresent(`,interface-ipv6=${e.ipv6}`,"ipv6"),t.appendIfPresent(`,private-key="${e["private-key"]}"`,"private-key"),t.appendIfPresent(`,mtu=${e.mtu}`,"mtu"),e.dns&&Array.isArray(e.dns)){e.dnsv6=e.dns.find(c=>wn(c));let i=e.dns.find(c=>Un(c));i||(i=e.dns.find(c=>!Un(c)&&!wn(c))),e.dns=i}t.appendIfPresent(`,dns=${e.dns}`,"dns"),t.appendIfPresent(`,dnsv6=${e.dnsv6}`,"dnsv6"),t.appendIfPresent(`,keepalive=${e["persistent-keepalive"]}`,"persistent-keepalive"),t.appendIfPresent(`,keepalive=${e.keepalive}`,"keepalive");let r=Array.isArray(e["allowed-ips"])?e["allowed-ips"].join(","):e["allowed-ips"],n=Array.isArray(e.reserved)?e.reserved.join(","):e.reserved;n&&(n=`,reserved=[${n}]`);let u=e["preshared-key"]??e["pre-shared-key"];u&&(u=`,preshared-key="${u}"`),t.append(`,peers=[{public-key="${e["public-key"]}",allowed-ips="${r??"0.0.0.0/0,::/0"}",endpoint=${e.server}:${e.port}${n??""}${u??""}}]`);let a=Qi[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-mode=${a}`,"ip-version"),e["block-quic"]==="on"?t.append(",block-quic=true"):e["block-quic"]==="off"&&t.append(",block-quic=false"),t.toString()}function s4(e){if(e["obfs-password"]&&e.obfs!="salamander")throw new Error("only salamander obfs is supported");let t=new Pt(e);t.append(`${e.name}=Hysteria2,${e.server},${e.port}`),t.appendIfPresent(`,"${e.password}"`,"password"),t.appendIfPresent(`,tls-name=${e.sni}`,"sni"),t.appendIfPresent(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),t.appendIfPresent(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),e["obfs-password"]&&e.obfs=="salamander"&&t.append(`,salamander-password=${e["obfs-password"]}`),t.appendIfPresent(`,fast-open=${e.tfo}`,"tfo"),e["block-quic"]==="on"?t.append(",block-quic=true"):e["block-quic"]==="off"&&t.append(",block-quic=false"),e.udp&&t.append(",udp=true"),t.appendIfPresent(`,download-bandwidth=${`${e.down}`.match(/\d+/)?.[0]||0}`,"down"),t.appendIfPresent(`,ecn=${e.ecn}`,"ecn");let r=Qi[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-mode=${r}`,"ip-version"),t.toString()}function Mg(e){let t="none",r=e["reality-opts"],n="",u="",a="";if(r){t="reality";let C=e["reality-opts"]?.["public-key"];C&&(u=`&pbk=${encodeURIComponent(C)}`);let x=e["reality-opts"]?.["short-id"];x&&(n=`&sid=${encodeURIComponent(x)}`);let N=e["reality-opts"]?.["_spider-x"];N&&(a=`&spx=${encodeURIComponent(N)}`)}else e.tls&&(t="tls");let i="";e.alpn&&(i=`&alpn=${encodeURIComponent(Array.isArray(e.alpn)?e.alpn:e.alpn.join(","))}`);let c="";e["skip-cert-verify"]&&(c="&allowInsecure=1");let h="";e.sni&&(h=`&sni=${encodeURIComponent(e.sni)}`);let m="";e["client-fingerprint"]&&(m=`&fp=${encodeURIComponent(e["client-fingerprint"])}`);let S="";e.flow&&(S=`&flow=${encodeURIComponent(e.flow)}`);let E="";e._extra&&(E=`&extra=${encodeURIComponent(e._extra)}`);let v="";e._mode&&(v=`&mode=${encodeURIComponent(e._mode)}`);let g=e.network;e.network==="ws"&&e["ws-opts"]?.["v2ray-http-upgrade"]&&(g="httpupgrade");let b=`&type=${encodeURIComponent(g)}`;if(["grpc"].includes(e.network)){b+=`&mode=${encodeURIComponent(e[`${e.network}-opts`]?.["_grpc-type"]||"gun")}`;let C=e[`${e.network}-opts`]?.["_grpc-authority"];C&&(b+=`&authority=${encodeURIComponent(C)}`)}let w=e[`${e.network}-opts`]?.[`${e.network}-service-name`],_=e[`${e.network}-opts`]?.path,A=e[`${e.network}-opts`]?.headers?.Host;return _&&(b+=`&path=${encodeURIComponent(Array.isArray(_)?_[0]:_)}`),A&&(b+=`&host=${encodeURIComponent(Array.isArray(A)?A[0]:A)}`),w&&(b+=`&serviceName=${encodeURIComponent(w)}`),e.network==="kcp"&&(e.seed&&(b+=`&seed=${encodeURIComponent(e.seed)}`),e.headerType&&(b+=`&headerType=${encodeURIComponent(e.headerType)}`)),`vless://${e.uuid}@${e.server}:${e.port}?security=${encodeURIComponent(t)}${b}${i}${c}${h}${m}${S}${n}${a}${u}${v}${E}#${encodeURIComponent(e.name)}`}function Ga(){return{type:"SINGLE",produce:r=>{let n="";delete r.subName,delete r.collectionName,delete r.id,delete r.resolved,delete r["no-resolve"];for(let u in r)r[u]==null&&delete r[u];switch(["trojan","tuic","hysteria","hysteria2","juicity"].includes(r.type)&&delete r.tls,!["vmess"].includes(r.type)&&r.server&&wn(r.server)&&(r.server=`[${r.server}]`),r.type){case"socks5":n=`socks://${encodeURIComponent(Wt.encode(`${r.username??""}:${r.password??""}`))}@${r.server}:${r.port}#${r.name}`;break;case"ss":let u=`${r.cipher}:${r.password}`;if(n=`ss://${r.cipher?.startsWith("2022-blake3-")?`${encodeURIComponent(r.cipher)}:${encodeURIComponent(r.password)}`:Wt.encode(u)}@${r.server}:${r.port}${r.plugin?"/":""}`,r.plugin){n+="?plugin=";let R=r["plugin-opts"];switch(r.plugin){case"obfs":n+=encodeURIComponent(`simple-obfs;obfs=${R.mode}${R.host?";obfs-host="+R.host:""}`);break;case"v2ray-plugin":n+=encodeURIComponent(`v2ray-plugin;obfs=${R.mode}${R.host?";obfs-host"+R.host:""}${R.tls?";tls":""}`);break;case"shadow-tls":n+=encodeURIComponent(`shadow-tls;host=${R.host};password=${R.password};version=${R.version}`);break;default:throw new Error(`Unsupported plugin option: ${r.plugin}`)}}r["udp-over-tcp"]&&(n=`${n}${r.plugin?"&":"?"}uot=1`),r.tfo&&(n=`${n}${r.plugin||r["udp-over-tcp"]?"&":"?"}tfo=1`),n+=`#${encodeURIComponent(r.name)}`;break;case"ssr":n=`${r.server}:${r.port}:${r.protocol}:${r.cipher}:${r.obfs}:${Wt.encode(r.password)}/`,n+=`?remarks=${Wt.encode(r.name)}${r["obfs-param"]?"&obfsparam="+Wt.encode(r["obfs-param"]):""}${r["protocol-param"]?"&protocolparam="+Wt.encode(r["protocol-param"]):""}`,n="ssr://"+Wt.encode(n);break;case"vmess":let a="",i=r.network||"tcp";if(r.network==="http"?(i="tcp",a="http"):r.network==="ws"&&r["ws-opts"]?.["v2ray-http-upgrade"]&&(i="httpupgrade"),n={v:"2",ps:r.name,add:r.server,port:`${r.port}`,id:r.uuid,aid:`${r.alterId||0}`,scy:r.cipher,net:i,type:a,tls:r.tls?"tls":"",alpn:Array.isArray(r.alpn)?r.alpn.join(","):r.alpn,fp:r["client-fingerprint"]},r.tls&&r.sni&&(n.sni=r.sni),r.network){let R=r[`${r.network}-opts`]?.path,q=r[`${r.network}-opts`]?.headers?.Host;["grpc"].includes(r.network)?(n.path=r[`${r.network}-opts`]?.["grpc-service-name"],n.type=r[`${r.network}-opts`]?.["_grpc-type"]||"gun",n.host=r[`${r.network}-opts`]?.["_grpc-authority"]):["kcp","quic"].includes(r.network)?(n.type=r[`${r.network}-opts`]?.[`_${r.network}-type`]||"none",n.host=r[`${r.network}-opts`]?.[`_${r.network}-host`],n.path=r[`${r.network}-opts`]?.[`_${r.network}-path`]):(R&&(n.path=Array.isArray(R)?R[0]:R),q&&(n.host=Array.isArray(q)?q[0]:q))}n="vmess://"+Wt.encode(JSON.stringify(n));break;case"vless":n=Mg(r);break;case"trojan":let c="";if(r.network){let R=r.network;if(r.network==="ws"&&r["ws-opts"]?.["v2ray-http-upgrade"]&&(R="httpupgrade"),c=`&type=${encodeURIComponent(R)}`,["grpc"].includes(r.network)){let V=r[`${r.network}-opts`]?.[`${r.network}-service-name`],z=r[`${r.network}-opts`]?.["_grpc-authority"];V&&(c+=`&serviceName=${encodeURIComponent(V)}`),z&&(c+=`&authority=${encodeURIComponent(z)}`),c+=`&mode=${encodeURIComponent(r[`${r.network}-opts`]?.["_grpc-type"]||"gun")}`}let q=r[`${r.network}-opts`]?.path,Q=r[`${r.network}-opts`]?.headers?.Host;q&&(c+=`&path=${encodeURIComponent(Array.isArray(q)?q[0]:q)}`),Q&&(c+=`&host=${encodeURIComponent(Array.isArray(Q)?Q[0]:Q)}`)}let h="";r["client-fingerprint"]&&(h=`&fp=${encodeURIComponent(r["client-fingerprint"])}`);let m="";r.alpn&&(m=`&alpn=${encodeURIComponent(Array.isArray(r.alpn)?r.alpn:r.alpn.join(","))}`);let S=r["reality-opts"],E="",v="",g="",b="",w="",_="";if(S){b="&security=reality";let R=r["reality-opts"]?.["public-key"];R&&(v=`&pbk=${encodeURIComponent(R)}`);let q=r["reality-opts"]?.["short-id"];q&&(E=`&sid=${encodeURIComponent(q)}`);let Q=r["reality-opts"]?.["_spider-x"];Q&&(g=`&spx=${encodeURIComponent(Q)}`),r._extra&&(_=`&extra=${encodeURIComponent(r._extra)}`),r._mode&&(w=`&mode=${encodeURIComponent(r._mode)}`)}n=`trojan://${r.password}@${r.server}:${r.port}?sni=${encodeURIComponent(r.sni||r.server)}${r["skip-cert-verify"]?"&allowInsecure=1":""}${c}${m}${h}${b}${E}${v}${g}${w}${_}#${encodeURIComponent(r.name)}`;break;case"hysteria2":let A=[];r["hop-interval"]&&A.push(`hop-interval=${r["hop-interval"]}`),r.keepalive&&A.push(`keepalive=${r.keepalive}`),r["skip-cert-verify"]&&A.push("insecure=1"),r.obfs&&(A.push(`obfs=${encodeURIComponent(r.obfs)}`),r["obfs-password"]&&A.push(`obfs-password=${encodeURIComponent(r["obfs-password"])}`)),r.sni&&A.push(`sni=${encodeURIComponent(r.sni)}`),r.ports&&A.push(`mport=${r.ports}`),r["tls-fingerprint"]&&A.push(`pinSHA256=${encodeURIComponent(r["tls-fingerprint"])}`),r.tfo&&A.push("fastopen=1"),n=`hysteria2://${encodeURIComponent(r.password)}@${r.server}:${r.port}?${A.join("&")}#${encodeURIComponent(r.name)}`;break;case"hysteria":let C=[];Object.keys(r).forEach(R=>{if(!["name","type","server","port"].includes(R)){let q=R.replace(/-/,"_");["alpn"].includes(R)?r[R]&&C.push(`${q}=${encodeURIComponent(Array.isArray(r[R])?r[R][0]:r[R])}`):["skip-cert-verify"].includes(R)?r[R]&&C.push("insecure=1"):["tfo","fast-open"].includes(R)?r[R]&&!C.includes("fastopen=1")&&C.push("fastopen=1"):["ports"].includes(R)?C.push(`mport=${r[R]}`):["auth-str"].includes(R)?C.push(`auth=${r[R]}`):["up"].includes(R)?C.push(`upmbps=${r[R]}`):["down"].includes(R)?C.push(`downmbps=${r[R]}`):["_obfs"].includes(R)?C.push(`obfs=${r[R]}`):["obfs"].includes(R)?C.push(`obfsParam=${r[R]}`):["sni"].includes(R)?C.push(`peer=${r[R]}`):r[R]&&!/^_/i.test(R)&&C.push(`${q}=${encodeURIComponent(r[R])}`)}}),n=`hysteria://${r.server}:${r.port}?${C.join("&")}#${encodeURIComponent(r.name)}`;break;case"tuic":if(!r.token||r.token.length===0){let R=[];Object.keys(r).forEach(q=>{if(!["name","type","uuid","password","server","port","tls"].includes(q)){let Q=q.replace(/-/,"_");["alpn"].includes(q)?r[q]&&R.push(`${Q}=${encodeURIComponent(Array.isArray(r[q])?r[q][0]:r[q])}`):["skip-cert-verify"].includes(q)?r[q]&&R.push("allow_insecure=1"):["tfo","fast-open"].includes(q)?r[q]&&!R.includes("fast_open=1")&&R.push("fast_open=1"):["disable-sni","reduce-rtt"].includes(q)&&r[q]?R.push(`${Q.replace(/-/g,"_")}=1`):["congestion-controller"].includes(q)?R.push(`congestion_control=${r[q]}`):r[q]&&!/^_/i.test(q)&&R.push(`${Q.replace(/-/g,"_")}=${encodeURIComponent(r[q])}`)}}),n=`tuic://${encodeURIComponent(r.uuid)}:${encodeURIComponent(r.password)}@${r.server}:${r.port}?${R.join("&")}#${encodeURIComponent(r.name)}`}break;case"anytls":n=Mg({...r,uuid:r.password,network:r.network||"tcp"}).replace("vless","anytls");let x=[];Object.keys(r).forEach(R=>{if(!["name","type","password","server","port","tls"].includes(R)){let q=R.replace(/-/,"_");["alpn"].includes(R)?r[R]&&x.push(`${q}=${encodeURIComponent(Array.isArray(r[R])?r[R][0]:r[R])}`):["skip-cert-verify"].includes(R)?r[R]&&x.push("insecure=1"):["udp"].includes(R)?r[R]&&x.push("udp=1"):r[R]&&!/^_|client-fingerprint/i.test(R)&&["number","string","boolean"].includes(typeof r[R])&&x.push(`${q.replace(/-/g,"_")}=${encodeURIComponent(r[R])}`)}});let N=n.split("?"),H=N[0],ne={};N.length>1&&N[1].split("#")[0].split("&").forEach(Q=>{let[V,z]=Q.split("=");V&&(ne[V]=z)}),x.forEach(R=>{let[q,Q]=R.split("=");q&&(ne[q]=Q)});let pe=Object.keys(ne).map(R=>`${R}=${ne[R]}`).join("&"),P=n.match(/#(.*)$/),$=P?`#${P[1]}`:"";n=`${H}?${pe}${$}`;break;case"wireguard":let j=[];Object.keys(r).forEach(R=>{["name","type","server","port","ip","ipv6","private-key"].includes(R)||(["public-key"].includes(R)?j.push(`publickey=${r[R]}`):["udp"].includes(R)?r[R]&&j.push(`${R}=1`):r[R]&&!/^_/i.test(R)&&j.push(`${R}=${encodeURIComponent(r[R])}`))}),r.ip&&r.ipv6?j.push(`address=${r.ip}/32,${r.ipv6}/128`):r.ip?j.push(`address=${r.ip}/32`):r.ipv6&&j.push(`address=${r.ipv6}/128`),n=`wireguard://${encodeURIComponent(r["private-key"])}@${r.server}:${r.port}/?${j.join("&")}#${encodeURIComponent(r.name)}`;break}return n}}}var a4=Ga();function Uu(){return{type:"ALL",produce:r=>{let n=[];return r.map(u=>{try{n.push(a4.produce(u))}catch(a){Gt.error(`Cannot produce proxy: ${JSON.stringify(u,null,2)}
Reason: ${a}`)}}),Wt.encode(n.join(`
`))}}}var u4="QX";function Vu(){return{produce:(t,r,n={})=>{switch(t.type){case"ss":return o4(t);case"ssr":return c4(t);case"trojan":return l4(t);case"vmess":return f4(t);case"http":return p4(t);case"socks5":return d4(t);case"vless":return h4(t)}throw new Error(`Platform ${u4} does not support proxy type: ${t.type}`)}}}function o4(e){let t=new Pt(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);if(e.cipher||(e.cipher="none"),!["none","rc4-md5","rc4-md5-6","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","cast5-cfb","des-cfb","rc2-cfb","salsa20","chacha20","chacha20-ietf","aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(e.cipher))throw new Error(`cipher ${e.cipher} is not supported`);if(r(`shadowsocks=${e.server}:${e.port}`),r(`,method=${e.cipher}`),r(`,password=${e.password}`),Kn(e)&&(e.tls=!0),we(e,"plugin")){if(e.plugin==="obfs"){let u=e["plugin-opts"];r(`,obfs=${u.mode}`)}else if(e.plugin==="v2ray-plugin"&&e["plugin-opts"].mode==="websocket")e["plugin-opts"].tls?r(",obfs=wss"):r(",obfs=ws");else throw new Error("plugin is not supported");n(`,obfs-host=${e["plugin-opts"].host}`,"plugin-opts.host"),n(`,obfs-uri=${e["plugin-opts"].path}`,"plugin-opts.path")}return Kn(e)&&(n(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),n(`,tls-alpn=${e["tls-alpn"]}`,"tls-alpn"),n(`,tls-no-session-ticket=${e["tls-no-session-ticket"]}`,"tls-no-session-ticket"),n(`,tls-no-session-reuse=${e["tls-no-session-reuse"]}`,"tls-no-session-reuse"),n(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),n(`,tls-verification=${!e["skip-cert-verify"]}`,"skip-cert-verify"),n(`,tls-host=${e.sni}`,"sni")),n(`,fast-open=${e.tfo}`,"tfo"),n(`,udp-relay=${e.udp}`,"udp"),e._ssr_python_uot?r(",udp-over-tcp=true"):e["udp-over-tcp"]&&(!e["udp-over-tcp-version"]||e["udp-over-tcp-version"]===1?r(",udp-over-tcp=sp.v1"):e["udp-over-tcp-version"]===2&&r(",udp-over-tcp=sp.v2")),t.appendIfPresent(`,server_check_url=${e["test-url"]}`,"test-url"),r(`,tag=${e.name}`),t.toString()}function c4(e){let t=new Pt(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);return r(`shadowsocks=${e.server}:${e.port}`),r(`,method=${e.cipher}`),r(`,password=${e.password}`),r(`,ssr-protocol=${e.protocol}`),n(`,ssr-protocol-param=${e["protocol-param"]}`,"protocol-param"),n(`,obfs=${e.obfs}`,"obfs"),n(`,obfs-host=${e["obfs-param"]}`,"obfs-param"),n(`,fast-open=${e.tfo}`,"tfo"),n(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,server_check_url=${e["test-url"]}`,"test-url"),r(`,tag=${e.name}`),t.toString()}function l4(e){let t=new Pt(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);if(r(`trojan=${e.server}:${e.port}`),r(`,password=${e.password}`),we(e,"network"))if(e.network==="ws")Kn(e)?r(",obfs=wss"):r(",obfs=ws"),n(`,obfs-uri=${e["ws-opts"]?.path}`,"ws-opts.path"),n(`,obfs-host=${e["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else throw new Error(`network ${e.network} is unsupported`);return e.network!=="ws"&&Kn(e)&&r(",over-tls=true"),Kn(e)&&(n(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),n(`,tls-alpn=${e["tls-alpn"]}`,"tls-alpn"),n(`,tls-no-session-ticket=${e["tls-no-session-ticket"]}`,"tls-no-session-ticket"),n(`,tls-no-session-reuse=${e["tls-no-session-reuse"]}`,"tls-no-session-reuse"),n(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),n(`,tls-verification=${!e["skip-cert-verify"]}`,"skip-cert-verify"),n(`,tls-host=${e.sni}`,"sni")),n(`,fast-open=${e.tfo}`,"tfo"),n(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,server_check_url=${e["test-url"]}`,"test-url"),r(`,tag=${e.name}`),t.toString()}function f4(e){let t=new Pt(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);r(`vmess=${e.server}:${e.port}`);let u;if(e.cipher==="auto"?u="chacha20-ietf-poly1305":u=e.cipher,r(`,method=${u}`),r(`,password=${e.uuid}`),Kn(e)&&(e.tls=!0),we(e,"network")){if(e.network==="ws")e.tls?r(",obfs=wss"):r(",obfs=ws");else if(e.network==="http")r(",obfs=http");else throw new Error(`network ${e.network} is unsupported`);let a=e[`${e.network}-opts`]?.path,i=e[`${e.network}-opts`]?.headers?.Host;n(`,obfs-uri=${Array.isArray(a)?a[0]:a}`,`${e.network}-opts.path`),n(`,obfs-host=${Array.isArray(i)?i[0]:i}`,`${e.network}-opts.headers.Host`)}else e.tls&&r(",obfs=over-tls");return Kn(e)&&(n(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),n(`,tls-alpn=${e["tls-alpn"]}`,"tls-alpn"),n(`,tls-no-session-ticket=${e["tls-no-session-ticket"]}`,"tls-no-session-ticket"),n(`,tls-no-session-reuse=${e["tls-no-session-reuse"]}`,"tls-no-session-reuse"),n(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),n(`,tls-verification=${!e["skip-cert-verify"]}`,"skip-cert-verify"),n(`,tls-host=${e.sni}`,"sni")),we(e,"aead")?r(`,aead=${e.aead}`):r(`,aead=${e.alterId===0}`),n(`,fast-open=${e.tfo}`,"tfo"),n(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,server_check_url=${e["test-url"]}`,"test-url"),r(`,tag=${e.name}`),t.toString()}function h4(e){if(typeof e.flow<"u"||e["reality-opts"])throw new Error("VLESS XTLS/REALITY is not supported");let t=new Pt(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);if(r(`vless=${e.server}:${e.port}`),r(",method=none"),r(`,password=${e.uuid}`),Kn(e)&&(e.tls=!0),we(e,"network")){if(e.network==="ws")e.tls?r(",obfs=wss"):r(",obfs=ws");else if(e.network==="http")r(",obfs=http");else if(["tcp"].includes(e.network))e.tls&&r(",obfs=over-tls");else if(!["tcp"].includes(e.network))throw new Error(`network ${e.network} is unsupported`);let a=e[`${e.network}-opts`]?.path,i=e[`${e.network}-opts`]?.headers?.Host;n(`,obfs-uri=${Array.isArray(a)?a[0]:a}`,`${e.network}-opts.path`),n(`,obfs-host=${Array.isArray(i)?i[0]:i}`,`${e.network}-opts.headers.Host`)}else e.tls&&r(",obfs=over-tls");return Kn(e)&&(n(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),n(`,tls-alpn=${e["tls-alpn"]}`,"tls-alpn"),n(`,tls-no-session-ticket=${e["tls-no-session-ticket"]}`,"tls-no-session-ticket"),n(`,tls-no-session-reuse=${e["tls-no-session-reuse"]}`,"tls-no-session-reuse"),n(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),n(`,tls-verification=${!e["skip-cert-verify"]}`,"skip-cert-verify"),n(`,tls-host=${e.sni}`,"sni")),n(`,fast-open=${e.tfo}`,"tfo"),n(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,server_check_url=${e["test-url"]}`,"test-url"),r(`,tag=${e.name}`),t.toString()}function p4(e){let t=new Pt(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);return r(`http=${e.server}:${e.port}`),n(`,username=${e.username}`,"username"),n(`,password=${e.password}`,"password"),Kn(e)&&(e.tls=!0),n(`,over-tls=${e.tls}`,"tls"),Kn(e)&&(n(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),n(`,tls-alpn=${e["tls-alpn"]}`,"tls-alpn"),n(`,tls-no-session-ticket=${e["tls-no-session-ticket"]}`,"tls-no-session-ticket"),n(`,tls-no-session-reuse=${e["tls-no-session-reuse"]}`,"tls-no-session-reuse"),n(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),n(`,tls-verification=${!e["skip-cert-verify"]}`,"skip-cert-verify"),n(`,tls-host=${e.sni}`,"sni")),n(`,fast-open=${e.tfo}`,"tfo"),n(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,server_check_url=${e["test-url"]}`,"test-url"),r(`,tag=${e.name}`),t.toString()}function d4(e){let t=new Pt(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);return r(`socks5=${e.server}:${e.port}`),n(`,username=${e.username}`,"username"),n(`,password=${e.password}`,"password"),Kn(e)&&(e.tls=!0),n(`,over-tls=${e.tls}`,"tls"),Kn(e)&&(n(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),n(`,tls-alpn=${e["tls-alpn"]}`,"tls-alpn"),n(`,tls-no-session-ticket=${e["tls-no-session-ticket"]}`,"tls-no-session-ticket"),n(`,tls-no-session-reuse=${e["tls-no-session-reuse"]}`,"tls-no-session-reuse"),n(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),n(`,tls-verification=${!e["skip-cert-verify"]}`,"skip-cert-verify"),n(`,tls-host=${e.sni}`,"sni")),n(`,fast-open=${e.tfo}`,"tfo"),n(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,server_check_url=${e["test-url"]}`,"test-url"),r(`,tag=${e.name}`),t.toString()}function Kn(e){return e.tls}function Ku(){return{type:"ALL",produce:(r,n,u={})=>{let a=r.filter(i=>u["include-unsupported-proxy"]?!0:i.type==="snell"&&i.version>=4?!1:!["mieru"].includes(i.type)).map(i=>{if(i.type==="vmess")we(i,"aead")&&(i.aead&&(i.alterId=0),delete i.aead),we(i,"sni")&&(i.servername=i.sni,delete i.sni),we(i,"cipher")&&!["auto","none","zero","aes-128-gcm","chacha20-poly1305"].includes(i.cipher)&&(i.cipher="auto");else if(i.type==="tuic")we(i,"alpn")?i.alpn=Array.isArray(i.alpn)?i.alpn:[i.alpn]:i.alpn=["h3"],we(i,"tfo")&&!we(i,"fast-open")&&(i["fast-open"]=i.tfo),(!i.token||i.token.length===0)&&!we(i,"version")&&(i.version=5);else if(i.type==="hysteria")we(i,"auth_str")&&!we(i,"auth-str")&&(i["auth-str"]=i.auth_str),we(i,"alpn")&&(i.alpn=Array.isArray(i.alpn)?i.alpn:[i.alpn]),we(i,"tfo")&&!we(i,"fast-open")&&(i["fast-open"]=i.tfo);else if(i.type==="hysteria2")we(i,"alpn")&&(i.alpn=Array.isArray(i.alpn)?i.alpn:[i.alpn]),we(i,"tfo")&&!we(i,"fast-open")&&(i["fast-open"]=i.tfo);else if(i.type==="wireguard")i.keepalive=i.keepalive??i["persistent-keepalive"],i["persistent-keepalive"]=i.keepalive,i["preshared-key"]=i["preshared-key"]??i["pre-shared-key"],i["pre-shared-key"]=i["preshared-key"];else if(i.type==="snell"&&i.version<3)delete i.udp;else if(i.type==="vless")we(i,"sni")&&(i.servername=i.sni,delete i.sni);else if(i.type==="ss")we(i,"shadow-tls-password")&&!we(i,"plugin")&&(i.plugin="shadow-tls",i["plugin-opts"]={host:i["shadow-tls-sni"],password:i["shadow-tls-password"],version:i["shadow-tls-version"]},delete i["shadow-tls-password"],delete i["shadow-tls-sni"],delete i["shadow-tls-version"]);else if(["anytls"].includes(i.type)&&i.network&&(!["tcp"].includes(i.network)||["tcp"].includes(i.network)&&i["reality-opts"]))return!1;if(["vmess","vless"].includes(i.type)&&i.network==="http"){let c=i["http-opts"]?.path;we(i,"http-opts.path")&&!Array.isArray(c)&&(i["http-opts"].path=[c]);let h=i["http-opts"]?.headers?.Host;we(i,"http-opts.headers.Host")&&!Array.isArray(h)&&(i["http-opts"].headers.Host=[h])}if(["vmess","vless"].includes(i.type)&&i.network==="h2"){let c=i["h2-opts"]?.path;we(i,"h2-opts.path")&&Array.isArray(c)&&(i["h2-opts"].path=c[0]);let h=i["h2-opts"]?.headers?.host;we(i,"h2-opts.headers.Host")&&!Array.isArray(h)&&(i["h2-opts"].headers.host=[h])}if(["ws"].includes(i.network)){let c=i[`${i.network}-opts`]?.path;if(c){let h=/^(.*?)(?:\?ed=(\d+))?$/,[m,S="",E=""]=h.exec(c);i[`${i.network}-opts`].path=S,E!==""&&(i["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",i["ws-opts"]["max-early-data"]=parseInt(E,10))}else i[`${i.network}-opts`]=i[`${i.network}-opts`]||{},i[`${i.network}-opts`].path="/"}if(i["plugin-opts"]?.tls&&we(i,"skip-cert-verify")&&(i["plugin-opts"]["skip-cert-verify"]=i["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(i.type)&&delete i.tls,i["tls-fingerprint"]&&(i.fingerprint=i["tls-fingerprint"]),delete i["tls-fingerprint"],i["underlying-proxy"]&&(i["dialer-proxy"]=i["underlying-proxy"]),delete i["underlying-proxy"],we(i,"tls")&&typeof i.tls!="boolean"&&delete i.tls,delete i.subName,delete i.collectionName,delete i.id,delete i.resolved,delete i["no-resolve"],n!=="internal")for(let c in i)(i[c]==null||/^_/i.test(c))&&delete i[c];return["grpc"].includes(i.network)&&i[`${i.network}-opts`]&&(delete i[`${i.network}-opts`]["_grpc-type"],delete i[`${i.network}-opts`]["_grpc-authority"]),i});return n==="internal"?a:`proxies:
`+a.map(i=>"  - "+JSON.stringify(i)+`
`).join("")}}}var g4="Surfboard";function Lc(){return{produce:t=>{switch(t.name=t.name.replace(/=|,/g,""),t.type){case"ss":return v4(t);case"trojan":return m4(t);case"vmess":return w4(t);case"http":return b4(t);case"socks5":return A4(t);case"wireguard-surge":return E4(t)}throw new Error(`Platform ${g4} does not support proxy type: ${t.type}`)}}}function v4(e){let t=new Pt(e);if(t.append(`${e.name}=${e.type},${e.server},${e.port}`),!["aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","salsa20","chacha20","chacha20-ietf"].includes(e.cipher))throw new Error(`cipher ${e.cipher} is not supported`);if(t.append(`,encrypt-method=${e.cipher}`),t.appendIfPresent(`,password=${e.password}`,"password"),we(e,"plugin"))if(e.plugin==="obfs")t.append(`,obfs=${e["plugin-opts"].mode}`),t.appendIfPresent(`,obfs-host=${e["plugin-opts"].host}`,"plugin-opts.host"),t.appendIfPresent(`,obfs-uri=${e["plugin-opts"].path}`,"plugin-opts.path");else throw new Error(`plugin ${e.plugin} is not supported`);return t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.toString()}function m4(e){let t=new Pt(e);return t.append(`${e.name}=${e.type},${e.server},${e.port}`),t.appendIfPresent(`,password=${e.password}`,"password"),qg(t,e),t.appendIfPresent(`,tls=${e.tls}`,"tls"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.toString()}function w4(e){let t=new Pt(e);return t.append(`${e.name}=${e.type},${e.server},${e.port}`),t.appendIfPresent(`,username=${e.uuid}`,"uuid"),qg(t,e),we(e,"aead")?t.append(`,vmess-aead=${e.aead}`):t.append(`,vmess-aead=${e.alterId===0}`),t.appendIfPresent(`,tls=${e.tls}`,"tls"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.toString()}function b4(e){let t=new Pt(e),r=e.tls?"https":"http";return t.append(`${e.name}=${r},${e.server},${e.port}`),t.appendIfPresent(`,${e.username}`,"username"),t.appendIfPresent(`,${e.password}`,"password"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.toString()}function A4(e){let t=new Pt(e),r=e.tls?"socks5-tls":"socks5";return t.append(`${e.name}=${r},${e.server},${e.port}`),t.appendIfPresent(`,${e.username}`,"username"),t.appendIfPresent(`,${e.password}`,"password"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.toString()}function E4(e){let t=new Pt(e);return t.append(`${e.name}=wireguard`),t.appendIfPresent(`,section-name=${e["section-name"]}`,"section-name"),t.toString()}function qg(e,t){if(we(t,"network"))if(t.network==="ws"){if(e.append(",ws=true"),we(t,"ws-opts")&&(e.appendIfPresent(`,ws-path=${t["ws-opts"].path}`,"ws-opts.path"),we(t,"ws-opts.headers"))){let r=t["ws-opts"].headers,n=Object.keys(r).map(u=>{let a=r[u];return["Host"].includes(u)&&(a=`"${a}"`),`${u}:${a}`}).join("|");$i(n)&&e.append(`,ws-headers=${n}`)}}else throw new Error(`network ${t.network} is unsupported`)}var S4={ipv4:"ipv4_only",ipv6:"ipv6_only","v4-only":"ipv4_only","v6-only":"ipv6_only","ipv4-prefer":"prefer_ipv4","ipv6-prefer":"prefer_ipv6","prefer-v4":"prefer_ipv4","prefer-v6":"prefer_ipv6"},Rn=(e,t)=>{let r=S4[e["ip-version"]];e._dns_server&&r&&(t.domain_resolver={server:e._dns_server,strategy:r})},Bn=(e,t)=>{t.detour=e["dialer-proxy"]||e.detour},Ri=(e,t)=>{["tcp","udp"].includes(e._network)&&(t.network=e._network)},zn=(e,t)=>{t.tcp_fast_open=!1,e.tfo&&(t.tcp_fast_open=!0),e.tcp_fast_open&&(t.tcp_fast_open=!0),e["tcp-fast-open"]&&(t.tcp_fast_open=!0),t.tcp_fast_open||delete t.tcp_fast_open},Bi=(e,t)=>{!e||!e.enabled||(t.multiplex={enabled:!0},t.multiplex.protocol=e.protocol,e["max-connections"]&&(t.multiplex.max_connections=parseInt(`${e["max-connections"]}`,10)),e["max-streams"]&&(t.multiplex.max_streams=parseInt(`${e["max-streams"]}`,10)),e["min-streams"]&&(t.multiplex.min_streams=parseInt(`${e["min-streams"]}`,10)),e.padding&&(t.multiplex.padding=!0),(e["brutal-opts"]?.up||e["brutal-opts"]?.down)&&(t.multiplex.brutal={enabled:!0},e["brutal-opts"]?.up&&(t.multiplex.brutal.up_mbps=parseInt(`${e["brutal-opts"]?.up}`,10)),e["brutal-opts"]?.down&&(t.multiplex.brutal.down_mbps=parseInt(`${e["brutal-opts"]?.down}`,10))))},Kh=(e,t)=>{let r={type:"ws",headers:{}};if(e["ws-opts"]){let{path:n="",headers:u={},"max-early-data":a,"early-data-header-name":i}=e["ws-opts"];if(r.early_data_header_name=i,r.max_early_data=parseInt(a,10),n!==""&&(r.path=`${n}`),Object.keys(u).length>0){let c={};for(let m of Object.keys(u)){let S=u[m];S!==""&&(Array.isArray(S)||(S=[`${S}`]),S.length>0&&(c[m]=S))}let{Host:h}=c;if(h.length===1)for(let m of`Host:${h[0]}`.split(`
`)){let[S,E]=m.split(":");E.trim()!==""&&(c[S.trim()]=E.trim().split(","))}r.headers=c}}if(e["ws-headers"]){let n={};for(let a of Object.keys(e["ws-headers"])){let i=e["ws-headers"][a];i!==""&&(Array.isArray(i)||(i=[`${i}`]),i.length>0&&(n[a]=i))}let{Host:u}=n;if(u.length===1)for(let a of`Host:${u[0]}`.split(`
`)){let[i,c]=a.split(":");c.trim()!==""&&(n[i.trim()]=c.trim().split(","))}for(let a of Object.keys(n))r.headers[a]=n[a]}if(e["ws-path"]&&e["ws-path"]!==""&&(r.path=`${e["ws-path"]}`),r.path){let n=/^(.*?)(?:\?ed=(\d+))?$/,[u,a="",i=""]=n.exec(r.path);r.path=a,i!==""&&(r.early_data_header_name="Sec-WebSocket-Protocol",r.max_early_data=parseInt(i,10))}t.tls.insecure&&(t.tls.server_name=r.headers.Host[0]),e["ws-opts"]&&e["ws-opts"]["v2ray-http-upgrade"]&&(r.type="httpupgrade",r.headers.Host&&(r.host=r.headers.Host[0],delete r.headers.Host),r.max_early_data&&delete r.max_early_data,r.early_data_header_name&&delete r.early_data_header_name);for(let n of Object.keys(r.headers)){let u=r.headers[n];u.length===1&&(r.headers[n]=u[0])}t.transport=r},Ug=(e,t)=>{let r={type:"http",headers:{}};if(e["http-opts"]){let{method:n="",path:u="",headers:a={}}=e["http-opts"];n!==""&&(r.method=n),Array.isArray(u)?r.path=`${u[0]}`:u!==""&&(r.path=`${u}`);for(let i of Object.keys(a)){let c=a[i];if(c!==""){if(i.toLowerCase()==="host"){let h=c;Array.isArray(h)||(h=`${h}`.split(",").map(m=>m.trim())),h.length>0&&(r.host=h);continue}Array.isArray(c)||(c=`${c}`.split(",").map(h=>h.trim())),c.length>0&&(r.headers[i]=c)}}}if(e["http-host"]&&e["http-host"]!==""){let n=e["http-host"];Array.isArray(n)||(n=`${n}`.split(",").map(u=>u.trim())),n.length>0&&(r.host=n)}if(e["http-path"]&&e["http-path"]!==""){let n=e["http-path"];Array.isArray(n)?r.path=`${n[0]}`:n!==""&&(r.path=`${n}`)}t.tls.insecure&&(t.tls.server_name=r.host[0]),r.host?.length===1&&(r.host=r.host[0]);for(let n of Object.keys(r.headers)){let u=r.headers[n];u.length===1&&(r.headers[n]=u[0])}t.transport=r},Vg=(e,t)=>{let r={type:"http"};if(e["h2-opts"]){let{host:n="",path:u=""}=e["h2-opts"];u!==""&&(r.path=`${u}`),n!==""&&(Array.isArray(n)||(n=`${n}`.split(",").map(a=>a.trim())),n.length>0&&(r.host=n))}if(e["h2-host"]&&e["h2-host"]!==""){let n=e["h2-host"];Array.isArray(n)||(n=`${n}`.split(",").map(u=>u.trim())),n.length>0&&(r.host=n)}e["h2-path"]&&e["h2-path"]!==""&&(r.path=`${e["h2-path"]}`),t.tls.enabled=!0,t.tls.insecure&&(t.tls.server_name=r.host[0]),r.host.length===1&&(r.host=r.host[0]),t.transport=r},zh=(e,t)=>{let r={type:"grpc"};if(e["grpc-opts"]){let n=e["grpc-opts"]["grpc-service-name"];n!=null&&n!==""&&(r.service_name=`${n}`)}t.transport=r},Fs=(e,t)=>{e.tls&&(t.tls.enabled=!0),e.servername&&e.servername!==""&&(t.tls.server_name=e.servername),e.peer&&e.peer!==""&&(t.tls.server_name=e.peer),e.sni&&e.sni!==""&&(t.tls.server_name=e.sni),e["skip-cert-verify"]&&(t.tls.insecure=!0),e.insecure&&(t.tls.insecure=!0),e["disable-sni"]&&(t.tls.disable_sni=!0),typeof e.alpn=="string"?t.tls.alpn=[e.alpn]:Array.isArray(e.alpn)&&(t.tls.alpn=e.alpn),e.ca&&(t.tls.certificate_path=`${e.ca}`),e.ca_str&&(t.tls.certificate=[e.ca_str]),e["ca-str"]&&(t.tls.certificate=[e["ca-str"]]),e["reality-opts"]&&(t.tls.reality={enabled:!0},e["reality-opts"]["public-key"]&&(t.tls.reality.public_key=e["reality-opts"]["public-key"]),e["reality-opts"]["short-id"]&&(t.tls.reality.short_id=e["reality-opts"]["short-id"]),t.tls.utls={enabled:!0}),!["hysteria","hysteria2","tuic"].includes(e.type)&&e["client-fingerprint"]&&e["client-fingerprint"]!==""&&(t.tls.utls={enabled:!0,fingerprint:e["client-fingerprint"]}),t.tls.enabled||delete t.tls},_4=(e={})=>{let t={tag:e.name,type:"ssh",server:e.server,server_port:parseInt(`${e.port}`,10)};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e.username&&(t.user=e.username),e.password&&(t.password=e.password),e.privateKey&&(t.private_key_path=e.privateKey),e["private-key"]&&(t.private_key_path=e["private-key"]),e["private-key-passphrase"]&&(t.private_key_passphrase=e["private-key-passphrase"]),e["server-fingerprint"]&&(t.host_key=[e["server-fingerprint"]],t.host_key_algorithms=[e["server-fingerprint"].split(" ")[0]]),e["host-key"]&&(t.host_key=e["host-key"]),e["host-key-algorithms"]&&(t.host_key_algorithms=e["host-key-algorithms"]),e["fast-open"]&&(t.udp_fragment=!0),zn(e,t),Bn(e,t),Rn(e,t),t},y4=(e={})=>{let t={tag:e.name,type:"http",server:e.server,server_port:parseInt(`${e.port}`,10),tls:{enabled:!1,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";if(e.username&&(t.username=e.username),e.password&&(t.password=e.password),e.headers){t.headers={};for(let r of Object.keys(e.headers))t.headers[r]=`${e.headers[r]}`;Object.keys(t.headers).length===0&&delete t.headers}return e["fast-open"]&&(t.udp_fragment=!0),zn(e,t),Bn(e,t),Fs(e,t),Rn(e,t),t},D4=(e={})=>{let t={tag:e.name,type:"socks",server:e.server,server_port:parseInt(`${e.port}`,10),password:e.password,version:"5"};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e.username&&(t.username=e.username),e.password&&(t.password=e.password),e.uot&&(t.udp_over_tcp=!0),e["udp-over-tcp"]&&(t.udp_over_tcp=!0),e["fast-open"]&&(t.udp_fragment=!0),Ri(e,t),zn(e,t),Bn(e,t),Rn(e,t),t},F4=(e={})=>{let t={tag:e.name,type:"shadowsocks",method:e.cipher,password:e.password,detour:`${e.name}_shadowtls`};e.uot&&(t.udp_over_tcp=!0),e["udp-over-tcp"]&&(t.udp_over_tcp={enabled:!0,version:!e["udp-over-tcp-version"]||e["udp-over-tcp-version"]===1?1:2});let r={tag:`${e.name}_shadowtls`,type:"shadowtls",server:e.server,server_port:parseInt(`${e.port}`,10),version:e["plugin-opts"].version,password:e["plugin-opts"].password,tls:{enabled:!0,server_name:e["plugin-opts"].host,utls:{enabled:!0,fingerprint:e["client-fingerprint"]}}};if(r.server_port<0||r.server_port>65535)throw"\u7AEF\u53E3\u503C\u975E\u6CD5";return e["fast-open"]===!0&&(r.udp_fragment=!0),zn(e,r),Bn(e,r),Bi(e.smux,t),Rn(e,r),{type:"ss-with-st",ssPart:t,stPart:r}},C4=(e={})=>{let t={tag:e.name,type:"shadowsocks",server:e.server,server_port:parseInt(`${e.port}`,10),method:e.cipher,password:e.password};if(t.server_port<0||t.server_port>65535)throw"invalid port";if(e.uot&&(t.udp_over_tcp=!0),e["udp-over-tcp"]&&(t.udp_over_tcp={enabled:!0,version:!e["udp-over-tcp-version"]||e["udp-over-tcp-version"]===1?1:2}),e["fast-open"]&&(t.udp_fragment=!0),Ri(e,t),zn(e,t),Bn(e,t),Bi(e.smux,t),Rn(e,t),e.plugin){let r=[];e.plugin==="obfs"&&(t.plugin="obfs-local",t.plugin_opts="",e["obfs-host"]&&(e["plugin-opts"].host=e["obfs-host"]),Object.keys(e["plugin-opts"]).forEach(n=>{switch(n){case"mode":r.push(`obfs=${e["plugin-opts"].mode}`);break;case"host":r.push(`obfs-host=${e["plugin-opts"].host}`);break;default:r.push(`${n}=${e["plugin-opts"][n]}`);break}})),e.plugin==="v2ray-plugin"&&(t.plugin="v2ray-plugin",e["ws-host"]&&(e["plugin-opts"].host=e["ws-host"]),e["ws-path"]&&(e["plugin-opts"].path=e["ws-path"]),Object.keys(e["plugin-opts"]).forEach(n=>{switch(n){case"tls":e["plugin-opts"].tls&&r.push("tls");break;case"host":r.push(`host=${e["plugin-opts"].host}`);break;case"path":r.push(`path=${e["plugin-opts"].path}`);break;case"headers":r.push(`headers=${JSON.stringify(e["plugin-opts"].headers)}`);break;case"mux":e["plugin-opts"].mux&&(t.multiplex={enabled:!0});break;default:r.push(`${n}=${e["plugin-opts"][n]}`)}})),t.plugin_opts=r.join(";")}return t},P4=(e={})=>{let t={tag:e.name,type:"shadowsocksr",server:e.server,server_port:parseInt(`${e.port}`,10),method:e.cipher,password:e.password,obfs:e.obfs,protocol:e.protocol};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e["obfs-param"]&&(t.obfs_param=e["obfs-param"]),e["protocol-param"]&&e["protocol-param"]!==""&&(t.protocol_param=e["protocol-param"]),e["fast-open"]&&(t.udp_fragment=!0),zn(e,t),Bn(e,t),Bi(e.smux,t),Rn(e,t),t},I4=(e={})=>{let t={tag:e.name,type:"vmess",server:e.server,server_port:parseInt(`${e.port}`,10),uuid:e.uuid,security:e.cipher,alter_id:parseInt(`${e.alterId}`,10),tls:{enabled:!1,server_name:e.server,insecure:!1}};if(["auto","none","zero","aes-128-gcm","chacha20-poly1305","aes-128-ctr"].indexOf(t.security)===-1&&(t.security="auto"),t.server_port<0||t.server_port>65535)throw"invalid port";return e.xudp&&(t.packet_encoding="xudp"),e["fast-open"]&&(t.udp_fragment=!0),e.network==="ws"&&Kh(e,t),e.network==="h2"&&Vg(e,t),e.network==="http"&&Ug(e,t),e.network==="grpc"&&zh(e,t),Ri(e,t),zn(e,t),Bn(e,t),Fs(e,t),Bi(e.smux,t),Rn(e,t),t},$4=(e={})=>{let t={tag:e.name,type:"vless",server:e.server,server_port:parseInt(`${e.port}`,10),uuid:e.uuid,tls:{enabled:!1,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e.xudp&&(t.packet_encoding="xudp"),e["fast-open"]&&(t.udp_fragment=!0),e.flow!=null&&(t.flow=e.flow),e.network==="ws"&&Kh(e,t),e.network==="h2"&&Vg(e,t),e.network==="http"&&Ug(e,t),e.network==="grpc"&&zh(e,t),Ri(e,t),zn(e,t),Bn(e,t),Bi(e.smux,t),Fs(e,t),Rn(e,t),t},k4=(e={})=>{let t={tag:e.name,type:"trojan",server:e.server,server_port:parseInt(`${e.port}`,10),password:e.password,tls:{enabled:!0,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e["fast-open"]&&(t.udp_fragment=!0),e.network==="grpc"&&zh(e,t),e.network==="ws"&&Kh(e,t),Ri(e,t),zn(e,t),Bn(e,t),Fs(e,t),Bi(e.smux,t),Rn(e,t),t},R4=(e={})=>{let t={tag:e.name,type:"hysteria",server:e.server,server_port:parseInt(`${e.port}`,10),disable_mtu_discovery:!1,tls:{enabled:!0,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";e.auth_str&&(t.auth_str=`${e.auth_str}`),e["auth-str"]&&(t.auth_str=`${e["auth-str"]}`),e["fast-open"]&&(t.udp_fragment=!0);let r=new RegExp("^[0-9]+[ 	]*[KMGT]*[Bb]ps$");return r.test(`${e.up}`)&&!`${e.up}`.endsWith("Mbps")?t.up=`${e.up}`:t.up_mbps=parseInt(`${e.up}`,10),r.test(`${e.down}`)&&!`${e.down}`.endsWith("Mbps")?t.down=`${e.down}`:t.down_mbps=parseInt(`${e.down}`,10),e.obfs&&(t.obfs=e.obfs),e.recv_window_conn&&(t.recv_window_conn=e.recv_window_conn),e["recv-window-conn"]&&(t.recv_window_conn=e["recv-window-conn"]),e.recv_window&&(t.recv_window=e.recv_window),e["recv-window"]&&(t.recv_window=e["recv-window"]),e.disable_mtu_discovery&&(typeof e.disable_mtu_discovery=="boolean"?t.disable_mtu_discovery=e.disable_mtu_discovery:e.disable_mtu_discovery===1&&(t.disable_mtu_discovery=!0)),Ri(e,t),Fs(e,t),Bn(e,t),zn(e,t),Bi(e.smux,t),Rn(e,t),t},B4=(e={})=>{let t={tag:e.name,type:"hysteria2",server:e.server,server_port:parseInt(`${e.port}`,10),password:e.password,obfs:{},tls:{enabled:!0,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e["hop-interval"]&&(t.hop_interval=/^\d+$/.test(e["hop-interval"])?`${e["hop-interval"]}s`:e["hop-interval"]),e.ports&&(t.server_ports=e.ports.split(/\s*,\s*/).map(r=>r.replace(/\s*-\s*/g,":"))),e.up&&(t.up_mbps=parseInt(`${e.up}`,10)),e.down&&(t.down_mbps=parseInt(`${e.down}`,10)),e.obfs==="salamander"&&(t.obfs.type="salamander"),e["obfs-password"]&&(t.obfs.password=e["obfs-password"]),t.obfs.type||delete t.obfs,Ri(e,t),Fs(e,t),zn(e,t),Bn(e,t),Bi(e.smux,t),Rn(e,t),t},x4=(e={})=>{let t={tag:e.name,type:"tuic",server:e.server,server_port:parseInt(`${e.port}`,10),uuid:e.uuid,password:e.password,tls:{enabled:!0,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e["fast-open"]&&(t.udp_fragment=!0),e["congestion-controller"]&&e["congestion-controller"]!=="cubic"&&(t.congestion_control=e["congestion-controller"]),e["udp-relay-mode"]&&e["udp-relay-mode"]!=="native"&&(t.udp_relay_mode=e["udp-relay-mode"]),e["reduce-rtt"]&&(t.zero_rtt_handshake=!0),e["udp-over-stream"]&&(t.udp_over_stream=!0),e["heartbeat-interval"]&&(t.heartbeat=`${e["heartbeat-interval"]}ms`),Ri(e,t),zn(e,t),Bn(e,t),Fs(e,t),Bi(e.smux,t),Rn(e,t),t},T4=(e={})=>{let t={tag:e.name,type:"anytls",server:e.server,server_port:parseInt(`${e.port}`,10),password:e.password,tls:{enabled:!0,server_name:e.server,insecure:!1}};return/^\d+$/.test(e["idle-session-check-interval"])&&(t.idle_session_check_interval=`${e["idle-session-check-interval"]}s`),/^\d+$/.test(e["idle-session-timeout"])&&(t.idle_session_timeout=`${e["idle-session-timeout"]}s`),/^\d+$/.test(e["min-idle-session"])&&(t.min_idle_session=parseInt(`${e["min-idle-session"]}`,10)),Ri(e,t),Bn(e,t),Fs(e,t),Rn(e,t),t},O4=(e={})=>{let t=["ip","ipv6"].map(n=>e[n]).map(n=>{if(Un(n))return`${n}/32`;if(wn(n))return`${n}/128`}).filter(n=>n),r={tag:e.name,type:"wireguard",server:e.server,server_port:parseInt(`${e.port}`,10),local_address:t,private_key:e["private-key"],peer_public_key:e["public-key"],pre_shared_key:e["pre-shared-key"],reserved:[]};if(r.server_port<0||r.server_port>65535)throw"invalid port";if(e["fast-open"]&&(r.udp_fragment=!0),typeof e.reserved=="string")r.reserved=e.reserved;else if(Array.isArray(e.reserved))for(let n of e.reserved)r.reserved.push(n);else delete r.reserved;if(e.peers&&e.peers.length>0){r.peers=[];for(let n of e.peers){let u={server:n.server,server_port:parseInt(`${n.port}`,10),public_key:n["public-key"],allowed_ips:n["allowed-ips"]||n.allowed_ips,reserved:[]};if(typeof n.reserved=="string")u.reserved.push(n.reserved);else if(Array.isArray(n.reserved))for(let a of n.reserved)u.reserved.push(a);else delete u.reserved;n["pre-shared-key"]&&(u.pre_shared_key=n["pre-shared-key"]),r.peers.push(u)}}return Ri(e,r),zn(e,r),Bn(e,r),Bi(e.smux,r),Rn(e,r),r};function jc(){return{type:"ALL",produce:(r,n,u={})=>{let a=[];return Vn().produce(r,"internal",{"include-unsupported-proxy":!0}).map(i=>{try{switch(i.type){case"ssh":a.push(_4(i));break;case"http":a.push(y4(i));break;case"socks5":if(i.tls)throw new Error(`Platform sing-box does not support proxy type: ${i.type} with tls`);a.push(D4(i));break;case"ss":if(i.plugin==="shadow-tls"){let{ssPart:c,stPart:h}=F4(i);a.push(c),a.push(h)}else a.push(C4(i));break;case"ssr":if(u["include-unsupported-proxy"])a.push(P4(i));else throw new Error(`Platform sing-box does not support proxy type: ${i.type}`);break;case"vmess":if(!i.network||["ws","grpc","h2","http"].includes(i.network))a.push(I4(i));else throw new Error(`Platform sing-box does not support proxy type: ${i.type} with network ${i.network}`);break;case"vless":if(!i.flow||["xtls-rprx-vision"].includes(i.flow))a.push($4(i));else throw new Error(`Platform sing-box does not support proxy type: ${i.type} with flow ${i.flow}`);break;case"trojan":if(!i.flow)a.push(k4(i));else throw new Error(`Platform sing-box does not support proxy type: ${i.type} with flow ${i.flow}`);break;case"hysteria":a.push(R4(i));break;case"hysteria2":a.push(B4(i,u["include-unsupported-proxy"]));break;case"tuic":if(!i.token||i.token.length===0)a.push(x4(i));else throw new Error("Platform sing-box does not support proxy type: TUIC v4");break;case"wireguard":a.push(O4(i));break;case"anytls":a.push(T4(i));break;default:throw new Error(`Platform sing-box does not support proxy type: ${i.type}`)}}catch(c){Gt.error(c.message??c)}}),n==="internal"?a:JSON.stringify({outbounds:a},null,2)}}}function Mc(){return{type:"ALL",produce:(r,n)=>{let u=r.filter(a=>!(!["http","socks5","ss","trojan","hysteria2","vless","vmess","tuic"].includes(a.type)||a.type==="ss"&&(a.plugin==="obfs"&&!["http","tls"].includes(a["plugin-opts"]?.mode)||!["chacha20-ietf-poly1305","chacha20-poly1305","aes-256-gcm","aes-128-gcm","none","tbale","rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","cast5-cfb","des-cfb","idea-cfb","rc2-cfb","seed-cfb","salsa20","chacha20","chacha20-ietf","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(a.cipher))||a.type==="vmess"&&!["http","ws","tcp"].includes(a.network)&&a.network||a.type==="trojan"&&!["http","ws","tcp"].includes(a.network)&&a.network||a.type==="vless"&&(typeof a.flow<"u"||a["reality-opts"]||!["http","ws","tcp"].includes(a.network)&&a.network)||a.type==="tuic"&&a.token&&a.token.length!==0)).map(a=>{let i={...a};a.tls&&!a.sni&&(a.sni=a.server);let c=a.prev_hop||a["underlying-proxy"]||a["dialer-proxy"]||a.detour;if(a.type==="http")a={type:"http",name:a.name,server:a.server,port:a.port,username:a.username,password:a.password,tfo:a.tfo||a["fast-open"],next_hop:a.next_hop};else if(a.type==="socks5")a={type:"socks5",name:a.name,server:a.server,port:a.port,username:a.username,password:a.password,tfo:a.tfo||a["fast-open"],udp_relay:a.udp||a.udp_relay||a.udp_relay,next_hop:a.next_hop};else if(a.type==="ss")a={type:"shadowsocks",name:a.name,method:a.cipher==="chacha20-ietf-poly1305"?"chacha20-poly1305":a.cipher,server:a.server,port:a.port,password:a.password,tfo:a.tfo||a["fast-open"],udp_relay:a.udp||a.udp_relay||a.udp_relay,next_hop:a.next_hop},i.plugin==="obfs"&&(a.obfs=i["plugin-opts"].mode,a.obfs_host=i["plugin-opts"].host,a.obfs_uri=i["plugin-opts"].path);else if(a.type==="hysteria2")a={type:"hysteria2",name:a.name,server:a.server,port:a.port,auth:a.password,tfo:a.tfo||a["fast-open"],udp_relay:a.udp||a.udp_relay||a.udp_relay,next_hop:a.next_hop,sni:a.sni,skip_tls_verify:a["skip-cert-verify"],port_hopping:a.ports,port_hopping_interval:a["hop-interval"]},i["obfs-password"]&&i.obfs=="salamander"&&(a.obfs="salamander",a.obfs_password=i["obfs-password"]);else if(a.type==="tuic")a={type:"tuic",name:a.name,server:a.server,port:a.port,uuid:a.uuid,password:a.password,next_hop:a.next_hop,sni:a.sni,alpn:Array.isArray(a.alpn)?a.alpn:[a.alpn||"h3"],skip_tls_verify:a["skip-cert-verify"],port_hopping:a.ports,port_hopping_interval:a["hop-interval"]};else if(a.type==="trojan")a.network==="ws"&&(a.websocket={path:a["ws-opts"]?.path,host:a["ws-opts"]?.headers?.Host}),a={type:"trojan",name:a.name,server:a.server,port:a.port,password:a.password,tfo:a.tfo||a["fast-open"],udp_relay:a.udp||a.udp_relay||a.udp_relay,next_hop:a.next_hop,sni:a.sni,skip_tls_verify:a["skip-cert-verify"],websocket:a.websocket};else if(a.type==="vmess"){let h=a.cipher;h&&!["auto","none","zero","aes-128-gcm","chacha20-poly1305"].includes(h)&&(h="auto"),a.network==="ws"?a.transport={[a.tls?"wss":"ws"]:{path:a["ws-opts"]?.path,headers:{Host:a["ws-opts"]?.headers?.Host},sni:a.tls?a.sni:void 0,skip_tls_verify:a.tls?a["skip-cert-verify"]:void 0}}:a.network==="http"?a.transport={http1:{method:a["http-opts"]?.method,path:Array.isArray(a["http-opts"]?.path)?a["http-opts"]?.path[0]:a["http-opts"]?.path,headers:{Host:Array.isArray(a["http-opts"]?.headers?.Host)?a["http-opts"]?.headers?.Host[0]:a["http-opts"]?.headers?.Host},skip_tls_verify:a["skip-cert-verify"]}}:a.network==="h2"?a.transport={http2:{method:a["h2-opts"]?.method,path:Array.isArray(a["h2-opts"]?.path)?a["h2-opts"]?.path[0]:a["h2-opts"]?.path,headers:{Host:Array.isArray(a["h2-opts"]?.headers?.Host)?a["h2-opts"]?.headers?.Host[0]:a["h2-opts"]?.headers?.Host},skip_tls_verify:a["skip-cert-verify"]}}:(a.network==="tcp"||!a.network)&&a.tls&&(a.transport={tls:{sni:a.tls?a.sni:void 0,skip_tls_verify:a.tls?a["skip-cert-verify"]:void 0}}),a={type:"vmess",name:a.name,server:a.server,port:a.port,user_id:a.uuid,security:h,tfo:a.tfo||a["fast-open"],legacy:a.legacy,udp_relay:a.udp||a.udp_relay||a.udp_relay,next_hop:a.next_hop,transport:a.transport}}else a.type==="vless"&&(a.network==="ws"?a.transport={[a.tls?"wss":"ws"]:{path:a["ws-opts"]?.path,headers:{Host:a["ws-opts"]?.headers?.Host},sni:a.tls?a.sni:void 0,skip_tls_verify:a.tls?a["skip-cert-verify"]:void 0}}:a.network==="http"?a.transport={http:{method:a["http-opts"]?.method,path:Array.isArray(a["http-opts"]?.path)?a["http-opts"]?.path[0]:a["http-opts"]?.path,headers:{Host:Array.isArray(a["http-opts"]?.headers?.Host)?a["http-opts"]?.headers?.Host[0]:a["http-opts"]?.headers?.Host},skip_tls_verify:a["skip-cert-verify"]}}:(a.network==="tcp"||!a.network)&&(a.transport={[a.tls?"tls":"tcp"]:{sni:a.tls?a.sni:void 0,skip_tls_verify:a.tls?a["skip-cert-verify"]:void 0}}),a={type:"vless",name:a.name,server:a.server,port:a.port,user_id:a.uuid,security:a.cipher,tfo:a.tfo||a["fast-open"],legacy:a.legacy,udp_relay:a.udp||a.udp_relay||a.udp_relay,next_hop:a.next_hop,transport:a.transport});if(["http","socks5","ss","trojan","vless","vmess"].includes(i.type)){if(we(i,"shadow-tls-password")){if(i["shadow-tls-version"]!=3)throw new Error(`shadow-tls version ${i["shadow-tls-version"]} is not supported`);a.shadow_tls={password:i["shadow-tls-password"],sni:i["shadow-tls-sni"]}}else if(["shadow-tls"].includes(i.plugin)&&i["plugin-opts"]){if(i["plugin-opts"].version!=3)throw new Error(`shadow-tls version ${i["plugin-opts"].version} is not supported`);a.shadow_tls={password:i["plugin-opts"].password,sni:i["plugin-opts"].host}}}if(["ss"].includes(i.type)&&a.shadow_tls&&i["udp-port"]>0&&i["udp-port"]<=65535&&(a.udp_port=i["udp-port"]),delete a.subName,delete a.collectionName,delete a.id,delete a.resolved,delete a["no-resolve"],a.transport){for(let h in a.transport)(Object.keys(a.transport[h]).length===0||Object.values(a.transport[h]).every(m=>m==null))&&delete a.transport[h];Object.keys(a.transport).length===0&&delete a.transport}if(n!=="internal")for(let h in a)(a[h]==null||/^_/i.test(h))&&delete a[h];return{[a.type]:{...a,type:void 0,prev_hop:c}}});return n==="internal"?u:`proxies:
`+u.map(a=>"  - "+JSON.stringify(a)+`
`).join("")}}}function Kg(){return{type:"ALL",produce:(r,n)=>n==="internal"?r:JSON.stringify(r,null,2)}}var qc={qx:Vu(),QX:Vu(),QuantumultX:Vu(),surge:za(),Surge:za(),SurgeMac:qh(),Loon:Vh(),Clash:Uh(),meta:Vn(),clashmeta:Vn(),"clash.meta":Vn(),"Clash.Meta":Vn(),ClashMeta:Vn(),mihomo:Vn(),Mihomo:Vn(),uri:Ga(),URI:Ga(),v2:Uu(),v2ray:Uu(),V2Ray:Uu(),json:Kg(),JSON:Kg(),stash:Hc(),Stash:Hc(),shadowrocket:Ku(),Shadowrocket:Ku(),ShadowRocket:Ku(),surfboard:Lc(),Surfboard:Lc(),singbox:jc(),"sing-box":jc(),egern:Mc(),Egern:Mc()};var Xg=hi(Wu()),J4=String.raw`
// global initializer
{{
    function $set(obj, path, value) {
      if (Object(obj) !== obj) return obj;
      if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
      path
        .slice(0, -1)
        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
        path[path.length - 1]
      ] = value;
      return obj;
    }
}}

// per-parser initializer
{
    const proxy = {};
    const obfs = {};
    const $ = {};

    function handleWebsocket() {
        if (obfs.type === "ws") {
            proxy.network = "ws";
            $set(proxy, "ws-opts.path", obfs.path);
            $set(proxy, "ws-opts.headers", obfs['ws-headers']);
            if (proxy['ws-opts'] && proxy['ws-opts']['headers'] && proxy['ws-opts']['headers'].Host) {
                proxy['ws-opts']['headers'].Host = proxy['ws-opts']['headers'].Host.replace(/^"(.*)"$/, '$1')
            }
        }
    }
    function handleShadowTLS() {
        if (proxy['shadow-tls-password'] && !proxy['shadow-tls-version']) {
            proxy['shadow-tls-version'] = 2;
        }
    }
}

start = (shadowsocks/vmess/trojan/https/http/snell/socks5/socks5_tls/tuic/tuic_v5/wireguard/hysteria2/ssh/direct) {
    return proxy;
}

shadowsocks = tag equals "ss" address (method/passwordk/obfs/obfs_host/obfs_uri/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/udp_port/others)* {
    proxy.type = "ss";
    // handle obfs
    if (obfs.type == "http" || obfs.type === "tls") {
        proxy.plugin = "obfs";
        $set(proxy, "plugin-opts.mode", obfs.type);
        $set(proxy, "plugin-opts.host", obfs.host);
        $set(proxy, "plugin-opts.path", obfs.path);
    }
    handleShadowTLS();
}
vmess = tag equals "vmess" address (vmess_uuid/vmess_aead/ws/ws_path/ws_headers/method/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls/sni/tls_fingerprint/tls_verification/fast_open/tfo/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "vmess";
    proxy.cipher = proxy.cipher || "none";
    // Surfboard  Surge ,  Surfboard https://getsurfboard.com/docs/profile-format/proxy/external-proxy/vmess
    if (proxy.aead) {
        proxy.alterId = 0;
    } else {
        proxy.alterId = 1;
    }
    handleWebsocket();
    handleShadowTLS();
}
trojan = tag equals "trojan" address (passwordk/ws/ws_path/ws_headers/tls/sni/tls_fingerprint/tls_verification/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "trojan";
    handleWebsocket();
    handleShadowTLS();
}
https = tag equals "https" address (username password)? (usernamek passwordk)? (sni/tls_fingerprint/tls_verification/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "http";
    proxy.tls = true;
    handleShadowTLS();
}
http = tag equals "http" address (username password)? (usernamek passwordk)? (ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "http";
    handleShadowTLS();
}
ssh = tag equals "ssh" address (username password)? (usernamek passwordk)? (server_fingerprint/idle_timeout/private_key/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "ssh";
    handleShadowTLS();
}
snell = tag equals "snell" address (snell_version/snell_psk/obfs/obfs_host/obfs_uri/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/udp_relay/reuse/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "snell";
    // handle obfs
    if (obfs.type == "http" || obfs.type === "tls") {
        $set(proxy, "obfs-opts.mode", obfs.type);
        $set(proxy, "obfs-opts.host", obfs.host);
        $set(proxy, "obfs-opts.path", obfs.path);
    }
    handleShadowTLS();
}
tuic = tag equals "tuic" address (alpn/token/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls_fingerprint/tls_verification/sni/fast_open/tfo/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/others)* {
    proxy.type = "tuic";
    handleShadowTLS();
}
tuic_v5 = tag equals "tuic-v5" address (alpn/passwordk/uuidk/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls_fingerprint/tls_verification/sni/fast_open/tfo/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/others)* {
    proxy.type = "tuic";
    proxy.version = 5;
    handleShadowTLS();
}
wireguard = tag equals "wireguard" (section_name/no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "wireguard-surge";
    handleShadowTLS();
}
hysteria2 = tag equals "hysteria2" address (no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/sni/tls_verification/passwordk/tls_fingerprint/download_bandwidth/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/others)* {
    proxy.type = "hysteria2";
    handleShadowTLS();
}
socks5 = tag equals "socks5" address (username password)? (usernamek passwordk)? (udp_relay/no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "socks5";
    handleShadowTLS();
}
socks5_tls = tag equals "socks5-tls" address (username password)? (usernamek passwordk)? (udp_relay/no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/sni/tls_fingerprint/tls_verification/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "socks5";
    proxy.tls = true;
    handleShadowTLS();
}
direct = tag equals "direct" (udp_relay/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/block_quic/others)* {
    proxy.type = "direct";
}
address = comma server:server comma port:port {
    proxy.server = server;
    proxy.port = port;
}

server = ip/domain

ip = & {
    const start = peg$currPos;
    let j = start;
    while (j < input.length) {
        if (input[j] === ",") break;
        j++;
    }
    peg$currPos = j;
    $.ip = input.substring(start, j).trim();
    return true;
} { return $.ip; }

domain = match:[0-9a-zA-z-_.]+ { 
    const domain = match.join(""); 
    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
        return domain;
    }
}

port = digits:[0-9]+ { 
    const port = parseInt(digits.join(""), 10); 
    if (port >= 0 && port <= 65535) {
    	return port;
    }
}

port_hopping_interval = comma "port-hopping-interval" equals match:$[0-9]+ { proxy["hop-interval"] = parseInt(match.trim()); }

username = & {
    let j = peg$currPos; 
    let start, end;
    let first = true;
    while (j < input.length) {
        if (input[j] === ',') {
            if (first) {
                start = j + 1;
                first = false;
            } else {
                end = j;
                break;
            }
        }
        j++;
    }
    const match = input.substring(start, end);
    if (match.indexOf("=") === -1) {
        $.username = match;
        peg$currPos = end;
        return true;
    }
} { proxy.username = $.username.trim().replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
password = comma match:[^,]+ { proxy.password = match.join("").replace(/^"(.*)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }

tls = comma "tls" equals flag:bool { proxy.tls = flag; }
sni = comma "sni" equals sni:("off"/domain) { 
    if (sni === "off") {
        proxy["disable-sni"] = true;
    } else {
        proxy.sni = sni;
    }
}
tls_verification = comma "skip-cert-verify" equals flag:bool { proxy["skip-cert-verify"] = flag; }
tls_fingerprint = comma "server-cert-fingerprint-sha256" equals tls_fingerprint:$[^,]+ { proxy["tls-fingerprint"] = tls_fingerprint.trim(); }

snell_psk = comma "psk" equals match:[^,]+ { proxy.psk = match.join(""); }
snell_version = comma "version" equals match:$[0-9]+ { proxy.version = parseInt(match.trim()); }

usernamek = comma "username" equals match:[^,]+ { proxy.username = match.join("").replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
passwordk = comma "password" equals match:[^,]+ { proxy.password = match.join("").replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
vmess_uuid = comma "username" equals match:[^,]+ { proxy.uuid = match.join(""); }
vmess_aead = comma "vmess-aead" equals flag:bool { proxy.aead = flag; }

method = comma "encrypt-method" equals cipher:cipher {
    proxy.cipher = cipher;
}
cipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"bf-cfb"/"camellia-128-cfb"/"camellia-192-cfb"/"camellia-256-cfb"/"cast5-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"des-cfb"/"idea-cfb"/"none"/"rc2-cfb"/"rc4-md5"/"rc4"/"salsa20"/"seed-cfb"/"xchacha20-ietf-poly1305"/"2022-blake3-aes-128-gcm"/"2022-blake3-aes-256-gcm");

ws = comma "ws" equals flag:bool { obfs.type = "ws"; }
ws_headers = comma "ws-headers" equals headers:$[^,]+ {
    const pairs = headers.split("|");
    const result = {};
    pairs.forEach(pair => {
        const [key, value] = pair.trim().split(":");
        result[key.trim()] = value.trim().replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1');
    })
    obfs["ws-headers"] = result;
}
ws_path = comma "ws-path" equals path:uri { obfs.path = path.trim().replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }

obfs = comma "obfs" equals type:("http"/"tls") { obfs.type = type; }
obfs_host = comma "obfs-host" equals host:domain { obfs.host = host; };
obfs_uri = comma "obfs-uri" equals path:uri { obfs.path = path }
uri = $[^,]+

udp_relay = comma "udp-relay" equals flag:bool { proxy.udp = flag; }
fast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }
reuse = comma "reuse" equals flag:bool { proxy.reuse = flag; }
ecn = comma "ecn" equals flag:bool { proxy.ecn = flag; }
tfo = comma "tfo" equals flag:bool { proxy.tfo = flag; }
ip_version = comma "ip-version" equals match:[^,]+ { proxy["ip-version"] = match.join(""); }
section_name = comma "section-name" equals match:[^,]+ { proxy["section-name"] = match.join(""); }
no_error_alert = comma "no-error-alert" equals match:[^,]+ { proxy["no-error-alert"] = match.join(""); }
underlying_proxy = comma "underlying-proxy" equals match:[^,]+ { proxy["underlying-proxy"] = match.join(""); }
download_bandwidth = comma "download-bandwidth" equals match:[^,]+ { proxy.down = match.join(""); }
test_url = comma "test-url" equals match:[^,]+ { proxy["test-url"] = match.join(""); }
test_udp = comma "test-udp" equals match:[^,]+ { proxy["test-udp"] = match.join(""); }
test_timeout = comma "test-timeout" equals match:$[0-9]+ { proxy["test-timeout"] = parseInt(match.trim()); }
tos = comma "tos" equals match:$[0-9]+ { proxy.tos = parseInt(match.trim()); }
interface = comma "interface" equals match:[^,]+ { proxy.interface = match.join(""); }
allow_other_interface = comma "allow-other-interface" equals flag:bool { proxy["allow-other-interface"] = flag; }
hybrid = comma "hybrid" equals flag:bool { proxy.hybrid = flag; }
idle_timeout = comma "idle-timeout" equals match:$[0-9]+ { proxy["idle-timeout"] = parseInt(match.trim()); }
private_key = comma "private-key" equals match:[^,]+ { proxy["keystore-private-key"] = match.join("").replace(/^"(.*)"$/, '$1'); }
server_fingerprint = comma "server-fingerprint" equals match:[^,]+ { proxy["server-fingerprint"] = match.join("").replace(/^"(.*)"$/, '$1'); }
block_quic = comma "block-quic" equals match:[^,]+ { proxy["block-quic"] = match.join(""); }
udp_port = comma "udp-port" equals match:$[0-9]+ { proxy["udp-port"] = parseInt(match.trim()); }
shadow_tls_version = comma "shadow-tls-version" equals match:$[0-9]+ { proxy["shadow-tls-version"] = parseInt(match.trim()); }
shadow_tls_sni = comma "shadow-tls-sni" equals match:[^,]+ { proxy["shadow-tls-sni"] = match.join(""); }
shadow_tls_password = comma "shadow-tls-password" equals match:[^,]+ { proxy["shadow-tls-password"] = match.join("").replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
token = comma "token" equals match:[^,]+ { proxy.token = match.join(""); }
alpn = comma "alpn" equals match:[^,]+ { proxy.alpn = match.join(""); }
uuidk = comma "uuid" equals match:[^,]+ { proxy.uuid = match.join(""); }

tag = match:[^=,]* { proxy.name = match.join("").trim(); }
comma = _ "," _
equals = _ "=" _
_ = [ \r\t]*
bool = b:("true"/"false") { return b === "true" }
others = comma [^=,]+ equals [^=,]+
`,Yh;function Gn(){return Yh||(Yh=Xg.generate(J4)),Yh}var Zg=hi(Wu()),X4=String.raw`
// global initializer
{{
    function $set(obj, path, value) {
      if (Object(obj) !== obj) return obj;
      if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
      path
        .slice(0, -1)
        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
        path[path.length - 1]
      ] = value;
      return obj;
    }
}}

// per-parser initializer
{
    const proxy = {};
    const obfs = {};
    const transport = {};
    const $ = {};

    function handleTransport() {
        if (transport.type === "tcp") { /* do nothing */ }
        else if (transport.type === "ws") {
            proxy.network = "ws";
            $set(proxy, "ws-opts.path", transport.path);
            $set(proxy, "ws-opts.headers.Host", transport.host);
        } else if (transport.type === "http") {
            proxy.network = "http";
            $set(proxy, "http-opts.path", transport.path);
            $set(proxy, "http-opts.headers.Host", transport.host);
        }
    }
}

start = (shadowsocksr/shadowsocks/vmess/vless/trojan/https/http/socks5/hysteria2) {
    return proxy;
}

shadowsocksr = tag equals "shadowsocksr"i address method password (ssr_protocol/ssr_protocol_param/obfs_ssr/obfs_ssr_param/obfs_host/obfs_uri/fast_open/udp_relay/udp_port/shadow_tls_version/shadow_tls_sni/shadow_tls_password/ip_mode/block_quic/others)*{
    proxy.type = "ssr";
    // handle ssr obfs
    proxy.obfs = obfs.type;
}
shadowsocks = tag equals "shadowsocks"i address method password (obfs_typev obfs_hostv)? (obfs_ss/obfs_host/obfs_uri/fast_open/udp_relay/udp_port/shadow_tls_version/shadow_tls_sni/shadow_tls_password/ip_mode/block_quic/others)* {
    proxy.type = "ss";
    // handle ss obfs
    if (obfs.type == "http" || obfs.type === "tls") {
        proxy.plugin = "obfs";
        $set(proxy, "plugin-opts.mode", obfs.type);
        $set(proxy, "plugin-opts.host", obfs.host);
        $set(proxy, "plugin-opts.path", obfs.path);
    }
}
vmess = tag equals "vmess"i address method uuid (transport/transport_host/transport_path/over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/vmess_alterId/fast_open/udp_relay/ip_mode/public_key/short_id/block_quic/others)* {
    proxy.type = "vmess";
    proxy.cipher = proxy.cipher || "none";
    proxy.alterId = proxy.alterId || 0;
    handleTransport();
}
vless = tag equals "vless"i address uuid (transport/transport_host/transport_path/over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/flow/public_key/short_id/block_quic/others)* {
    proxy.type = "vless";
    handleTransport();
}
trojan = tag equals "trojan"i address password (transport/transport_host/transport_path/over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "trojan";
    handleTransport();
}
hysteria2 = tag equals "hysteria2"i address password (tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/udp_relay/fast_open/download_bandwidth/salamander_password/ecn/ip_mode/block_quic/others)* {
    proxy.type = "hysteria2";
}
https = tag equals "https"i address (username password)? (tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "http";
    proxy.tls = true;
}
http = tag equals "http"i address (username password)? (fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "http";
}
socks5 = tag equals "socks5"i address (username password)? (over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "socks5";
}

address = comma server:server comma port:port {
    proxy.server = server;
    proxy.port = port;
}

server = ip/domain

ip = & {
    const start = peg$currPos;
    let j = start;
    while (j < input.length) {
        if (input[j] === ",") break;
        j++;
    }
    peg$currPos = j;
    $.ip = input.substring(start, j).trim();
    return true;
} { return $.ip; }

domain = match:[0-9a-zA-z-_.]+ { 
    const domain = match.join(""); 
    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
        return domain;
    }
    throw new Error("Invalid domain: " + domain);
}

port = digits:[0-9]+ { 
    const port = parseInt(digits.join(""), 10); 
    if (port >= 0 && port <= 65535) {
    	return port;
    }
    throw new Error("Invalid port number: " + port);
}

method = comma cipher:cipher { 
    proxy.cipher = cipher;
}
cipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"auto"/"bf-cfb"/"camellia-128-cfb"/"camellia-192-cfb"/"camellia-256-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"none"/"rc4-md5"/"rc4"/"salsa20"/"xchacha20-ietf-poly1305"/"2022-blake3-aes-128-gcm"/"2022-blake3-aes-256-gcm");

username = & {
    let j = peg$currPos; 
    let start, end;
    let first = true;
    while (j < input.length) {
        if (input[j] === ',') {
            if (first) {
                start = j + 1;
                first = false;
            } else {
                end = j;
                break;
            }
        }
        j++;
    }
    const match = input.substring(start, end);
    if (match.indexOf("=") === -1) {
        $.username = match;
        peg$currPos = end;
        return true;
    }
} { proxy.username = $.username; }
password = comma '"' match:[^"]* '"' { proxy.password = match.join(""); }
uuid = comma '"' match:[^"]+ '"' { proxy.uuid = match.join(""); }

obfs_typev = comma type:("http"/"tls") { obfs.type = type; }
obfs_hostv = comma match:[^,]+ { obfs.host = match.join(""); }

obfs_ss = comma "obfs-name" equals type:("http"/"tls") { obfs.type = type; }

obfs_ssr = comma "obfs" equals type:("plain"/"http_simple"/"http_post"/"random_head"/"tls1.2_ticket_auth"/"tls1.2_ticket_fastauth") { obfs.type = type; }
obfs_ssr_param = comma "obfs-param" equals match:$[^,]+ { proxy["obfs-param"] = match; }

obfs_host = comma "obfs-host" equals host:domain { obfs.host = host; }
obfs_uri = comma "obfs-uri" equals uri:uri { obfs.path = uri; }
uri = $[^,]+

transport = comma "transport" equals type:("tcp"/"ws"/"http") { transport.type = type; }
transport_host = comma "host" equals host:domain { transport.host = host; }
transport_path = comma "path" equals path:uri { transport.path = path; }

ssr_protocol = comma "protocol" equals protocol:("origin"/"auth_sha1_v4"/"auth_aes128_md5"/"auth_aes128_sha1"/"auth_chain_a"/"auth_chain_b") { proxy.protocol = protocol; }
ssr_protocol_param = comma "protocol-param" equals param:$[^=,]+ { proxy["protocol-param"] = param; }

vmess_alterId = comma "alterId" equals alterId:$[0-9]+ { proxy.alterId = parseInt(alterId); } 

udp_port = comma "udp-port" equals match:$[0-9]+ { proxy["udp-port"] = parseInt(match.trim()); }
shadow_tls_version = comma "shadow-tls-version" equals match:$[0-9]+ { proxy["shadow-tls-version"] = parseInt(match.trim()); }
shadow_tls_sni = comma "shadow-tls-sni" equals match:[^,]+ { proxy["shadow-tls-sni"] = match.join(""); }
shadow_tls_password = comma "shadow-tls-password" equals match:[^,]+ { proxy["shadow-tls-password"] = match.join(""); }

over_tls = comma "over-tls" equals flag:bool { proxy.tls = flag; }
tls_name = comma sni:("tls-name") equals host:domain { proxy.sni = host; }
sni = comma sni:("sni") equals host:domain { proxy.sni = host; }
tls_verification = comma "skip-cert-verify" equals flag:bool { proxy["skip-cert-verify"] = flag; }
tls_cert_sha256 = comma "tls-cert-sha256" equals match:[^,]+ { proxy["tls-fingerprint"] = match.join("").replace(/^"(.*)"$/, '$1'); }
tls_pubkey_sha256 = comma "tls-pubkey-sha256" equals match:[^,]+ { proxy["tls-pubkey-sha256"] = match.join("").replace(/^"(.*)"$/, '$1'); }

flow = comma "flow" equals match:[^,]+ { proxy["flow"] = match.join("").replace(/^"(.*)"$/, '$1'); }
public_key = comma "public-key" equals match:[^,]+ { proxy["reality-opts"] = proxy["reality-opts"] || {}; proxy["reality-opts"]["public-key"] = match.join("").replace(/^"(.*)"$/, '$1'); }
short_id = comma "short-id" equals match:[^,]+ { proxy["reality-opts"] = proxy["reality-opts"] || {}; proxy["reality-opts"]["short-id"] = match.join("").replace(/^"(.*)"$/, '$1'); }

fast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }
udp_relay = comma "udp" equals flag:bool { proxy.udp = flag; }
ip_mode = comma "ip-mode" equals match:[^,]+ { proxy["ip-version"] = match.join(""); }

ecn = comma "ecn" equals flag:bool { proxy.ecn = flag; }
download_bandwidth = comma "download-bandwidth" equals match:[^,]+ { proxy.down = match.join(""); }
salamander_password = comma "salamander-password" equals match:[^,]+ { proxy['obfs-password'] = match.join(""); proxy.obfs = 'salamander'; }

block_quic = comma "block-quic" equals flag:bool { if(flag) proxy["block-quic"] = "on"; else proxy["block-quic"] = "off"; }

tag = match:[^=,]* { proxy.name = match.join("").trim(); }
comma = _ "," _
equals = _ "=" _
_ = [ \r\t]*
bool = b:("true"/"false") { return b === "true" }
others = comma [^=,]+ equals [^=,]+
`,Jh;function xi(){return Jh||(Jh=Zg.generate(X4)),Jh}var Qg=hi(Wu()),Z4=String.raw`
// global initializer
{{
    function $set(obj, path, value) {
      if (Object(obj) !== obj) return obj;
      if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
      path
        .slice(0, -1)
        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
        path[path.length - 1]
      ] = value;
      return obj;
    }
}}

// per-parse initializer
{
	const proxy = {};
    const obfs = {};
    const $ = {};

    function handleObfs() {
        if (obfs.type === "ws" || obfs.type === "wss") {
            proxy.network = "ws";
            if (obfs.type === 'wss') {
                proxy.tls = true;
            }
            $set(proxy, "ws-opts.path", obfs.path);
            $set(proxy, "ws-opts.headers.Host", obfs.host);
        } else if (obfs.type === "over-tls") {
            proxy.tls = true;
        } else if (obfs.type === "http") {
            proxy.network = "http";
            $set(proxy, "http-opts.path", obfs.path);
            $set(proxy, "http-opts.headers.Host", obfs.host);
        }
    }
}

start = (trojan/shadowsocks/vmess/vless/http/socks5) {
    return proxy
}

trojan = "trojan" equals address
    (password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/obfs/obfs_host/obfs_uri/tag/udp_relay/udp_over_tcp/fast_open/server_check_url/others)* {
    proxy.type = "trojan";
    handleObfs();
}

shadowsocks = "shadowsocks" equals address
    (password/method/obfs_ssr/obfs_ss/obfs_host/obfs_uri/ssr_protocol/ssr_protocol_param/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/udp_relay/udp_over_tcp_new/fast_open/tag/server_check_url/others)* {
    if (proxy.protocol || proxy.type === "ssr") {
        proxy.type = "ssr";
        if (!proxy.protocol) {
            proxy.protocol = "origin";
        }
        // handle ssr obfs
        if (obfs.host) proxy["obfs-param"] = obfs.host;
        if (obfs.type) proxy.obfs = obfs.type;
    } else {
        proxy.type = "ss";
        // handle ss obfs
        if (obfs.type == "http" || obfs.type === "tls") {
            proxy.plugin = "obfs";
            $set(proxy, "plugin-opts", {
                mode: obfs.type
            });
        } else if (obfs.type === "ws" || obfs.type === "wss") {
            proxy.plugin = "v2ray-plugin";
            $set(proxy, "plugin-opts.mode", "websocket");
            if (obfs.type === "wss") {
                $set(proxy, "plugin-opts.tls", true);
            }
        } else if (obfs.type === 'over-tls') {
            throw new Error('ss over-tls is not supported');
        }
        if (obfs.type) {
            $set(proxy, "plugin-opts.host", obfs.host);
            $set(proxy, "plugin-opts.path", obfs.path);
        }
    }
}

vmess = "vmess" equals address
    (uuid/method/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/obfs/obfs_host/obfs_uri/udp_relay/udp_over_tcp/fast_open/aead/server_check_url/others)* {
    proxy.type = "vmess";
    proxy.cipher = proxy.cipher || "none";
    if (proxy.aead === false) {
        proxy.alterId = 1;
    } else {
        proxy.alterId = 0;
    }
    handleObfs();
}

vless = "vless" equals address
    (uuid/method/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/obfs/obfs_host/obfs_uri/udp_relay/udp_over_tcp/fast_open/aead/server_check_url/others)* {
    proxy.type = "vless";
    proxy.cipher = proxy.cipher || "none";
    handleObfs();
}

http = "http" equals address 
    (username/password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/fast_open/udp_relay/udp_over_tcp/server_check_url/others)*{
    proxy.type = "http";
}

socks5 = "socks5" equals address
    (username/password/password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/fast_open/udp_relay/udp_over_tcp/server_check_url/others)* {
    proxy.type = "socks5";
}
    
address = server:server ":" port:port {
    proxy.server = server;
    proxy.port = port;
}
server = ip/domain

domain = match:[0-9a-zA-z-_.]+ { 
    const domain = match.join(""); 
    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
        return domain;
    }
}

ip = & {
    const start = peg$currPos;
    let end;
    let j = start;
    while (j < input.length) {
        if (input[j] === ",") break;
        if (input[j] === ":") end = j;
        j++;
    }
    peg$currPos = end || j;
    $.ip = input.substring(start, end).trim();
    return true;
} { return $.ip; }

port = digits:[0-9]+ { 
    const port = parseInt(digits.join(""), 10); 
    if (port >= 0 && port <= 65535) {
    	return port;
    }
}

username = comma "username" equals username:[^,]+ { proxy.username = username.join("").trim(); }
password = comma "password" equals password:[^,]+ { proxy.password = password.join("").trim(); }
uuid = comma "password" equals uuid:[^,]+ { proxy.uuid = uuid.join("").trim(); }

method = comma "method" equals cipher:cipher { 
    proxy.cipher = cipher;
};
cipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"bf-cfb"/"cast5-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"des-cfb"/"none"/"rc2-cfb"/"rc4-md5-6"/"rc4-md5"/"salsa20"/"xchacha20-ietf-poly1305"/"2022-blake3-aes-128-gcm"/"2022-blake3-aes-256-gcm");
aead = comma "aead" equals flag:bool { proxy.aead = flag; }

udp_relay = comma "udp-relay" equals flag:bool { proxy.udp = flag; }
udp_over_tcp = comma "udp-over-tcp" equals flag:bool { throw new Error("UDP over TCP is not supported"); }
udp_over_tcp_new = comma "udp-over-tcp" equals param:$[^=,]+ { if (param === "sp.v1") { proxy["udp-over-tcp"] = true; proxy["udp-over-tcp-version"] = 1; } else if (param === "sp.v2") { proxy["udp-over-tcp"] = true; proxy["udp-over-tcp-version"] = 2; } else if (param === "true") { proxy["_ssr_python_uot"] = true; } else { throw new Error("Invalid value for udp-over-tcp"); } }

fast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }

over_tls = comma "over-tls" equals flag:bool { proxy.tls = flag; }
tls_host = comma "tls-host" equals sni:domain { proxy.sni = sni; }
tls_verification = comma "tls-verification" equals flag:bool { 
    proxy["skip-cert-verify"] = !flag;
}
tls_fingerprint = comma "tls-cert-sha256" equals tls_fingerprint:$[^,]+ { proxy["tls-fingerprint"] = tls_fingerprint.trim(); }
tls_pubkey_sha256 = comma "tls-pubkey-sha256" equals param:$[^=,]+ { proxy["tls-pubkey-sha256"] = param; }
tls_alpn = comma "tls-alpn" equals param:$[^=,]+ { proxy["tls-alpn"] = param; }
tls_no_session_ticket = comma "tls-no-session-ticket" equals flag:bool { 
    proxy["tls-no-session-ticket"] = flag;
}
tls_no_session_reuse = comma "tls-no-session-reuse" equals flag:bool { 
    proxy["tls-no-session-reuse"] = flag;
}

obfs_ss = comma "obfs" equals type:("http"/"tls"/"wss"/"ws"/"over-tls") { obfs.type = type; return type; }
obfs_ssr = comma "obfs" equals type:("plain"/"http_simple"/"http_post"/"random_head"/"tls1.2_ticket_auth"/"tls1.2_ticket_fastauth") { proxy.type = "ssr"; obfs.type = type; return type; }
obfs = comma "obfs" equals type:("wss"/"ws"/"over-tls"/"http") { obfs.type = type; return type; };

obfs_host = comma "obfs-host" equals host:domain { obfs.host = host; }
obfs_uri = comma "obfs-uri" equals uri:uri { obfs.path = uri; }

ssr_protocol = comma "ssr-protocol" equals protocol:("origin"/"auth_sha1_v4"/"auth_aes128_md5"/"auth_aes128_sha1"/"auth_chain_a"/"auth_chain_b") { proxy.protocol = protocol; return protocol; }
ssr_protocol_param = comma "ssr-protocol-param" equals param:$[^=,]+ { proxy["protocol-param"] = param; }

server_check_url = comma "server_check_url" equals param:$[^=,]+ { proxy["test-url"] = param; }

uri = $[^,]+

tag = comma "tag" equals tag:[^=,]+ { proxy.name = tag.join(""); }
others = comma [^=,]+ equals [^=,]+
comma = _ "," _
equals = _ "=" _
_ = [ \r\t]*
bool = b:("true"/"false") { return b === "true" }
`,Xh;function es(){return Xh||(Xh=Qg.generate(Z4)),Xh}var ev=hi(Wu()),Q4=String.raw`
// global initializer
{{
  function $set(obj, path, value) {
    if (Object(obj) !== obj) return obj;
    if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
    path
      .slice(0, -1)
      .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
      path[path.length - 1]
    ] = value;
    return obj;
  }

  function toBool(str) {
    if (typeof str === 'undefined' || str === null) return undefined;
    return /(TRUE)|1/i.test(str);
  }
}}

{
  const proxy = {};
  const obfs = {};
  const $ = {};
  const params = {};
}

start = (trojan) {
  return proxy
}

trojan = "trojan://" password:password "@" server:server ":" port:port "/"? params? name:name?{
  proxy.type = "trojan";
  proxy.password = password;
  proxy.server = server;
  proxy.port = port;
  proxy.name = name;

  // name may be empty
  if (!proxy.name) {
    proxy.name = server + ":" + port;
  }
};

password = match:$[^@]+ {
  return decodeURIComponent(match);
};

server = ip/domain;

domain = match:[0-9a-zA-z-_.]+ { 
  const domain = match.join(""); 
  if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
    return domain;
  }
}

ip = & {
  const start = peg$currPos;
  let end;
  let j = start;
  while (j < input.length) {
    if (input[j] === ",") break;
    if (input[j] === ":") end = j;
    j++;
  }
  peg$currPos = end || j;
  $.ip = input.substring(start, end).trim();
  return true;
} { return $.ip; }

port = digits:[0-9]+ { 
  const port = parseInt(digits.join(""), 10); 
  if (port >= 0 && port <= 65535) {
    return port;
  } else {
    throw new Error("Invalid port: " + port);
  }
}

params = "?" head:param tail:("&"@param)* {
  for (const [key, value] of Object.entries(params)) {
    params[key] = decodeURIComponent(value);
  }
  proxy["skip-cert-verify"] = toBool(params["allowInsecure"]);
  proxy.sni = params["sni"] || params["peer"];
  proxy['client-fingerprint'] = params.fp;
  proxy.alpn = params.alpn ? decodeURIComponent(params.alpn).split(',') : undefined;

  if (toBool(params["ws"])) {
    proxy.network = "ws";
    $set(proxy, "ws-opts.path", params["wspath"]);
  }
  
  if (params["type"]) {
    let httpupgrade
    proxy.network = params["type"]
    if(proxy.network === 'httpupgrade') {
      proxy.network = 'ws'
      httpupgrade = true
    }
    if (['grpc'].includes(proxy.network)) {
        proxy[proxy.network + '-opts'] = {
            'grpc-service-name': params["serviceName"],
            '_grpc-type': params["mode"],
            '_grpc-authority': params["authority"],
        };
    } else {
      if (params["path"]) {
        $set(proxy, proxy.network+"-opts.path", decodeURIComponent(params["path"]));  
      }
      if (params["host"]) {
        $set(proxy, proxy.network+"-opts.headers.Host", decodeURIComponent(params["host"])); 
      }
      if (httpupgrade) {
        $set(proxy, proxy.network+"-opts.v2ray-http-upgrade", true); 
        $set(proxy, proxy.network+"-opts.v2ray-http-upgrade-fast-open", true); 
      }
    }
    if (['reality'].includes(params.security)) {
      const opts = {};
      if (params.pbk) {
        opts['public-key'] = params.pbk;
      }
      if (params.sid) {
        opts['short-id'] = params.sid;
      }
      if (params.spx) {
        opts['_spider-x'] = params.spx;
      }
      if (params.mode) {
        proxy._mode = params.mode;
      }
      if (params.extra) {
        proxy._extra = params.extra;
      }
      if (Object.keys(opts).length > 0) {
        $set(proxy, params.security+"-opts", opts); 
      }
    }
  }

  proxy.udp = toBool(params["udp"]);
  proxy.tfo = toBool(params["tfo"]);
}

param = kv/single;

kv = key:$[a-z]i+ "=" value:$[^&#]i* {
  params[key] = value;
}

single = key:$[a-z]i+ {
  params[key] = true;
};

name = "#" + match:$.* {
  return decodeURIComponent(match);
}
`,Zh;function Qh(){return Zh||(Zh=ev.generate(Q4)),Zh}var np=hi(rp());function tv(e){let[t,r]=e.match(/,\s*?port-hopping\s*?=\s*?["']?\s*?((\d+(-\d+)?)([,;]\d+(-\d+)?)*)\s*?["']?\s*?/)||[];return{port_hopping:r?r.replace(/;/g,","):void 0,line:t?e.replace(t,""):e}}function eF(){return{name:"URI PROXY Parser",test:n=>/^(socks5\+tls|socks5|http|https):\/\//.test(n),parse:n=>{let[u,a,i,c,h,m,S,E,v]=n.match(/^(socks5|http|http)(\+tls|s)?:\/\/(?:(.*?):(.*?)@)?(.*?)(?::(\d+?))?(\?.*?)?(?:#(.*?))?$/);if(S)S=parseInt(S,10);else{if(i)S=443;else if(a==="http")S=80;else throw Gt.error(`port is not present in line: ${n}`),new Error(`port is not present in line: ${n}`);Gt.info(`port is not present in line: ${n}, set to ${S}`)}return{name:v!=null?decodeURIComponent(v):`${a} ${m}:${S}`,type:a,tls:!!i,server:m,port:S,username:c!=null?decodeURIComponent(c):void 0,password:h!=null?decodeURIComponent(h):void 0}}}}function tF(){return{name:"URI SOCKS Parser",test:n=>/^socks:\/\//.test(n),parse:n=>{let[u,a,i,c,h,m,S]=n.match(/^(socks)?:\/\/(?:(.*)@)?(.*?)(?::(\d+?))?(\?.*?)?(?:#(.*?))?$/);if(h)h=parseInt(h,10);else throw Gt.error(`port is not present in line: ${n}`),new Error(`port is not present in line: ${n}`);let E,v;if(i){let b=Wt.decode(decodeURIComponent(i)).split(":");E=b[0],v=b[1]}return{name:S!=null?decodeURIComponent(S):`${a} ${c}:${h}`,type:"socks5",server:c,port:h,username:E,password:v}}}}function rF(){return{name:"URI SS Parser",test:n=>/^ss:\/\//.test(n),parse:n=>{let u=n.split("ss://")[1],a=n.split("#")[1],i={type:"ss"};u=u.split("#")[0];let c=u.match(/@([^/?]*)(\/|\?|$)/),h=decodeURIComponent(u.split("@")[0]),m;h?.startsWith("2022-blake3-")?m=h:m=Wt.decode(h);let S="";if(c)u.includes("?")&&(S=u.match(/(\?.*)$/)[1]);else{if(u.includes("?")){let _=u.match(/^(.*)(\?.*)$/);u=_[1],S=_[2]}if(u=Wt.decode(u),S){if(/(&|\?)v2ray-plugin=/.test(S)){let A=S.match(/(&|\?)v2ray-plugin=(.*?)(&|$)/)[2];A&&(i.plugin="v2ray-plugin",i["plugin-opts"]=JSON.parse(Wt.decode(A)))}u=`${u}${S}`}m=u.match(/(^.*)@/)?.[1],c=u.match(/@([^/@]*)(\/|$)/)}let E=c[1],v=E.lastIndexOf(":");i.server=E.substring(0,v),i.port=`${E.substring(v+1)}`.match(/\d+/)?.[0];let g=m.match(/(^.*?):(.*$)/);i.cipher=g?.[1],i.password=g?.[2];let b=u.match(/[?&]plugin=([^&]+)/),w=u.match(/[?&]shadow-tls=([^&]+)/);if(b){let _=("plugin="+decodeURIComponent(b[1])).split(";"),A={};for(let C of _){let[x,N]=C.split("=");x&&(A[x]=N||!0)}switch(A.plugin){case"obfs-local":case"simple-obfs":i.plugin="obfs",i["plugin-opts"]={mode:A.obfs,host:pr(A["obfs-host"])};break;case"v2ray-plugin":i.plugin="v2ray-plugin",i["plugin-opts"]={mode:"websocket",host:pr(A["obfs-host"]),path:pr(A.path),tls:Na(A.tls)};break;case"shadow-tls":{i.plugin="shadow-tls";let C=pr(A.version);i["plugin-opts"]={host:pr(A.host),password:pr(A.password),version:C?parseInt(C,10):void 0};break}default:throw new Error(`Unsupported plugin option: ${A.plugin}`)}}if(w){let _=JSON.parse(Wt.decode(w[1])),A=pr(_.version),C=pr(_.address),x=pr(_.port);i.plugin="shadow-tls",i["plugin-opts"]={host:pr(_.host),password:pr(_.password),version:A?parseInt(A,10):void 0},C&&(i.server=C),x&&(i.port=parseInt(x,10))}return/(&|\?)uot=(1|true)/i.test(S)&&(i["udp-over-tcp"]=!0),/(&|\?)tfo=(1|true)/i.test(S)&&(i.tfo=!0),a!=null&&(a=decodeURIComponent(a)),i.name=a??`SS ${i.server}:${i.port}`,i}}}function nF(){return{name:"URI SSR Parser",test:n=>/^ssr:\/\//.test(n),parse:n=>{n=Wt.decode(n.split("ssr://")[1]);let u=n.indexOf(":origin");u===-1&&(u=n.indexOf(":auth_"));let a=n.substring(0,u),i=a.substring(0,a.lastIndexOf(":")),c=a.substring(a.lastIndexOf(":")+1),h=n.substring(u+1).split("/?")[0].split(":"),m={type:"ssr",server:i,port:c,protocol:h[0],cipher:h[1],obfs:h[2],password:Wt.decode(h[3])},S={};if(n=n.split("/?")[1].split("&"),n.length>1)for(let E of n){let[v,g]=E.split("=");g=g.trim(),g.length>0&&g!=="(null)"&&(S[v]=g)}return m={...m,name:S.remarks?Wt.decode(S.remarks):m.server,"protocol-param":pr(Wt.decode(S.protoparam||"").replace(/\s/g,"")),"obfs-param":pr(Wt.decode(S.obfsparam||"").replace(/\s/g,""))},m}}}function iF(){return{name:"URI VMess Parser",test:n=>/^vmess:\/\//.test(n),parse:n=>{n=n.split("vmess://")[1];let u=Wt.decode(n.replace(/\?.*?$/,""));if(/=\s*vmess/.test(u)){let a=u.split(",").map(h=>h.trim()),i={};for(let h of a)if(h.indexOf("=")!==-1){let[m,S]=h.split("=");i[m.trim()]=S.trim()}let c={name:a[0].split("=")[0].trim(),type:"vmess",server:a[1],port:a[2],cipher:pr(a[3],"auto"),uuid:a[4].match(/^"(.*)"$/)[1],tls:i.obfs==="wss",udp:Na(i["udp-relay"]),tfo:Na(i["fast-open"]),"skip-cert-verify":we(i["tls-verification"])?!i["tls-verification"]:void 0};if(we(i.obfs))if(i.obfs==="ws"||i.obfs==="wss"){c.network="ws",c["ws-opts"].path=(pr(i["obfs-path"])||'"/"').match(/^"(.*)"$/)[1];let h=i["obfs-header"];h&&h.indexOf("Host")!==-1&&(h=h.match(/Host:\s*([a-zA-Z0-9-.]*)/)[1]),$i(h)&&(c["ws-opts"].headers={Host:h})}else throw new Error(`Unsupported obfs: ${i.obfs}`);return c}else{let a={};try{a=JSON.parse(u)}catch{let[E,v,g]=/(^[^?]+?)\/?\?(.*)$/.exec(n);u=Wt.decode(v);for(let x of g.split("&")){let[N,H]=x.split("="),ne=H;ne=decodeURIComponent(H),ne.indexOf(",")===-1?a[N]=ne:a[N]=ne.split(",")}let[b,w,_,A,C]=/(^[^:]+?):([^:]+?)@(.*):(\d+)$/.exec(u);a.scy=w,a.id=_,a.port=C,a.add=A}let i=a.add,c=parseInt(Na(a.port),10),h={name:a.ps??a.remarks??a.remark??`VMess ${i}:${c}`,type:"vmess",server:i,port:c,cipher:["auto","aes-128-gcm","chacha20-poly1305","none"].includes(a.scy)?a.scy:"auto",uuid:a.id,alterId:parseInt(Na(a.aid??a.alterId,0),10),tls:["tls",!0,1,"1"].includes(a.tls),"skip-cert-verify":we(a.verify_cert)?!a.verify_cert:void 0};!h["skip-cert-verify"]&&we(a.allowInsecure)&&(h["skip-cert-verify"]=/(TRUE)|1/i.test(a.allowInsecure)),h.tls&&(a.sni&&a.sni!==""?h.sni=a.sni:a.peer&&a.peer!==""&&(h.sni=a.peer));let m=!1;if(a.net==="ws"||a.obfs==="websocket"?h.network="ws":["http"].includes(a.net)||["http"].includes(a.obfs)||["http"].includes(a.type)?h.network="http":["grpc","kcp","quic"].includes(a.net)?h.network=a.net:a.net==="httpupgrade"||h.network==="httpupgrade"?(h.network="ws",m=!0):(a.net==="h2"||h.network==="h2")&&(h.network="h2"),h.network){let S=a.host??a.obfsParam;try{let g=JSON.parse(S)?.Host;g&&(S=g)}catch{}let E=a.path;if(["ws"].includes(h.network)&&(E=E||"/"),h.network==="http"&&(S&&(S=S.split(",").map(v=>v.trim()),S=Array.isArray(S)?S[0]:S),E?E=Array.isArray(E)?E[0]:E:E="/"),E||S||["kcp","quic"].includes(h.network))if(["grpc"].includes(h.network))h[`${h.network}-opts`]={"grpc-service-name":pr(E),"_grpc-type":pr(a.type),"_grpc-authority":pr(a.authority)};else if(["kcp","quic"].includes(h.network))h[`${h.network}-opts`]={[`_${h.network}-type`]:pr(a.type),[`_${h.network}-host`]:pr(pr(S)),[`_${h.network}-path`]:pr(E)};else{let v={path:pr(E),headers:{Host:pr(S)}};m&&(v["v2ray-http-upgrade"]=!0,v["v2ray-http-upgrade-fast-open"]=!0),h[`${h.network}-opts`]=v}else delete h.network}return h["client-fingerprint"]=a.fp,h.alpn=a.alpn?a.alpn.split(","):void 0,h}}}}function rv(){return{name:"URI VLESS Parser",test:n=>/^vless:\/\//.test(n),parse:n=>{n=n.split("vless://")[1];let u,a=/^(.*?)@(.*?):(\d+)\/?(\?(.*?))?(?:#(.*?))?$/.exec(n);if(!a){let[_,A,C]=/^(.*?)(\?.*?$)/.exec(n);n=`${Wt.decode(A)}${C}`,a=/^(.*?)@(.*?):(\d+)\/?(\?(.*?))?(?:#(.*?))?$/.exec(n),u=!0}let[i,c,h,m,S,E="",v]=a;u&&(c=c.replace(/^.*?:/g,"")),m=parseInt(`${m}`,10),c=decodeURIComponent(c),v!=null&&(v=decodeURIComponent(v));let g={type:"vless",name:v,server:h,port:m,uuid:c},b={};for(let _ of E.split("&"))if(_){let[A,C]=_.split("="),x=C;x=decodeURIComponent(C),b[A]=x}if(g.name=v??b.remarks??b.remark??`VLESS ${h}:${m}`,g.tls=b.security&&b.security!=="none",u&&/TRUE|1/i.test(b.tls)&&(g.tls=!0,b.security=b.security??"reality"),g.sni=b.sni||b.peer,g.flow=b.flow,!g.flow&&u&&b.xtls){let _=[void 0,"xtls-rprx-direct","xtls-rprx-vision"][b.xtls];_&&(g.flow=_)}if(g["client-fingerprint"]=b.fp,g.alpn=b.alpn?b.alpn.split(","):void 0,g["skip-cert-verify"]=/(TRUE)|1/i.test(b.allowInsecure),["reality"].includes(b.security)){let _={};b.pbk&&(_["public-key"]=b.pbk),b.sid&&(_["short-id"]=b.sid),b.spx&&(_["_spider-x"]=b.spx),Object.keys(_).length>0&&(g[`${b.security}-opts`]=_)}let w=!1;if(g.network=b.type,g.network==="tcp"&&b.headerType==="http"?g.network="http":g.network==="httpupgrade"&&(g.network="ws",w=!0),!g.network&&u&&b.obfs&&(g.network=b.obfs,["none"].includes(g.network)&&(g.network="tcp")),["websocket"].includes(g.network)&&(g.network="ws"),g.network&&!["tcp","none"].includes(g.network)){let _={},A=b.host??b.obfsParam;if(A)if(b.obfsParam)try{let C=JSON.parse(A);_.headers=C}catch{_.headers={Host:A}}else _.headers={Host:A};b.serviceName?(_[`${g.network}-service-name`]=b.serviceName,["grpc"].includes(g.network)&&b.authority&&(_["_grpc-authority"]=b.authority)):u&&b.path&&(["ws","http","h2"].includes(g.network)||(_[`${g.network}-service-name`]=b.path,delete b.path)),b.path&&(_.path=b.path),["grpc"].includes(g.network)&&(_["_grpc-type"]=b.mode||"gun"),w&&(_["v2ray-http-upgrade"]=!0,_["v2ray-http-upgrade-fast-open"]=!0),Object.keys(_).length>0&&(g[`${g.network}-opts`]=_),g.network==="kcp"&&(b.seed&&(g.seed=b.seed),g.headerType=b.headerType||"none"),b.mode&&(g._mode=b.mode),b.extra&&(g._extra=b.extra)}return g}}}function sF(){return{name:"URI AnyTLS Parser",test:n=>/^anytls:\/\//.test(n),parse:n=>{let u=rv().parse(n.replace("anytls","vless"));n=n.split(/anytls:\/\//)[1];let[a,i,c,h,m="",S]=/^(.*?)@(.*?)(?::(\d+))?\/?(?:\?(.*?))?(?:#(.*?))?$/.exec(n);i=decodeURIComponent(i),h=parseInt(`${h}`,10),isNaN(h)&&(h=443),i=decodeURIComponent(i),S!=null&&(S=decodeURIComponent(S)),S=S??`AnyTLS ${c}:${h}`;let E={...u,uuid:void 0,type:"anytls",name:S,server:c,port:h,password:i};for(let v of m.split("&"))if(v){let[g,b]=v.split("=");g=g.replace(/_/g,"-"),b=decodeURIComponent(b),["alpn"].includes(g)?E[g]=b?b.split(","):void 0:["insecure"].includes(g)?E["skip-cert-verify"]=/(TRUE)|1/i.test(b):["udp"].includes(g)?E[g]=/(TRUE)|1/i.test(b):Object.keys(E).includes(g)||(E[g]=b)}return["tcp"].includes(E.network)&&!E["reality-opts"]&&(delete E.network,delete E.security),E}}}function aF(){return{name:"URI Hysteria2 Parser",test:n=>/^(hysteria2|hy2):\/\//.test(n),parse:n=>{n=n.split(/(hysteria2|hy2):\/\//)[2];let u,[a,i,c,h,m,S,E,v,g,b,w="",_]=/^(.*?)@(.*?)(:((\d+(-\d+)?)([,;]\d+(-\d+)?)*))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(n);/^\d+$/.test(m)?(m=parseInt(`${m}`,10),isNaN(m)&&(m=443)):m?(u=m,m=xu(u)):m=443,i=decodeURIComponent(i),_!=null&&(_=decodeURIComponent(_)),_=_??`Hysteria2 ${c}:${m}`;let A={type:"hysteria2",name:_,server:c,port:m,ports:u,password:i},C={};for(let H of w.split("&"))if(H){let[ne,pe]=H.split("="),P=pe;P=decodeURIComponent(pe),C[ne]=P}A.sni=C.sni,!A.sni&&C.peer&&(A.sni=C.peer),C.obfs&&C.obfs!=="none"&&(A.obfs=C.obfs),C.mport&&(A.ports=C.mport),A["obfs-password"]=C["obfs-password"],A["skip-cert-verify"]=/(TRUE)|1/i.test(C.insecure),A.tfo=/(TRUE)|1/i.test(C.fastopen),A["tls-fingerprint"]=C.pinSHA256;let x=C["hop-interval"]||C.hop_interval;/^\d+$/.test(x)&&(A["hop-interval"]=parseInt(`${x}`,10));let N=C.keepalive;return/^\d+$/.test(N)&&(A.keepalive=parseInt(`${N}`,10)),A}}}function uF(){return{name:"URI Hysteria Parser",test:n=>/^(hysteria|hy):\/\//.test(n),parse:n=>{n=n.split(/(hysteria|hy):\/\//)[2];let[u,a,i,c,h,m="",S]=/^(.*?)(:(\d+))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(n);c=parseInt(`${c}`,10),isNaN(c)&&(c=443),S!=null&&(S=decodeURIComponent(S)),S=S??`Hysteria ${a}:${c}`;let E={type:"hysteria",name:S,server:a,port:c},v={};for(let g of m.split("&"))if(g){let[b,w]=g.split("=");b=b.replace(/_/,"-"),w=decodeURIComponent(w),["alpn"].includes(b)?E[b]=w?w.split(","):void 0:["insecure"].includes(b)?E["skip-cert-verify"]=/(TRUE)|1/i.test(w):["auth"].includes(b)?E["auth-str"]=w:["mport"].includes(b)?E.ports=w:["obfsParam"].includes(b)?E.obfs=w:["upmbps"].includes(b)?E.up=w:["downmbps"].includes(b)?E.down=w:["obfs"].includes(b)?E._obfs=w||"":["fast-open","peer"].includes(b)?v[b]=w:Object.keys(E).includes(b)||(E[b]=w)}return!E.sni&&v.peer&&(E.sni=v.peer),!E["fast-open"]&&v.fastopen&&(E["fast-open"]=!0),E.protocol||(E.protocol="udp"),E}}}function oF(){return{name:"URI TUIC Parser",test:n=>/^tuic:\/\//.test(n),parse:n=>{n=n.split(/tuic:\/\//)[1];let[u,a,i,c,h="",m]=/^(.*?)@(.*?)(?::(\d+))?\/?(?:\?(.*?))?(?:#(.*?))?$/.exec(n);a=decodeURIComponent(a);let[S,...E]=a.split(":"),v=E.join(":");c=parseInt(`${c}`,10),isNaN(c)&&(c=443),v=decodeURIComponent(v),m!=null&&(m=decodeURIComponent(m)),m=m??`TUIC ${i}:${c}`;let g={type:"tuic",name:m,server:i,port:c,password:v,uuid:S};for(let b of h.split("&"))if(b){let[w,_]=b.split("=");w=w.replace(/_/g,"-"),_=decodeURIComponent(_),["alpn"].includes(w)?g[w]=_?_.split(","):void 0:["allow-insecure","insecure"].includes(w)?g["skip-cert-verify"]=/(TRUE)|1/i.test(_):["fast-open"].includes(w)?g.tfo=!0:["disable-sni","reduce-rtt"].includes(w)?g[w]=/(TRUE)|1/i.test(_):w==="congestion-control"?(g["congestion-controller"]=_,delete g[w]):Object.keys(g).includes(w)||(g[w]=_)}return g}}}function cF(){return{name:"URI WireGuard Parser",test:n=>/^(wireguard|wg):\/\//.test(n),parse:n=>{n=n.split(/(wireguard|wg):\/\//)[2];let[u,a,i,c,h,m,S,E="",v]=/^((.*?)@)?(.*?)(:(\d+))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(n);m=parseInt(`${m}`,10),isNaN(m)&&(m=51820),i=decodeURIComponent(i),v!=null&&(v=decodeURIComponent(v)),v=v??`WireGuard ${c}:${m}`;let g={type:"wireguard",name:v,server:c,port:m,"private-key":i,udp:!0};for(let b of E.split("&"))if(b){let[w,_]=b.split("=");if(w=w.replace(/_/,"-"),_=decodeURIComponent(_),["reserved"].includes(w)){let A=_.split(",").map(C=>parseInt(C.trim(),10)).filter(C=>Number.isInteger(C));A.length===3&&(g[w]=A)}else if(["address","ip"].includes(w))_.split(",").map(A=>{let C=A.trim().replace(/\/\d+$/,"").replace(/^\[/,"").replace(/\]$/,"");Un(C)?g.ip=C:wn(C)&&(g.ipv6=C)});else if(["mtu"].includes(w)){let A=parseInt(_.trim(),10);Number.isInteger(A)&&(g[w]=A)}else/publickey/i.test(w)?g["public-key"]=_:/privatekey/i.test(w)?g["private-key"]=_:["udp"].includes(w)?g[w]=/(TRUE)|1/i.test(_):[...Object.keys(g),"flag"].includes(w)||(g[w]=_)}return g}}}function lF(){return{name:"URI Trojan Parser",test:n=>/^trojan:\/\//.test(n),parse:n=>{let u=/^(trojan:\/\/.*?@.*?)(:(\d+))?\/?(\?.*?)?$/.exec(n);u?.[2]||(n=n.replace(u[1],`${u[1]}:443`));let[i,c]=n.split(/#(.+)/,2),m=Qh().parse(i);if($i(c))try{m.name=decodeURIComponent(c)}catch(S){console.log(S)}return m}}}function fF(){return{name:"Clash Parser",test:n=>{let u;try{u=np.default.parse(n)}catch{u=Mh.parse(n)}return!!u?.type},parse:n=>{let u;try{u=np.default.parse(n)}catch{u=Mh.parse(n)}if(!["anytls","mieru","juicity","ss","ssr","vmess","socks5","http","snell","trojan","tuic","vless","hysteria","hysteria2","wireguard","ssh","direct"].includes(u.type))throw new Error(`Clash does not support proxy with type: ${u.type}`);return["vmess","vless"].includes(u.type)&&(u.sni=u.servername,delete u.servername),u["server-cert-fingerprint"]&&(u["tls-fingerprint"]=u["server-cert-fingerprint"]),u.fingerprint&&(u["tls-fingerprint"]=u.fingerprint),u["dialer-proxy"]&&(u["underlying-proxy"]=u["dialer-proxy"]),u["benchmark-url"]&&(u["test-url"]=u["benchmark-url"]),u["benchmark-timeout"]&&(u["test-timeout"]=u["benchmark-timeout"]),u}}}function hF(){return{name:"QX SS Parser",test:n=>/^shadowsocks\s*=/.test(n.split(",")[0].trim())&&n.indexOf("ssr-protocol")===-1,parse:n=>es().parse(n)}}function pF(){return{name:"QX SSR Parser",test:n=>/^shadowsocks\s*=/.test(n.split(",")[0].trim())&&n.indexOf("ssr-protocol")!==-1,parse:n=>es().parse(n)}}function dF(){return{name:"QX VMess Parser",test:n=>/^vmess\s*=/.test(n.split(",")[0].trim()),parse:n=>es().parse(n)}}function gF(){return{name:"QX VLESS Parser",test:n=>/^vless\s*=/.test(n.split(",")[0].trim()),parse:n=>es().parse(n)}}function vF(){return{name:"QX Trojan Parser",test:n=>/^trojan\s*=/.test(n.split(",")[0].trim()),parse:n=>es().parse(n)}}function mF(){return{name:"QX HTTP Parser",test:n=>/^http\s*=/.test(n.split(",")[0].trim()),parse:n=>es().parse(n)}}function wF(){return{name:"QX Socks5 Parser",test:n=>/^socks5\s*=/.test(n.split(",")[0].trim()),parse:n=>es().parse(n)}}function bF(){return{name:"Loon SS Parser",test:n=>n.split(",")[0].split("=")[1].trim().toLowerCase()==="shadowsocks",parse:n=>xi().parse(n)}}function AF(){return{name:"Loon SSR Parser",test:n=>n.split(",")[0].split("=")[1].trim().toLowerCase()==="shadowsocksr",parse:n=>xi().parse(n)}}function EF(){return{name:"Loon VMess Parser",test:n=>/^.*=\s*vmess/i.test(n.split(",")[0])&&n.indexOf("username")===-1,parse:n=>xi().parse(n)}}function SF(){return{name:"Loon Vless Parser",test:n=>/^.*=\s*vless/i.test(n.split(",")[0]),parse:n=>xi().parse(n)}}function _F(){return{name:"Loon Trojan Parser",test:n=>/^.*=\s*trojan/i.test(n.split(",")[0]),parse:n=>xi().parse(n)}}function yF(){return{name:"Loon Hysteria2 Parser",test:n=>/^.*=\s*Hysteria2/i.test(n.split(",")[0]),parse:n=>xi().parse(n)}}function DF(){return{name:"Loon HTTP Parser",test:n=>/^.*=\s*http/i.test(n.split(",")[0]),parse:n=>xi().parse(n)}}function FF(){return{name:"Loon SOCKS5 Parser",test:n=>/^.*=\s*socks5/i.test(n.split(",")[0]),parse:n=>xi().parse(n)}}function CF(){return{name:"Loon WireGuard Parser",test:n=>/^.*=\s*wireguard/i.test(n.split(",")[0]),parse:n=>{let u=n.match(/(^.*?)\s*?=\s*?wireguard\s*?,.+?\s*?=\s*?.+?/i)?.[1];n=n.replace(u,"").replace(/^\s*?=\s*?wireguard\s*/i,"");let a=n.match(/,\s*?peers\s*?=\s*?\[\s*?\{\s*?(.+?)\s*?\}\s*?\]/i)?.[1],i=a.match(/(,|^)\s*?endpoint\s*?=\s*?"?(.+?):(\d+)"?\s*?(,|$)/i),c=i?.[2],h=parseInt(i?.[3],10),m=n.match(/(,|^)\s*?mtu\s*?=\s*?"?(\d+?)"?\s*?(,|$)/i)?.[2];m&&(m=parseInt(m,10));let S=n.match(/(,|^)\s*?keepalive\s*?=\s*?"?(\d+?)"?\s*?(,|$)/i)?.[2];S&&(S=parseInt(S,10));let E=a.match(/(,|^)\s*?reserved\s*?=\s*?"?(\[\s*?.+?\s*?\])"?\s*?(,|$)/i)?.[2];E&&(E=JSON.parse(E));let v,g=n.match(/(,|^)\s*?dns\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],b=n.match(/(,|^)\s*?dnsv6\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2];(g||b)&&(v=[],g&&v.push(g),b&&v.push(b));let w=a.match(/(,|^)\s*?allowed-ips\s*?=\s*?"(.+?)"\s*?(,|$)/i)?.[2]?.split(",").map(H=>H.trim()),_=a.match(/(,|^)\s*?preshared-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],A=n.match(/(,|^)\s*?interface-ip\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],C=n.match(/(,|^)\s*?interface-ipv6\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],x=a.match(/(,|^)\s*?public-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],N={type:"wireguard",name:u,server:c,port:h,ip:A,ipv6:C,"private-key":n.match(/(,|^)\s*?private-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],"public-key":x,mtu:m,keepalive:S,reserved:E,"allowed-ips":w,"preshared-key":_,dns:v,udp:!0,peers:[{server:c,port:h,ip:A,ipv6:C,"public-key":x,"pre-shared-key":_,"allowed-ips":w,reserved:E}]};return Array.isArray(N.dns)&&N.dns.length>0&&(N["remote-dns-resolve"]=!0),N}}}function PF(){return{name:"Surge Direct Parser",test:n=>/^.*=\s*direct/.test(n.split(",")[0]),parse:n=>Gn().parse(n)}}function IF(){return{name:"Surge SSH Parser",test:n=>/^.*=\s*ssh/.test(n.split(",")[0]),parse:n=>Gn().parse(n)}}function $F(){return{name:"Surge SS Parser",test:n=>/^.*=\s*ss/.test(n.split(",")[0]),parse:n=>Gn().parse(n)}}function kF(){return{name:"Surge VMess Parser",test:n=>/^.*=\s*vmess/.test(n.split(",")[0])&&n.indexOf("username")!==-1,parse:n=>Gn().parse(n)}}function RF(){return{name:"Surge Trojan Parser",test:n=>/^.*=\s*trojan/.test(n.split(",")[0]),parse:n=>Gn().parse(n)}}function BF(){return{name:"Surge HTTP Parser",test:n=>/^.*=\s*https?/.test(n.split(",")[0]),parse:n=>Gn().parse(n)}}function xF(){return{name:"Surge Socks5 Parser",test:n=>/^.*=\s*socks5(-tls)?/.test(n.split(",")[0]),parse:n=>Gn().parse(n)}}function TF(){return{name:"Surge External Parser",test:n=>/^.*=\s*external/.test(n.split(",")[0]),parse:n=>{let u=/^\s*(.*?)\s*?=\s*?external\s*?,\s*(.*?)\s*$/.exec(n),[a,i,c]=u;n=c;let h=/(,|^)\s*?exec\s*?=\s*"(.*?)"\s*?(,|$)/.exec(n)?.[2];h||(h=/(,|^)\s*?exec\s*?=\s*(.*?)\s*?(,|$)/.exec(n)?.[2]);let m=/(,|^)\s*?local-port\s*?=\s*"(.*?)"\s*?(,|$)/.exec(n)?.[2];m||(m=/(,|^)\s*?local-port\s*?=\s*(.*?)\s*?(,|$)/.exec(n)?.[2]);let S=/(,|^)\s*?args\s*?=\s*("(.*?)"|(.*?))(?=\s*?(,|$))/g,E,v=[];for(;(E=S.exec(n))!==null;)E[3]!=null?v.push(E[3]):E[4]!=null&&v.push(E[4]);let g=/(,|^)\s*?addresses\s*?=\s*("(.*?)"|(.*?))(?=\s*?(,|$))/g,b,w=[];for(;(b=g.exec(n))!==null;){let A;b[3]!=null?A=b[3]:b[4]!=null&&(A=b[4]),A!=null&&(A=`${A}`.trim().replace(/^\[/,"").replace(/\]$/,"")),jF(A)&&w.push(A)}return{type:"external",name:i,exec:h,"local-port":m,args:v,addresses:w}}}}function OF(){return{name:"Surge Snell Parser",test:n=>/^.*=\s*snell/.test(n.split(",")[0]),parse:n=>Gn().parse(n)}}function NF(){return{name:"Surge Tuic Parser",test:n=>/^.*=\s*tuic(-v5)?/.test(n.split(",")[0]),parse:n=>{let{port_hopping:u,line:a}=tv(n),i=Gn().parse(a);return i.ports=u,i}}}function HF(){return{name:"Surge WireGuard Parser",test:n=>/^.*=\s*wireguard/.test(n.split(",")[0]),parse:n=>Gn().parse(n)}}function LF(){return{name:"Surge Hysteria2 Parser",test:n=>/^.*=\s*hysteria2/.test(n.split(",")[0]),parse:n=>{let{port_hopping:u,line:a}=tv(n),i=Gn().parse(a);return i.ports=u,i}}}function jF(e){return Un(e)||wn(e)}var nv=[eF(),tF(),rF(),nF(),iF(),rv(),oF(),cF(),uF(),aF(),lF(),sF(),fF(),PF(),IF(),$F(),kF(),RF(),BF(),OF(),NF(),HF(),LF(),xF(),TF(),bF(),AF(),EF(),SF(),yF(),_F(),DF(),FF(),CF(),hF(),pF(),dF(),gF(),vF(),mF(),wF()];var uv=hi(rp());function MF(e){for(let t of Tg)try{if(t.test(e))return Gt.info(`Pre-processor [${t.name}] activated`),t.parse(e)}catch(r){Gt.error(`Parser [${t.name}] failed
 Reason: ${r}`)}return e}function qF(e){e=MF(e);let t=e.split(`
`),r=[],n;for(let u of t){if(u=u.trim(),u.length===0)continue;let a=!1;if(n){let[i,c]=iv(n,u);c||(r.push(av(i)),a=!0)}if(!a)for(let i of nv){let[c,h]=iv(i,u);if(!h){r.push(av(c)),n=i,a=!0,Gt.info(`${i.name} is activated`);break}}a||Gt.error(`Failed to parse line: ${u}`)}return r.filter(u=>(["vless","vmess"].includes(u.type)&&(Fc(u.uuid)||Gt.error(`UUID may be invalid: ${u.name} ${u.uuid}`)),!0))}function UF(e,t,r,n={}){let u=qc[t];if(!u)throw new Error(`Target platform: ${t} is not supported!`);let a=/Surge|SurgeMac|Shadowrocket/i.test(t);if(e=e.filter(i=>i.supported&&i.supported[t]===!1?!1:(["vless","vmess"].includes(i.type)&&(Fc(i.uuid)||Gt.error(`UUID may be invalid: ${i.name} ${i.uuid}`)),!0)),e=e.map(i=>(i._resolved=i.resolved,$i(i.name)||(i.name=`${i.type} ${i.server}:${i.port}`),i["disable-sni"]&&(a?i.sni="off":["tuic"].includes(i.type)||(Gt.error(`Target platform ${t} does not support sni off. Proxy's fields (sni, tls-fingerprint and skip-cert-verify) will be modified.`),i.sni="",i["skip-cert-verify"]=!0,delete i["tls-fingerprint"])),i.ports&&(i.ports=String(i.ports),["ClashMeta"].includes(t)||(i.ports=i.ports.replace(/\//g,",")),i.port||(i.port=xu(i.ports))),i)),Gt.log(`Producing proxies for target: ${t}`),typeof u.type>"u"||u.type==="SINGLE"){let i=e.map(c=>{try{return u.produce(c,r,n)}catch(h){return Gt.error(`Cannot produce proxy: ${JSON.stringify(c,null,2)}
Reason: ${h}`),""}}).filter(c=>c.length>0);return i=r==="internal"?i:i.join(`
`),t.startsWith("Surge")&&e.length>0&&e.every(c=>c.type==="wireguard")&&(i=`#!name=${e[0]?._subName}
#!desc=${e[0]?._desc??""}
#!category=${e[0]?._category??""}
${i}`),i}else if(u.type==="ALL")return u.produce(e,r,n)}var Yu={parse:qF,produce:UF,ipAddress:N0,getRandomPort:xu,isIPv4:Un,isIPv6:wn,isIP:ip,isValidUUID:Fc,Buffer:Wc.Buffer,Base64:Wt,JSON5:uv.default};function iv(e,t){if(!VF(e,t))return[null,new Error("Parser mismatch")];try{return[e.parse(t),null]}catch(r){return[null,r]}}function VF(e,t){try{return e.test(t)}catch{return!1}}function sv(e){if(typeof e=="string"||typeof e=="number"){if(e=String(e).trim(),e==="")return"/";if(!e.startsWith("/"))return"/"+e}return e}function av(e){typeof e.cipher=="string"&&(e.cipher=e.cipher.toLowerCase()),typeof e.password=="number"&&(e.password=L0(e.password)),["ss"].includes(e.type)&&e.cipher==="none"&&!e.password&&(e.password=""),e.interface&&(e["interface-name"]=e.interface,delete e.interface),H0(e.port)&&(e.port=parseInt(e.port,10)),e.server&&(e.server=`${e.server}`.trim().replace(/^\[/,"").replace(/\]$/,"")),e.network==="ws"&&(!e["ws-opts"]&&(e["ws-path"]||e["ws-headers"])&&(e["ws-opts"]={},e["ws-path"]&&(e["ws-opts"].path=e["ws-path"]),e["ws-headers"]&&(e["ws-opts"].headers=e["ws-headers"])),delete e["ws-path"],delete e["ws-headers"]);let t=e[`${e.network}-opts`]?.path;if(Array.isArray(t)?e[`${e.network}-opts`].path=t.map(n=>sv(n)):t!=null&&(e[`${e.network}-opts`].path=sv(t)),e.type==="trojan"&&e.network==="tcp"&&delete e.network,["vless"].includes(e.type)&&(e.network||(e.network="tcp")),["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(e.type)&&(e.tls=!0),e.network){let n=e[`${e.network}-opts`]?.headers?.Host,u=e[`${e.network}-opts`]?.headers?.host;e.network==="h2"?!u&&n&&(e[`${e.network}-opts`].headers.host=n,delete e[`${e.network}-opts`].headers.Host):u&&!n&&(e[`${e.network}-opts`].headers.Host=u,delete e[`${e.network}-opts`].headers.host)}if(e.network==="h2"){let n=e["h2-opts"]?.headers?.host,u=e["h2-opts"]?.path;n&&!Array.isArray(n)&&(e["h2-opts"].headers.host=[n]),Array.isArray(u)&&(e["h2-opts"].path=u[0])}if(!e.tls&&["ws","http"].includes(e.network)&&!e[`${e.network}-opts`]?.headers?.Host&&!ip(e.server)&&(e[`${e.network}-opts`]=e[`${e.network}-opts`]||{},e[`${e.network}-opts`].headers=e[`${e.network}-opts`].headers||{},e[`${e.network}-opts`].headers.Host=["vmess","vless"].includes(e.type)&&e.network==="http"?[e.server]:e.server),["vmess","vless"].includes(e.type)&&e.network==="http"){let n=e[`${e.network}-opts`]?.path,u=e[`${e.network}-opts`]?.headers?.Host;u&&!Array.isArray(u)&&(e[`${e.network}-opts`].headers.Host=[u]),n&&!Array.isArray(n)&&(e[`${e.network}-opts`].path=[n])}if(e.tls&&!e.sni&&(ip(e.server)||(e.sni=e.server),!e.sni&&e.network)){let n=e[`${e.network}-opts`]?.headers?.Host;n=Array.isArray(n)?n[0]:n,n&&(e.sni=n)}if(e.ports?e.ports=String(e.ports).replace(/\//g,","):delete e.ports,["hysteria2"].includes(e.type)&&e.obfs&&!["salamander"].includes(e.obfs)&&!e["obfs-password"]&&(e["obfs-password"]=e.obfs,e.obfs="salamander"),["hysteria2"].includes(e.type)&&!e["obfs-password"]&&e.obfs_password&&(e["obfs-password"]=e.obfs_password,delete e.obfs_password),["vless"].includes(e.type)&&(e["reality-opts"]&&Object.keys(e["reality-opts"]).length===0&&delete e["reality-opts"],e["grpc-opts"]&&Object.keys(e["grpc-opts"]).length===0&&delete e["grpc-opts"],!e["reality-opts"]&&!e.flow&&delete e.flow,["http"].includes(e.network)&&(e[`${e.network}-opts`]?.path||(e[`${e.network}-opts`]||(e[`${e.network}-opts`]={}),e[`${e.network}-opts`].path=["/"]))),typeof e.name!="string")if(/^\d+$/.test(e.name))e.name=`${e.name}`;else try{e.name?.data?e.name=Wc.Buffer.from(e.name.data).toString("utf8"):e.name=Wc.Buffer.from(e.name).toString("utf8")}catch(n){Gt.error(`proxy.name decode failed
Reason: ${n}`),e.name=`${e.type} ${e.server}:${e.port}`}["ws","http","h2"].includes(e.network)&&(["ws","h2"].includes(e.network)&&!e[`${e.network}-opts`]?.path?(e[`${e.network}-opts`]=e[`${e.network}-opts`]||{},e[`${e.network}-opts`].path="/"):e.network==="http"&&(!Array.isArray(e[`${e.network}-opts`]?.path)||e[`${e.network}-opts`]?.path.every(n=>!n))&&(e[`${e.network}-opts`]=e[`${e.network}-opts`]||{},e[`${e.network}-opts`].path=["/"])),["","off"].includes(e.sni)&&(e["disable-sni"]=!0);let r=e.ca_str;e["ca-str"]?r=e["ca-str"]:r&&(delete e.ca_str,e["ca-str"]=r);try{Gt.env.isNode&&!r&&e._ca&&(r=Gt.node.fs.readFileSync(e._ca,{encoding:"utf8"}))}catch(n){Gt.error(`Read ca file failed
Reason: ${n}`)}return!e["tls-fingerprint"]&&r&&(e["tls-fingerprint"]=D0.generateFingerprint(r)),["ss"].includes(e.type)&&we(e,"shadow-tls-password")&&(e.plugin="shadow-tls",e["plugin-opts"]={host:e["shadow-tls-sni"],password:e["shadow-tls-password"],version:e["shadow-tls-version"]},delete e["shadow-tls-sni"],delete e["shadow-tls-password"],delete e["shadow-tls-version"]),e}function ip(e){return Un(e)||wn(e)}async function ov(e,t){let r=await fetch(e,{method:"GET",headers:{"User-Agent":t,Accept:"text/plain,application/yaml,application/json,*/*"}});if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);let n=Object.fromEntries(r.headers.entries()),u=KF(r.headers);u&&(n["content-disposition"]=u);let a=await r.text();return{status:r.status,headers:n,data:sp(a)}}function KF(e){let t=e.get("content-disposition");if(!t)return null;let r=t.match(/filename\*?=["']?(?:UTF-8'')?([^;"']+)["']?/i)||t.match(/filename=["']?([^;"']+)["']?/i);if(!r)return null;let n=r[1].trim();if(!/[^\x00-\x7F]/.test(n))return t;let a="download.yaml",i=encodeURIComponent(n);return`attachment; filename="${a}"; filename*=UTF-8''${i}`}function sp(e){try{return Js(e,{maxAliasCount:-1,merge:!0})}catch{return e}}async function ap(e,t){let r={data:{},headers:[]};if(!e||e.length===0)return r.status=400,r.data="\u8F93\u5165\u8282\u70B9\u6570\u7EC4\u4E0D\u80FD\u4E3A\u7A7A",r;if(!qc[t])return r.status=400,r.data=`\u76EE\u6807\u5E73\u53F0\uFF1A\u4E0D\u652F\u6301 ${t}\uFF01`,r;try{let n=await Promise.all(e.map(u=>zF(u,t)));GF(r,n)}catch(n){return r.status=500,r.data=`\u5904\u7406\u8282\u70B9\u5931\u8D25\uFF1A${n.message}`,r}return r.status=200,r}async function zF(e,t){let r=null,n=[],u={};if(/^https?:\/\//i.test(e)){let i=await ov(e,"clash.mate");u=i?.headers??{},r=i?.data??i}r.proxies?r=Yu.produce(r.proxies,t):(Xf(r)?n=Yu.parse(r):n=r.split(`
`).map(i=>Yu.parse(i)),r=Yu.produce(n,t));try{r=sp(r),typeof r=="string"&&(r=JSON.parse(r))}catch{r=r}return{data:r,headers:u}}function GF(e,t){let r=[],n=[];if(t.forEach(({data:u,headers:a})=>{Xf(u)&&r.push(u);for(let i of Object.keys(u))if(Array.isArray(u[i])){e.data[i]=e.data[i]||[];for(let c of u[i]){if(c&&typeof c=="object"&&"name"in c){let h=c.name,m=h,S=1;for(;e.data[i].some(E=>E.name===m);)m=`${h}_${S++}`;c.name=m}e.data[i].push(c)}}else e.data[i]=u[i];a&&Object.keys(a).length&&n.push(a)}),n.length>0){let u=Math.floor(Math.random()*n.length);e.headers=n[u]}if(r.length>0){let u="";for(let a of r){let i=xd(a);u+=i+`
`}e.data=Bd(u)}}var $8={async fetch(e){try{let t=new URL(e.url),r=t.searchParams.get("target"),n=t.searchParams.get("url"),u=n?n.split(/[,|]/):[];if(/meta|clash.meta|clash|clashverge|mihomo/i.test(r)&&(r="mihomo"),/singbox|sing-box|sfa/i.test(r)&&(r="singbox"),!r||u.length===0)return WF();let a=await ap(u,r),i=a.data;return typeof i=="object"&&(i=JSON.stringify(i)),new Response(i,{status:a.status,headers:a.headers})}catch(t){return new Response(`Error: ${t.message}`,{status:500})}}};function WF(){return new Response(JSON.stringify({version:"SubStore v2.20.16",message:"\u8FD9\u662F\u4E00\u4E2A\u57FA\u4E8E cloudflare workers \u7684 sub-store \u8282\u70B9\u8F6C\u6362\u5DE5\u5177\uFF0C\u4EC5\u8F6C\u6362\u8282\u70B9\u7528",usage:{target:"\u8F93\u51FA\u7C7B\u578B\uFF1A{singbox|mihomo|v2ray|base64|qx|QX|QuantumultX|surge|Surge|SurgeMac|Loon|Clash|meta|clashmeta|clash.meta|Clash.Meta|ClashMeta|Mihomo|uri|URI|json|JSON|stash|Stash|shadowrocket|Shadowrocket|ShadowRocket|surfboard|Surfboard|egern|Egern}",url:"\u8F93\u5165\u7F16\u7801\u540E\u7684\u8BA2\u9605\u94FE\u63A5\uFF0C\u591A\u4E2A\u8BA2\u9605\u53EF\u7528\u82F1\u6587\u9017\u53F7(,)\u5206\u9694",example:"/?target=v2ray&url=UrlEncode(\u7F16\u7801\u540E\u7684\u8BA2\u9605)",examples:["/?target=v2ray&url=https%3A%2F%2Fexample.com%2Fsubscription","/?target=clash&url=https%3A%2F%2Fexample.com%2Fsub1,https%3A%2F%2Fexample.com%2Fsub1"]}},null,4),{status:200,headers:{"Content-Type":"application/json"}})}export{$8 as default};
/*! Bundled license information:

jsrsasign/lib/jsrsasign.js:
  (*! CryptoJS v3.1.2 core-fix.js
   * code.google.com/p/crypto-js
   * (c) 2009-2013 by Jeff Mott. All rights reserved.
   * code.google.com/p/crypto-js/wiki/License
   * THIS IS FIX of 'core.js' to fix Hmac issue.
   * https://code.google.com/p/crypto-js/issues/detail?id=84
   * https://crypto-js.googlecode.com/svn-history/r667/branches/3.x/src/core.js
   *)
  (*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
   *)
  (*! (c) Tom Wu, Kenji Urushima | http://www-cs-students.stanford.edu/~tjw/jsbn/
   *)
  (*! (c) Stefan Thomas | https://github.com/bitcoinjs/bitcoinjs-lib
   *)
  (*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval
   *)

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
